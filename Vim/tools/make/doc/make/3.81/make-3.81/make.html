<html lang="en">
<head>
<title>GNU `make'</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU `make'">
<meta name="generator" content="makeinfo 4.7">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This file documents the GNU `make' utility, which determines
automatically which pieces of a large program need to be recompiled,
and issues the commands to recompile them.

This is Edition 0.70, last updated 1 April 2006,
of `The GNU Make Manual', for GNU `make' version 3.81.

Copyright (C) 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995,
1996, 1997, 1998, 1999, 2000, 2002, 2003, 2004, 2005, 2006
Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with the Front-Cover Texts
     being "A GNU Manual," and with the Back-Cover Texts as in (a)
     below.  A copy of the license is included in the section entitled
     "GNU Free Documentation License."

     (a) The FSF's Back-Cover Text is: "You have freedom to copy and
     modify this GNU Manual, like GNU software.  Copies published by
     the Free Software Foundation raise funds for GNU development."
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc { font-variant:small-caps }
  span.roman { font-family: serif; font-weight: normal; } 
--></style>
</head>
<body>
<h1 class="settitle">GNU `make'</h1>
   <div class="shortcontents">
<h2>Short Contents</h2>
<ul>
<li><a href="#toc_Top">GNU <code>make</code></a></li>
<li><a href="#toc_Overview">1 Overview of <code>make</code></a></li>
<li><a href="#toc_Introduction">2 An Introduction to Makefiles</a></li>
<li><a href="#toc_Makefiles">3 Writing Makefiles</a></li>
<li><a href="#toc_Rules">4 Writing Rules</a></li>
<li><a href="#toc_Commands">5 Writing the Commands in Rules</a></li>
<li><a href="#toc_Using-Variables">6 How to Use Variables</a></li>
<li><a href="#toc_Conditionals">7 Conditional Parts of Makefiles</a></li>
<li><a href="#toc_Functions">8 Functions for Transforming Text</a></li>
<li><a href="#toc_Running">9 How to Run <code>make</code></a></li>
<li><a href="#toc_Implicit-Rules">10 Using Implicit Rules</a></li>
<li><a href="#toc_Archives">11 Using <code>make</code> to Update Archive Files</a></li>
<li><a href="#toc_Features">12 Features of GNU <code>make</code></a></li>
<li><a href="#toc_Missing">13 Incompatibilities and Missing Features</a></li>
<li><a href="#toc_Makefile-Conventions">14 Makefile Conventions</a></li>
<li><a href="#toc_Quick-Reference">Appendix A Quick Reference</a></li>
<li><a href="#toc_Error-Messages">Appendix B Errors Generated by Make</a></li>
<li><a href="#toc_Complex-Makefile">Appendix C Complex Makefile Example</a></li>
<li><a href="#toc_GNU-Free-Documentation-License">Appendix D GNU Free Documentation License</a></li>
<li><a href="#toc_Concept-Index">Index of Concepts</a></li>
<li><a href="#toc_Name-Index">Index of Functions, Variables, &amp; Directives</a></li>
</ul>
</div>



   <div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">GNU <code>make</code></a>
<li><a name="toc_Overview" href="#Overview">1 Overview of <code>make</code></a>
<ul>
<li><a href="#Reading">1.1 How to Read This Manual</a>
<li><a href="#Bugs">1.2 Problems and Bugs</a>
</li></ul>
<li><a name="toc_Introduction" href="#Introduction">2 An Introduction to Makefiles</a>
<ul>
<li><a href="#Rule-Introduction">2.1 What a Rule Looks Like</a>
<li><a href="#Simple-Makefile">2.2 A Simple Makefile</a>
<li><a href="#How-Make-Works">2.3 How <code>make</code> Processes a Makefile</a>
<li><a href="#Variables-Simplify">2.4 Variables Make Makefiles Simpler</a>
<li><a href="#make-Deduces">2.5 Letting <code>make</code> Deduce the Commands</a>
<li><a href="#Combine-By-Prerequisite">2.6 Another Style of Makefile</a>
<li><a href="#Cleanup">2.7 Rules for Cleaning the Directory</a>
</li></ul>
<li><a name="toc_Makefiles" href="#Makefiles">3 Writing Makefiles</a>
<ul>
<li><a href="#Makefile-Contents">3.1 What Makefiles Contain</a>
<li><a href="#Makefile-Names">3.2 What Name to Give Your Makefile</a>
<li><a href="#Include">3.3 Including Other Makefiles</a>
<li><a href="#MAKEFILES-Variable">3.4 The Variable <code>MAKEFILES</code></a>
<li><a href="#MAKEFILE_005fLIST-Variable">3.5 The Variable <code>MAKEFILE_LIST</code></a>
<li><a href="#Special-Variables">3.6 Other Special Variables</a>
<li><a href="#Remaking-Makefiles">3.7 How Makefiles Are Remade</a>
<li><a href="#Overriding-Makefiles">3.8 Overriding Part of Another Makefile</a>
<li><a href="#Reading-Makefiles">3.9 How <code>make</code> Reads a Makefile</a>
<li><a href="#Secondary-Expansion">3.10 Secondary Expansion</a>
</li></ul>
<li><a name="toc_Rules" href="#Rules">4 Writing Rules</a>
<ul>
<li><a href="#Rule-Example">4.1 Rule Example</a>
<li><a href="#Rule-Syntax">4.2 Rule Syntax</a>
<li><a href="#Prerequisite-Types">4.3 Types of Prerequisites</a>
<li><a href="#Wildcards">4.4 Using Wildcard Characters in File Names</a>
<ul>
<li><a href="#Wildcard-Examples">4.4.1 Wildcard Examples</a>
<li><a href="#Wildcard-Pitfall">4.4.2 Pitfalls of Using Wildcards</a>
<li><a href="#Wildcard-Function">4.4.3 The Function <code>wildcard</code></a>
</li></ul>
<li><a href="#Directory-Search">4.5 Searching Directories for Prerequisites</a>
<ul>
<li><a href="#General-Search">4.5.1 <code>VPATH</code>: Search Path for All Prerequisites</a>
<li><a href="#Selective-Search">4.5.2 The <code>vpath</code> Directive</a>
<li><a href="#Search-Algorithm">4.5.3 How Directory Searches are Performed</a>
<li><a href="#Commands_002fSearch">4.5.4 Writing Shell Commands with Directory Search</a>
<li><a href="#Implicit_002fSearch">4.5.5 Directory Search and Implicit Rules</a>
<li><a href="#Libraries_002fSearch">4.5.6 Directory Search for Link Libraries</a>
</li></ul>
<li><a href="#Phony-Targets">4.6 Phony Targets</a>
<li><a href="#Force-Targets">4.7 Rules without Commands or Prerequisites</a>
<li><a href="#Empty-Targets">4.8 Empty Target Files to Record Events</a>
<li><a href="#Special-Targets">4.9 Special Built-in Target Names</a>
<li><a href="#Multiple-Targets">4.10 Multiple Targets in a Rule</a>
<li><a href="#Multiple-Rules">4.11 Multiple Rules for One Target</a>
<li><a href="#Static-Pattern">4.12 Static Pattern Rules</a>
<ul>
<li><a href="#Static-Usage">4.12.1 Syntax of Static Pattern Rules</a>
<li><a href="#Static-versus-Implicit">4.12.2 Static Pattern Rules versus Implicit Rules</a>
</li></ul>
<li><a href="#Double_002dColon">4.13 Double-Colon Rules</a>
<li><a href="#Automatic-Prerequisites">4.14 Generating Prerequisites Automatically</a>
</li></ul>
<li><a name="toc_Commands" href="#Commands">5 Writing the Commands in Rules</a>
<ul>
<li><a href="#Command-Syntax">5.1 Command Syntax</a>
<ul>
<li><a href="#Splitting-Lines">5.1.1 Splitting Command Lines</a>
<li><a href="#Variables-in-Commands">5.1.2 Using Variables in Commands</a>
</li></ul>
<li><a href="#Echoing">5.2 Command Echoing</a>
<li><a href="#Execution">5.3 Command Execution</a>
<ul>
<li><a href="#Choosing-the-Shell">5.3.1 Choosing the Shell</a>
</li></ul>
<li><a href="#Parallel">5.4 Parallel Execution</a>
<li><a href="#Errors">5.5 Errors in Commands</a>
<li><a href="#Interrupts">5.6 Interrupting or Killing <code>make</code></a>
<li><a href="#Recursion">5.7 Recursive Use of <code>make</code></a>
<ul>
<li><a href="#MAKE-Variable">5.7.1 How the <code>MAKE</code> Variable Works</a>
<li><a href="#Variables_002fRecursion">5.7.2 Communicating Variables to a Sub-<code>make</code></a>
<li><a href="#Options_002fRecursion">5.7.3 Communicating Options to a Sub-<code>make</code></a>
<li><a href="#_002dw-Option">5.7.4 The <span class="samp">--print-directory</span> Option</a>
</li></ul>
<li><a href="#Sequences">5.8 Defining Canned Command Sequences</a>
<li><a href="#Empty-Commands">5.9 Using Empty Commands</a>
</li></ul>
<li><a name="toc_Using-Variables" href="#Using-Variables">6 How to Use Variables</a>
<ul>
<li><a href="#Reference">6.1 Basics of Variable References</a>
<li><a href="#Flavors">6.2 The Two Flavors of Variables</a>
<li><a href="#Advanced">6.3 Advanced Features for Reference to Variables</a>
<ul>
<li><a href="#Substitution-Refs">6.3.1 Substitution References</a>
<li><a href="#Computed-Names">6.3.2 Computed Variable Names</a>
</li></ul>
<li><a href="#Values">6.4 How Variables Get Their Values</a>
<li><a href="#Setting">6.5 Setting Variables</a>
<li><a href="#Appending">6.6 Appending More Text to Variables</a>
<li><a href="#Override-Directive">6.7 The <code>override</code> Directive</a>
<li><a href="#Defining">6.8 Defining Variables Verbatim</a>
<li><a href="#Environment">6.9 Variables from the Environment</a>
<li><a href="#Target_002dspecific">6.10 Target-specific Variable Values</a>
<li><a href="#Pattern_002dspecific">6.11 Pattern-specific Variable Values</a>
</li></ul>
<li><a name="toc_Conditionals" href="#Conditionals">7 Conditional Parts of Makefiles</a>
<ul>
<li><a href="#Conditional-Example">7.1 Example of a Conditional</a>
<li><a href="#Conditional-Syntax">7.2 Syntax of Conditionals</a>
<li><a href="#Testing-Flags">7.3 Conditionals that Test Flags</a>
</li></ul>
<li><a name="toc_Functions" href="#Functions">8 Functions for Transforming Text</a>
<ul>
<li><a href="#Syntax-of-Functions">8.1 Function Call Syntax</a>
<li><a href="#Text-Functions">8.2 Functions for String Substitution and Analysis</a>
<li><a href="#File-Name-Functions">8.3 Functions for File Names</a>
<li><a href="#Conditional-Functions">8.4 Functions for Conditionals</a>
<li><a href="#Foreach-Function">8.5 The <code>foreach</code> Function</a>
<li><a href="#Call-Function">8.6 The <code>call</code> Function</a>
<li><a href="#Value-Function">8.7 The <code>value</code> Function</a>
<li><a href="#Eval-Function">8.8 The <code>eval</code> Function</a>
<li><a href="#Origin-Function">8.9 The <code>origin</code> Function</a>
<li><a href="#Flavor-Function">8.10 The <code>flavor</code> Function</a>
<li><a href="#Shell-Function">8.11 The <code>shell</code> Function</a>
<li><a href="#Make-Control-Functions">8.12 Functions That Control Make</a>
</li></ul>
<li><a name="toc_Running" href="#Running">9 How to Run <code>make</code></a>
<ul>
<li><a href="#Makefile-Arguments">9.1 Arguments to Specify the Makefile</a>
<li><a href="#Goals">9.2 Arguments to Specify the Goals</a>
<li><a href="#Instead-of-Execution">9.3 Instead of Executing the Commands</a>
<li><a href="#Avoiding-Compilation">9.4 Avoiding Recompilation of Some Files</a>
<li><a href="#Overriding">9.5 Overriding Variables</a>
<li><a href="#Testing">9.6 Testing the Compilation of a Program</a>
<li><a href="#Options-Summary">9.7 Summary of Options</a>
</li></ul>
<li><a name="toc_Implicit-Rules" href="#Implicit-Rules">10 Using Implicit Rules</a>
<ul>
<li><a href="#Using-Implicit">10.1 Using Implicit Rules</a>
<li><a href="#Catalogue-of-Rules">10.2 Catalogue of Implicit Rules</a>
<li><a href="#Implicit-Variables">10.3 Variables Used by Implicit Rules</a>
<li><a href="#Chained-Rules">10.4 Chains of Implicit Rules</a>
<li><a href="#Pattern-Rules">10.5 Defining and Redefining Pattern Rules</a>
<ul>
<li><a href="#Pattern-Intro">10.5.1 Introduction to Pattern Rules</a>
<li><a href="#Pattern-Examples">10.5.2 Pattern Rule Examples</a>
<li><a href="#Automatic-Variables">10.5.3 Automatic Variables</a>
<li><a href="#Pattern-Match">10.5.4 How Patterns Match</a>
<li><a href="#Match_002dAnything-Rules">10.5.5 Match-Anything Pattern Rules</a>
<li><a href="#Canceling-Rules">10.5.6 Canceling Implicit Rules</a>
</li></ul>
<li><a href="#Last-Resort">10.6 Defining Last-Resort Default Rules</a>
<li><a href="#Suffix-Rules">10.7 Old-Fashioned Suffix Rules</a>
<li><a href="#Implicit-Rule-Search">10.8 Implicit Rule Search Algorithm</a>
</li></ul>
<li><a name="toc_Archives" href="#Archives">11 Using <code>make</code> to Update Archive Files</a>
<ul>
<li><a href="#Archive-Members">11.1 Archive Members as Targets</a>
<li><a href="#Archive-Update">11.2 Implicit Rule for Archive Member Targets</a>
<ul>
<li><a href="#Archive-Symbols">11.2.1 Updating Archive Symbol Directories</a>
</li></ul>
<li><a href="#Archive-Pitfalls">11.3 Dangers When Using Archives</a>
<li><a href="#Archive-Suffix-Rules">11.4 Suffix Rules for Archive Files</a>
</li></ul>
<li><a name="toc_Features" href="#Features">12 Features of GNU <code>make</code></a>
<li><a name="toc_Missing" href="#Missing">13 Incompatibilities and Missing Features</a>
<li><a name="toc_Makefile-Conventions" href="#Makefile-Conventions">14 Makefile Conventions</a>
<ul>
<li><a href="#Makefile-Basics">14.1 General Conventions for Makefiles</a>
<li><a href="#Utilities-in-Makefiles">14.2 Utilities in Makefiles</a>
<li><a href="#Command-Variables">14.3 Variables for Specifying Commands</a>
<li><a href="#Directory-Variables">14.4 Variables for Installation Directories</a>
<li><a href="#Standard-Targets">14.5 Standard Targets for Users</a>
<li><a href="#Install-Command-Categories">14.6 Install Command Categories</a>
</li></ul>
<li><a name="toc_Quick-Reference" href="#Quick-Reference">Appendix A Quick Reference</a>
<li><a name="toc_Error-Messages" href="#Error-Messages">Appendix B Errors Generated by Make</a>
<li><a name="toc_Complex-Makefile" href="#Complex-Makefile">Appendix C Complex Makefile Example</a>
<li><a name="toc_GNU-Free-Documentation-License" href="#GNU-Free-Documentation-License">Appendix D GNU Free Documentation License</a>
<ul>
<li><a href="#GNU-Free-Documentation-License">D.1 ADDENDUM: How to use this License for your documents</a>
</li></ul>
<li><a name="toc_Concept-Index" href="#Concept-Index">Index of Concepts</a>
<li><a name="toc_Name-Index" href="#Name-Index">Index of Functions, Variables, &amp; Directives</a>
</li></ul>
</div>

<div class="node">
<p><hr>
<a name="Top"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Overview">Overview</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#dir">(dir)</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>
<br>
</div>

<h2 class="unnumbered">GNU <code>make</code></h2>

<p>This file documents the GNU <code>make</code> utility, which determines
automatically which pieces of a large program need to be recompiled,
and issues the commands to recompile them.

   <p>This is Edition 0.70, last updated 1 April 2006,
of <cite>The GNU Make Manual</cite>, for GNU <code>make</code> version 3.81.

   <p>Copyright &copy; 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995,
1996, 1997, 1998, 1999, 2000, 2002, 2003, 2004, 2005, 2006
Free Software Foundation, Inc.

   <blockquote>
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being &ldquo;A GNU Manual,&rdquo;
and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled &ldquo;GNU Free Documentation
License.&rdquo;

        <p>(a) The FSF's Back-Cover Text is: &ldquo;You have freedom to copy and modify
this GNU Manual, like GNU software.  Copies published by the Free
Software Foundation raise funds for GNU development.&rdquo;
</blockquote>

<ul class="menu">
<li><a accesskey="1" href="#Overview">Overview</a>:                     Overview of <code>make</code>. 
<li><a accesskey="2" href="#Introduction">Introduction</a>:                 An introduction to <code>make</code>. 
<li><a accesskey="3" href="#Makefiles">Makefiles</a>:                    Makefiles tell <code>make</code> what to do. 
<li><a accesskey="4" href="#Rules">Rules</a>:                        Rules describe when a file must be remade. 
<li><a accesskey="5" href="#Commands">Commands</a>:                     Commands say how to remake a file. 
<li><a accesskey="6" href="#Using-Variables">Using Variables</a>:              You can use variables to avoid repetition. 
<li><a accesskey="7" href="#Conditionals">Conditionals</a>:                 Use or ignore parts of the makefile based
                                  on the values of variables. 
<li><a accesskey="8" href="#Functions">Functions</a>:                    Many powerful ways to manipulate text. 
<li><a accesskey="9" href="#Running">Invoking make</a>:        How to invoke <code>make</code> on the command line. 
<li><a href="#Implicit-Rules">Implicit Rules</a>:               Use implicit rules to treat many files alike,
                                  based on their file names. 
<li><a href="#Archives">Archives</a>:                     How <code>make</code> can update library archives. 
<li><a href="#Features">Features</a>:                     Features GNU <code>make</code> has over other <code>make</code>s. 
<li><a href="#Missing">Missing</a>:                      What GNU <code>make</code> lacks from other <code>make</code>s. 
<li><a href="#Makefile-Conventions">Makefile Conventions</a>:         Conventions for writing makefiles for
                                  GNU programs. 
<li><a href="#Quick-Reference">Quick Reference</a>:              A quick reference for experienced users. 
<li><a href="#Error-Messages">Error Messages</a>:               A list of common errors generated by <code>make</code>. 
<li><a href="#Complex-Makefile">Complex Makefile</a>:             A real example of a straightforward,
                                  but nontrivial, makefile.

<li><a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>:   License for copying this manual
<li><a href="#Concept-Index">Concept Index</a>:                Index of Concepts
<li><a href="#Name-Index">Name Index</a>:                   Index of Functions, Variables, &amp; Directives

</li></ul>
<p>--- The Detailed Node Listing ---

<p>Overview of <code>make</code>

</p>
<ul class="menu">
<li><a href="#Preparing">Preparing</a>:                    Preparing and Running Make
<li><a href="#Reading">Reading</a>:                      On Reading this Text
<li><a href="#Bugs">Bugs</a>:                         Problems and Bugs

</li></ul>
<p>An Introduction to Makefiles

</p>
<ul class="menu">
<li><a href="#Rule-Introduction">Rule Introduction</a>:            What a rule looks like. 
<li><a href="#Simple-Makefile">Simple Makefile</a>:              A Simple Makefile
<li><a href="#How-Make-Works">How Make Works</a>:               How <code>make</code> Processes This Makefile
<li><a href="#Variables-Simplify">Variables Simplify</a>:           Variables Make Makefiles Simpler
<li><a href="#make-Deduces">make Deduces</a>:                 Letting <code>make</code> Deduce the Commands
<li><a href="#Combine-By-Prerequisite">Combine By Prerequisite</a>:      Another Style of Makefile
<li><a href="#Cleanup">Cleanup</a>:                      Rules for Cleaning the Directory

</li></ul>
<p>Writing Makefiles

</p>
<ul class="menu">
<li><a href="#Makefile-Contents">Makefile Contents</a>:            What makefiles contain. 
<li><a href="#Makefile-Names">Makefile Names</a>:               How to name your makefile. 
<li><a href="#Include">Include</a>:                      How one makefile can use another makefile. 
<li><a href="#MAKEFILES-Variable">MAKEFILES Variable</a>:           The environment can specify extra makefiles. 
<li><a href="#MAKEFILE_005fLIST-Variable">MAKEFILE_LIST Variable</a>:       Discover which makefiles have been read. 
<li><a href="#Special-Variables">Special Variables</a>:            Other special variables. 
<li><a href="#Remaking-Makefiles">Remaking Makefiles</a>:           How makefiles get remade. 
<li><a href="#Overriding-Makefiles">Overriding Makefiles</a>:         How to override part of one makefile
                                  with another makefile. 
<li><a href="#Reading-Makefiles">Reading Makefiles</a>:            How makefiles are parsed. 
<li><a href="#Secondary-Expansion">Secondary Expansion</a>:          How and when secondary expansion is performed.

</li></ul>
<p>Writing Rules

</p>
<ul class="menu">
<li><a href="#Rule-Example">Rule Example</a>:                 An example explained. 
<li><a href="#Rule-Syntax">Rule Syntax</a>:                  General syntax explained. 
<li><a href="#Prerequisite-Types">Prerequisite Types</a>:           There are two types of prerequisites. 
<li><a href="#Wildcards">Wildcards</a>:                    Using wildcard characters such as `*'. 
<li><a href="#Directory-Search">Directory Search</a>:             Searching other directories for source files. 
<li><a href="#Phony-Targets">Phony Targets</a>:                Using a target that is not a real file's name. 
<li><a href="#Force-Targets">Force Targets</a>:                You can use a target without commands
                                  or prerequisites to mark other targets
                                  as phony. 
<li><a href="#Empty-Targets">Empty Targets</a>:                When only the date matters and the
                                  files are empty. 
<li><a href="#Special-Targets">Special Targets</a>:              Targets with special built-in meanings. 
<li><a href="#Multiple-Targets">Multiple Targets</a>:             When to make use of several targets in a rule. 
<li><a href="#Multiple-Rules">Multiple Rules</a>:               How to use several rules with the same target. 
<li><a href="#Static-Pattern">Static Pattern</a>:               Static pattern rules apply to multiple targets
                                  and can vary the prerequisites according to
                                  the target name. 
<li><a href="#Double_002dColon">Double-Colon</a>:                 How to use a special kind of rule to allow
                                  several independent rules for one target. 
<li><a href="#Automatic-Prerequisites">Automatic Prerequisites</a>:      How to automatically generate rules giving
                                  prerequisites from source files themselves.

</li></ul>
<p>Using Wildcard Characters in File Names

</p>
<ul class="menu">
<li><a href="#Wildcard-Examples">Wildcard Examples</a>:            Several examples
<li><a href="#Wildcard-Pitfall">Wildcard Pitfall</a>:             Problems to avoid. 
<li><a href="#Wildcard-Function">Wildcard Function</a>:            How to cause wildcard expansion where
                                  it does not normally take place.

</li></ul>
<p>Searching Directories for Prerequisites

</p>
<ul class="menu">
<li><a href="#General-Search">General Search</a>:               Specifying a search path that applies
                                  to every prerequisite. 
<li><a href="#Selective-Search">Selective Search</a>:             Specifying a search path
                                  for a specified class of names. 
<li><a href="#Search-Algorithm">Search Algorithm</a>:             When and how search paths are applied. 
<li><a href="#Commands_002fSearch">Commands/Search</a>:              How to write shell commands that work together
                                  with search paths. 
<li><a href="#Implicit_002fSearch">Implicit/Search</a>:              How search paths affect implicit rules. 
<li><a href="#Libraries_002fSearch">Libraries/Search</a>:             Directory search for link libraries.

</li></ul>
<p>Static Pattern Rules

</p>
<ul class="menu">
<li><a href="#Static-Usage">Static Usage</a>:                 The syntax of static pattern rules. 
<li><a href="#Static-versus-Implicit">Static versus Implicit</a>:       When are they better than implicit rules?

</li></ul>
<p>Writing the Commands in Rules

</p>
<ul class="menu">
<li><a href="#Command-Syntax">Command Syntax</a>:               Command syntax features and pitfalls. 
<li><a href="#Echoing">Echoing</a>:                      How to control when commands are echoed. 
<li><a href="#Execution">Execution</a>:                    How commands are executed. 
<li><a href="#Parallel">Parallel</a>:                     How commands can be executed in parallel. 
<li><a href="#Errors">Errors</a>:                       What happens after a command execution error. 
<li><a href="#Interrupts">Interrupts</a>:                   What happens when a command is interrupted. 
<li><a href="#Recursion">Recursion</a>:                    Invoking <code>make</code> from makefiles. 
<li><a href="#Sequences">Sequences</a>:                    Defining canned sequences of commands. 
<li><a href="#Empty-Commands">Empty Commands</a>:               Defining useful, do-nothing commands.

</li></ul>
<p>Command Syntax

</p>
<ul class="menu">
<li><a href="#Splitting-Lines">Splitting Lines</a>:              Breaking long command lines for readability. 
<li><a href="#Variables-in-Commands">Variables in Commands</a>:        Using <code>make</code> variables in commands.

</li></ul>
<p>Command Execution

</p>
<ul class="menu">
<li><a href="#Choosing-the-Shell">Choosing the Shell</a>:           How <code>make</code> chooses the shell used
                                  to run commands.

</li></ul>
<p>Recursive Use of <code>make</code>

</p>
<ul class="menu">
<li><a href="#MAKE-Variable">MAKE Variable</a>:                The special effects of using <span class="samp">$(MAKE)</span>. 
<li><a href="#Variables_002fRecursion">Variables/Recursion</a>:          How to communicate variables to a sub-<code>make</code>. 
<li><a href="#Options_002fRecursion">Options/Recursion</a>:            How to communicate options to a sub-<code>make</code>. 
<li><a href="#_002dw-Option">-w Option</a>:                    How the <span class="samp">-w</span> or <span class="samp">--print-directory</span> option
                                  helps debug use of recursive <code>make</code> commands.

</li></ul>
<p>How to Use Variables

</p>
<ul class="menu">
<li><a href="#Reference">Reference</a>:                    How to use the value of a variable. 
<li><a href="#Flavors">Flavors</a>:                      Variables come in two flavors. 
<li><a href="#Advanced">Advanced</a>:                     Advanced features for referencing a variable. 
<li><a href="#Values">Values</a>:                       All the ways variables get their values. 
<li><a href="#Setting">Setting</a>:                      How to set a variable in the makefile. 
<li><a href="#Appending">Appending</a>:                    How to append more text to the old value
                                  of a variable. 
<li><a href="#Override-Directive">Override Directive</a>:           How to set a variable in the makefile even if
                                  the user has set it with a command argument. 
<li><a href="#Defining">Defining</a>:                     An alternate way to set a variable
                                  to a verbatim string. 
<li><a href="#Environment">Environment</a>:                  Variable values can come from the environment. 
<li><a href="#Target_002dspecific">Target-specific</a>:              Variable values can be defined on a per-target
                                  basis. 
<li><a href="#Pattern_002dspecific">Pattern-specific</a>:             Target-specific variable values can be applied
                                  to a group of targets that match a pattern.

</li></ul>
<p>Advanced Features for Reference to Variables

</p>
<ul class="menu">
<li><a href="#Substitution-Refs">Substitution Refs</a>:            Referencing a variable with
                                  substitutions on the value. 
<li><a href="#Computed-Names">Computed Names</a>:               Computing the name of the variable to refer to.

</li></ul>
<p>Conditional Parts of Makefiles

</p>
<ul class="menu">
<li><a href="#Conditional-Example">Conditional Example</a>:          Example of a conditional
<li><a href="#Conditional-Syntax">Conditional Syntax</a>:           The syntax of conditionals. 
<li><a href="#Testing-Flags">Testing Flags</a>:                Conditionals that test flags.

</li></ul>
<p>Functions for Transforming Text

</p>
<ul class="menu">
<li><a href="#Syntax-of-Functions">Syntax of Functions</a>:          How to write a function call. 
<li><a href="#Text-Functions">Text Functions</a>:               General-purpose text manipulation functions. 
<li><a href="#File-Name-Functions">File Name Functions</a>:          Functions for manipulating file names. 
<li><a href="#Conditional-Functions">Conditional Functions</a>:        Functions that implement conditions. 
<li><a href="#Foreach-Function">Foreach Function</a>:             Repeat some text with controlled variation. 
<li><a href="#Call-Function">Call Function</a>:                Expand a user-defined function. 
<li><a href="#Value-Function">Value Function</a>:               Return the un-expanded value of a variable. 
<li><a href="#Eval-Function">Eval Function</a>:                Evaluate the arguments as makefile syntax. 
<li><a href="#Origin-Function">Origin Function</a>:              Find where a variable got its value. 
<li><a href="#Flavor-Function">Flavor Function</a>:              Find out the flavor of a variable. 
<li><a href="#Shell-Function">Shell Function</a>:               Substitute the output of a shell command. 
<li><a href="#Make-Control-Functions">Make Control Functions</a>:       Functions that control how make runs.

</li></ul>
<p>How to Run <code>make</code>

</p>
<ul class="menu">
<li><a href="#Makefile-Arguments">Makefile Arguments</a>:           How to specify which makefile to use. 
<li><a href="#Goals">Goals</a>:                        How to use goal arguments to specify which
                                  parts of the makefile to use. 
<li><a href="#Instead-of-Execution">Instead of Execution</a>:         How to use mode flags to specify what
                                  kind of thing to do with the commands
                                  in the makefile other than simply
                                  execute them. 
<li><a href="#Avoiding-Compilation">Avoiding Compilation</a>:         How to avoid recompiling certain files. 
<li><a href="#Overriding">Overriding</a>:                   How to override a variable to specify
                                  an alternate compiler and other things. 
<li><a href="#Testing">Testing</a>:                      How to proceed past some errors, to
                                  test compilation. 
<li><a href="#Options-Summary">Options Summary</a>:              Summary of Options

</li></ul>
<p>Using Implicit Rules

</p>
<ul class="menu">
<li><a href="#Using-Implicit">Using Implicit</a>:               How to use an existing implicit rule
                                  to get the commands for updating a file. 
<li><a href="#Catalogue-of-Rules">Catalogue of Rules</a>:           A list of built-in implicit rules. 
<li><a href="#Implicit-Variables">Implicit Variables</a>:           How to change what predefined rules do. 
<li><a href="#Chained-Rules">Chained Rules</a>:                How to use a chain of implicit rules. 
<li><a href="#Pattern-Rules">Pattern Rules</a>:                How to define new implicit rules. 
<li><a href="#Last-Resort">Last Resort</a>:                  How to define commands for rules which
                                  cannot find any. 
<li><a href="#Suffix-Rules">Suffix Rules</a>:                 The old-fashioned style of implicit rule. 
<li><a href="#Implicit-Rule-Search">Implicit Rule Search</a>:         The precise algorithm for applying
                                  implicit rules.

</li></ul>
<p>Defining and Redefining Pattern Rules

</p>
<ul class="menu">
<li><a href="#Pattern-Intro">Pattern Intro</a>:                An introduction to pattern rules. 
<li><a href="#Pattern-Examples">Pattern Examples</a>:             Examples of pattern rules. 
<li><a href="#Automatic-Variables">Automatic Variables</a>:          How to use automatic variables in the
                                  commands of implicit rules. 
<li><a href="#Pattern-Match">Pattern Match</a>:                How patterns match. 
<li><a href="#Match_002dAnything-Rules">Match-Anything Rules</a>:         Precautions you should take prior to
                                  defining rules that can match any
                                  target file whatever. 
<li><a href="#Canceling-Rules">Canceling Rules</a>:              How to override or cancel built-in rules.

</li></ul>
<p>Using <code>make</code> to Update Archive Files

</p>
<ul class="menu">
<li><a href="#Archive-Members">Archive Members</a>:              Archive members as targets. 
<li><a href="#Archive-Update">Archive Update</a>:               The implicit rule for archive member targets. 
<li><a href="#Archive-Pitfalls">Archive Pitfalls</a>:             Dangers to watch out for when using archives. 
<li><a href="#Archive-Suffix-Rules">Archive Suffix Rules</a>:         You can write a special kind of suffix rule
                                  for updating archives.

</li></ul>
<p>Implicit Rule for Archive Member Targets

</p>
<ul class="menu">
<li><a href="#Archive-Symbols">Archive Symbols</a>:              How to update archive symbol directories.

   </ul>

<div class="node">
<p><hr>
<a name="Overview"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Introduction">Introduction</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h2 class="chapter">1 Overview of <code>make</code></h2>

<p>The <code>make</code> utility automatically determines which pieces of a large
program need to be recompiled, and issues commands to recompile them. 
This manual describes GNU <code>make</code>, which was implemented by Richard
Stallman and Roland McGrath.  Development since Version 3.76 has been
handled by Paul D. Smith.

   <p>GNU <code>make</code> conforms to section 6.2 of <cite>IEEE Standard
1003.2-1992</cite> (POSIX.2). 
<a name="index-POSIX-1"></a><a name="index-IEEE-Standard-1003_002e2-2"></a><a name="index-standards-conformance-3"></a>
Our examples show C programs, since they are most common, but you can use
<code>make</code> with any programming language whose compiler can be run with a
shell command.  Indeed, <code>make</code> is not limited to programs.  You can
use it to describe any task where some files must be updated automatically
from others whenever the others change.

<ul class="menu">
<li><a accesskey="1" href="#Preparing">Preparing</a>:                    Preparing and Running Make
<li><a accesskey="2" href="#Reading">Reading</a>:                      On Reading this Text
<li><a accesskey="3" href="#Bugs">Bugs</a>:                         Problems and Bugs
</ul>

<div class="node">
<p><hr>
<a name="Preparing"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Reading">Reading</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Overview">Overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Overview">Overview</a>
<br>
</div>

<h3 class="heading">Preparing and Running Make</h3>

   <p>To prepare to use <code>make</code>, you must write a file called
the <dfn>makefile</dfn> that describes the relationships among files
in your program and provides commands for updating each file. 
In a program, typically, the executable file is updated from object
files, which are in turn made by compiling source files.

   <p>Once a suitable makefile exists, each time you change some source files,
this simple shell command:

<pre class="example">     make
</pre>
   <p class="noindent">suffices to perform all necessary recompilations.  The <code>make</code> program
uses the makefile data base and the last-modification times of the files to
decide which of the files need to be updated.  For each of those files, it
issues the commands recorded in the data base.

   <p>You can provide command line arguments to <code>make</code> to control which
files should be recompiled, or how.  See <a href="#Running">How to Run <code>make</code></a>.

<div class="node">
<p><hr>
<a name="Reading"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Bugs">Bugs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Preparing">Preparing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Overview">Overview</a>
<br>
</div>

<h3 class="section">1.1 How to Read This Manual</h3>

<p>If you are new to <code>make</code>, or are looking for a general
introduction, read the first few sections of each chapter, skipping the
later sections.  In each chapter, the first few sections contain
introductory or general information and the later sections contain
specialized or technical information. 
The exception is the second chapter, <a href="#Introduction">An Introduction to Makefiles</a>, all of which is introductory.

   <p>If you are familiar with other <code>make</code> programs, see <a href="#Features">Features of GNU <code>make</code></a>, which lists the enhancements GNU
<code>make</code> has, and <a href="#Missing">Incompatibilities and Missing Features</a>, which explains the few things GNU <code>make</code> lacks that
others have.

   <p>For a quick summary, see <a href="#Options-Summary">Options Summary</a>, <a href="#Quick-Reference">Quick Reference</a>,
and <a href="#Special-Targets">Special Targets</a>.

<div class="node">
<p><hr>
<a name="Bugs"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Reading">Reading</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Overview">Overview</a>
<br>
</div>

<h3 class="section">1.2 Problems and Bugs</h3>

<p><a name="index-reporting-bugs-4"></a><a name="index-bugs_002c-reporting-5"></a><a name="index-problems-and-bugs_002c-reporting-6"></a>
If you have problems with GNU <code>make</code> or think you've found a bug,
please report it to the developers; we cannot promise to do anything but
we might well want to fix it.

   <p>Before reporting a bug, make sure you've actually found a real bug. 
Carefully reread the documentation and see if it really says you can do
what you're trying to do.  If it's not clear whether you should be able
to do something or not, report that too; it's a bug in the
documentation!

   <p>Before reporting a bug or trying to fix it yourself, try to isolate it
to the smallest possible makefile that reproduces the problem.  Then
send us the makefile and the exact results <code>make</code> gave you,
including any error or warning messages.  Please don't paraphrase
these messages: it's best to cut and paste them into your report. 
When generating this small makefile, be sure to not use any non-free
or unusual tools in your commands: you can almost always emulate what
such a tool would do with simple shell commands.  Finally, be sure to
explain what you expected to occur; this will help us decide whether
the problem was really in the documentation.

   <p>Once you have a precise problem you can report it in one of two ways. 
Either send electronic mail to:

<pre class="example">         bug-make@gnu.org
</pre>
   <p class="noindent">or use our Web-based project management tool, at:

<pre class="example">         http://savannah.gnu.org/projects/make/
</pre>
   <p class="noindent">In addition to the information above, please be careful to include the
version number of <code>make</code> you are using.  You can get this
information with the command <span class="samp">make --version</span>.  Be sure also to
include the type of machine and operating system you are using.  One
way to obtain this information is by looking at the final lines of
output from the command <span class="samp">make --help</span>.

<div class="node">
<p><hr>
<a name="Introduction"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Makefiles">Makefiles</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Overview">Overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h2 class="chapter">2 An Introduction to Makefiles</h2>

<p>You need a file called a <dfn>makefile</dfn> to tell <code>make</code> what to do. 
Most often, the makefile tells <code>make</code> how to compile and link a
program. 
<a name="index-makefile-7"></a>
In this chapter, we will discuss a simple makefile that describes how to
compile and link a text editor which consists of eight C source files
and three header files.  The makefile can also tell <code>make</code> how to
run miscellaneous commands when explicitly asked (for example, to remove
certain files as a clean-up operation).  To see a more complex example
of a makefile, see <a href="#Complex-Makefile">Complex Makefile</a>.

   <p>When <code>make</code> recompiles the editor, each changed C source file
must be recompiled.  If a header file has changed, each C source file
that includes the header file must be recompiled to be safe.  Each
compilation produces an object file corresponding to the source file. 
Finally, if any source file has been recompiled, all the object files,
whether newly made or saved from previous compilations, must be linked
together to produce the new executable editor. 
<a name="index-recompilation-8"></a><a name="index-editor-9"></a>

<ul class="menu">
<li><a accesskey="1" href="#Rule-Introduction">Rule Introduction</a>:            What a rule looks like. 
<li><a accesskey="2" href="#Simple-Makefile">Simple Makefile</a>:              A Simple Makefile
<li><a accesskey="3" href="#How-Make-Works">How Make Works</a>:               How <code>make</code> Processes This Makefile
<li><a accesskey="4" href="#Variables-Simplify">Variables Simplify</a>:           Variables Make Makefiles Simpler
<li><a accesskey="5" href="#make-Deduces">make Deduces</a>:                 Letting <code>make</code> Deduce the Commands
<li><a accesskey="6" href="#Combine-By-Prerequisite">Combine By Prerequisite</a>:      Another Style of Makefile
<li><a accesskey="7" href="#Cleanup">Cleanup</a>:                      Rules for Cleaning the Directory
</ul>

<div class="node">
<p><hr>
<a name="Rule-Introduction"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Simple-Makefile">Simple Makefile</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">2.1 What a Rule Looks Like</h3>

<p><a name="index-rule_002c-introduction-to-10"></a><a name="index-makefile-rule-parts-11"></a><a name="index-parts-of-makefile-rule-12"></a>
A simple makefile consists of &ldquo;rules&rdquo; with the following shape:

   <p><a name="index-targets_002c-introduction-to-13"></a><a name="index-prerequisites_002c-introduction-to-14"></a><a name="index-commands_002c-introduction-to-15"></a>
<pre class="example">     <var>target</var> ... : <var>prerequisites</var> ...
             <var>command</var>
             ...
             ...
</pre>
   <p>A <dfn>target</dfn> is usually the name of a file that is generated by a
program; examples of targets are executable or object files.  A target
can also be the name of an action to carry out, such as <span class="samp">clean</span>
(see <a href="#Phony-Targets">Phony Targets</a>).

   <p>A <dfn>prerequisite</dfn> is a file that is used as input to create the
target.  A target often depends on several files.

   <p><a name="index-tabs-in-rules-16"></a>A <dfn>command</dfn> is an action that <code>make</code> carries out. 
A rule may have more than one command, each on its own line. 
<strong>Please note:</strong> you need to put a tab character at the beginning of
every command line!  This is an obscurity that catches the unwary.

   <p>Usually a command is in a rule with prerequisites and serves to create a
target file if any of the prerequisites change.  However, the rule that
specifies commands for the target need not have prerequisites.  For
example, the rule containing the delete command associated with the
target <span class="samp">clean</span> does not have prerequisites.

   <p>A <dfn>rule</dfn>, then, explains how and when to remake certain files
which are the targets of the particular rule.  <code>make</code> carries out
the commands on the prerequisites to create or update the target.  A
rule can also explain how and when to carry out an action. 
See <a href="#Rules">Writing Rules</a>.

   <p>A makefile may contain other text besides rules, but a simple makefile
need only contain rules.  Rules may look somewhat more complicated
than shown in this template, but all fit the pattern more or less.

<div class="node">
<p><hr>
<a name="Simple-Makefile"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#How-Make-Works">How Make Works</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Rule-Introduction">Rule Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>
<br>
</div>

<h3 class="section">2.2 A Simple Makefile</h3>

<p><a name="index-simple-makefile-17"></a><a name="index-makefile_002c-simple-18"></a>
Here is a straightforward makefile that describes the way an
executable file called <code>edit</code> depends on eight object files
which, in turn, depend on eight C source and three header files.

   <p>In this example, all the C files include <span class="file">defs.h</span>, but only those
defining editing commands include <span class="file">command.h</span>, and only low
level files that change the editor buffer include <span class="file">buffer.h</span>.

<pre class="example">     edit : main.o kbd.o command.o display.o \
            insert.o search.o files.o utils.o
             cc -o edit main.o kbd.o command.o display.o \
                        insert.o search.o files.o utils.o
     
     main.o : main.c defs.h
             cc -c main.c
     kbd.o : kbd.c defs.h command.h
             cc -c kbd.c
     command.o : command.c defs.h command.h
             cc -c command.c
     display.o : display.c defs.h buffer.h
             cc -c display.c
     insert.o : insert.c defs.h buffer.h
             cc -c insert.c
     search.o : search.c defs.h buffer.h
             cc -c search.c
     files.o : files.c defs.h buffer.h command.h
             cc -c files.c
     utils.o : utils.c defs.h
             cc -c utils.c
     clean :
             rm edit main.o kbd.o command.o display.o \
                insert.o search.o files.o utils.o
</pre>
   <p class="noindent">We split each long line into two lines using backslash-newline; this is
like using one long line, but is easier to read. 
<a name="index-continuation-lines-19"></a><a name="index-_0040code_007b_005c_007d-_0028backslash_0029_002c-for-continuation-lines-20"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-for-continuation-lines-21"></a><a name="index-quoting-newline_002c-in-makefile-22"></a><a name="index-newline_002c-quoting_002c-in-makefile-23"></a>
To use this makefile to create the executable file called <span class="file">edit</span>,
type:

<pre class="example">     make
</pre>
   <p>To use this makefile to delete the executable file and all the object
files from the directory, type:

<pre class="example">     make clean
</pre>
   <p>In the example makefile, the targets include the executable file
<span class="samp">edit</span>, and the object files <span class="samp">main.o</span> and <span class="samp">kbd.o</span>.  The
prerequisites are files such as <span class="samp">main.c</span> and <span class="samp">defs.h</span>. 
In fact, each <span class="samp">.o</span> file is both a target and a prerequisite. 
Commands include <span class="samp">cc&nbsp;-c&nbsp;main.c</span><!-- /@w --> and <span class="samp">cc&nbsp;-c&nbsp;kbd.c</span><!-- /@w -->.

   <p>When a target is a file, it needs to be recompiled or relinked if any
of its prerequisites change.  In addition, any prerequisites that are
themselves automatically generated should be updated first.  In this
example, <span class="file">edit</span> depends on each of the eight object files; the
object file <span class="file">main.o</span> depends on the source file <span class="file">main.c</span> and
on the header file <span class="file">defs.h</span>.

   <p>A shell command follows each line that contains a target and
prerequisites.  These shell commands say how to update the target file. 
A tab character must come at the beginning of every command line to
distinguish command lines from other lines in the makefile.  (Bear in
mind that <code>make</code> does not know anything about how the commands
work.  It is up to you to supply commands that will update the target
file properly.  All <code>make</code> does is execute the commands in the rule
you have specified when the target file needs to be updated.) 
<a name="index-shell-command-24"></a>
The target <span class="samp">clean</span> is not a file, but merely the name of an
action.  Since you
normally
do not want to carry out the actions in this rule, <span class="samp">clean</span> is not a prerequisite of any other rule. 
Consequently, <code>make</code> never does anything with it unless you tell
it specifically.  Note that this rule not only is not a prerequisite, it
also does not have any prerequisites, so the only purpose of the rule
is to run the specified commands.  Targets that do not refer to files
but are just actions are called <dfn>phony targets</dfn>.  See <a href="#Phony-Targets">Phony Targets</a>, for information about this kind of target.  See <a href="#Errors">Errors in Commands</a>, to see how to cause <code>make</code> to ignore errors
from <code>rm</code> or any other command. 
<a name="index-_0040code_007bclean_007d-target-25"></a><a name="index-_0040code_007brm_007d-_0028shell-command_0029-26"></a>
<div class="node">
<p><hr>
<a name="How-Make-Works"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Variables-Simplify">Variables Simplify</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Simple-Makefile">Simple Makefile</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">2.3 How <code>make</code> Processes a Makefile</h3>

<p><a name="index-processing-a-makefile-27"></a><a name="index-makefile_002c-how-_0040code_007bmake_007d-processes-28"></a>
By default, <code>make</code> starts with the first target (not targets whose
names start with <span class="samp">.</span>).  This is called the <dfn>default goal</dfn>. 
(<dfn>Goals</dfn> are the targets that <code>make</code> strives ultimately to
update.    You can override this behavior using the command line
(see <a href="#Goals">Arguments to Specify the Goals</a>) or with the
<code>.DEFAULT_GOAL</code> special variable (see <a href="#Special-Variables">Other Special Variables</a>). 
<a name="index-default-goal-29"></a><a name="index-goal_002c-default-30"></a><a name="index-goal-31"></a>
In the simple example of the previous section, the default goal is to
update the executable program <span class="file">edit</span>; therefore, we put that rule
first.

   <p>Thus, when you give the command:

<pre class="example">     make
</pre>
   <p class="noindent"><code>make</code> reads the makefile in the current directory and begins by
processing the first rule.  In the example, this rule is for relinking
<span class="file">edit</span>; but before <code>make</code> can fully process this rule, it
must process the rules for the files that <span class="file">edit</span> depends on,
which in this case are the object files.  Each of these files is
processed according to its own rule.  These rules say to update each
<span class="samp">.o</span> file by compiling its source file.  The recompilation must
be done if the source file, or any of the header files named as
prerequisites, is more recent than the object file, or if the object
file does not exist.

   <p>The other rules are processed because their targets appear as
prerequisites of the goal.  If some other rule is not depended on by the
goal (or anything it depends on, etc.), that rule is not processed,
unless you tell <code>make</code> to do so (with a command such as
<code>make&nbsp;clean</code><!-- /@w -->).

   <p>Before recompiling an object file, <code>make</code> considers updating its
prerequisites, the source file and header files.  This makefile does not
specify anything to be done for them&mdash;the <span class="samp">.c</span> and <span class="samp">.h</span> files
are not the targets of any rules&mdash;so <code>make</code> does nothing for these
files.  But <code>make</code> would update automatically generated C programs,
such as those made by Bison or Yacc, by their own rules at this time.

   <p>After recompiling whichever object files need it, <code>make</code> decides
whether to relink <span class="file">edit</span>.  This must be done if the file
<span class="file">edit</span> does not exist, or if any of the object files are newer than
it.  If an object file was just recompiled, it is now newer than
<span class="file">edit</span>, so <span class="file">edit</span> is relinked. 
<a name="index-relinking-32"></a>
Thus, if we change the file <span class="file">insert.c</span> and run <code>make</code>,
<code>make</code> will compile that file to update <span class="file">insert.o</span>, and then
link <span class="file">edit</span>.  If we change the file <span class="file">command.h</span> and run
<code>make</code>, <code>make</code> will recompile the object files <span class="file">kbd.o</span>,
<span class="file">command.o</span> and <span class="file">files.o</span> and then link the file <span class="file">edit</span>.

<div class="node">
<p><hr>
<a name="Variables-Simplify"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#make-Deduces">make Deduces</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#How-Make-Works">How Make Works</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>
<br>
</div>

<h3 class="section">2.4 Variables Make Makefiles Simpler</h3>

<p><a name="index-variables-33"></a><a name="index-simplifying-with-variables-34"></a>
In our example, we had to list all the object files twice in the rule for
<span class="file">edit</span> (repeated here):

<pre class="example">     edit : main.o kbd.o command.o display.o \
                   insert.o search.o files.o utils.o
             cc -o edit main.o kbd.o command.o display.o \
                        insert.o search.o files.o utils.o
</pre>
   <p><a name="index-_0040code_007bobjects_007d-35"></a>Such duplication is error-prone; if a new object file is added to the
system, we might add it to one list and forget the other.  We can eliminate
the risk and simplify the makefile by using a variable.  <dfn>Variables</dfn>
allow a text string to be defined once and substituted in multiple places
later (see <a href="#Using-Variables">How to Use Variables</a>).

   <p><a name="index-_0040code_007bOBJECTS_007d-36"></a><a name="index-_0040code_007bobjs_007d-37"></a><a name="index-_0040code_007bOBJS_007d-38"></a><a name="index-_0040code_007bobj_007d-39"></a><a name="index-_0040code_007bOBJ_007d-40"></a>It is standard practice for every makefile to have a variable named
<code>objects</code>, <code>OBJECTS</code>, <code>objs</code>, <code>OBJS</code>, <code>obj</code>,
or <code>OBJ</code> which is a list of all object file names.  We would
define such a variable <code>objects</code> with a line like this in the
makefile:

<pre class="example">     objects = main.o kbd.o command.o display.o \
               insert.o search.o files.o utils.o
</pre>
   <p class="noindent">Then, each place we want to put a list of the object file names, we can
substitute the variable's value by writing <span class="samp">$(objects)</span>
(see <a href="#Using-Variables">How to Use Variables</a>).

   <p>Here is how the complete simple makefile looks when you use a variable
for the object files:

<pre class="example">     objects = main.o kbd.o command.o display.o \
               insert.o search.o files.o utils.o
     
     edit : $(objects)
             cc -o edit $(objects)
     main.o : main.c defs.h
             cc -c main.c
     kbd.o : kbd.c defs.h command.h
             cc -c kbd.c
     command.o : command.c defs.h command.h
             cc -c command.c
     display.o : display.c defs.h buffer.h
             cc -c display.c
     insert.o : insert.c defs.h buffer.h
             cc -c insert.c
     search.o : search.c defs.h buffer.h
             cc -c search.c
     files.o : files.c defs.h buffer.h command.h
             cc -c files.c
     utils.o : utils.c defs.h
             cc -c utils.c
     clean :
             rm edit $(objects)
</pre>
   <div class="node">
<p><hr>
<a name="make-Deduces"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Combine-By-Prerequisite">Combine By Prerequisite</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Variables-Simplify">Variables Simplify</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>
<br>
</div>

<h3 class="section">2.5 Letting <code>make</code> Deduce the Commands</h3>

<p><a name="index-deducing-commands-_0028implicit-rules_0029-41"></a><a name="index-implicit-rule_002c-introduction-to-42"></a><a name="index-rule_002c-implicit_002c-introduction-to-43"></a>
It is not necessary to spell out the commands for compiling the individual
C source files, because <code>make</code> can figure them out: it has an
<dfn>implicit rule</dfn> for updating a <span class="samp">.o</span> file from a correspondingly
named <span class="samp">.c</span> file using a <span class="samp">cc -c</span> command.  For example, it will
use the command <span class="samp">cc -c main.c -o main.o</span> to compile <span class="file">main.c</span> into
<span class="file">main.o</span>.  We can therefore omit the commands from the rules for the
object files.  See <a href="#Implicit-Rules">Using Implicit Rules</a>.

   <p>When a <span class="samp">.c</span> file is used automatically in this way, it is also
automatically added to the list of prerequisites.  We can therefore omit
the <span class="samp">.c</span> files from the prerequisites, provided we omit the commands.

   <p>Here is the entire example, with both of these changes, and a variable
<code>objects</code> as suggested above:

<pre class="example">     objects = main.o kbd.o command.o display.o \
               insert.o search.o files.o utils.o
     
     edit : $(objects)
             cc -o edit $(objects)
     
     main.o : defs.h
     kbd.o : defs.h command.h
     command.o : defs.h command.h
     display.o : defs.h buffer.h
     insert.o : defs.h buffer.h
     search.o : defs.h buffer.h
     files.o : defs.h buffer.h command.h
     utils.o : defs.h
     
     .PHONY : clean
     clean :
             rm edit $(objects)
</pre>
   <p class="noindent">This is how we would write the makefile in actual practice.  (The
complications associated with <span class="samp">clean</span> are described elsewhere. 
See <a href="#Phony-Targets">Phony Targets</a>, and <a href="#Errors">Errors in Commands</a>.)

   <p>Because implicit rules are so convenient, they are important.  You
will see them used frequently.

<div class="node">
<p><hr>
<a name="Combine-By-Prerequisite"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Cleanup">Cleanup</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#make-Deduces">make Deduces</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>
<br>
</div>

<h3 class="section">2.6 Another Style of Makefile</h3>

<p><a name="index-combining-rules-by-prerequisite-44"></a>
When the objects of a makefile are created only by implicit rules, an
alternative style of makefile is possible.  In this style of makefile,
you group entries by their prerequisites instead of by their targets. 
Here is what one looks like:

<pre class="example">     objects = main.o kbd.o command.o display.o \
               insert.o search.o files.o utils.o
     
     edit : $(objects)
             cc -o edit $(objects)
     
     $(objects) : defs.h
     kbd.o command.o files.o : command.h
     display.o insert.o search.o files.o : buffer.h
</pre>
   <p class="noindent">Here <span class="file">defs.h</span> is given as a prerequisite of all the object files;
<span class="file">command.h</span> and <span class="file">buffer.h</span> are prerequisites of the specific
object files listed for them.

   <p>Whether this is better is a matter of taste: it is more compact, but some
people dislike it because they find it clearer to put all the information
about each target in one place.

<div class="node">
<p><hr>
<a name="Cleanup"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Combine-By-Prerequisite">Combine By Prerequisite</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>
<br>
</div>

<h3 class="section">2.7 Rules for Cleaning the Directory</h3>

<p><a name="index-cleaning-up-45"></a><a name="index-removing_002c-to-clean-up-46"></a>
Compiling a program is not the only thing you might want to write rules
for.  Makefiles commonly tell how to do a few other things besides
compiling a program: for example, how to delete all the object files
and executables so that the directory is <span class="samp">clean</span>.

   <p><a name="index-_0040code_007bclean_007d-target-47"></a>Here is how we
could write a <code>make</code> rule for cleaning our example editor:

<pre class="example">     clean:
             rm edit $(objects)
</pre>
   <p>In practice, we might want to write the rule in a somewhat more
complicated manner to handle unanticipated situations.  We would do this:

<pre class="example">     .PHONY : clean
     clean :
             -rm edit $(objects)
</pre>
   <p class="noindent">This prevents <code>make</code> from getting confused by an actual file
called <span class="file">clean</span> and causes it to continue in spite of errors from
<code>rm</code>.  (See <a href="#Phony-Targets">Phony Targets</a>, and <a href="#Errors">Errors in Commands</a>.)

<p class="noindent">A rule such as this should not be placed at the beginning of the
makefile, because we do not want it to run by default!  Thus, in the
example makefile, we want the rule for <code>edit</code>, which recompiles
the editor, to remain the default goal.

   <p>Since <code>clean</code> is not a prerequisite of <code>edit</code>, this rule will not
run at all if we give the command <span class="samp">make</span> with no arguments.  In
order to make the rule run, we have to type <span class="samp">make clean</span>. 
See <a href="#Running">How to Run <code>make</code></a>.

<div class="node">
<p><hr>
<a name="Makefiles"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Rules">Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">3 Writing Makefiles</h2>

<p><a name="index-makefile_002c-how-to-write-48"></a>The information that tells <code>make</code> how to recompile a system comes from
reading a data base called the <dfn>makefile</dfn>.

<ul class="menu">
<li><a accesskey="1" href="#Makefile-Contents">Makefile Contents</a>:            What makefiles contain. 
<li><a accesskey="2" href="#Makefile-Names">Makefile Names</a>:               How to name your makefile. 
<li><a accesskey="3" href="#Include">Include</a>:                      How one makefile can use another makefile. 
<li><a accesskey="4" href="#MAKEFILES-Variable">MAKEFILES Variable</a>:           The environment can specify extra makefiles. 
<li><a accesskey="5" href="#MAKEFILE_005fLIST-Variable">MAKEFILE_LIST Variable</a>:       Discover which makefiles have been read. 
<li><a accesskey="6" href="#Special-Variables">Special Variables</a>:            Other special variables. 
<li><a accesskey="7" href="#Remaking-Makefiles">Remaking Makefiles</a>:           How makefiles get remade. 
<li><a accesskey="8" href="#Overriding-Makefiles">Overriding Makefiles</a>:         How to override part of one makefile
                                  with another makefile. 
<li><a accesskey="9" href="#Reading-Makefiles">Reading Makefiles</a>:            How makefiles are parsed. 
<li><a href="#Secondary-Expansion">Secondary Expansion</a>:          How and when secondary expansion is performed. 
</ul>

<div class="node">
<p><hr>
<a name="Makefile-Contents"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Makefile-Names">Makefile Names</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Makefiles">Makefiles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefiles">Makefiles</a>
<br>
</div>

<h3 class="section">3.1 What Makefiles Contain</h3>

<p>Makefiles contain five kinds of things: <dfn>explicit rules</dfn>,
<dfn>implicit rules</dfn>, <dfn>variable definitions</dfn>, <dfn>directives</dfn>,
and <dfn>comments</dfn>.  Rules, variables, and directives are described at
length in later chapters.

     
<a name="index-rule_002c-explicit_002c-definition-of-49"></a>
<a name="index-explicit-rule_002c-definition-of-50"></a>
<ul><li>An <dfn>explicit rule</dfn> says when and how to remake one or more files,
called the rule's <dfn>targets</dfn>.  It lists the other files that the
targets depend on, called the <dfn>prerequisites</dfn> of the target, and
may also give commands to use to create or update the targets. 
See <a href="#Rules">Writing Rules</a>.

     <p><a name="index-rule_002c-implicit_002c-definition-of-51"></a><a name="index-implicit-rule_002c-definition-of-52"></a><li>An <dfn>implicit rule</dfn> says when and how to remake a class of files
based on their names.  It describes how a target may depend on a file
with a name similar to the target and gives commands to create or
update such a target.  See <a href="#Implicit-Rules">Using Implicit Rules</a>.

     <p><a name="index-variable-definition-53"></a><li>A <dfn>variable definition</dfn> is a line that specifies a text string
value for a variable that can be substituted into the text later.  The
simple makefile example shows a variable definition for <code>objects</code>
as a list of all object files (see <a href="#Variables-Simplify">Variables Make Makefiles Simpler</a>).

     <p><a name="index-directive-54"></a><li>A <dfn>directive</dfn> is a command for <code>make</code> to do something special while
reading the makefile.  These include:

          <ul>
<li>Reading another makefile (see <a href="#Include">Including Other Makefiles</a>).

          <li>Deciding (based on the values of variables) whether to use or
ignore a part of the makefile (see <a href="#Conditionals">Conditional Parts of Makefiles</a>).

          <li>Defining a variable from a verbatim string containing multiple lines
(see <a href="#Defining">Defining Variables Verbatim</a>). 
</ul>

     <p><a name="index-comments_002c-in-makefile-55"></a><a name="index-_0040code_007b_0023_007d-_0028comments_0029_002c-in-makefile-56"></a><li><span class="samp">#</span> in a line of a makefile starts a <dfn>comment</dfn>.  It and the
rest of the line are ignored, except that a trailing backslash not
escaped by another backslash will continue the comment across multiple
lines.  A line containing just a comment (with perhaps spaces before
it) is effectively blank, and is ignored.  If you want a literal
<code>#</code>, escape it with a backslash (e.g., <code>\#</code>).  Comments may
appear on any line in the makefile, although they are treated
specially in certain situations.

     <p>Within a command script (if the line begins with a TAB character) the
entire line is passed to the shell, just as with any other line that
begins with a TAB.  The shell decides how to interpret the text:
whether or not this is a comment is up to the shell.

     <p>Within a <code>define</code> directive, comments are not ignored during the
definition of the variable, but rather kept intact in the value of the
variable.  When the variable is expanded they will either be treated
as <code>make</code> comments or as command script text, depending on the
context in which the variable is evaluated. 
</ul>

<div class="node">
<p><hr>
<a name="Makefile-Names"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Include">Include</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Makefile-Contents">Makefile Contents</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefiles">Makefiles</a>
<br>
</div>

<h3 class="section">3.2 What Name to Give Your Makefile</h3>

<p><a name="index-makefile-name-57"></a><a name="index-name-of-makefile-58"></a><a name="index-default-makefile-name-59"></a><a name="index-file-name-of-makefile-60"></a>
<!-- following paragraph rewritten to avoid overfull hbox -->
By default, when <code>make</code> looks for the makefile, it tries the
following names, in order: <span class="file">GNUmakefile</span>, <span class="file">makefile</span>
and <span class="file">Makefile</span>. 
<a name="index-Makefile-61"></a><a name="index-GNUmakefile-62"></a><a name="index-makefile-63"></a>
<a name="index-_0040code_007bREADME_007d-64"></a>Normally you should call your makefile either <span class="file">makefile</span> or
<span class="file">Makefile</span>.  (We recommend <span class="file">Makefile</span> because it appears
prominently near the beginning of a directory listing, right near other
important files such as <span class="file">README</span>.)  The first name checked,
<span class="file">GNUmakefile</span>, is not recommended for most makefiles.  You should
use this name if you have a makefile that is specific to GNU
<code>make</code>, and will not be understood by other versions of
<code>make</code>.  Other <code>make</code> programs look for <span class="file">makefile</span> and
<span class="file">Makefile</span>, but not <span class="file">GNUmakefile</span>.

   <p>If <code>make</code> finds none of these names, it does not use any makefile. 
Then you must specify a goal with a command argument, and <code>make</code>
will attempt to figure out how to remake it using only its built-in
implicit rules.  See <a href="#Implicit-Rules">Using Implicit Rules</a>.

   <p><a name="index-_0040code_007b_002df_007d-65"></a><a name="index-_0040code_007b_002d_002dfile_007d-66"></a><a name="index-_0040code_007b_002d_002dmakefile_007d-67"></a>If you want to use a nonstandard name for your makefile, you can specify
the makefile name with the <span class="samp">-f</span> or <span class="samp">--file</span> option.  The
arguments <span class="samp">-f&nbsp;</span><var>name</var><!-- /@w --> or <span class="samp">--file=</span><var>name</var><!-- /@w --> tell
<code>make</code> to read the file <var>name</var> as the makefile.  If you use
more than one <span class="samp">-f</span> or <span class="samp">--file</span> option, you can specify several
makefiles.  All the makefiles are effectively concatenated in the order
specified.  The default makefile names <span class="file">GNUmakefile</span>,
<span class="file">makefile</span> and <span class="file">Makefile</span> are not checked automatically if you
specify <span class="samp">-f</span> or <span class="samp">--file</span>. 
<a name="index-specifying-makefile-name-68"></a><a name="index-makefile-name_002c-how-to-specify-69"></a><a name="index-name-of-makefile_002c-how-to-specify-70"></a><a name="index-file-name-of-makefile_002c-how-to-specify-71"></a>
<div class="node">
<p><hr>
<a name="Include"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#MAKEFILES-Variable">MAKEFILES Variable</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Makefile-Names">Makefile Names</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefiles">Makefiles</a>
<br>
</div>

<h3 class="section">3.3 Including Other Makefiles</h3>

<p><a name="index-including-other-makefiles-72"></a><a name="index-makefile_002c-including-73"></a>
<a name="index-include-74"></a>The <code>include</code> directive tells <code>make</code> to suspend reading the
current makefile and read one or more other makefiles before continuing. 
The directive is a line in the makefile that looks like this:

<pre class="example">     include <var>filenames</var>...
</pre>
   <p class="noindent"><var>filenames</var> can contain shell file name patterns.  If
<var>filenames</var> is empty, nothing is included and no error is printed. 
<a name="index-shell-file-name-pattern-_0028in-_0040code_007binclude_007d_0029-75"></a><a name="index-shell-wildcards-_0028in-_0040code_007binclude_007d_0029-76"></a><a name="index-wildcard_002c-in-_0040code_007binclude_007d-77"></a>
Extra spaces are allowed and ignored at the beginning of the line, but
a tab is not allowed.  (If the line begins with a tab, it will be
considered a command line.)  Whitespace is required between
<code>include</code> and the file names, and between file names; extra
whitespace is ignored there and at the end of the directive.  A
comment starting with <span class="samp">#</span> is allowed at the end of the line.  If
the file names contain any variable or function references, they are
expanded.  See <a href="#Using-Variables">How to Use Variables</a>.

   <p>For example, if you have three <span class="file">.mk</span> files, <span class="file">a.mk</span>,
<span class="file">b.mk</span>, and <span class="file">c.mk</span>, and <code>$(bar)</code> expands to
<code>bish bash</code>, then the following expression

<pre class="example">     include foo *.mk $(bar)
</pre>
   <p>is equivalent to

<pre class="example">     include foo a.mk b.mk c.mk bish bash
</pre>
   <p>When <code>make</code> processes an <code>include</code> directive, it suspends
reading of the containing makefile and reads from each listed file in
turn.  When that is finished, <code>make</code> resumes reading the
makefile in which the directive appears.

   <p>One occasion for using <code>include</code> directives is when several programs,
handled by individual makefiles in various directories, need to use a
common set of variable definitions
(see <a href="#Setting">Setting Variables</a>) or pattern rules
(see <a href="#Pattern-Rules">Defining and Redefining Pattern Rules</a>).

   <p>Another such occasion is when you want to generate prerequisites from
source files automatically; the prerequisites can be put in a file that
is included by the main makefile.  This practice is generally cleaner
than that of somehow appending the prerequisites to the end of the main
makefile as has been traditionally done with other versions of
<code>make</code>.  See <a href="#Automatic-Prerequisites">Automatic Prerequisites</a>. 
<a name="index-prerequisites_002c-automatic-generation-78"></a><a name="index-automatic-generation-of-prerequisites-79"></a><a name="index-generating-prerequisites-automatically-80"></a>
<a name="index-_0040code_007b_002dI_007d-81"></a><a name="index-_0040code_007b_002d_002dinclude_002ddir_007d-82"></a><a name="index-included-makefiles_002c-default-directories-83"></a><a name="index-default-directories-for-included-makefiles-84"></a><a name="index-_002fusr_002fgnu_002finclude-85"></a><a name="index-_002fusr_002flocal_002finclude-86"></a><a name="index-_002fusr_002finclude-87"></a>If the specified name does not start with a slash, and the file is not
found in the current directory, several other directories are searched. 
First, any directories you have specified with the <span class="samp">-I</span> or
<span class="samp">--include-dir</span> option are searched
(see <a href="#Options-Summary">Summary of Options</a>). 
Then the following directories (if they exist)
are searched, in this order:
<var>prefix</var><span class="file">/include</span> (normally <span class="file">/usr/local/include</span>
<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>)
<span class="file">/usr/gnu/include</span>,
<span class="file">/usr/local/include</span>, <span class="file">/usr/include</span>.

   <p>If an included makefile cannot be found in any of these directories, a
warning message is generated, but it is not an immediately fatal error;
processing of the makefile containing the <code>include</code> continues. 
Once it has finished reading makefiles, <code>make</code> will try to remake
any that are out of date or don't exist. 
See <a href="#Remaking-Makefiles">How Makefiles Are Remade</a>. 
Only after it has tried to find a way to remake a makefile and failed,
will <code>make</code> diagnose the missing makefile as a fatal error.

   <p>If you want <code>make</code> to simply ignore a makefile which does not exist
and cannot be remade, with no error message, use the <code>-include</code><!-- /@w -->
directive instead of <code>include</code>, like this:

<pre class="example">     -include <var>filenames</var>...
</pre>
   <p>This acts like <code>include</code> in every way except that there is no
error (not even a warning) if any of the <var>filenames</var> do not exist. 
For compatibility with some other <code>make</code> implementations,
<code>sinclude</code> is another name for <code>-include</code><!-- /@w -->.

<div class="node">
<p><hr>
<a name="MAKEFILES-Variable"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#MAKEFILE_005fLIST-Variable">MAKEFILE_LIST Variable</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Include">Include</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefiles">Makefiles</a>
<br>
</div>

<h3 class="section">3.4 The Variable <code>MAKEFILES</code></h3>

<p><a name="index-makefile_002c-and-_0040code_007bMAKEFILES_007d-variable-88"></a><a name="index-including-_0028_0040code_007bMAKEFILES_007d-variable_0029-89"></a>
<a name="index-MAKEFILES-90"></a>If the environment variable <code>MAKEFILES</code> is defined, <code>make</code>
considers its value as a list of names (separated by whitespace) of
additional makefiles to be read before the others.  This works much like
the <code>include</code> directive: various directories are searched for those
files (see <a href="#Include">Including Other Makefiles</a>).  In addition, the
default goal is never taken from one of these makefiles and it is not an
error if the files listed in <code>MAKEFILES</code> are not found.

   <p><a name="index-recursion_002c-and-_0040code_007bMAKEFILES_007d-variable-91"></a>The main use of <code>MAKEFILES</code> is in communication between recursive
invocations of <code>make</code> (see <a href="#Recursion">Recursive Use of <code>make</code></a>).  It usually is not desirable to set the environment
variable before a top-level invocation of <code>make</code>, because it is
usually better not to mess with a makefile from outside.  However, if
you are running <code>make</code> without a specific makefile, a makefile in
<code>MAKEFILES</code> can do useful things to help the built-in implicit
rules work better, such as defining search paths (see <a href="#Directory-Search">Directory Search</a>).

   <p>Some users are tempted to set <code>MAKEFILES</code> in the environment
automatically on login, and program makefiles to expect this to be done. 
This is a very bad idea, because such makefiles will fail to work if run by
anyone else.  It is much better to write explicit <code>include</code> directives
in the makefiles.  See <a href="#Include">Including Other Makefiles</a>.

<div class="node">
<p><hr>
<a name="MAKEFILE_005fLIST-Variable"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Special-Variables">Special Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#MAKEFILES-Variable">MAKEFILES Variable</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefiles">Makefiles</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">3.5 The Variable <code>MAKEFILE_LIST</code></h3>

<p><a name="index-makefiles_002c-and-_0040code_007bMAKEFILE_005fLIST_007d-variable-92"></a><a name="index-including-_0028_0040code_007bMAKEFILE_005fLIST_007d-variable_0029-93"></a><a name="index-MAKEFILE_005fLIST-94"></a>
As <code>make</code> reads various makefiles, including any obtained from the
<code>MAKEFILES</code> variable, the command line, the default files, or
from <code>include</code> directives, their names will be automatically
appended to the <code>MAKEFILE_LIST</code> variable.  They are added right
before <code>make</code> begins to parse them.

   <p>This means that if the first thing a makefile does is examine the last
word in this variable, it will be the name of the current makefile. 
Once the current makefile has used <code>include</code>, however, the last
word will be the just-included makefile.

   <p>If a makefile named <code>Makefile</code> has this content:

<pre class="example">     name1 := $(lastword $(MAKEFILE_LIST))
     
     include inc.mk
     
     name2 := $(lastword $(MAKEFILE_LIST))
     
     all:
             @echo name1 = $(name1)
             @echo name2 = $(name2)
</pre>
   <p class="noindent">then you would expect to see this output:

<pre class="example">     name1 = Makefile
     name2 = inc.mk
</pre>
   <p>See <a href="#Text-Functions">Text Functions</a>, for more information on the <code>word</code> and
<code>words</code> functions used above.  See <a href="#Flavors">The Two Flavors of Variables</a>, for more information on simply-expanded (<code>:=</code>)
variable definitions.

<div class="node">
<p><hr>
<a name="Special-Variables"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Remaking-Makefiles">Remaking Makefiles</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#MAKEFILE_005fLIST-Variable">MAKEFILE_LIST Variable</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefiles">Makefiles</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">3.6 Other Special Variables</h3>

<p><a name="index-makefiles_002c-and-special-variables-95"></a><a name="index-special-variables-96"></a>
GNU <code>make</code> also supports other special variables.  Unless
otherwise documented here, these values lose their special properties
if they are set by a makefile or on the command line.

     
<a name="index-_002eDEFAULT_005fGOAL-_0040r_007b_0028define-default-goal_0029_007d-97"></a>
<dl><dt><code>.DEFAULT_GOAL</code><dd>Sets the default goal to be used if no targets were specified on the
command line (see <a href="#Goals">Arguments to Specify the Goals</a>).  The
<code>.DEFAULT_GOAL</code> variable allows you to discover the current
default goal, restart the default goal selection algorithm by clearing
its value, or to explicitly set the default goal.  The following
example illustrates these cases:

     <pre class="example">          # Query the default goal.
          ifeq ($(.DEFAULT_GOAL),)
            $(warning no default goal is set)
          endif
          
          .PHONY: foo
          foo: ; @echo $@
          
          $(warning default goal is $(.DEFAULT_GOAL))
          
          # Reset the default goal.
          .DEFAULT_GOAL :=
          
          .PHONY: bar
          bar: ; @echo $@
          
          $(warning default goal is $(.DEFAULT_GOAL))
          
          # Set our own.
          .DEFAULT_GOAL := foo
     </pre>
     <p>This makefile prints:

     <pre class="example">          no default goal is set
          default goal is foo
          default goal is bar
          foo
     </pre>
     <p>Note that assigning more than one target name to <code>.DEFAULT_GOAL</code> is
illegal and will result in an error.

     <p><a name="index-MAKE_005fRESTARTS-_0040r_007b_0028number-of-times-_0040code_007bmake_007d-has-restarted_0029_007d-98"></a><br><dt><code>MAKE_RESTARTS</code><dd>This variable is set only if this instance of <code>make</code> has
restarted (see <a href="#Remaking-Makefiles">How Makefiles Are Remade</a>): it
will contain the number of times this instance has restarted.  Note
this is not the same as recursion (counted by the <code>MAKELEVEL</code>
variable).  You should not set, modify, or export this variable.

     <p><a name="index-_002eVARIABLES-_0040r_007b_0028list-of-variables_0029_007d-99"></a><br><dt><code>.VARIABLES</code><dd>Expands to a list of the <em>names</em> of all global variables defined
so far.  This includes variables which have empty values, as well as
built-in variables (see <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>), but does not include any variables which are only
defined in a target-specific context.  Note that any value you assign
to this variable will be ignored; it will always return its special
value.

     <!-- @vindex .TARGETS @r{(list of targets)} -->
<!-- @item .TARGETS -->
<!-- The second special variable is @code{.TARGETS}.  When expanded, the -->
<!-- value consists of a list of all targets defined in all makefiles read -->
<!-- up until that point.  Note it's not enough for a file to be simply -->
<!-- mentioned in the makefile to be listed in this variable, even if it -->
<!-- would match an implicit rule and become an ``implicit target''.  The -->
<!-- file must appear as a target, on the left-hand side of a ``:'', to be -->
<!-- considered a target for the purposes of this variable. -->
<p><a name="index-_002eFEATURES-_0040r_007b_0028list-of-supported-features_0029_007d-100"></a><br><dt><code>.FEATURES</code><dd>Expands to a list of special features supported by this version of
<code>make</code>.  Possible values include:

          <dl>
<dt><span class="samp">archives</span><dd>Supports <code>ar</code> (archive) files using special filename syntax. 
See <a href="#Archives">Using <code>make</code> to Update Archive Files</a>.

          <br><dt><span class="samp">check-symlink</span><dd>Supports the <code>-L</code> (<code>--check-symlink-times</code>) flag. 
See <a href="#Options-Summary">Summary of Options</a>.

          <br><dt><span class="samp">else-if</span><dd>Supports &ldquo;else if&rdquo; non-nested conditionals.  See <a href="#Conditional-Syntax">Syntax of Conditionals</a>.

          <br><dt><span class="samp">jobserver</span><dd>Supports &ldquo;job server&rdquo; enhanced parallel builds.  See <a href="#Parallel">Parallel Execution</a>.

          <br><dt><span class="samp">second-expansion</span><dd>Supports secondary expansion of prerequisite lists.

          <br><dt><span class="samp">order-only</span><dd>Supports order-only prerequisites.  See <a href="#Prerequisite-Types">Types of Prerequisites</a>.

          <br><dt><span class="samp">target-specific</span><dd>Supports target-specific and pattern-specific variable assignments. 
See <a href="#Target_002dspecific">Target-specific Variable Values</a>.

     </dl>

     <p><a name="index-_002eINCLUDE_005fDIRS-_0040r_007b_0028list-of-include-directories_0029_007d-101"></a><br><dt><code>.INCLUDE_DIRS</code><dd>Expands to a list of directories that <code>make</code> searches for
included makefiles (see <a href="#Include">Including Other Makefiles</a>).

   </dl>

<div class="node">
<p><hr>
<a name="Remaking-Makefiles"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Overriding-Makefiles">Overriding Makefiles</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Special-Variables">Special Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefiles">Makefiles</a>
<br>
</div>

<h3 class="section">3.7 How Makefiles Are Remade</h3>

<p><a name="index-updating-makefiles-102"></a><a name="index-remaking-makefiles-103"></a><a name="index-makefile_002c-remaking-of-104"></a>Sometimes makefiles can be remade from other files, such as RCS or SCCS
files.  If a makefile can be remade from other files, you probably want
<code>make</code> to get an up-to-date version of the makefile to read in.

   <p>To this end, after reading in all makefiles, <code>make</code> will consider
each as a goal target and attempt to update it.  If a makefile has a
rule which says how to update it (found either in that very makefile or
in another one) or if an implicit rule applies to it (see <a href="#Implicit-Rules">Using Implicit Rules</a>), it will be updated if necessary.  After
all makefiles have been checked, if any have actually been changed,
<code>make</code> starts with a clean slate and reads all the makefiles over
again.  (It will also attempt to update each of them over again, but
normally this will not change them again, since they are already up to
date.)

   <p>If you know that one or more of your makefiles cannot be remade and you
want to keep <code>make</code> from performing an implicit rule search on
them, perhaps for efficiency reasons, you can use any normal method of
preventing implicit rule lookup to do so.  For example, you can write an
explicit rule with the makefile as the target, and an empty command
string (see <a href="#Empty-Commands">Using Empty Commands</a>).

   <p>If the makefiles specify a double-colon rule to remake a file with
commands but no prerequisites, that file will always be remade
(see <a href="#Double_002dColon">Double-Colon</a>).  In the case of makefiles, a makefile that has a
double-colon rule with commands but no prerequisites will be remade every
time <code>make</code> is run, and then again after <code>make</code> starts over
and reads the makefiles in again.  This would cause an infinite loop:
<code>make</code> would constantly remake the makefile, and never do anything
else.  So, to avoid this, <code>make</code> will <strong>not</strong> attempt to
remake makefiles which are specified as targets of a double-colon rule
with commands but no prerequisites.

   <p>If you do not specify any makefiles to be read with <span class="samp">-f</span> or
<span class="samp">--file</span> options, <code>make</code> will try the default makefile names;
see <a href="#Makefile-Names">What Name to Give Your Makefile</a>.  Unlike
makefiles explicitly requested with <span class="samp">-f</span> or <span class="samp">--file</span> options,
<code>make</code> is not certain that these makefiles should exist.  However,
if a default makefile does not exist but can be created by running
<code>make</code> rules, you probably want the rules to be run so that the
makefile can be used.

   <p>Therefore, if none of the default makefiles exists, <code>make</code> will try
to make each of them in the same order in which they are searched for
(see <a href="#Makefile-Names">What Name to Give Your Makefile</a>)
until it succeeds in making one, or it runs out of names to try.  Note
that it is not an error if <code>make</code> cannot find or make any makefile;
a makefile is not always necessary.

   <p>When you use the <span class="samp">-t</span> or <span class="samp">--touch</span> option
(see <a href="#Instead-of-Execution">Instead of Executing the Commands</a>),
you would not want to use an out-of-date makefile to decide which
targets to touch.  So the <span class="samp">-t</span> option has no effect on updating
makefiles; they are really updated even if <span class="samp">-t</span> is specified. 
Likewise, <span class="samp">-q</span> (or <span class="samp">--question</span>) and <span class="samp">-n</span> (or
<span class="samp">--just-print</span>) do not prevent updating of makefiles, because an
out-of-date makefile would result in the wrong output for other targets. 
Thus, <span class="samp">make -f mfile -n foo</span> will update <span class="file">mfile</span>, read it in,
and then print the commands to update <span class="file">foo</span> and its prerequisites
without running them.  The commands printed for <span class="file">foo</span> will be those
specified in the updated contents of <span class="file">mfile</span>.

   <p>However, on occasion you might actually wish to prevent updating of even
the makefiles.  You can do this by specifying the makefiles as goals in
the command line as well as specifying them as makefiles.  When the
makefile name is specified explicitly as a goal, the options <span class="samp">-t</span>
and so on do apply to them.

   <p>Thus, <span class="samp">make -f mfile -n mfile foo</span> would read the makefile
<span class="file">mfile</span>, print the commands needed to update it without actually
running them, and then print the commands needed to update <span class="file">foo</span>
without running them.  The commands for <span class="file">foo</span> will be those
specified by the existing contents of <span class="file">mfile</span>.

<div class="node">
<p><hr>
<a name="Overriding-Makefiles"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Reading-Makefiles">Reading Makefiles</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Remaking-Makefiles">Remaking Makefiles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefiles">Makefiles</a>
<br>
</div>

<h3 class="section">3.8 Overriding Part of Another Makefile</h3>

<p><a name="index-overriding-makefiles-105"></a><a name="index-makefile_002c-overriding-106"></a>Sometimes it is useful to have a makefile that is mostly just like
another makefile.  You can often use the <span class="samp">include</span> directive to
include one in the other, and add more targets or variable definitions. 
However, if the two makefiles give different commands for the same
target, <code>make</code> will not let you just do this.  But there is another way.

   <p><a name="index-match_002danything-rule_002c-used-to-override-107"></a>In the containing makefile (the one that wants to include the other),
you can use a match-anything pattern rule to say that to remake any
target that cannot be made from the information in the containing
makefile, <code>make</code> should look in another makefile. 
See <a href="#Pattern-Rules">Pattern Rules</a>, for more information on pattern rules.

   <p>For example, if you have a makefile called <span class="file">Makefile</span> that says how
to make the target <span class="samp">foo</span> (and other targets), you can write a
makefile called <span class="file">GNUmakefile</span> that contains:

<pre class="example">     foo:
             frobnicate &gt; foo
     
     %: force
             @$(MAKE) -f Makefile $@
     force: ;
</pre>
   <p>If you say <span class="samp">make foo</span>, <code>make</code> will find <span class="file">GNUmakefile</span>,
read it, and see that to make <span class="file">foo</span>, it needs to run the command
<span class="samp">frobnicate &gt; foo</span>.  If you say <span class="samp">make bar</span>, <code>make</code> will
find no way to make <span class="file">bar</span> in <span class="file">GNUmakefile</span>, so it will use the
commands from the pattern rule: <span class="samp">make -f Makefile bar</span>.  If
<span class="file">Makefile</span> provides a rule for updating <span class="file">bar</span>, <code>make</code>
will apply the rule.  And likewise for any other target that
<span class="file">GNUmakefile</span> does not say how to make.

   <p>The way this works is that the pattern rule has a pattern of just
<span class="samp">%</span>, so it matches any target whatever.  The rule specifies a
prerequisite <span class="file">force</span>, to guarantee that the commands will be run even
if the target file already exists.  We give <span class="file">force</span> target empty
commands to prevent <code>make</code> from searching for an implicit rule to
build it&mdash;otherwise it would apply the same match-anything rule to
<span class="file">force</span> itself and create a prerequisite loop!

<div class="node">
<p><hr>
<a name="Reading-Makefiles"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Secondary-Expansion">Secondary Expansion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Overriding-Makefiles">Overriding Makefiles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefiles">Makefiles</a>
<br>
</div>

<h3 class="section">3.9 How <code>make</code> Reads a Makefile</h3>

<p><a name="index-reading-makefiles-108"></a><a name="index-makefile_002c-parsing-109"></a>
GNU <code>make</code> does its work in two distinct phases.  During the first
phase it reads all the makefiles, included makefiles, etc. and
internalizes all the variables and their values, implicit and explicit
rules, and constructs a dependency graph of all the targets and their
prerequisites.  During the second phase, <code>make</code> uses these internal
structures to determine what targets will need to be rebuilt and to
invoke the rules necessary to do so.

   <p>It's important to understand this two-phase approach because it has a
direct impact on how variable and function expansion happens; this is
often a source of some confusion when writing makefiles.  Here we will
present a summary of the phases in which expansion happens for different
constructs within the makefile.  We say that expansion is
<dfn>immediate</dfn> if it happens during the first phase: in this case
<code>make</code> will expand any variables or functions in that section of a
construct as the makefile is parsed.  We say that expansion is
<dfn>deferred</dfn> if expansion is not performed immediately.  Expansion of
deferred construct is not performed until either the construct appears
later in an immediate context, or until the second phase.

   <p>You may not be familiar with some of these constructs yet.  You can
reference this section as you become familiar with them, in later
chapters.

<h4 class="subheading">Variable Assignment</h4>

<p><a name="index-_002b_003d_002c-expansion-110"></a><a name="index-_003d_002c-expansion-111"></a><a name="index-_003f_003d_002c-expansion-112"></a><a name="index-_002b_003d_002c-expansion-113"></a><a name="index-define_002c-expansion-114"></a>
Variable definitions are parsed as follows:

<pre class="example">     <var>immediate</var> = <var>deferred</var>
     <var>immediate</var> ?= <var>deferred</var>
     <var>immediate</var> := <var>immediate</var>
     <var>immediate</var> += <var>deferred</var> or <var>immediate</var>
     
     define <var>immediate</var>
       <var>deferred</var>
     endef
</pre>
   <p>For the append operator, <span class="samp">+=</span>, the right-hand side is considered
immediate if the variable was previously set as a simple variable
(<span class="samp">:=</span>), and deferred otherwise.

<h4 class="subheading">Conditional Statements</h4>

<p><a name="index-ifdef_002c-expansion-115"></a><a name="index-ifeq_002c-expansion-116"></a><a name="index-ifndef_002c-expansion-117"></a><a name="index-ifneq_002c-expansion-118"></a>
All instances of conditional syntax are parsed immediately, in their
entirety; this includes the <code>ifdef</code>, <code>ifeq</code>, <code>ifndef</code>,
and <code>ifneq</code> forms.  Of course this means that automatic variables
cannot be used in conditional statements, as automatic variables are
not set until the command script for that rule is invoked.  If you
need to use automatic variables in a conditional you <em>must</em> use
shell conditional syntax, in your command script proper, for these
tests, not <code>make</code> conditionals.

<h4 class="subheading">Rule Definition</h4>

<p><a name="index-target_002c-expansion-119"></a><a name="index-prerequisite_002c-expansion-120"></a><a name="index-implicit-rule_002c-expansion-121"></a><a name="index-pattern-rule_002c-expansion-122"></a><a name="index-explicit-rule_002c-expansion-123"></a>
A rule is always expanded the same way, regardless of the form:

<pre class="example">     <var>immediate</var> : <var>immediate</var> ; <var>deferred</var>
     	<var>deferred</var>
</pre>
   <p>That is, the target and prerequisite sections are expanded immediately,
and the commands used to construct the target are always deferred.  This
general rule is true for explicit rules, pattern rules, suffix rules,
static pattern rules, and simple prerequisite definitions.

<div class="node">
<p><hr>
<a name="Secondary-Expansion"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Reading-Makefiles">Reading Makefiles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefiles">Makefiles</a>
<br>
</div>

<h3 class="section">3.10 Secondary Expansion</h3>

<p><a name="index-secondary-expansion-124"></a><a name="index-expansion_002c-secondary-125"></a>
<a name="index-_002eSECONDEXPANSION-126"></a>In the previous section we learned that GNU <code>make</code> works in two
distinct phases: a read-in phase and a target-update phase
(see <a href="#Reading-Makefiles">How <code>make</code> Reads a Makefile</a>).  GNU
make also has the ability to enable a <em>second expansion</em> of the
prerequisites (only) for some or all targets defined in the makefile. 
In order for this second expansion to occur, the special target
<code>.SECONDEXPANSION</code> must be defined before the first prerequisite
list that makes use of this feature.

   <p>If that special target is defined then in between the two phases
mentioned above, right at the end of the read-in phase, all the
prerequisites of the targets defined after the special target are
expanded a <em>second time</em>.  In most circumstances this secondary
expansion will have no effect, since all variable and function
references will have been expanded during the initial parsing of the
makefiles.  In order to take advantage of the secondary expansion
phase of the parser, then, it's necessary to <em>escape</em> the
variable or function reference in the makefile.  In this case the
first expansion merely un-escapes the reference but doesn't expand it,
and expansion is left to the secondary expansion phase.  For example,
consider this makefile:

<pre class="example">     .SECONDEXPANSION:
     ONEVAR = onefile
     TWOVAR = twofile
     myfile: $(ONEVAR) $$(TWOVAR)
</pre>
   <p>After the first expansion phase the prerequisites list of the
<span class="file">myfile</span> target will be <code>onefile</code> and <code>$(TWOVAR)</code>; the
first (unescaped) variable reference to <var>ONEVAR</var> is expanded,
while the second (escaped) variable reference is simply unescaped,
without being recognized as a variable reference.  Now during the
secondary expansion the first word is expanded again but since it
contains no variable or function references it remains the static
value <span class="file">onefile</span>, while the second word is now a normal reference
to the variable <var>TWOVAR</var>, which is expanded to the value
<span class="file">twofile</span>.  The final result is that there are two prerequisites,
<span class="file">onefile</span> and <span class="file">twofile</span>.

   <p>Obviously, this is not a very interesting case since the same result
could more easily have been achieved simply by having both variables
appear, unescaped, in the prerequisites list.  One difference becomes
apparent if the variables are reset; consider this example:

<pre class="example">     .SECONDEXPANSION:
     AVAR = top
     onefile: $(AVAR)
     twofile: $$(AVAR)
     AVAR = bottom
</pre>
   <p>Here the prerequisite of <span class="file">onefile</span> will be expanded immediately,
and resolve to the value <span class="file">top</span>, while the prerequisite of
<span class="file">twofile</span> will not be full expanded until the secondary expansion
and yield a value of <span class="file">bottom</span>.

   <p>This is marginally more exciting, but the true power of this feature
only becomes apparent when you discover that secondary expansions
always take place within the scope of the automatic variables for that
target.  This means that you can use variables such as <code>$@</code>,
<code>$*</code>, etc. during the second expansion and they will have their
expected values, just as in the command script.  All you have to do is
defer the expansion by escaping the <code>$</code>.  Also, secondary
expansion occurs for both explicit and implicit (pattern) rules. 
Knowing this, the possible uses for this feature increase
dramatically.  For example:

<pre class="example">     .SECONDEXPANSION:
     main_OBJS := main.o try.o test.o
     lib_OBJS := lib.o api.o
     
     main lib: $$($$@_OBJS)
</pre>
   <p>Here, after the initial expansion the prerequisites of both the
<span class="file">main</span> and <span class="file">lib</span> targets will be <code>$($@_OBJS)</code>.  During
the secondary expansion, the <code>$@</code> variable is set to the name of
the target and so the expansion for the <span class="file">main</span> target will yield
<code>$(main_OBJS)</code>, or <code>main.o try.o test.o</code>, while the
secondary expansion for the <span class="file">lib</span> target will yield
<code>$(lib_OBJS)</code>, or <code>lib.o api.o</code>.

   <p>You can also mix functions here, as long as they are properly escaped:

<pre class="example">     main_SRCS := main.c try.c test.c
     lib_SRCS := lib.c api.c
     
     .SECONDEXPANSION:
     main lib: $$(patsubst %.c,%.o,$$($$@_SRCS))
</pre>
   <p>This version allows users to specify source files rather than object
files, but gives the same resulting prerequisites list as the previous
example.

   <p>Evaluation of automatic variables during the secondary expansion
phase, especially of the target name variable <code>$$@</code>, behaves
similarly to evaluation within command scripts.  However, there are
some subtle differences and &ldquo;corner cases&rdquo; which come into play for
the different types of rule definitions that <code>make</code> understands. 
The subtleties of using the different automatic variables are
described below.

<h4 class="subheading">Secondary Expansion of Explicit Rules</h4>

<p><a name="index-secondary-expansion-and-explicit-rules-127"></a><a name="index-explicit-rules_002c-secondary-expansion-of-128"></a>
During the secondary expansion of explicit rules, <code>$$@</code> and
<code>$$%</code> evaluate, respectively, to the file name of the target and,
when the target is an archive member, the target member name.  The
<code>$$&lt;</code> variable evaluates to the first prerequisite in the first
rule for this target.  <code>$$^</code> and <code>$$+</code> evaluate to the list
of all prerequisites of rules <em>that have already appeared</em> for
the same target (<code>$$+</code> with repetitions and <code>$$^</code>
without).  The following example will help illustrate these behaviors:

<pre class="example">     .SECONDEXPANSION:
     
     foo: foo.1 bar.1 $$&lt; $$^ $$+    # line #1
     
     foo: foo.2 bar.2 $$&lt; $$^ $$+    # line #2
     
     foo: foo.3 bar.3 $$&lt; $$^ $$+    # line #3
</pre>
   <p>In the first prerequisite list, all three variables (<code>$$&lt;</code>,
<code>$$^</code>, and <code>$$+</code>) expand to the empty string.  In the
second, they will have values <code>foo.1</code>, <code>foo.1 bar.1</code>, and
<code>foo.1 bar.1</code> respectively.  In the third they will have values
<code>foo.1</code>, <code>foo.1 bar.1 foo.2 bar.2</code>, and <code>foo.1 bar.1
foo.2 bar.2</code> respectively.

   <p>Rules undergo secondary expansion in makefile order, except that
the rule with the command script is always evaluated last.

   <p>The variables <code>$$?</code> and <code>$$*</code> are not available and expand
to the empty string.

<h4 class="subheading">Secondary Expansion of Static Pattern Rules</h4>

<p><a name="index-secondary-expansion-and-static-pattern-rules-129"></a><a name="index-static-pattern-rules_002c-secondary-expansion-of-130"></a>
Rules for secondary expansion of static pattern rules are identical to
those for explicit rules, above, with one exception: for static
pattern rules the <code>$$*</code> variable is set to the pattern stem.  As
with explicit rules, <code>$$?</code> is not available and expands to the
empty string.

<h4 class="subheading">Secondary Expansion of Implicit Rules</h4>

<p><a name="index-secondary-expansion-and-implicit-rules-131"></a><a name="index-implicit-rules_002c-secondary-expansion-of-132"></a>
As <code>make</code> searches for an implicit rule, it substitutes the stem
and then performs secondary expansion for every rule with a matching
target pattern.  The value of the automatic variables is derived in
the same fashion as for static pattern rules.  As an example:

<pre class="example">     .SECONDEXPANSION:
     
     foo: bar
     
     foo foz: fo%: bo%
     
     %oo: $$&lt; $$^ $$+ $$*
</pre>
   <p>When the implicit rule is tried for target <span class="file">foo</span>, <code>$$&lt;</code>
expands to <span class="file">bar</span>, <code>$$^</code> expands to <span class="file">bar boo</span>,
<code>$$+</code> also expands to <span class="file">bar boo</span>, and <code>$$*</code> expands to
<span class="file">f</span>.

   <p>Note that the directory prefix (D), as described in <a href="#Implicit-Rule-Search">Implicit Rule Search Algorithm</a>, is appended (after
expansion) to all the patterns in the prerequisites list.  As an
example:

<pre class="example">     .SECONDEXPANSION:
     
     /tmp/foo.o:
     
     %.o: $$(addsuffix /%.c,foo bar) foo.h
</pre>
   <p>The prerequisite list after the secondary expansion and directory
prefix reconstruction will be <span class="file">/tmp/foo/foo.c /tmp/var/bar/foo.c
foo.h</span>.  If you are not interested in this reconstruction, you can use
<code>$$*</code> instead of <code>%</code> in the prerequisites list.

<div class="node">
<p><hr>
<a name="Rules"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Commands">Commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Makefiles">Makefiles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">4 Writing Rules</h2>

<p><a name="index-writing-rules-133"></a><a name="index-rule_002c-how-to-write-134"></a><a name="index-target-135"></a><a name="index-prerequisite-136"></a>
A <dfn>rule</dfn> appears in the makefile and says when and how to remake
certain files, called the rule's <dfn>targets</dfn> (most often only one per rule). 
It lists the other files that are the <dfn>prerequisites</dfn> of the target, and
<dfn>commands</dfn> to use to create or update the target.

   <p><a name="index-default-goal-137"></a><a name="index-goal_002c-default-138"></a>The order of rules is not significant, except for determining the
<dfn>default goal</dfn>: the target for <code>make</code> to consider, if you do
not otherwise specify one.  The default goal is the target of the first
rule in the first makefile.  If the first rule has multiple targets,
only the first target is taken as the default.  There are two
exceptions: a target starting with a period is not a default unless it
contains one or more slashes, <span class="samp">/</span>, as well; and, a target that
defines a pattern rule has no effect on the default goal. 
(See <a href="#Pattern-Rules">Defining and Redefining Pattern Rules</a>.)

   <p>Therefore, we usually write the makefile so that the first rule is the
one for compiling the entire program or all the programs described by
the makefile (often with a target called <span class="samp">all</span>). 
See <a href="#Goals">Arguments to Specify the Goals</a>.

<ul class="menu">
<li><a accesskey="1" href="#Rule-Example">Rule Example</a>:                 An example explained. 
<li><a accesskey="2" href="#Rule-Syntax">Rule Syntax</a>:                  General syntax explained. 
<li><a accesskey="3" href="#Prerequisite-Types">Prerequisite Types</a>:           There are two types of prerequisites. 
<li><a accesskey="4" href="#Wildcards">Wildcards</a>:                    Using wildcard characters such as `*'. 
<li><a accesskey="5" href="#Directory-Search">Directory Search</a>:             Searching other directories for source files. 
<li><a accesskey="6" href="#Phony-Targets">Phony Targets</a>:                Using a target that is not a real file's name. 
<li><a accesskey="7" href="#Force-Targets">Force Targets</a>:                You can use a target without commands
                                  or prerequisites to mark other targets
                                  as phony. 
<li><a accesskey="8" href="#Empty-Targets">Empty Targets</a>:                When only the date matters and the
                                  files are empty. 
<li><a accesskey="9" href="#Special-Targets">Special Targets</a>:              Targets with special built-in meanings. 
<li><a href="#Multiple-Targets">Multiple Targets</a>:             When to make use of several targets in a rule. 
<li><a href="#Multiple-Rules">Multiple Rules</a>:               How to use several rules with the same target. 
<li><a href="#Static-Pattern">Static Pattern</a>:               Static pattern rules apply to multiple targets
                                  and can vary the prerequisites according to
                                  the target name. 
<li><a href="#Double_002dColon">Double-Colon</a>:                 How to use a special kind of rule to allow
                                  several independent rules for one target. 
<li><a href="#Automatic-Prerequisites">Automatic Prerequisites</a>:      How to automatically generate rules giving
                                  prerequisites from source files themselves. 
</ul>

<div class="node">
<p><hr>
<a name="Rule-Example"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Rule-Syntax">Rule Syntax</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Rules">Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.1 Rule Example</h3>

<p>Here is an example of a rule:

<pre class="example">     foo.o : foo.c defs.h       # module for twiddling the frobs
             cc -c -g foo.c
</pre>
   <p>Its target is <span class="file">foo.o</span> and its prerequisites are <span class="file">foo.c</span> and
<span class="file">defs.h</span>.  It has one command, which is <span class="samp">cc -c -g foo.c</span>. 
The command line starts with a tab to identify it as a command.

   <p>This rule says two things:

     <ul>
<li>How to decide whether <span class="file">foo.o</span> is out of date: it is out of date
if it does not exist, or if either <span class="file">foo.c</span> or <span class="file">defs.h</span> is
more recent than it.

     <li>How to update the file <span class="file">foo.o</span>: by running <code>cc</code> as stated. 
The command does not explicitly mention <span class="file">defs.h</span>, but we presume
that <span class="file">foo.c</span> includes it, and that that is why <span class="file">defs.h</span> was
added to the prerequisites. 
</ul>

<div class="node">
<p><hr>
<a name="Rule-Syntax"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Prerequisite-Types">Prerequisite Types</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Rule-Example">Rule Example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.2 Rule Syntax</h3>

<p><a name="index-rule-syntax-139"></a><a name="index-syntax-of-rules-140"></a>In general, a rule looks like this:

<pre class="example">     <var>targets</var> : <var>prerequisites</var>
             <var>command</var>
             ...
</pre>
   <p class="noindent">or like this:

<pre class="example">     <var>targets</var> : <var>prerequisites</var> ; <var>command</var>
             <var>command</var>
             ...
</pre>
   <p><a name="index-targets-141"></a><a name="index-rule-targets-142"></a>The <var>targets</var> are file names, separated by spaces.  Wildcard
characters may be used (see <a href="#Wildcards">Using Wildcard Characters in File Names</a>) and a name of the form <var>a</var><span class="file">(</span><var>m</var><span class="file">)</span>
represents member <var>m</var> in archive file <var>a</var>
(see <a href="#Archive-Members">Archive Members as Targets</a>). 
Usually there is only one
target per rule, but occasionally there is a reason to have more
(see <a href="#Multiple-Targets">Multiple Targets in a Rule</a>).

   <p><a name="index-commands-143"></a><a name="index-tab-character-_0028in-commands_0029-144"></a>The <var>command</var> lines start with a tab character.  The first command may
appear on the line after the prerequisites, with a tab character, or may
appear on the same line, with a semicolon.  Either way, the effect is the
same.  There are other differences in the syntax of command lines. 
See <a href="#Commands">Writing the Commands in Rules</a>.

   <p><a name="index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-in-rules-145"></a><a name="index-_0040code_007b_0024_007d_002c-in-rules-146"></a><a name="index-rules_002c-and-_0040code_007b_0024_007d-147"></a>Because dollar signs are used to start <code>make</code> variable
references, if you really want a dollar sign in a target or
prerequisite you must write two of them, <span class="samp">$$</span> (see <a href="#Using-Variables">How to Use Variables</a>).  If you have enabled secondary
expansion (see <a href="#Secondary-Expansion">Secondary Expansion</a>) and you want a literal dollar
sign in the prerequisites lise, you must actually write <em>four</em>
dollar signs (<span class="samp">$$$$</span>).

   <p>You may split a long line by inserting a backslash followed by a
newline, but this is not required, as <code>make</code> places no limit on
the length of a line in a makefile.

   <p>A rule tells <code>make</code> two things: when the targets are out of date,
and how to update them when necessary.

   <p><a name="index-prerequisites-148"></a><a name="index-rule-prerequisites-149"></a>The criterion for being out of date is specified in terms of the
<var>prerequisites</var>, which consist of file names separated by spaces. 
(Wildcards and archive members (see <a href="#Archives">Archives</a>) are allowed here too.) 
A target is out of date if it does not exist or if it is older than any
of the prerequisites (by comparison of last-modification times).  The
idea is that the contents of the target file are computed based on
information in the prerequisites, so if any of the prerequisites changes,
the contents of the existing target file are no longer necessarily
valid.

   <p>How to update is specified by <var>commands</var>.  These are lines to be
executed by the shell (normally <span class="samp">sh</span>), but with some extra features
(see <a href="#Commands">Writing the Commands in Rules</a>).

<div class="node">
<p><hr>
<a name="Prerequisite-Types"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Wildcards">Wildcards</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Rule-Syntax">Rule Syntax</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">4.3 Types of Prerequisites</h3>

<p><a name="index-prerequisite-types-150"></a><a name="index-types-of-prerequisites-151"></a>
<a name="index-prerequisites_002c-normal-152"></a><a name="index-normal-prerequisites-153"></a><a name="index-prerequisites_002c-order_002donly-154"></a><a name="index-order_002donly-prerequisites-155"></a>There are actually two different types of prerequisites understood by
GNU <code>make</code>: normal prerequisites such as described in the
previous section, and <dfn>order-only</dfn> prerequisites.  A normal
prerequisite makes two statements: first, it imposes an order of
execution of build commands: any commands necessary to build any of a
target's prerequisites will be fully executed before any commands
necessary to build the target.  Second, it imposes a dependency
relationship: if any prerequisite is newer than the target, then the
target is considered out-of-date and must be rebuilt.

   <p>Normally, this is exactly what you want: if a target's prerequisite is
updated, then the target should also be updated.

   <p>Occasionally, however, you have a situation where you want to impose a
specific ordering on the rules to be invoked <em>without</em> forcing
the target to be updated if one of those rules is executed.  In that
case, you want to define <dfn>order-only</dfn> prerequisites.  Order-only
prerequisites can be specified by placing a pipe symbol (<code>|</code>)
in the prerequisites list: any prerequisites to the left of the pipe
symbol are normal; any prerequisites to the right are order-only:

<pre class="example">     <var>targets</var> : <var>normal-prerequisites</var> | <var>order-only-prerequisites</var>
</pre>
   <p>The normal prerequisites section may of course be empty.  Also, you
may still declare multiple lines of prerequisites for the same target:
they are appended appropriately.  Note that if you declare the same
file to be both a normal and an order-only prerequisite, the normal
prerequisite takes precedence (since they are a strict superset of the
behavior of an order-only prerequisite).

<div class="node">
<p><hr>
<a name="Wildcards"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Directory-Search">Directory Search</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Prerequisite-Types">Prerequisite Types</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.4 Using Wildcard Characters in File Names</h3>

<p><a name="index-wildcard-156"></a><a name="index-file-name-with-wildcards-157"></a><a name="index-globbing-_0028wildcards_0029-158"></a>
<a name="index-_0040code_007b_002a_007d-_0028wildcard-character_0029-159"></a><a name="index-_0040code_007b_003f_007d-_0028wildcard-character_0029-160"></a><a name="index-_0040code_007b_005b_0040dots_007b_007d_005d_007d-_0028wildcard-characters_0029-161"></a>A single file name can specify many files using <dfn>wildcard characters</dfn>. 
The wildcard characters in <code>make</code> are <span class="samp">*</span>, <span class="samp">?</span> and
<span class="samp">[...]</span>, the same as in the Bourne shell.  For example, <span class="file">*.c</span>
specifies a list of all the files (in the working directory) whose names
end in <span class="samp">.c</span>.

   <p><a name="index-_0040code_007b_007e_007d-_0028tilde_0029-162"></a><a name="index-tilde-_0028_0040code_007b_007e_007d_0029-163"></a><a name="index-home-directory-164"></a>The character <span class="samp">~</span> at the beginning of a file name also has special
significance.  If alone, or followed by a slash, it represents your home
directory.  For example <span class="file">~/bin</span> expands to <span class="file">/home/you/bin</span>. 
If the <span class="samp">~</span> is followed by a word, the string represents the home
directory of the user named by that word.  For example <span class="file">~john/bin</span>
expands to <span class="file">/home/john/bin</span>.  On systems which don't have a home
directory for each user (such as MS-DOS or MS-Windows), this
functionality can be simulated by setting the environment variable
<var>HOME</var>.

   <p>Wildcard expansion is performed by <code>make</code> automatically in
targets and in prerequisites.  In commands the shell is responsible
for wildcard expansion.  In other contexts, wildcard expansion happens
only if you request it explicitly with the <code>wildcard</code> function.

   <p>The special significance of a wildcard character can be turned off by
preceding it with a backslash.  Thus, <span class="file">foo\*bar</span> would refer to a
specific file whose name consists of <span class="samp">foo</span>, an asterisk, and
<span class="samp">bar</span>.

<ul class="menu">
<li><a accesskey="1" href="#Wildcard-Examples">Wildcard Examples</a>:            Several examples
<li><a accesskey="2" href="#Wildcard-Pitfall">Wildcard Pitfall</a>:             Problems to avoid. 
<li><a accesskey="3" href="#Wildcard-Function">Wildcard Function</a>:            How to cause wildcard expansion where
                                  it does not normally take place. 
</ul>

<div class="node">
<p><hr>
<a name="Wildcard-Examples"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Wildcard-Pitfall">Wildcard Pitfall</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Wildcards">Wildcards</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Wildcards">Wildcards</a>
<br>
</div>

<h4 class="subsection">4.4.1 Wildcard Examples</h4>

<p>Wildcards can be used in the commands of a rule, where they are expanded
by the shell.  For example, here is a rule to delete all the object files:

<pre class="example">     clean:
             rm -f *.o
</pre>
   <p><a name="index-_0040code_007brm_007d-_0028shell-command_0029-165"></a>
Wildcards are also useful in the prerequisites of a rule.  With the
following rule in the makefile, <span class="samp">make print</span> will print all the
<span class="samp">.c</span> files that have changed since the last time you printed them:

<pre class="example">     print: *.c
             lpr -p $?
             touch print
</pre>
   <p><a name="index-_0040code_007bprint_007d-target-166"></a><a name="index-_0040code_007blpr_007d-_0028shell-command_0029-167"></a><a name="index-_0040code_007btouch_007d-_0028shell-command_0029-168"></a>This rule uses <span class="file">print</span> as an empty target file; see <a href="#Empty-Targets">Empty Target Files to Record Events</a>.  (The automatic variable
<span class="samp">$?</span> is used to print only those files that have changed; see
<a href="#Automatic-Variables">Automatic Variables</a>.)

   <p>Wildcard expansion does not happen when you define a variable.  Thus, if
you write this:

<pre class="example">     objects = *.o
</pre>
   <p class="noindent">then the value of the variable <code>objects</code> is the actual string
<span class="samp">*.o</span>.  However, if you use the value of <code>objects</code> in a target,
prerequisite or command, wildcard expansion will take place at that time. 
To set <code>objects</code> to the expansion, instead use:

<pre class="example">     objects := $(wildcard *.o)
</pre>
   <p class="noindent">See <a href="#Wildcard-Function">Wildcard Function</a>.

<div class="node">
<p><hr>
<a name="Wildcard-Pitfall"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Wildcard-Function">Wildcard Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Wildcard-Examples">Wildcard Examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Wildcards">Wildcards</a>
<br>
</div>

<h4 class="subsection">4.4.2 Pitfalls of Using Wildcards</h4>

<p><a name="index-wildcard-pitfalls-169"></a><a name="index-pitfalls-of-wildcards-170"></a><a name="index-mistakes-with-wildcards-171"></a><a name="index-errors-with-wildcards-172"></a><a name="index-problems-with-wildcards-173"></a>
Now here is an example of a naive way of using wildcard expansion, that
does not do what you would intend.  Suppose you would like to say that the
executable file <span class="file">foo</span> is made from all the object files in the
directory, and you write this:

<pre class="example">     objects = *.o
     
     foo : $(objects)
             cc -o foo $(CFLAGS) $(objects)
</pre>
   <p class="noindent">The value of <code>objects</code> is the actual string <span class="samp">*.o</span>.  Wildcard
expansion happens in the rule for <span class="file">foo</span>, so that each <em>existing</em>
<span class="samp">.o</span> file becomes a prerequisite of <span class="file">foo</span> and will be recompiled if
necessary.

   <p>But what if you delete all the <span class="samp">.o</span> files?  When a wildcard matches
no files, it is left as it is, so then <span class="file">foo</span> will depend on the
oddly-named file <span class="file">*.o</span>.  Since no such file is likely to exist,
<code>make</code> will give you an error saying it cannot figure out how to
make <span class="file">*.o</span>.  This is not what you want!

   <p>Actually it is possible to obtain the desired result with wildcard
expansion, but you need more sophisticated techniques, including the
<code>wildcard</code> function and string substitution. 
See <a href="#Wildcard-Function">The Function <code>wildcard</code></a>.

   <p><a name="index-wildcards-and-MS_002dDOS_002fMS_002dWindows-backslashes-174"></a><a name="index-backslashes-in-pathnames-and-wildcard-expansion-175"></a>
Microsoft operating systems (MS-DOS and MS-Windows) use backslashes to
separate directories in pathnames, like so:

<pre class="example">       c:\foo\bar\baz.c
</pre>
   <p>This is equivalent to the Unix-style <span class="file">c:/foo/bar/baz.c</span> (the
<span class="file">c:</span> part is the so-called drive letter).  When <code>make</code> runs on
these systems, it supports backslashes as well as the Unix-style forward
slashes in pathnames.  However, this support does <em>not</em> include the
wildcard expansion, where backslash is a quote character.  Therefore,
you <em>must</em> use Unix-style slashes in these cases.

<div class="node">
<p><hr>
<a name="Wildcard-Function"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Wildcard-Pitfall">Wildcard Pitfall</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Wildcards">Wildcards</a>
<br>
</div>

<h4 class="subsection">4.4.3 The Function <code>wildcard</code></h4>

<p><a name="index-wildcard-176"></a>
Wildcard expansion happens automatically in rules.  But wildcard expansion
does not normally take place when a variable is set, or inside the
arguments of a function.  If you want to do wildcard expansion in such
places, you need to use the <code>wildcard</code> function, like this:

<pre class="example">     $(wildcard <var>pattern</var>...)
</pre>
   <p class="noindent">This string, used anywhere in a makefile, is replaced by a
space-separated list of names of existing files that match one of the
given file name patterns.  If no existing file name matches a pattern,
then that pattern is omitted from the output of the <code>wildcard</code>
function.  Note that this is different from how unmatched wildcards
behave in rules, where they are used verbatim rather than ignored
(see <a href="#Wildcard-Pitfall">Wildcard Pitfall</a>).

   <p>One use of the <code>wildcard</code> function is to get a list of all the C source
files in a directory, like this:

<pre class="example">     $(wildcard *.c)
</pre>
   <p>We can change the list of C source files into a list of object files by
replacing the <span class="samp">.c</span> suffix with <span class="samp">.o</span> in the result, like this:

<pre class="example">     $(patsubst %.c,%.o,$(wildcard *.c))
</pre>
   <p class="noindent">(Here we have used another function, <code>patsubst</code>. 
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.)

   <p>Thus, a makefile to compile all C source files in the directory and then
link them together could be written as follows:

<pre class="example">     objects := $(patsubst %.c,%.o,$(wildcard *.c))
     
     foo : $(objects)
             cc -o foo $(objects)
</pre>
   <p class="noindent">(This takes advantage of the implicit rule for compiling C programs, so
there is no need to write explicit rules for compiling the files. 
See <a href="#Flavors">The Two Flavors of Variables</a>, for an explanation of
<span class="samp">:=</span>, which is a variant of <span class="samp">=</span>.)

<div class="node">
<p><hr>
<a name="Directory-Search"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Phony-Targets">Phony Targets</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Wildcards">Wildcards</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.5 Searching Directories for Prerequisites</h3>

<p><a name="index-VPATH-177"></a><a name="index-vpath-178"></a><a name="index-vpath-179"></a><a name="index-search-path-for-prerequisites-_0028_0040code_007bVPATH_007d_0029-180"></a><a name="index-directory-search-_0028_0040code_007bVPATH_007d_0029-181"></a>
For large systems, it is often desirable to put sources in a separate
directory from the binaries.  The <dfn>directory search</dfn> features of
<code>make</code> facilitate this by searching several directories
automatically to find a prerequisite.  When you redistribute the files
among directories, you do not need to change the individual rules,
just the search paths.

<ul class="menu">
<li><a accesskey="1" href="#General-Search">General Search</a>:               Specifying a search path that applies
                                  to every prerequisite. 
<li><a accesskey="2" href="#Selective-Search">Selective Search</a>:             Specifying a search path
                                  for a specified class of names. 
<li><a accesskey="3" href="#Search-Algorithm">Search Algorithm</a>:             When and how search paths are applied. 
<li><a accesskey="4" href="#Commands_002fSearch">Commands/Search</a>:              How to write shell commands that work together
                                  with search paths. 
<li><a accesskey="5" href="#Implicit_002fSearch">Implicit/Search</a>:              How search paths affect implicit rules. 
<li><a accesskey="6" href="#Libraries_002fSearch">Libraries/Search</a>:             Directory search for link libraries. 
</ul>

<div class="node">
<p><hr>
<a name="General-Search"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Selective-Search">Selective Search</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Directory-Search">Directory Search</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directory-Search">Directory Search</a>
<br>
</div>

<h4 class="subsection">4.5.1 <code>VPATH</code>: Search Path for All Prerequisites</h4>

<p><a name="index-VPATH-182"></a>
The value of the <code>make</code> variable <code>VPATH</code> specifies a list of
directories that <code>make</code> should search.  Most often, the
directories are expected to contain prerequisite files that are not in the
current directory; however, <code>make</code> uses <code>VPATH</code> as a search
list for both prerequisites and targets of rules.

   <p>Thus, if a file that is listed as a target or prerequisite does not exist
in the current directory, <code>make</code> searches the directories listed in
<code>VPATH</code> for a file with that name.  If a file is found in one of
them, that file may become the prerequisite (see below).  Rules may then
specify the names of files in the prerequisite list as if they all
existed in the current directory.  See <a href="#Commands_002fSearch">Writing Shell Commands with Directory Search</a>.

   <p>In the <code>VPATH</code> variable, directory names are separated by colons or
blanks.  The order in which directories are listed is the order followed
by <code>make</code> in its search.  (On MS-DOS and MS-Windows, semi-colons
are used as separators of directory names in <code>VPATH</code>, since the
colon can be used in the pathname itself, after the drive letter.)

   <p>For example,

<pre class="example">     VPATH = src:../headers
</pre>
   <p class="noindent">specifies a path containing two directories, <span class="file">src</span> and
<span class="file">../headers</span>, which <code>make</code> searches in that order.

   <p>With this value of <code>VPATH</code>, the following rule,

<pre class="example">     foo.o : foo.c
</pre>
   <p class="noindent">is interpreted as if it were written like this:

<pre class="example">     foo.o : src/foo.c
</pre>
   <p class="noindent">assuming the file <span class="file">foo.c</span> does not exist in the current directory but
is found in the directory <span class="file">src</span>.

<div class="node">
<p><hr>
<a name="Selective-Search"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Search-Algorithm">Search Algorithm</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#General-Search">General Search</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directory-Search">Directory Search</a>
<br>
</div>

<h4 class="subsection">4.5.2 The <code>vpath</code> Directive</h4>

<p><a name="index-vpath-183"></a>
Similar to the <code>VPATH</code> variable, but more selective, is the
<code>vpath</code> directive (note lower case), which allows you to specify a
search path for a particular class of file names: those that match a
particular pattern.  Thus you can supply certain search directories for
one class of file names and other directories (or none) for other file
names.

   <p>There are three forms of the <code>vpath</code> directive:

     <dl>
<dt><code>vpath </code><var>pattern</var> <var>directories</var><dd>Specify the search path <var>directories</var> for file names that match
<var>pattern</var>.

     <p>The search path, <var>directories</var>, is a list of directories to be
searched, separated by colons (semi-colons on MS-DOS and MS-Windows) or
blanks, just like the search path used in the <code>VPATH</code> variable.

     <br><dt><code>vpath </code><var>pattern</var><dd>Clear out the search path associated with <var>pattern</var>.

     <!-- Extra blank line makes sure this gets two lines. -->
<br><dt><code>vpath</code><dd>
Clear all search paths previously specified with <code>vpath</code> directives. 
</dl>

   <p>A <code>vpath</code> pattern is a string containing a <span class="samp">%</span> character.  The
string must match the file name of a prerequisite that is being searched
for, the <span class="samp">%</span> character matching any sequence of zero or more
characters (as in pattern rules; see <a href="#Pattern-Rules">Defining and Redefining Pattern Rules</a>).  For example, <code>%.h</code> matches files that
end in <code>.h</code>.  (If there is no <span class="samp">%</span>, the pattern must match the
prerequisite exactly, which is not useful very often.)

   <p><a name="index-_0040code_007b_0025_007d_002c-quoting-in-_0040code_007bvpath_007d-184"></a><a name="index-_0040code_007b_0025_007d_002c-quoting-with-_0040code_007b_005c_007d-_0028backslash_0029-185"></a><a name="index-_0040code_007b_005c_007d-_0028backslash_0029_002c-to-quote-_0040code_007b_0025_007d-186"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-to-quote-_0040code_007b_0025_007d-187"></a><a name="index-quoting-_0040code_007b_0025_007d_002c-in-_0040code_007bvpath_007d-188"></a><span class="samp">%</span> characters in a <code>vpath</code> directive's pattern can be quoted
with preceding backslashes (<span class="samp">\</span>).  Backslashes that would otherwise
quote <span class="samp">%</span> characters can be quoted with more backslashes. 
Backslashes that quote <span class="samp">%</span> characters or other backslashes are
removed from the pattern before it is compared to file names.  Backslashes
that are not in danger of quoting <span class="samp">%</span> characters go unmolested.

   <p>When a prerequisite fails to exist in the current directory, if the
<var>pattern</var> in a <code>vpath</code> directive matches the name of the
prerequisite file, then the <var>directories</var> in that directive are searched
just like (and before) the directories in the <code>VPATH</code> variable.

   <p>For example,

<pre class="example">     vpath %.h ../headers
</pre>
   <p class="noindent">tells <code>make</code> to look for any prerequisite whose name ends in <span class="file">.h</span>
in the directory <span class="file">../headers</span> if the file is not found in the current
directory.

   <p>If several <code>vpath</code> patterns match the prerequisite file's name, then
<code>make</code> processes each matching <code>vpath</code> directive one by one,
searching all the directories mentioned in each directive.  <code>make</code>
handles multiple <code>vpath</code> directives in the order in which they
appear in the makefile; multiple directives with the same pattern are
independent of each other.

   <p>Thus,

<pre class="example">     vpath %.c foo
     vpath %   blish
     vpath %.c bar
</pre>
   <p class="noindent">will look for a file ending in <span class="samp">.c</span> in <span class="file">foo</span>, then
<span class="file">blish</span>, then <span class="file">bar</span>, while

<pre class="example">     vpath %.c foo:bar
     vpath %   blish
</pre>
   <p class="noindent">will look for a file ending in <span class="samp">.c</span> in <span class="file">foo</span>, then
<span class="file">bar</span>, then <span class="file">blish</span>.

<div class="node">
<p><hr>
<a name="Search-Algorithm"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Commands_002fSearch">Commands/Search</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Selective-Search">Selective Search</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directory-Search">Directory Search</a>
<br>
</div>

<h4 class="subsection">4.5.3 How Directory Searches are Performed</h4>

<p><a name="index-algorithm-for-directory-search-189"></a><a name="index-directory-search-algorithm-190"></a>
When a prerequisite is found through directory search, regardless of type
(general or selective), the pathname located may not be the one that
<code>make</code> actually provides you in the prerequisite list.  Sometimes
the path discovered through directory search is thrown away.

   <p>The algorithm <code>make</code> uses to decide whether to keep or abandon a
path found via directory search is as follows:

     <ol type=1 start=1>
<li>If a target file does not exist at the path specified in the makefile,
directory search is performed.

     <li>If the directory search is successful, that path is kept and this file
is tentatively stored as the target.

     <li>All prerequisites of this target are examined using this same method.

     <li>After processing the prerequisites, the target may or may not need to be
rebuilt:

          <ol type=a start=1>
<li>If the target does <em>not</em> need to be rebuilt, the path to the file
found during directory search is used for any prerequisite lists which
contain this target.  In short, if <code>make</code> doesn't need to rebuild
the target then you use the path found via directory search.

          <li>If the target <em>does</em> need to be rebuilt (is out-of-date), the
pathname found during directory search is <em>thrown away</em>, and the
target is rebuilt using the file name specified in the makefile.  In
short, if <code>make</code> must rebuild, then the target is rebuilt locally,
not in the directory found via directory search.
          </ol>
        </ol>

   <p>This algorithm may seem complex, but in practice it is quite often
exactly what you want.

   <p><a name="index-traditional-directory-search-_0028GPATH_0029-191"></a><a name="index-directory-search_002c-traditional-_0028GPATH_0029-192"></a>Other versions of <code>make</code> use a simpler algorithm: if the file does
not exist, and it is found via directory search, then that pathname is
always used whether or not the target needs to be built.  Thus, if the
target is rebuilt it is created at the pathname discovered during
directory search.

   <p><a name="index-GPATH-193"></a>If, in fact, this is the behavior you want for some or all of your
directories, you can use the <code>GPATH</code> variable to indicate this to
<code>make</code>.

   <p><code>GPATH</code> has the same syntax and format as <code>VPATH</code> (that is, a
space- or colon-delimited list of pathnames).  If an out-of-date target
is found by directory search in a directory that also appears in
<code>GPATH</code>, then that pathname is not thrown away.  The target is
rebuilt using the expanded path.

<div class="node">
<p><hr>
<a name="Commands_002fSearch"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Implicit_002fSearch">Implicit/Search</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Search-Algorithm">Search Algorithm</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directory-Search">Directory Search</a>
<br>
</div>

<h4 class="subsection">4.5.4 Writing Shell Commands with Directory Search</h4>

<p><a name="index-shell-command_002c-and-directory-search-194"></a><a name="index-directory-search-_0028_0040code_007bVPATH_007d_0029_002c-and-shell-commands-195"></a>
When a prerequisite is found in another directory through directory search,
this cannot change the commands of the rule; they will execute as written. 
Therefore, you must write the commands with care so that they will look for
the prerequisite in the directory where <code>make</code> finds it.

   <p>This is done with the <dfn>automatic variables</dfn> such as <span class="samp">$^</span>
(see <a href="#Automatic-Variables">Automatic Variables</a>). 
For instance, the value of <span class="samp">$^</span> is a
list of all the prerequisites of the rule, including the names of
the directories in which they were found, and the value of
<span class="samp">$@</span> is the target.  Thus:

<pre class="example">     foo.o : foo.c
             cc -c $(CFLAGS) $^ -o $@
</pre>
   <p class="noindent">(The variable <code>CFLAGS</code> exists so you can specify flags for C
compilation by implicit rules; we use it here for consistency so it will
affect all C compilations uniformly;
see <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>.)

   <p>Often the prerequisites include header files as well, which you do not
want to mention in the commands.  The automatic variable <span class="samp">$&lt;</span> is
just the first prerequisite:

<pre class="example">     VPATH = src:../headers
     foo.o : foo.c defs.h hack.h
             cc -c $(CFLAGS) $&lt; -o $@
</pre>
   <div class="node">
<p><hr>
<a name="Implicit_002fSearch"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Libraries_002fSearch">Libraries/Search</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Commands_002fSearch">Commands/Search</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directory-Search">Directory Search</a>
<br>
</div>

<h4 class="subsection">4.5.5 Directory Search and Implicit Rules</h4>

<p><a name="index-_0040code_007bVPATH_007d_002c-and-implicit-rules-196"></a><a name="index-directory-search-_0028_0040code_007bVPATH_007d_0029_002c-and-implicit-rules-197"></a><a name="index-search-path-for-prerequisites-_0028_0040code_007bVPATH_007d_0029_002c-and-implicit-rules-198"></a><a name="index-implicit-rule_002c-and-directory-search-199"></a><a name="index-implicit-rule_002c-and-_0040code_007bVPATH_007d-200"></a><a name="index-rule_002c-implicit_002c-and-directory-search-201"></a><a name="index-rule_002c-implicit_002c-and-_0040code_007bVPATH_007d-202"></a>
The search through the directories specified in <code>VPATH</code> or with
<code>vpath</code> also happens during consideration of implicit rules
(see <a href="#Implicit-Rules">Using Implicit Rules</a>).

   <p>For example, when a file <span class="file">foo.o</span> has no explicit rule, <code>make</code>
considers implicit rules, such as the built-in rule to compile
<span class="file">foo.c</span> if that file exists.  If such a file is lacking in the
current directory, the appropriate directories are searched for it.  If
<span class="file">foo.c</span> exists (or is mentioned in the makefile) in any of the
directories, the implicit rule for C compilation is applied.

   <p>The commands of implicit rules normally use automatic variables as a
matter of necessity; consequently they will use the file names found by
directory search with no extra effort.

<div class="node">
<p><hr>
<a name="Libraries_002fSearch"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Implicit_002fSearch">Implicit/Search</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Directory-Search">Directory Search</a>
<br>
</div>

<h4 class="subsection">4.5.6 Directory Search for Link Libraries</h4>

<p><a name="index-link-libraries_002c-and-directory-search-203"></a><a name="index-libraries-for-linking_002c-directory-search-204"></a><a name="index-directory-search-_0028_0040code_007bVPATH_007d_0029_002c-and-link-libraries-205"></a><a name="index-_0040code_007bVPATH_007d_002c-and-link-libraries-206"></a><a name="index-search-path-for-prerequisites-_0028_0040code_007bVPATH_007d_0029_002c-and-link-libraries-207"></a><a name="index-_0040code_007b_002dl_007d-_0028library-search_0029-208"></a><a name="index-link-libraries_002c-patterns-matching-209"></a><a name="index-_0040code_007b_002eLIBPATTERNS_007d_002c-and-link-libraries-210"></a><a name="index-_002eLIBPATTERNS-211"></a>
Directory search applies in a special way to libraries used with the
linker.  This special feature comes into play when you write a prerequisite
whose name is of the form <span class="samp">-l</span><var>name</var>.  (You can tell something
strange is going on here because the prerequisite is normally the name of a
file, and the <em>file name</em> of a library generally looks like
<span class="file">lib</span><var>name</var><span class="file">.a</span>, not like <span class="samp">-l</span><var>name</var>.)

   <p>When a prerequisite's name has the form <span class="samp">-l</span><var>name</var>, <code>make</code>
handles it specially by searching for the file <span class="file">lib</span><var>name</var><span class="file">.so</span> in
the current directory, in directories specified by matching <code>vpath</code>
search paths and the <code>VPATH</code> search path, and then in the
directories <span class="file">/lib</span>, <span class="file">/usr/lib</span>, and <var>prefix</var><span class="file">/lib</span>
(normally <span class="file">/usr/local/lib</span>, but MS-DOS/MS-Windows versions of
<code>make</code> behave as if <var>prefix</var> is defined to be the root of the
DJGPP installation tree).

   <p>If that file is not found, then the file <span class="file">lib</span><var>name</var><span class="file">.a</span> is
searched for, in the same directories as above.

   <p>For example, if there is a <span class="file">/usr/lib/libcurses.a</span> library on your
system (and no <span class="file">/usr/lib/libcurses.so</span> file), then

<pre class="example">     foo : foo.c -lcurses
             cc $^ -o $@
</pre>
   <p class="noindent">would cause the command <span class="samp">cc foo.c /usr/lib/libcurses.a -o foo</span> to
be executed when <span class="file">foo</span> is older than <span class="file">foo.c</span> or than
<span class="file">/usr/lib/libcurses.a</span>.

   <p>Although the default set of files to be searched for is
<span class="file">lib</span><var>name</var><span class="file">.so</span> and <span class="file">lib</span><var>name</var><span class="file">.a</span>, this is customizable
via the <code>.LIBPATTERNS</code> variable.  Each word in the value of this
variable is a pattern string.  When a prerequisite like
<span class="samp">-l</span><var>name</var> is seen, <code>make</code> will replace the percent in
each pattern in the list with <var>name</var> and perform the above directory
searches using that library filename.  If no library is found, the next
word in the list will be used.

   <p>The default value for <code>.LIBPATTERNS</code> is <span class="samp">lib%.so lib%.a</span>,
which provides the default behavior described above.

   <p>You can turn off link library expansion completely by setting this
variable to an empty value.

<div class="node">
<p><hr>
<a name="Phony-Targets"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Force-Targets">Force Targets</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Directory-Search">Directory Search</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.6 Phony Targets</h3>

<p><a name="index-phony-targets-212"></a><a name="index-targets_002c-phony-213"></a><a name="index-targets-without-a-file-214"></a>
A phony target is one that is not really the name of a file.  It is just a
name for some commands to be executed when you make an explicit request. 
There are two reasons to use a phony target: to avoid a conflict with
a file of the same name, and to improve performance.

   <p>If you write a rule whose commands will not create the target file, the
commands will be executed every time the target comes up for remaking. 
Here is an example:

<pre class="example">     clean:
             rm *.o temp
</pre>
   <p class="noindent">Because the <code>rm</code> command does not create a file named <span class="file">clean</span>,
probably no such file will ever exist.  Therefore, the <code>rm</code> command
will be executed every time you say <span class="samp">make clean</span>. 
<a name="index-_0040code_007brm_007d-_0028shell-command_0029-215"></a>
<a name="index-_002ePHONY-216"></a>The phony target will cease to work if anything ever does create a file
named <span class="file">clean</span> in this directory.  Since it has no prerequisites, the
file <span class="file">clean</span> would inevitably be considered up to date, and its
commands would not be executed.  To avoid this problem, you can explicitly
declare the target to be phony, using the special target <code>.PHONY</code>
(see <a href="#Special-Targets">Special Built-in Target Names</a>) as follows:

<pre class="example">     .PHONY : clean
</pre>
   <p class="noindent">Once this is done, <span class="samp">make clean</span> will run the commands regardless of
whether there is a file named <span class="file">clean</span>.

   <p>Since it knows that phony targets do not name actual files that could be
remade from other files, <code>make</code> skips the implicit rule search for
phony targets (see <a href="#Implicit-Rules">Implicit Rules</a>).  This is why declaring a target
phony is good for performance, even if you are not worried about the
actual file existing.

   <p>Thus, you first write the line that states that <code>clean</code> is a
phony target, then you write the rule, like this:

<pre class="example">     .PHONY: clean
     clean:
             rm *.o temp
</pre>
   <p>Another example of the usefulness of phony targets is in conjunction
with recursive invocations of <code>make</code> (for more information, see
<a href="#Recursion">Recursive Use of <code>make</code></a>).  In this case the
makefile will often contain a variable which lists a number of
subdirectories to be built.  One way to handle this is with one rule
whose command is a shell loop over the subdirectories, like this:

<pre class="example">     SUBDIRS = foo bar baz
     
     subdirs:
             for dir in $(SUBDIRS); do \
               $(MAKE) -C $$dir; \
             done
</pre>
   <p>There are a few problems with this method, however.  First, any error
detected in a submake is not noted by this rule, so it will continue to
build the rest of the directories even when one fails.  This can be
overcome by adding shell commands to note the error and exit, but then
it will do so even if <code>make</code> is invoked with the <code>-k</code> option,
which is unfortunate.  Second, and perhaps more importantly, you cannot
take advantage of <code>make</code>'s ability to build targets in parallel
(see <a href="#Parallel">Parallel Execution</a>), since there is only one rule.

   <p>By declaring the subdirectories as phony targets (you must do this as
the subdirectory obviously always exists; otherwise it won't be built)
you can remove these problems:

<pre class="example">     SUBDIRS = foo bar baz
     
     .PHONY: subdirs $(SUBDIRS)
     
     subdirs: $(SUBDIRS)
     
     $(SUBDIRS):
             $(MAKE) -C $@
     
     foo: baz
</pre>
   <p>Here we've also declared that the <span class="file">foo</span> subdirectory cannot be
built until after the <span class="file">baz</span> subdirectory is complete; this kind of
relationship declaration is particularly important when attempting
parallel builds.

   <p>A phony target should not be a prerequisite of a real target file; if it
is, its commands are run every time <code>make</code> goes to update that
file.  As long as a phony target is never a prerequisite of a real
target, the phony target commands will be executed only when the phony
target is a specified goal (see <a href="#Goals">Arguments to Specify the Goals</a>).

   <p>Phony targets can have prerequisites.  When one directory contains multiple
programs, it is most convenient to describe all of the programs in one
makefile <span class="file">./Makefile</span>.  Since the target remade by default will be the
first one in the makefile, it is common to make this a phony target named
<span class="samp">all</span> and give it, as prerequisites, all the individual programs.  For
example:

<pre class="example">     all : prog1 prog2 prog3
     .PHONY : all
     
     prog1 : prog1.o utils.o
             cc -o prog1 prog1.o utils.o
     
     prog2 : prog2.o
             cc -o prog2 prog2.o
     
     prog3 : prog3.o sort.o utils.o
             cc -o prog3 prog3.o sort.o utils.o
</pre>
   <p class="noindent">Now you can say just <span class="samp">make</span> to remake all three programs, or
specify as arguments the ones to remake (as in <span class="samp">make prog1
prog3</span>).  Phoniness is not inherited: the prerequisites of a phony
target are not themselves phony, unless explicitly declared to be so.

   <p>When one phony target is a prerequisite of another, it serves as a subroutine
of the other.  For example, here <span class="samp">make cleanall</span> will delete the
object files, the difference files, and the file <span class="file">program</span>:

<pre class="example">     .PHONY: cleanall cleanobj cleandiff
     
     cleanall : cleanobj cleandiff
             rm program
     
     cleanobj :
             rm *.o
     
     cleandiff :
             rm *.diff
</pre>
   <div class="node">
<p><hr>
<a name="Force-Targets"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Empty-Targets">Empty Targets</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Phony-Targets">Phony Targets</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.7 Rules without Commands or Prerequisites</h3>

<p><a name="index-force-targets-217"></a><a name="index-targets_002c-force-218"></a><a name="index-_0040code_007bFORCE_007d-219"></a><a name="index-rule_002c-no-commands-or-prerequisites-220"></a>
If a rule has no prerequisites or commands, and the target of the rule
is a nonexistent file, then <code>make</code> imagines this target to have
been updated whenever its rule is run.  This implies that all targets
depending on this one will always have their commands run.

   <p>An example will illustrate this:

<pre class="example">     clean: FORCE
             rm $(objects)
     FORCE:
</pre>
   <p>Here the target <span class="samp">FORCE</span> satisfies the special conditions, so the
target <span class="file">clean</span> that depends on it is forced to run its commands. 
There is nothing special about the name <span class="samp">FORCE</span>, but that is one name
commonly used this way.

   <p>As you can see, using <span class="samp">FORCE</span> this way has the same results as using
<span class="samp">.PHONY: clean</span>.

   <p>Using <span class="samp">.PHONY</span> is more explicit and more efficient.  However,
other versions of <code>make</code> do not support <span class="samp">.PHONY</span>; thus
<span class="samp">FORCE</span> appears in many makefiles.  See <a href="#Phony-Targets">Phony Targets</a>.

<div class="node">
<p><hr>
<a name="Empty-Targets"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Special-Targets">Special Targets</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Force-Targets">Force Targets</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.8 Empty Target Files to Record Events</h3>

<p><a name="index-empty-targets-221"></a><a name="index-targets_002c-empty-222"></a><a name="index-recording-events-with-empty-targets-223"></a>
The <dfn>empty target</dfn> is a variant of the phony target; it is used to hold
commands for an action that you request explicitly from time to time. 
Unlike a phony target, this target file can really exist; but the file's
contents do not matter, and usually are empty.

   <p>The purpose of the empty target file is to record, with its
last-modification time, when the rule's commands were last executed.  It
does so because one of the commands is a <code>touch</code> command to update the
target file.

   <p>The empty target file should have some prerequisites (otherwise it
doesn't make sense).  When you ask to remake the empty target, the
commands are executed if any prerequisite is more recent than the target;
in other words, if a prerequisite has changed since the last time you
remade the target.  Here is an example:

<pre class="example">     print: foo.c bar.c
             lpr -p $?
             touch print
</pre>
   <p><a name="index-_0040code_007bprint_007d-target-224"></a><a name="index-_0040code_007blpr_007d-_0028shell-command_0029-225"></a><a name="index-_0040code_007btouch_007d-_0028shell-command_0029-226"></a>
With this rule, <span class="samp">make print</span> will execute the <code>lpr</code> command if
either source file has changed since the last <span class="samp">make print</span>.  The
automatic variable <span class="samp">$?</span> is used to print only those files that have
changed (see <a href="#Automatic-Variables">Automatic Variables</a>).

<div class="node">
<p><hr>
<a name="Special-Targets"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Multiple-Targets">Multiple Targets</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Empty-Targets">Empty Targets</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.9 Special Built-in Target Names</h3>

<p><a name="index-special-targets-227"></a><a name="index-built_002din-special-targets-228"></a><a name="index-targets_002c-built_002din-special-229"></a>
Certain names have special meanings if they appear as targets.

     
<a name="index-_002ePHONY-230"></a>
<dl><dt><code>.PHONY</code><dd>
The prerequisites of the special target <code>.PHONY</code> are considered to
be phony targets.  When it is time to consider such a target,
<code>make</code> will run its commands unconditionally, regardless of
whether a file with that name exists or what its last-modification
time is.  See <a href="#Phony-Targets">Phony Targets</a>.

     <p><a name="index-_002eSUFFIXES-231"></a><br><dt><code>.SUFFIXES</code><dd>
The prerequisites of the special target <code>.SUFFIXES</code> are the list
of suffixes to be used in checking for suffix rules. 
See <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>.

     <p><a name="index-_002eDEFAULT-232"></a><br><dt><code>.DEFAULT</code><dd>
The commands specified for <code>.DEFAULT</code> are used for any target for
which no rules are found (either explicit rules or implicit rules). 
See <a href="#Last-Resort">Last Resort</a>.  If <code>.DEFAULT</code> commands are specified, every
file mentioned as a prerequisite, but not as a target in a rule, will have
these commands executed on its behalf.  See <a href="#Implicit-Rule-Search">Implicit Rule Search Algorithm</a>.

     <p><a name="index-_002ePRECIOUS-233"></a><br><dt><code>.PRECIOUS</code><dd><a name="index-precious-targets-234"></a><a name="index-preserving-with-_0040code_007b_002ePRECIOUS_007d-235"></a>
The targets which <code>.PRECIOUS</code> depends on are given the following
special treatment: if <code>make</code> is killed or interrupted during the
execution of their commands, the target is not deleted. 
See <a href="#Interrupts">Interrupting or Killing <code>make</code></a>.  Also, if the
target is an intermediate file, it will not be deleted after it is no
longer needed, as is normally done.  See <a href="#Chained-Rules">Chains of Implicit Rules</a>.  In this latter respect it overlaps with the
<code>.SECONDARY</code> special target.

     <p>You can also list the target pattern of an implicit rule (such as
<span class="samp">%.o</span>) as a prerequisite file of the special target <code>.PRECIOUS</code>
to preserve intermediate files created by rules whose target patterns
match that file's name.

     <p><a name="index-_002eINTERMEDIATE-236"></a><br><dt><code>.INTERMEDIATE</code><dd><a name="index-intermediate-targets_002c-explicit-237"></a>
The targets which <code>.INTERMEDIATE</code> depends on are treated as
intermediate files.  See <a href="#Chained-Rules">Chains of Implicit Rules</a>. 
<code>.INTERMEDIATE</code> with no prerequisites has no effect.

     <p><a name="index-_002eSECONDARY-238"></a><br><dt><code>.SECONDARY</code><dd><a name="index-secondary-targets-239"></a><a name="index-preserving-with-_0040code_007b_002eSECONDARY_007d-240"></a>
The targets which <code>.SECONDARY</code> depends on are treated as
intermediate files, except that they are never automatically deleted. 
See <a href="#Chained-Rules">Chains of Implicit Rules</a>.

     <p><code>.SECONDARY</code> with no prerequisites causes all targets to be treated
as secondary (i.e., no target is removed because it is considered
intermediate).

     <p><a name="index-_002eSECONDEXPANSION-241"></a><br><dt><code>.SECONDEXPANSION</code><dd>
If <code>.SECONDEXPANSION</code> is mentioned as a target anywhere in the
makefile, then all prerequisite lists defined <em>after</em> it appears
will be expanded a second time after all makefiles have been read in. 
See <a href="#Secondary-Expansion">Secondary Expansion</a>.

     <p>The prerequisites of the special target <code>.SUFFIXES</code> are the list
of suffixes to be used in checking for suffix rules. 
See <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>.

     <p><a name="index-_002eDELETE_005fON_005fERROR-242"></a><br><dt><code>.DELETE_ON_ERROR</code><dd><a name="index-removing-targets-on-failure-243"></a>
If <code>.DELETE_ON_ERROR</code> is mentioned as a target anywhere in the
makefile, then <code>make</code> will delete the target of a rule if it has
changed and its commands exit with a nonzero exit status, just as it
does when it receives a signal.  See <a href="#Errors">Errors in Commands</a>.

     <p><a name="index-_002eIGNORE-244"></a><br><dt><code>.IGNORE</code><dd>
If you specify prerequisites for <code>.IGNORE</code>, then <code>make</code> will
ignore errors in execution of the commands run for those particular
files.  The commands for <code>.IGNORE</code> are not meaningful.

     <p>If mentioned as a target with no prerequisites, <code>.IGNORE</code> says to
ignore errors in execution of commands for all files.  This usage of
<span class="samp">.IGNORE</span> is supported only for historical compatibility.  Since
this affects every command in the makefile, it is not very useful; we
recommend you use the more selective ways to ignore errors in specific
commands.  See <a href="#Errors">Errors in Commands</a>.

     <p><a name="index-_002eLOW_005fRESOLUTION_005fTIME-245"></a><br><dt><code>.LOW_RESOLUTION_TIME</code><dd>
If you specify prerequisites for <code>.LOW_RESOLUTION_TIME</code>,
<span class="command">make</span> assumes that these files are created by commands that
generate low resolution time stamps.  The commands for
<code>.LOW_RESOLUTION_TIME</code> are not meaningful.

     <p>The high resolution file time stamps of many modern hosts lessen the
chance of <span class="command">make</span> incorrectly concluding that a file is up to
date.  Unfortunately, these hosts provide no way to set a high
resolution file time stamp, so commands like <span class="samp">cp -p</span> that
explicitly set a file's time stamp must discard its subsecond part.  If
a file is created by such a command, you should list it as a
prerequisite of <code>.LOW_RESOLUTION_TIME</code> so that <span class="command">make</span> does
not mistakenly conclude that the file is out of date.  For example:

     <pre class="example">          .LOW_RESOLUTION_TIME: dst
          dst: src
                  cp -p src dst
     </pre>
     <p>Since <span class="samp">cp -p</span> discards the subsecond part of <span class="file">src</span>'s time
stamp, <span class="file">dst</span> is typically slightly older than <span class="file">src</span> even when
it is up to date.  The <code>.LOW_RESOLUTION_TIME</code> line causes
<span class="command">make</span> to consider <span class="file">dst</span> to be up to date if its time stamp
is at the start of the same second that <span class="file">src</span>'s time stamp is in.

     <p>Due to a limitation of the archive format, archive member time stamps
are always low resolution.  You need not list archive members as
prerequisites of <code>.LOW_RESOLUTION_TIME</code>, as <span class="command">make</span> does this
automatically.

     <p><a name="index-_002eSILENT-246"></a><br><dt><code>.SILENT</code><dd>
If you specify prerequisites for <code>.SILENT</code>, then <code>make</code> will
not print the commands to remake those particular files before executing
them.  The commands for <code>.SILENT</code> are not meaningful.

     <p>If mentioned as a target with no prerequisites, <code>.SILENT</code> says not
to print any commands before executing them.  This usage of
<span class="samp">.SILENT</span> is supported only for historical compatibility.  We
recommend you use the more selective ways to silence specific commands. 
See <a href="#Echoing">Command Echoing</a>.  If you want to silence all commands
for a particular run of <code>make</code>, use the <span class="samp">-s</span> or
<span class="samp">--silent</span><!-- /@w --> option (see <a href="#Options-Summary">Options Summary</a>).

     <p><a name="index-_002eEXPORT_005fALL_005fVARIABLES-247"></a><br><dt><code>.EXPORT_ALL_VARIABLES</code><dd>
Simply by being mentioned as a target, this tells <code>make</code> to
export all variables to child processes by default. 
See <a href="#Variables_002fRecursion">Communicating Variables to a Sub-<code>make</code></a>.

     <p><a name="index-_002eNOTPARALLEL-248"></a><br><dt><code>.NOTPARALLEL</code><dd><a name="index-parallel-execution_002c-overriding-249"></a>
If <code>.NOTPARALLEL</code> is mentioned as a target, then this invocation of
<code>make</code> will be run serially, even if the <span class="samp">-j</span> option is
given.  Any recursively invoked <code>make</code> command will still be run in
parallel (unless its makefile contains this target).  Any prerequisites
on this target are ignored. 
</dl>

   <p>Any defined implicit rule suffix also counts as a special target if it
appears as a target, and so does the concatenation of two suffixes, such
as <span class="samp">.c.o</span>.  These targets are suffix rules, an obsolete way of
defining implicit rules (but a way still widely used).  In principle, any
target name could be special in this way if you break it in two and add
both pieces to the suffix list.  In practice, suffixes normally begin with
<span class="samp">.</span>, so these special target names also begin with <span class="samp">.</span>. 
See <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>.

<div class="node">
<p><hr>
<a name="Multiple-Targets"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Multiple-Rules">Multiple Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Special-Targets">Special Targets</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.10 Multiple Targets in a Rule</h3>

<p><a name="index-multiple-targets-250"></a><a name="index-several-targets-in-a-rule-251"></a><a name="index-targets_002c-multiple-252"></a><a name="index-rule_002c-with-multiple-targets-253"></a>
A rule with multiple targets is equivalent to writing many rules, each with
one target, and all identical aside from that.  The same commands apply to
all the targets, but their effects may vary because you can substitute the
actual target name into the command using <span class="samp">$@</span>.  The rule contributes
the same prerequisites to all the targets also.

   <p>This is useful in two cases.

     <ul>
<li>You want just prerequisites, no commands.  For example:

     <pre class="example">          kbd.o command.o files.o: command.h
     </pre>
     <p class="noindent">gives an additional prerequisite to each of the three object files
mentioned.

     <li>Similar commands work for all the targets.  The commands do not need
to be absolutely identical, since the automatic variable <span class="samp">$@</span>
can be used to substitute the particular target to be remade into the
commands (see <a href="#Automatic-Variables">Automatic Variables</a>).  For example:

     <pre class="example">          bigoutput littleoutput : text.g
                  generate text.g -$(subst output,,$@) &gt; $@
     </pre>
     <p><a name="index-subst-254"></a>
is equivalent to

     <pre class="example">          bigoutput : text.g
                  generate text.g -big &gt; bigoutput
          littleoutput : text.g
                  generate text.g -little &gt; littleoutput
     </pre>
     <p class="noindent">Here we assume the hypothetical program <code>generate</code> makes two
types of output, one if given <span class="samp">-big</span> and one if given
<span class="samp">-little</span>. 
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>,
for an explanation of the <code>subst</code> function. 
</ul>

   <p>Suppose you would like to vary the prerequisites according to the target,
much as the variable <span class="samp">$@</span> allows you to vary the commands. 
You cannot do this with multiple targets in an ordinary rule, but you can
do it with a <dfn>static pattern rule</dfn>. 
See <a href="#Static-Pattern">Static Pattern Rules</a>.

<div class="node">
<p><hr>
<a name="Multiple-Rules"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Static-Pattern">Static Pattern</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Multiple-Targets">Multiple Targets</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.11 Multiple Rules for One Target</h3>

<p><a name="index-multiple-rules-for-one-target-255"></a><a name="index-several-rules-for-one-target-256"></a><a name="index-rule_002c-multiple-for-one-target-257"></a><a name="index-target_002c-multiple-rules-for-one-258"></a>
One file can be the target of several rules.  All the prerequisites
mentioned in all the rules are merged into one list of prerequisites for
the target.  If the target is older than any prerequisite from any rule,
the commands are executed.

   <p>There can only be one set of commands to be executed for a file.  If
more than one rule gives commands for the same file, <code>make</code> uses
the last set given and prints an error message.  (As a special case,
if the file's name begins with a dot, no error message is printed. 
This odd behavior is only for compatibility with other implementations
of <code>make</code>... you should avoid using it).  Occasionally it is
useful to have the same target invoke multiple commands which are
defined in different parts of your makefile; you can use
<dfn>double-colon rules</dfn> (see <a href="#Double_002dColon">Double-Colon</a>) for this.

   <p>An extra rule with just prerequisites can be used to give a few extra
prerequisites to many files at once.  For example, makefiles often
have a variable, such as <code>objects</code>, containing a list of all the
compiler output files in the system being made.  An easy way to say
that all of them must be recompiled if <span class="file">config.h</span> changes is to
write the following:

<pre class="example">     objects = foo.o bar.o
     foo.o : defs.h
     bar.o : defs.h test.h
     $(objects) : config.h
</pre>
   <p>This could be inserted or taken out without changing the rules that really
specify how to make the object files, making it a convenient form to use if
you wish to add the additional prerequisite intermittently.

   <p>Another wrinkle is that the additional prerequisites could be specified with
a variable that you set with a command argument to <code>make</code>
(see <a href="#Overriding">Overriding Variables</a>).  For example,

<pre class="example">     extradeps=
     $(objects) : $(extradeps)
</pre>
   <p class="noindent">means that the command <span class="samp">make extradeps=foo.h</span> will consider
<span class="file">foo.h</span> as a prerequisite of each object file, but plain <span class="samp">make</span>
will not.

   <p>If none of the explicit rules for a target has commands, then <code>make</code>
searches for an applicable implicit rule to find some commands
see <a href="#Implicit-Rules">Using Implicit Rules</a>).

<div class="node">
<p><hr>
<a name="Static-Pattern"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Double_002dColon">Double-Colon</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Multiple-Rules">Multiple Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.12 Static Pattern Rules</h3>

<p><a name="index-static-pattern-rule-259"></a><a name="index-rule_002c-static-pattern-260"></a><a name="index-pattern-rules_002c-static-_0028not-implicit_0029-261"></a><a name="index-varying-prerequisites-262"></a><a name="index-prerequisites_002c-varying-_0028static-pattern_0029-263"></a>
<dfn>Static pattern rules</dfn> are rules which specify multiple targets and
construct the prerequisite names for each target based on the target name. 
They are more general than ordinary rules with multiple targets because the
targets do not have to have identical prerequisites.  Their prerequisites must
be <em>analogous</em>, but not necessarily <em>identical</em>.

<ul class="menu">
<li><a accesskey="1" href="#Static-Usage">Static Usage</a>:                 The syntax of static pattern rules. 
<li><a accesskey="2" href="#Static-versus-Implicit">Static versus Implicit</a>:       When are they better than implicit rules? 
</ul>

<div class="node">
<p><hr>
<a name="Static-Usage"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Static-versus-Implicit">Static versus Implicit</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Static-Pattern">Static Pattern</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Static-Pattern">Static Pattern</a>
<br>
</div>

<h4 class="subsection">4.12.1 Syntax of Static Pattern Rules</h4>

<p><a name="index-static-pattern-rule_002c-syntax-of-264"></a><a name="index-pattern-rules_002c-static_002c-syntax-of-265"></a>
Here is the syntax of a static pattern rule:

<pre class="example">     <var>targets</var> ...: <var>target-pattern</var>: <var>prereq-patterns</var> ...
             <var>commands</var>
             ...
</pre>
   <p class="noindent">The <var>targets</var> list specifies the targets that the rule applies to. 
The targets can contain wildcard characters, just like the targets of
ordinary rules (see <a href="#Wildcards">Using Wildcard Characters in File Names</a>).

   <p><a name="index-target-pattern_002c-static-_0028not-implicit_0029-266"></a><a name="index-stem-267"></a>The <var>target-pattern</var> and <var>prereq-patterns</var> say how to compute the
prerequisites of each target.  Each target is matched against the
<var>target-pattern</var> to extract a part of the target name, called the
<dfn>stem</dfn>.  This stem is substituted into each of the <var>prereq-patterns</var>
to make the prerequisite names (one from each <var>prereq-pattern</var>).

   <p>Each pattern normally contains the character <span class="samp">%</span> just once.  When the
<var>target-pattern</var> matches a target, the <span class="samp">%</span> can match any part of
the target name; this part is called the <dfn>stem</dfn>.  The rest of the
pattern must match exactly.  For example, the target <span class="file">foo.o</span> matches
the pattern <span class="samp">%.o</span>, with <span class="samp">foo</span> as the stem.  The targets
<span class="file">foo.c</span> and <span class="file">foo.out</span> do not match that pattern.

   <p><a name="index-prerequisite-pattern_002c-static-_0028not-implicit_0029-268"></a>The prerequisite names for each target are made by substituting the stem
for the <span class="samp">%</span> in each prerequisite pattern.  For example, if one
prerequisite pattern is <span class="file">%.c</span>, then substitution of the stem
<span class="samp">foo</span> gives the prerequisite name <span class="file">foo.c</span>.  It is legitimate
to write a prerequisite pattern that does not contain <span class="samp">%</span>; then this
prerequisite is the same for all targets.

   <p><a name="index-_0040code_007b_0025_007d_002c-quoting-in-static-pattern-269"></a><a name="index-_0040code_007b_0025_007d_002c-quoting-with-_0040code_007b_005c_007d-_0028backslash_0029-270"></a><a name="index-_0040code_007b_005c_007d-_0028backslash_0029_002c-to-quote-_0040code_007b_0025_007d-271"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-to-quote-_0040code_007b_0025_007d-272"></a><a name="index-quoting-_0040code_007b_0025_007d_002c-in-static-pattern-273"></a><span class="samp">%</span> characters in pattern rules can be quoted with preceding
backslashes (<span class="samp">\</span>).  Backslashes that would otherwise quote <span class="samp">%</span>
characters can be quoted with more backslashes.  Backslashes that quote
<span class="samp">%</span> characters or other backslashes are removed from the pattern
before it is compared to file names or has a stem substituted into it. 
Backslashes that are not in danger of quoting <span class="samp">%</span> characters go
unmolested.  For example, the pattern <span class="file">the\%weird\\%pattern\\</span> has
<span class="samp">the%weird\</span> preceding the operative <span class="samp">%</span> character, and
<span class="samp">pattern\\</span> following it.  The final two backslashes are left alone
because they cannot affect any <span class="samp">%</span> character.

   <p>Here is an example, which compiles each of <span class="file">foo.o</span> and <span class="file">bar.o</span>
from the corresponding <span class="file">.c</span> file:

<pre class="example">     objects = foo.o bar.o
     
     all: $(objects)
     
     $(objects): %.o: %.c
             $(CC) -c $(CFLAGS) $&lt; -o $@
</pre>
   <p class="noindent">Here <span class="samp">$&lt;</span> is the automatic variable that holds the name of the
prerequisite and <span class="samp">$@</span> is the automatic variable that holds the name
of the target; see <a href="#Automatic-Variables">Automatic Variables</a>.

   <p>Each target specified must match the target pattern; a warning is issued
for each target that does not.  If you have a list of files, only some of
which will match the pattern, you can use the <code>filter</code> function to
remove nonmatching file names (see <a href="#Text-Functions">Functions for String Substitution and Analysis</a>):

<pre class="example">     files = foo.elc bar.o lose.o
     
     $(filter %.o,$(files)): %.o: %.c
             $(CC) -c $(CFLAGS) $&lt; -o $@
     $(filter %.elc,$(files)): %.elc: %.el
             emacs -f batch-byte-compile $&lt;
</pre>
   <p class="noindent">In this example the result of <span class="samp">$(filter %.o,$(files))</span> is
<span class="file">bar.o lose.o</span>, and the first static pattern rule causes each of
these object files to be updated by compiling the corresponding C source
file.  The result of <span class="samp">$(filter&nbsp;%.elc,$(files))</span><!-- /@w --> is
<span class="file">foo.elc</span>, so that file is made from <span class="file">foo.el</span>.

   <p>Another example shows how to use <code>$*</code> in static pattern rules:
<a name="index-_0024_002a_0040r_007b_002c-and-static-pattern_007d-274"></a>
<pre class="example">     bigoutput littleoutput : %output : text.g
             generate text.g -$* &gt; $@
</pre>
   <p class="noindent">When the <code>generate</code> command is run, <code>$*</code> will expand to the
stem, either <span class="samp">big</span> or <span class="samp">little</span>.

<div class="node">
<p><hr>
<a name="Static-versus-Implicit"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Static-Usage">Static Usage</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Static-Pattern">Static Pattern</a>
<br>
</div>

<h4 class="subsection">4.12.2 Static Pattern Rules versus Implicit Rules</h4>

<p><a name="index-rule_002c-static-pattern-versus-implicit-275"></a><a name="index-static-pattern-rule_002c-versus-implicit-276"></a>
A static pattern rule has much in common with an implicit rule defined as a
pattern rule (see <a href="#Pattern-Rules">Defining and Redefining Pattern Rules</a>). 
Both have a pattern for the target and patterns for constructing the
names of prerequisites.  The difference is in how <code>make</code> decides
<em>when</em> the rule applies.

   <p>An implicit rule <em>can</em> apply to any target that matches its pattern,
but it <em>does</em> apply only when the target has no commands otherwise
specified, and only when the prerequisites can be found.  If more than one
implicit rule appears applicable, only one applies; the choice depends on
the order of rules.

   <p>By contrast, a static pattern rule applies to the precise list of targets
that you specify in the rule.  It cannot apply to any other target and it
invariably does apply to each of the targets specified.  If two conflicting
rules apply, and both have commands, that's an error.

   <p>The static pattern rule can be better than an implicit rule for these
reasons:

     <ul>
<li>You may wish to override the usual implicit rule for a few
files whose names cannot be categorized syntactically but
can be given in an explicit list.

     <li>If you cannot be sure of the precise contents of the directories
you are using, you may not be sure which other irrelevant files
might lead <code>make</code> to use the wrong implicit rule.  The choice
might depend on the order in which the implicit rule search is done. 
With static pattern rules, there is no uncertainty: each rule applies
to precisely the targets specified. 
</ul>

<div class="node">
<p><hr>
<a name="Double_002dColon"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Automatic-Prerequisites">Automatic Prerequisites</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Static-Pattern">Static Pattern</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.13 Double-Colon Rules</h3>

<p><a name="index-double_002dcolon-rules-277"></a><a name="index-rule_002c-double_002dcolon-_0028_0040code_007b_003a_003a_007d_0029-278"></a><a name="index-multiple-rules-for-one-target-_0028_0040code_007b_003a_003a_007d_0029-279"></a><a name="index-_0040code_007b_003a_003a_007d-rules-_0028double_002dcolon_0029-280"></a>
<dfn>Double-colon</dfn> rules are rules written with <span class="samp">::</span> instead of
<span class="samp">:</span> after the target names.  They are handled differently from
ordinary rules when the same target appears in more than one rule.

   <p>When a target appears in multiple rules, all the rules must be the same
type: all ordinary, or all double-colon.  If they are double-colon, each
of them is independent of the others.  Each double-colon rule's commands
are executed if the target is older than any prerequisites of that rule. 
If there are no prerequisites for that rule, its commands are always
executed (even if the target already exists).  This can result in
executing none, any, or all of the double-colon rules.

   <p>Double-colon rules with the same target are in fact completely separate
from one another.  Each double-colon rule is processed individually, just
as rules with different targets are processed.

   <p>The double-colon rules for a target are executed in the order they appear
in the makefile.  However, the cases where double-colon rules really make
sense are those where the order of executing the commands would not matter.

   <p>Double-colon rules are somewhat obscure and not often very useful; they
provide a mechanism for cases in which the method used to update a target
differs depending on which prerequisite files caused the update, and such
cases are rare.

   <p>Each double-colon rule should specify commands; if it does not, an
implicit rule will be used if one applies. 
See <a href="#Implicit-Rules">Using Implicit Rules</a>.

<div class="node">
<p><hr>
<a name="Automatic-Prerequisites"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Double_002dColon">Double-Colon</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Rules">Rules</a>
<br>
</div>

<h3 class="section">4.14 Generating Prerequisites Automatically</h3>

<p><a name="index-prerequisites_002c-automatic-generation-281"></a><a name="index-automatic-generation-of-prerequisites-282"></a><a name="index-generating-prerequisites-automatically-283"></a>
In the makefile for a program, many of the rules you need to write often
say only that some object file depends on some header
file.  For example, if <span class="file">main.c</span> uses <span class="file">defs.h</span> via an
<code>#include</code>, you would write:

<pre class="example">     main.o: defs.h
</pre>
   <p class="noindent">You need this rule so that <code>make</code> knows that it must remake
<span class="file">main.o</span> whenever <span class="file">defs.h</span> changes.  You can see that for a
large program you would have to write dozens of such rules in your
makefile.  And, you must always be very careful to update the makefile
every time you add or remove an <code>#include</code>. 
<a name="index-_0040code_007b_0023include_007d-284"></a>
<a name="index-_0040code_007b_002dM_007d-_0028to-compiler_0029-285"></a>To avoid this hassle, most modern C compilers can write these rules for
you, by looking at the <code>#include</code> lines in the source files. 
Usually this is done with the <span class="samp">-M</span> option to the compiler. 
For example, the command:

<pre class="example">     cc -M main.c
</pre>
   <p class="noindent">generates the output:

<pre class="example">     main.o : main.c defs.h
</pre>
   <p class="noindent">Thus you no longer have to write all those rules yourself. 
The compiler will do it for you.

   <p>Note that such a prerequisite constitutes mentioning <span class="file">main.o</span> in a
makefile, so it can never be considered an intermediate file by implicit
rule search.  This means that <code>make</code> won't ever remove the file
after using it; see <a href="#Chained-Rules">Chains of Implicit Rules</a>.

   <p><a name="index-_0040code_007bmake-depend_007d-286"></a>With old <code>make</code> programs, it was traditional practice to use this
compiler feature to generate prerequisites on demand with a command like
<span class="samp">make depend</span>.  That command would create a file <span class="file">depend</span>
containing all the automatically-generated prerequisites; then the
makefile could use <code>include</code> to read them in (see <a href="#Include">Include</a>).

   <p>In GNU <code>make</code>, the feature of remaking makefiles makes this
practice obsolete&mdash;you need never tell <code>make</code> explicitly to
regenerate the prerequisites, because it always regenerates any makefile
that is out of date.  See <a href="#Remaking-Makefiles">Remaking Makefiles</a>.

   <p>The practice we recommend for automatic prerequisite generation is to have
one makefile corresponding to each source file.  For each source file
<var>name</var><span class="file">.c</span> there is a makefile <var>name</var><span class="file">.d</span> which lists
what files the object file <var>name</var><span class="file">.o</span> depends on.  That way
only the source files that have changed need to be rescanned to produce
the new prerequisites.

   <p>Here is the pattern rule to generate a file of prerequisites (i.e., a makefile)
called <var>name</var><span class="file">.d</span> from a C source file called <var>name</var><span class="file">.c</span>:

<pre class="smallexample">     %.d: %.c
             @set -e; rm -f $@; \
              $(CC) -M $(CPPFLAGS) $&lt; &gt; $@.$$$$; \
              sed 's,\($*\)\.o[ :]*,\1.o $@ : ,g' &lt; $@.$$$$ &gt; $@; \
              rm -f $@.$$$$
</pre>
   <p class="noindent">See <a href="#Pattern-Rules">Pattern Rules</a>, for information on defining pattern rules.  The
<span class="samp">-e</span> flag to the shell causes it to exit immediately if the
<code>$(CC)</code> command (or any other command) fails (exits with a
nonzero status). 
<a name="index-_0040code_007b_002de_007d-_0028shell-flag_0029-287"></a>
<a name="index-_0040code_007b_002dMM_007d-_0028to-GNU-compiler_0029-288"></a>With the GNU C compiler, you may wish to use the <span class="samp">-MM</span> flag instead
of <span class="samp">-M</span>.  This omits prerequisites on system header files. 
See <a href="gcc.html#Preprocessor-Options">Options Controlling the Preprocessor (Using GNU CC)</a>, for details.

   <p><a name="index-_0040code_007bsed_007d-_0028shell-command_0029-289"></a>The purpose of the <code>sed</code> command is to translate (for example):

<pre class="example">     main.o : main.c defs.h
</pre>
   <p class="noindent">into:

<pre class="example">     main.o main.d : main.c defs.h
</pre>
   <p class="noindent"><a name="index-_0040code_007b_002ed_007d-290"></a>This makes each <span class="samp">.d</span> file depend on all the source and header files
that the corresponding <span class="samp">.o</span> file depends on.  <code>make</code> then
knows it must regenerate the prerequisites whenever any of the source or
header files changes.

   <p>Once you've defined the rule to remake the <span class="samp">.d</span> files,
you then use the <code>include</code> directive to read them all in. 
See <a href="#Include">Include</a>.  For example:

<pre class="example">     sources = foo.c bar.c
     
     include $(sources:.c=.d)
</pre>
   <p class="noindent">(This example uses a substitution variable reference to translate the
list of source files <span class="samp">foo.c bar.c</span> into a list of prerequisite
makefiles, <span class="samp">foo.d bar.d</span>.  See <a href="#Substitution-Refs">Substitution Refs</a>, for full
information on substitution references.)  Since the <span class="samp">.d</span> files are
makefiles like any others, <code>make</code> will remake them as necessary
with no further work from you.  See <a href="#Remaking-Makefiles">Remaking Makefiles</a>.

   <p>Note that the <span class="samp">.d</span> files contain target definitions; you should
be sure to place the <code>include</code> directive <em>after</em> the first,
default goal in your makefiles or run the risk of having a random
object file become the default goal. 
See <a href="#How-Make-Works">How Make Works</a>.

<div class="node">
<p><hr>
<a name="Commands"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Using-Variables">Using Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Rules">Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">5 Writing the Commands in Rules</h2>

<p><a name="index-commands_002c-how-to-write-291"></a><a name="index-rule-commands-292"></a><a name="index-writing-rule-commands-293"></a>
The commands of a rule consist of one or more shell command lines to
be executed, one at a time, in the order they appear.  Typically, the
result of executing these commands is that the target of the rule is
brought up to date.

   <p>Users use many different shell programs, but commands in makefiles are
always interpreted by <span class="file">/bin/sh</span> unless the makefile specifies
otherwise.  See <a href="#Execution">Command Execution</a>.

<ul class="menu">
<li><a accesskey="1" href="#Command-Syntax">Command Syntax</a>:               Command syntax features and pitfalls. 
<li><a accesskey="2" href="#Echoing">Echoing</a>:                      How to control when commands are echoed. 
<li><a accesskey="3" href="#Execution">Execution</a>:                    How commands are executed. 
<li><a accesskey="4" href="#Parallel">Parallel</a>:                     How commands can be executed in parallel. 
<li><a accesskey="5" href="#Errors">Errors</a>:                       What happens after a command execution error. 
<li><a accesskey="6" href="#Interrupts">Interrupts</a>:                   What happens when a command is interrupted. 
<li><a accesskey="7" href="#Recursion">Recursion</a>:                    Invoking <code>make</code> from makefiles. 
<li><a accesskey="8" href="#Sequences">Sequences</a>:                    Defining canned sequences of commands. 
<li><a accesskey="9" href="#Empty-Commands">Empty Commands</a>:               Defining useful, do-nothing commands. 
</ul>

<div class="node">
<p><hr>
<a name="Command-Syntax"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Echoing">Echoing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Commands">Commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>
<br>
</div>

<h3 class="section">5.1 Command Syntax</h3>

<p><a name="index-command-syntax-294"></a><a name="index-syntax-of-commands-295"></a>
Makefiles have the unusual property that there are really two distinct
syntaxes in one file.  Most of the makefile uses <code>make</code> syntax
(see <a href="#Makefiles">Writing Makefiles</a>).  However, commands are meant to be
interpreted by the shell and so they are written using shell syntax. 
The <code>make</code> program does not try to understand shell syntax: it
performs only a very few specific translations on the content of the
command before handing it to the shell.

   <p>Each command line must start with a tab, except that the first command
line may be attached to the target-and-prerequisites line with a
semicolon in between.  <em>Any</em> line in the makefile that begins
with a tab and appears in a &ldquo;rule context&rdquo; (that is, after a rule
has been started until another rule or variable definition) will be
considered a command line for that rule.  Blank lines and lines of
just comments may appear among the command lines; they are ignored.

   <p>Some consequences of these rules include:

     <ul>
<li>A blank line that begins with a tab is not blank: it's an empty
command (see <a href="#Empty-Commands">Empty Commands</a>).

     <p><a name="index-comments_002c-in-commands-296"></a><a name="index-commands_002c-comments-in-297"></a><a name="index-_0040code_007b_0023_007d-_0028comments_0029_002c-in-commands-298"></a><li>A comment in a command line is not a <code>make</code> comment; it will be
passed to the shell as-is.  Whether the shell treats it as a comment
or not depends on your shell.

     <li>A variable definition in a &ldquo;rule context&rdquo; which is indented by a tab
as the first character on the line, will be considered a command line,
not a <code>make</code> variable definition, and passed to the shell.

     <li>A conditional expression (<code>ifdef</code>, <code>ifeq</code>,
etc. see <a href="#Conditional-Syntax">Syntax of Conditionals</a>) in a &ldquo;rule
context&rdquo; which is indented by a tab as the first character on the
line, will be considered a command line and be passed to the shell.

   </ul>

<ul class="menu">
<li><a accesskey="1" href="#Splitting-Lines">Splitting Lines</a>:              Breaking long command lines for readability. 
<li><a accesskey="2" href="#Variables-in-Commands">Variables in Commands</a>:        Using <code>make</code> variables in commands. 
</ul>

<div class="node">
<p><hr>
<a name="Splitting-Lines"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Variables-in-Commands">Variables in Commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Command-Syntax">Command Syntax</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command-Syntax">Command Syntax</a>
<br>
</div>

<h4 class="subsection">5.1.1 Splitting Command Lines</h4>

<p><a name="index-commands_002c-splitting-299"></a><a name="index-splitting-commands-300"></a><a name="index-commands_002c-backslash-_0028_0040code_007b_005c_007d_0029-in-301"></a><a name="index-commands_002c-quoting-newlines-in-302"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-in-commands-303"></a><a name="index-_0040code_007b_005c_007d-_0028backslash_0029_002c-in-commands-304"></a><a name="index-quoting-newline_002c-in-commands-305"></a><a name="index-newline_002c-quoting_002c-in-commands-306"></a>
One of the few ways in which <code>make</code> does interpret command lines
is checking for a backslash just before the newline.  As in normal
makefile syntax, a single command can be split into multiple lines in
the makefile by placing a backslash before each newline.  A sequence
of lines like this is considered a single command, and one instance of
the shell will be invoked to run it.

   <p>However, in contrast to how they are treated in other places in a
makefile, backslash-newline pairs are <em>not</em> removed from the
command.  Both the backslash and the newline characters are preserved
and passed to the shell.  How the backslash-newline is interpreted
depends on your shell.  If the first character of the next line
after the backslash-newline is a tab, then that tab (and only that
tab) is removed.  Whitespace is never added to the command.

   <p>For example, this makefile:

<pre class="example">     all :
             @echo no\
     space
             @echo no\
             space
             @echo one \
             space
             @echo one\
              space
</pre>
   <p class="noindent">consists of four separate shell commands where the output is:

<pre class="example">     nospace
     nospace
     one space
     one space
</pre>
   <p>As a more complex example, this makefile:

<pre class="example">     all : ; @echo 'hello \
             world' ; echo "hello \
         world"
</pre>
   <p class="noindent">will run one shell with a command script of:

<pre class="example">     echo 'hello \
     world' ; echo "hello \
         world"
</pre>
   <p class="noindent">which, according to shell quoting rules, will yield the following output:

<pre class="example">     hello \
     world
     hello     world
</pre>
   <p class="noindent">Notice how the backslash/newline pair was removed inside the string quoted
with double quotes (<code>"..."</code>), but not from the string quoted with single
quotes (<code>'...'</code>).  This is the way the default shell (<span class="file">/bin/sh</span>)
handles backslash/newline pairs.  If you specify a different shell in your
makefiles it may treat them differently.

   <p>Sometimes you want to split a long line inside of single quotes, but
you don't want the backslash-newline to appear in the quoted content. 
This is often the case when passing scripts to languages such as Perl,
where extraneous backslashes inside the script can change its meaning
or even be a syntax error.  One simple way of handling this is to
place the quoted string, or even the entire command, into a
<code>make</code> variable then use the variable in the command.  In this
situation the newline quoting rules for makefiles will be used, and
the backslash-newline will be removed.  If we rewrite our example
above using this method:

<pre class="example">     HELLO = 'hello \
     world'
     
     all : ; @echo $(HELLO)
</pre>
   <p class="noindent">we will get output like this:

<pre class="example">     hello world
</pre>
   <p>If you like, you can also use target-specific variables
(see <a href="#Target_002dspecific">Target-specific Variable Values</a>) to obtain
a tighter correspondence between the variable and the command that
uses it.

<div class="node">
<p><hr>
<a name="Variables-in-Commands"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Splitting-Lines">Splitting Lines</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Command-Syntax">Command Syntax</a>
<br>
</div>

<h4 class="subsection">5.1.2 Using Variables in Commands</h4>

<p><a name="index-variable-references-in-commands-307"></a><a name="index-commands_002c-using-variables-in-308"></a>
The other way in which <code>make</code> processes commands is by expanding
any variable references in them (see <a href="#Reference">Basics of Variable References</a>).  This occurs after make has finished reading all the
makefiles and the target is determined to be out of date; so, the
commands for targets which are not rebuilt are never expanded.

   <p>Variable and function references in commands have identical syntax and
semantics to references elsewhere in the makefile.  They also have the
same quoting rules: if you want a dollar sign to appear in your
command, you must double it (<span class="samp">$$</span>).  For shells like the default
shell, that use dollar signs to introduce variables, it's important to
keep clear in your mind whether the variable you want to reference is
a <code>make</code> variable (use a single dollar sign) or a shell variable
(use two dollar signs).  For example:

<pre class="example">     LIST = one two three
     all:
             for i in $(LIST); do \
                 echo $$i; \
             done
</pre>
   <p class="noindent">results in the following command being passed to the shell:

<pre class="example">     for i in one two three; do \
         echo $i; \
     done
</pre>
   <p class="noindent">which generates the expected result:

<pre class="example">     one
     two
     three
</pre>
   <div class="node">
<p><hr>
<a name="Echoing"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Execution">Execution</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Command-Syntax">Command Syntax</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>
<br>
</div>

<h3 class="section">5.2 Command Echoing</h3>

<p><a name="index-echoing-of-commands-309"></a><a name="index-silent-operation-310"></a><a name="index-_0040code_007b_0040_0040_007d-_0028in-commands_0029-311"></a><a name="index-commands_002c-echoing-312"></a><a name="index-printing-of-commands-313"></a>
Normally <code>make</code> prints each command line before it is executed. 
We call this <dfn>echoing</dfn> because it gives the appearance that you
are typing the commands yourself.

   <p>When a line starts with <span class="samp">@</span>, the echoing of that line is suppressed. 
The <span class="samp">@</span> is discarded before the command is passed to the shell. 
Typically you would use this for a command whose only effect is to print
something, such as an <code>echo</code> command to indicate progress through
the makefile:

<pre class="example">     @echo About to make distribution files
</pre>
   <p><a name="index-_0040code_007b_002dn_007d-314"></a><a name="index-_0040code_007b_002d_002djust_002dprint_007d-315"></a><a name="index-_0040code_007b_002d_002ddry_002drun_007d-316"></a><a name="index-_0040code_007b_002d_002drecon_007d-317"></a>When <code>make</code> is given the flag <span class="samp">-n</span> or <span class="samp">--just-print</span>
it only echoes commands, it won't execute them.  See <a href="#Options-Summary">Summary of Options</a>.  In this case and only this case, even the
commands starting with <span class="samp">@</span> are printed.  This flag is useful for
finding out which commands <code>make</code> thinks are necessary without
actually doing them.

   <p><a name="index-_0040code_007b_002ds_007d-318"></a><a name="index-_0040code_007b_002d_002dsilent_007d-319"></a><a name="index-_0040code_007b_002d_002dquiet_007d-320"></a><a name="index-_002eSILENT-321"></a>The <span class="samp">-s</span> or <span class="samp">--silent</span>
flag to <code>make</code> prevents all echoing, as if all commands
started with <span class="samp">@</span>.  A rule in the makefile for the special target
<code>.SILENT</code> without prerequisites has the same effect
(see <a href="#Special-Targets">Special Built-in Target Names</a>). 
<code>.SILENT</code> is essentially obsolete since <span class="samp">@</span> is more flexible.

<div class="node">
<p><hr>
<a name="Execution"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Parallel">Parallel</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Echoing">Echoing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>
<br>
</div>

<h3 class="section">5.3 Command Execution</h3>

<p><a name="index-commands_002c-execution-322"></a><a name="index-execution_002c-of-commands-323"></a><a name="index-shell-command_002c-execution-324"></a><a name="index-_0040code_007bSHELL_007d-_0040r_007b_0028command-execution_0029_007d-325"></a>
When it is time to execute commands to update a target, they are
executed by invoking a new subshell for each command line.  (In
practice, <code>make</code> may take shortcuts that do not affect the
results.)

   <p><a name="index-_0040code_007bcd_007d-_0028shell-command_0029-326"></a><a name="index-shell-variables_002c-setting-in-commands-327"></a><a name="index-commands-setting-shell-variables-328"></a><strong>Please note:</strong> this implies that setting shell variables and
invoking shell commands such as <code>cd</code> that set a context local to
each process will not affect the following command lines.<a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a>  If you want to use <code>cd</code> to affect the next statement,
put both statements in a single command line.  Then <code>make</code> will
invoke one shell to run the entire line, and the shell will execute
the statements in sequence.  For example:

<pre class="example">     foo : bar/lose
             cd $(@D) &amp;&amp; gobble $(@F) &gt; ../$@
</pre>
   <p class="noindent">Here we use the shell AND operator (<code>&amp;&amp;</code>) so that if the
<code>cd</code> command fails, the script will fail without trying to invoke
the <code>gobble</code> command in the wrong directory, which could cause
problems (in this case it would certainly cause <span class="file">../foo</span> to be
truncated, at least).

<ul class="menu">
<li><a accesskey="1" href="#Choosing-the-Shell">Choosing the Shell</a>:           How <code>make</code> chooses the shell used
                                  to run commands. 
</ul>

<div class="node">
<p><hr>
<a name="Choosing-the-Shell"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Execution">Execution</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Execution">Execution</a>
<br>
</div>

<h4 class="subsection">5.3.1 Choosing the Shell</h4>

<p><a name="index-shell_002c-choosing-the-329"></a><a name="index-_0040code_007bSHELL_007d_002c-value-of-330"></a>
<a name="index-SHELL-331"></a>The program used as the shell is taken from the variable <code>SHELL</code>. 
If this variable is not set in your makefile, the program
<span class="file">/bin/sh</span> is used as the shell.

   <p><a name="index-environment_002c-_0040code_007bSHELL_007d-in-332"></a>Unlike most variables, the variable <code>SHELL</code> is never set from the
environment.  This is because the <code>SHELL</code> environment variable is
used to specify your personal choice of shell program for interactive
use.  It would be very bad for personal choices like this to affect the
functioning of makefiles.  See <a href="#Environment">Variables from the Environment</a>.

   <p>Furthermore, when you do set <code>SHELL</code> in your makefile that value
is <em>not</em> exported in the environment to commands that <code>make</code>
invokes.  Instead, the value inherited from the user's environment, if
any, is exported.  You can override this behavior by explicitly
exporting <code>SHELL</code> (see <a href="#Variables_002fRecursion">Communicating Variables to a Sub-<code>make</code></a>), forcing it to be passed in the
environment to commands.

   <p><a name="index-_0040code_007bMAKESHELL_007d-_0040r_007b_0028MS_002dDOS-alternative-to-_0040code_007bSHELL_007d_0029_007d-333"></a>However, on MS-DOS and MS-Windows the value of <code>SHELL</code> in the
environment <strong>is</strong> used, since on those systems most users do not
set this variable, and therefore it is most likely set specifically to
be used by <code>make</code>.  On MS-DOS, if the setting of <code>SHELL</code> is
not suitable for <code>make</code>, you can set the variable
<code>MAKESHELL</code> to the shell that <code>make</code> should use; if set it
will be used as the shell instead of the value of <code>SHELL</code>.

<h5 class="subsubheading">Choosing a Shell in DOS and Windows</h5>

<p><a name="index-shell_002c-in-DOS-and-Windows-334"></a><a name="index-DOS_002c-choosing-a-shell-in-335"></a><a name="index-Windows_002c-choosing-a-shell-in-336"></a>
Choosing a shell in MS-DOS and MS-Windows is much more complex than on
other systems.

   <p><a name="index-COMSPEC-337"></a>On MS-DOS, if <code>SHELL</code> is not set, the value of the variable
<code>COMSPEC</code> (which is always set) is used instead.

   <p><a name="index-_0040code_007bSHELL_007d_002c-MS_002dDOS-specifics-338"></a>The processing of lines that set the variable <code>SHELL</code> in Makefiles
is different on MS-DOS.  The stock shell, <span class="file">command.com</span>, is
ridiculously limited in its functionality and many users of <code>make</code>
tend to install a replacement shell.  Therefore, on MS-DOS, <code>make</code>
examines the value of <code>SHELL</code>, and changes its behavior based on
whether it points to a Unix-style or DOS-style shell.  This allows
reasonable functionality even if <code>SHELL</code> points to
<span class="file">command.com</span>.

   <p>If <code>SHELL</code> points to a Unix-style shell, <code>make</code> on MS-DOS
additionally checks whether that shell can indeed be found; if not, it
ignores the line that sets <code>SHELL</code>.  In MS-DOS, GNU <code>make</code>
searches for the shell in the following places:

     <ol type=1 start=1>
<li>In the precise place pointed to by the value of <code>SHELL</code>.  For
example, if the makefile specifies <span class="samp">SHELL = /bin/sh</span>, <code>make</code>
will look in the directory <span class="file">/bin</span> on the current drive.

     <li>In the current directory.

     <li>In each of the directories in the <code>PATH</code> variable, in order.

        </ol>

   <p>In every directory it examines, <code>make</code> will first look for the
specific file (<span class="file">sh</span> in the example above).  If this is not found,
it will also look in that directory for that file with one of the known
extensions which identify executable files.  For example <span class="file">.exe</span>,
<span class="file">.com</span>, <span class="file">.bat</span>, <span class="file">.btm</span>, <span class="file">.sh</span>, and some others.

   <p>If any of these attempts is successful, the value of <code>SHELL</code> will
be set to the full pathname of the shell as found.  However, if none of
these is found, the value of <code>SHELL</code> will not be changed, and thus
the line that sets it will be effectively ignored.  This is so
<code>make</code> will only support features specific to a Unix-style shell if
such a shell is actually installed on the system where <code>make</code> runs.

   <p>Note that this extended search for the shell is limited to the cases
where <code>SHELL</code> is set from the Makefile; if it is set in the
environment or command line, you are expected to set it to the full
pathname of the shell, exactly as things are on Unix.

   <p>The effect of the above DOS-specific processing is that a Makefile that
contains <span class="samp">SHELL = /bin/sh</span> (as many Unix makefiles do), will work
on MS-DOS unaltered if you have e.g. <span class="file">sh.exe</span> installed in some
directory along your <code>PATH</code>.

<div class="node">
<p><hr>
<a name="Parallel"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Errors">Errors</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Execution">Execution</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>
<br>
</div>

<h3 class="section">5.4 Parallel Execution</h3>

<p><a name="index-commands_002c-execution-in-parallel-339"></a><a name="index-parallel-execution-340"></a><a name="index-execution_002c-in-parallel-341"></a><a name="index-job-slots-342"></a><a name="index-_0040code_007b_002dj_007d-343"></a><a name="index-_0040code_007b_002d_002djobs_007d-344"></a>
GNU <code>make</code> knows how to execute several commands at once. 
Normally, <code>make</code> will execute only one command at a time, waiting
for it to finish before executing the next.  However, the <span class="samp">-j</span> or
<span class="samp">--jobs</span> option tells <code>make</code> to execute many commands
simultaneously.

   <p>On MS-DOS, the <span class="samp">-j</span> option has no effect, since that system doesn't
support multi-processing.

   <p>If the <span class="samp">-j</span> option is followed by an integer, this is the number of
commands to execute at once; this is called the number of <dfn>job slots</dfn>. 
If there is nothing looking like an integer after the <span class="samp">-j</span> option,
there is no limit on the number of job slots.  The default number of job
slots is one, which means serial execution (one thing at a time).

   <p>One unpleasant consequence of running several commands simultaneously is
that output generated by the commands appears whenever each command
sends it, so messages from different commands may be interspersed.

   <p>Another problem is that two processes cannot both take input from the
same device; so to make sure that only one command tries to take input
from the terminal at once, <code>make</code> will invalidate the standard
input streams of all but one running command.  This means that
attempting to read from standard input will usually be a fatal error (a
<span class="samp">Broken pipe</span> signal) for most child processes if there are
several. 
<a name="index-broken-pipe-345"></a><a name="index-standard-input-346"></a>
It is unpredictable which command will have a valid standard input stream
(which will come from the terminal, or wherever you redirect the standard
input of <code>make</code>).  The first command run will always get it first, and
the first command started after that one finishes will get it next, and so
on.

   <p>We will change how this aspect of <code>make</code> works if we find a better
alternative.  In the mean time, you should not rely on any command using
standard input at all if you are using the parallel execution feature; but
if you are not using this feature, then standard input works normally in
all commands.

   <p>Finally, handling recursive <code>make</code> invocations raises issues.  For
more information on this, see
<a href="#Options_002fRecursion">Communicating Options to a Sub-<code>make</code></a>.

   <p>If a command fails (is killed by a signal or exits with a nonzero
status), and errors are not ignored for that command
(see <a href="#Errors">Errors in Commands</a>),
the remaining command lines to remake the same target will not be run. 
If a command fails and the <span class="samp">-k</span> or <span class="samp">--keep-going</span>
option was not given
(see <a href="#Options-Summary">Summary of Options</a>),
<code>make</code> aborts execution.  If make
terminates for any reason (including a signal) with child processes
running, it waits for them to finish before actually exiting.

   <p><a name="index-load-average-347"></a><a name="index-limiting-jobs-based-on-load-348"></a><a name="index-jobs_002c-limiting-based-on-load-349"></a><a name="index-_0040code_007b_002dl_007d-_0028load-average_0029-350"></a><a name="index-_0040code_007b_002d_002dmax_002dload_007d-351"></a><a name="index-_0040code_007b_002d_002dload_002daverage_007d-352"></a>When the system is heavily loaded, you will probably want to run fewer jobs
than when it is lightly loaded.  You can use the <span class="samp">-l</span> option to tell
<code>make</code> to limit the number of jobs to run at once, based on the load
average.  The <span class="samp">-l</span> or <span class="samp">--max-load</span>
option is followed by a floating-point number.  For
example,

<pre class="example">     -l 2.5
</pre>
   <p class="noindent">will not let <code>make</code> start more than one job if the load average is
above 2.5.  The <span class="samp">-l</span> option with no following number removes the
load limit, if one was given with a previous <span class="samp">-l</span> option.

   <p>More precisely, when <code>make</code> goes to start up a job, and it already has
at least one job running, it checks the current load average; if it is not
lower than the limit given with <span class="samp">-l</span>, <code>make</code> waits until the load
average goes below that limit, or until all the other jobs finish.

   <p>By default, there is no load limit.

<div class="node">
<p><hr>
<a name="Errors"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Interrupts">Interrupts</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Parallel">Parallel</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>
<br>
</div>

<h3 class="section">5.5 Errors in Commands</h3>

<p><a name="index-errors-_0028in-commands_0029-353"></a><a name="index-commands_002c-errors-in-354"></a><a name="index-exit-status-_0028errors_0029-355"></a>
After each shell command returns, <code>make</code> looks at its exit status. 
If the command completed successfully, the next command line is executed
in a new shell; after the last command line is finished, the rule is
finished.

   <p>If there is an error (the exit status is nonzero), <code>make</code> gives up on
the current rule, and perhaps on all rules.

   <p>Sometimes the failure of a certain command does not indicate a problem. 
For example, you may use the <code>mkdir</code> command to ensure that a
directory exists.  If the directory already exists, <code>mkdir</code> will
report an error, but you probably want <code>make</code> to continue regardless.

   <p><a name="index-_0040code_007b_002d_007d-_0028in-commands_0029-356"></a>To ignore errors in a command line, write a <span class="samp">-</span> at the beginning of
the line's text (after the initial tab).  The <span class="samp">-</span> is discarded before
the command is passed to the shell for execution.

   <p>For example,

<pre class="example">     clean:
             -rm -f *.o
</pre>
   <p><a name="index-_0040code_007brm_007d-_0028shell-command_0029-357"></a>
This causes <code>rm</code> to continue even if it is unable to remove a file.

   <p><a name="index-_0040code_007b_002di_007d-358"></a><a name="index-_0040code_007b_002d_002dignore_002derrors_007d-359"></a><a name="index-_002eIGNORE-360"></a>When you run <code>make</code> with the <span class="samp">-i</span> or <span class="samp">--ignore-errors</span>
flag, errors are ignored in all commands of all rules.  A rule in the
makefile for the special target <code>.IGNORE</code> has the same effect, if
there are no prerequisites.  These ways of ignoring errors are obsolete
because <span class="samp">-</span> is more flexible.

   <p>When errors are to be ignored, because of either a <span class="samp">-</span> or the
<span class="samp">-i</span> flag, <code>make</code> treats an error return just like success,
except that it prints out a message that tells you the status code
the command exited with, and says that the error has been ignored.

   <p>When an error happens that <code>make</code> has not been told to ignore,
it implies that the current target cannot be correctly remade, and neither
can any other that depends on it either directly or indirectly.  No further
commands will be executed for these targets, since their preconditions
have not been achieved.

   <p><a name="index-_0040code_007b_002dk_007d-361"></a><a name="index-_0040code_007b_002d_002dkeep_002dgoing_007d-362"></a>Normally <code>make</code> gives up immediately in this circumstance, returning a
nonzero status.  However, if the <span class="samp">-k</span> or <span class="samp">--keep-going</span>
flag is specified, <code>make</code>
continues to consider the other prerequisites of the pending targets,
remaking them if necessary, before it gives up and returns nonzero status. 
For example, after an error in compiling one object file, <span class="samp">make -k</span>
will continue compiling other object files even though it already knows
that linking them will be impossible.  See <a href="#Options-Summary">Summary of Options</a>.

   <p>The usual behavior assumes that your purpose is to get the specified
targets up to date; once <code>make</code> learns that this is impossible, it
might as well report the failure immediately.  The <span class="samp">-k</span> option says
that the real purpose is to test as many of the changes made in the
program as possible, perhaps to find several independent problems so
that you can correct them all before the next attempt to compile.  This
is why Emacs' <code>compile</code> command passes the <span class="samp">-k</span> flag by
default. 
<a name="index-Emacs-_0028_0040code_007bM_002dx-compile_007d_0029-363"></a>
<a name="index-_002eDELETE_005fON_005fERROR-364"></a><a name="index-deletion-of-target-files-365"></a><a name="index-removal-of-target-files-366"></a><a name="index-target_002c-deleting-on-error-367"></a>Usually when a command fails, if it has changed the target file at all,
the file is corrupted and cannot be used&mdash;or at least it is not
completely updated.  Yet the file's time stamp says that it is now up to
date, so the next time <code>make</code> runs, it will not try to update that
file.  The situation is just the same as when the command is killed by a
signal; see <a href="#Interrupts">Interrupts</a>.  So generally the right thing to do is to
delete the target file if the command fails after beginning to change
the file.  <code>make</code> will do this if <code>.DELETE_ON_ERROR</code> appears
as a target.  This is almost always what you want <code>make</code> to do, but
it is not historical practice; so for compatibility, you must explicitly
request it.

<div class="node">
<p><hr>
<a name="Interrupts"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Recursion">Recursion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Errors">Errors</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>
<br>
</div>

<h3 class="section">5.6 Interrupting or Killing <code>make</code></h3>

<p><a name="index-interrupt-368"></a><a name="index-signal-369"></a><a name="index-deletion-of-target-files-370"></a><a name="index-removal-of-target-files-371"></a><a name="index-target_002c-deleting-on-interrupt-372"></a><a name="index-killing-_0028interruption_0029-373"></a>
If <code>make</code> gets a fatal signal while a command is executing, it may
delete the target file that the command was supposed to update.  This is
done if the target file's last-modification time has changed since
<code>make</code> first checked it.

   <p>The purpose of deleting the target is to make sure that it is remade from
scratch when <code>make</code> is next run.  Why is this?  Suppose you type
<kbd>Ctrl-c</kbd> while a compiler is running, and it has begun to write an
object file <span class="file">foo.o</span>.  The <kbd>Ctrl-c</kbd> kills the compiler, resulting
in an incomplete file whose last-modification time is newer than the source
file <span class="file">foo.c</span>.  But <code>make</code> also receives the <kbd>Ctrl-c</kbd> signal
and deletes this incomplete file.  If <code>make</code> did not do this, the next
invocation of <code>make</code> would think that <span class="file">foo.o</span> did not require
updating&mdash;resulting in a strange error message from the linker when it
tries to link an object file half of which is missing.

   <p><a name="index-_002ePRECIOUS-374"></a>You can prevent the deletion of a target file in this way by making the
special target <code>.PRECIOUS</code> depend on it.  Before remaking a target,
<code>make</code> checks to see whether it appears on the prerequisites of
<code>.PRECIOUS</code>, and thereby decides whether the target should be deleted
if a signal happens.  Some reasons why you might do this are that the
target is updated in some atomic fashion, or exists only to record a
modification-time (its contents do not matter), or must exist at all
times to prevent other sorts of trouble.

<div class="node">
<p><hr>
<a name="Recursion"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Sequences">Sequences</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Interrupts">Interrupts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>
<br>
</div>

<h3 class="section">5.7 Recursive Use of <code>make</code></h3>

<p><a name="index-recursion-375"></a><a name="index-subdirectories_002c-recursion-for-376"></a>
Recursive use of <code>make</code> means using <code>make</code> as a command in a
makefile.  This technique is useful when you want separate makefiles for
various subsystems that compose a larger system.  For example, suppose you
have a subdirectory <span class="file">subdir</span> which has its own makefile, and you would
like the containing directory's makefile to run <code>make</code> on the
subdirectory.  You can do it by writing this:

<pre class="example">     subsystem:
             cd subdir &amp;&amp; $(MAKE)
</pre>
   <p class="noindent">or, equivalently, this (see <a href="#Options-Summary">Summary of Options</a>):

<pre class="example">     subsystem:
             $(MAKE) -C subdir
</pre>
   <p><a name="index-_0040code_007b_002dC_007d-377"></a><a name="index-_0040code_007b_002d_002ddirectory_007d-378"></a>
You can write recursive <code>make</code> commands just by copying this example,
but there are many things to know about how they work and why, and about
how the sub-<code>make</code> relates to the top-level <code>make</code>.  You may
also find it useful to declare targets that invoke recursive
<code>make</code> commands as <span class="samp">.PHONY</span> (for more discussion on when
this is useful, see <a href="#Phony-Targets">Phony Targets</a>).

   <p><a name="index-_0040code_007bCURDIR_007d-379"></a>For your convenience, when GNU <code>make</code> starts (after it has
processed any <code>-C</code> options) it sets the variable <code>CURDIR</code> to
the pathname of the current working directory.  This value is never
touched by <code>make</code> again: in particular note that if you include
files from other directories the value of <code>CURDIR</code> does not
change.  The value has the same precedence it would have if it were
set in the makefile (by default, an environment variable <code>CURDIR</code>
will not override this value).  Note that setting this variable has no
impact on the operation of <code>make</code> (it does not cause <code>make</code>
to change its working directory, for example).

<ul class="menu">
<li><a accesskey="1" href="#MAKE-Variable">MAKE Variable</a>:                The special effects of using <span class="samp">$(MAKE)</span>. 
<li><a accesskey="2" href="#Variables_002fRecursion">Variables/Recursion</a>:          How to communicate variables to a sub-<code>make</code>. 
<li><a accesskey="3" href="#Options_002fRecursion">Options/Recursion</a>:            How to communicate options to a sub-<code>make</code>. 
<li><a accesskey="4" href="#_002dw-Option">-w Option</a>:                    How the <span class="samp">-w</span> or <span class="samp">--print-directory</span> option
                                  helps debug use of recursive <code>make</code> commands. 
</ul>

<div class="node">
<p><hr>
<a name="MAKE-Variable"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Variables_002fRecursion">Variables/Recursion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Recursion">Recursion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Recursion">Recursion</a>
<br>
</div>

<h4 class="subsection">5.7.1 How the <code>MAKE</code> Variable Works</h4>

<p><a name="index-MAKE-380"></a><a name="index-recursion_002c-and-_0040code_007bMAKE_007d-variable-381"></a>
Recursive <code>make</code> commands should always use the variable <code>MAKE</code>,
not the explicit command name <span class="samp">make</span>, as shown here:

<pre class="example">     subsystem:
             cd subdir &amp;&amp; $(MAKE)
</pre>
   <p>The value of this variable is the file name with which <code>make</code> was
invoked.  If this file name was <span class="file">/bin/make</span>, then the command executed
is <span class="samp">cd subdir &amp;&amp; /bin/make</span>.  If you use a special version of
<code>make</code> to run the top-level makefile, the same special version will be
executed for recursive invocations. 
<a name="index-_0040code_007bcd_007d-_0028shell-command_0029-382"></a>
<a name="index-_002b_002c-and-commands-383"></a>As a special feature, using the variable <code>MAKE</code> in the commands of
a rule alters the effects of the <span class="samp">-t</span> (<span class="samp">--touch</span>), <span class="samp">-n</span>
(<span class="samp">--just-print</span>), or <span class="samp">-q</span> (<span class="samp">--question</span><!-- /@w -->) option. 
Using the <code>MAKE</code> variable has the same effect as using a <span class="samp">+</span>
character at the beginning of the command line.  See <a href="#Instead-of-Execution">Instead of Executing the Commands</a>.  This special feature
is only enabled if the <code>MAKE</code> variable appears directly in the
command script: it does not apply if the <code>MAKE</code> variable is
referenced through expansion of another variable.  In the latter case
you must use the <span class="samp">+</span> token to get these special effects.

   <p>Consider the command <span class="samp">make -t</span> in the above example.  (The
<span class="samp">-t</span> option marks targets as up to date without actually running
any commands; see <a href="#Instead-of-Execution">Instead of Execution</a>.)  Following the usual
definition of <span class="samp">-t</span>, a <span class="samp">make -t</span> command in the example would
create a file named <span class="file">subsystem</span> and do nothing else.  What you
really want it to do is run <span class="samp">cd&nbsp;subdir&nbsp;&amp;&amp;<!-- /@w --> make&nbsp;-t<!-- /@w --></span>; but that would
require executing the command, and <span class="samp">-t</span> says not to execute
commands. 
<a name="index-_0040code_007b_002dt_007d_002c-and-recursion-384"></a><a name="index-recursion_002c-and-_0040code_007b_002dt_007d-385"></a><a name="index-_0040code_007b_002d_002dtouch_007d_002c-and-recursion-386"></a>
The special feature makes this do what you want: whenever a command
line of a rule contains the variable <code>MAKE</code>, the flags <span class="samp">-t</span>,
<span class="samp">-n</span> and <span class="samp">-q</span> do not apply to that line.  Command lines
containing <code>MAKE</code> are executed normally despite the presence of a
flag that causes most commands not to be run.  The usual
<code>MAKEFLAGS</code> mechanism passes the flags to the sub-<code>make</code>
(see <a href="#Options_002fRecursion">Communicating Options to a Sub-<code>make</code></a>), so your request to touch the files, or print the
commands, is propagated to the subsystem.

<div class="node">
<p><hr>
<a name="Variables_002fRecursion"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Options_002fRecursion">Options/Recursion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#MAKE-Variable">MAKE Variable</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Recursion">Recursion</a>
<br>
</div>

<h4 class="subsection">5.7.2 Communicating Variables to a Sub-<code>make</code></h4>

<p><a name="index-sub_002d_0040code_007bmake_007d-387"></a><a name="index-environment_002c-and-recursion-388"></a><a name="index-exporting-variables-389"></a><a name="index-variables_002c-environment-390"></a><a name="index-variables_002c-exporting-391"></a><a name="index-recursion_002c-and-environment-392"></a><a name="index-recursion_002c-and-variables-393"></a>
Variable values of the top-level <code>make</code> can be passed to the
sub-<code>make</code> through the environment by explicit request.  These
variables are defined in the sub-<code>make</code> as defaults, but do not
override what is specified in the makefile used by the sub-<code>make</code>
makefile unless you use the <span class="samp">-e</span> switch (see <a href="#Options-Summary">Summary of Options</a>).

   <p>To pass down, or <dfn>export</dfn>, a variable, <code>make</code> adds the variable
and its value to the environment for running each command.  The
sub-<code>make</code>, in turn, uses the environment to initialize its table
of variable values.  See <a href="#Environment">Variables from the Environment</a>.

   <p>Except by explicit request, <code>make</code> exports a variable only if it
is either defined in the environment initially or set on the command
line, and if its name consists only of letters, numbers, and underscores. 
Some shells cannot cope with environment variable names consisting of
characters other than letters, numbers, and underscores.

   <p><a name="index-SHELL_002c-exported-value-394"></a>The value of the <code>make</code> variable <code>SHELL</code> is not exported. 
Instead, the value of the <code>SHELL</code> variable from the invoking
environment is passed to the sub-<code>make</code>.  You can force
<code>make</code> to export its value for <code>SHELL</code> by using the
<code>export</code> directive, described below.  See <a href="#Choosing-the-Shell">Choosing the Shell</a>.

   <p>The special variable <code>MAKEFLAGS</code> is always exported (unless you
unexport it).  <code>MAKEFILES</code> is exported if you set it to anything.

   <p><code>make</code> automatically passes down variable values that were defined
on the command line, by putting them in the <code>MAKEFLAGS</code> variable. 
See <a href="#Options_002fRecursion">Options/Recursion</a>.

   <p>Variables are <em>not</em> normally passed down if they were created by
default by <code>make</code> (see <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>).  The sub-<code>make</code> will define these for
itself.

   <p><a name="index-export-395"></a>If you want to export specific variables to a sub-<code>make</code>, use the
<code>export</code> directive, like this:

<pre class="example">     export <var>variable</var> ...
</pre>
   <p class="noindent"><a name="index-unexport-396"></a>If you want to <em>prevent</em> a variable from being exported, use the
<code>unexport</code> directive, like this:

<pre class="example">     unexport <var>variable</var> ...
</pre>
   <p class="noindent">In both of these forms, the arguments to <code>export</code> and
<code>unexport</code> are expanded, and so could be variables or functions
which expand to a (list of) variable names to be (un)exported.

   <p>As a convenience, you can define a variable and export it at the same
time by doing:

<pre class="example">     export <var>variable</var> = value
</pre>
   <p class="noindent">has the same result as:

<pre class="example">     <var>variable</var> = value
     export <var>variable</var>
</pre>
   <p class="noindent">and

<pre class="example">     export <var>variable</var> := value
</pre>
   <p class="noindent">has the same result as:

<pre class="example">     <var>variable</var> := value
     export <var>variable</var>
</pre>
   <p>Likewise,

<pre class="example">     export <var>variable</var> += value
</pre>
   <p class="noindent">is just like:

<pre class="example">     <var>variable</var> += value
     export <var>variable</var>
</pre>
   <p class="noindent">See <a href="#Appending">Appending More Text to Variables</a>.

   <p>You may notice that the <code>export</code> and <code>unexport</code> directives
work in <code>make</code> in the same way they work in the shell, <code>sh</code>.

   <p>If you want all variables to be exported by default, you can use
<code>export</code> by itself:

<pre class="example">     export
</pre>
   <p class="noindent">This tells <code>make</code> that variables which are not explicitly mentioned
in an <code>export</code> or <code>unexport</code> directive should be exported. 
Any variable given in an <code>unexport</code> directive will still <em>not</em>
be exported.  If you use <code>export</code> by itself to export variables by
default, variables whose names contain characters other than
alphanumerics and underscores will not be exported unless specifically
mentioned in an <code>export</code> directive.

   <p><a name="index-_002eEXPORT_005fALL_005fVARIABLES-397"></a>The behavior elicited by an <code>export</code> directive by itself was the
default in older versions of GNU <code>make</code>.  If your makefiles depend
on this behavior and you want to be compatible with old versions of
<code>make</code>, you can write a rule for the special target
<code>.EXPORT_ALL_VARIABLES</code> instead of using the <code>export</code> directive. 
This will be ignored by old <code>make</code>s, while the <code>export</code>
directive will cause a syntax error. 
<a name="index-compatibility-in-exporting-398"></a>
Likewise, you can use <code>unexport</code> by itself to tell <code>make</code>
<em>not</em> to export variables by default.  Since this is the default
behavior, you would only need to do this if <code>export</code> had been used
by itself earlier (in an included makefile, perhaps).  You
<strong>cannot</strong> use <code>export</code> and <code>unexport</code> by themselves to
have variables exported for some commands and not for others.  The last
<code>export</code> or <code>unexport</code> directive that appears by itself
determines the behavior for the entire run of <code>make</code>.

   <p><a name="index-MAKELEVEL-399"></a><a name="index-recursion_002c-level-of-400"></a>As a special feature, the variable <code>MAKELEVEL</code> is changed when it
is passed down from level to level.  This variable's value is a string
which is the depth of the level as a decimal number.  The value is
<span class="samp">0</span> for the top-level <code>make</code>; <span class="samp">1</span> for a sub-<code>make</code>,
<span class="samp">2</span> for a sub-sub-<code>make</code>, and so on.  The incrementation
happens when <code>make</code> sets up the environment for a command.

   <p>The main use of <code>MAKELEVEL</code> is to test it in a conditional
directive (see <a href="#Conditionals">Conditional Parts of Makefiles</a>); this
way you can write a makefile that behaves one way if run recursively and
another way if run directly by you.

   <p><a name="index-MAKEFILES-401"></a>You can use the variable <code>MAKEFILES</code> to cause all sub-<code>make</code>
commands to use additional makefiles.  The value of <code>MAKEFILES</code> is
a whitespace-separated list of file names.  This variable, if defined in
the outer-level makefile, is passed down through the environment; then
it serves as a list of extra makefiles for the sub-<code>make</code> to read
before the usual or specified ones.  See <a href="#MAKEFILES-Variable">The Variable <code>MAKEFILES</code></a>.

<div class="node">
<p><hr>
<a name="Options_002fRecursion"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#_002dw-Option">-w Option</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Variables_002fRecursion">Variables/Recursion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Recursion">Recursion</a>
<br>
</div>

<h4 class="subsection">5.7.3 Communicating Options to a Sub-<code>make</code></h4>

<p><a name="index-options_002c-and-recursion-402"></a><a name="index-recursion_002c-and-options-403"></a>
<a name="index-MAKEFLAGS-404"></a>Flags such as <span class="samp">-s</span> and <span class="samp">-k</span> are passed automatically to the
sub-<code>make</code> through the variable <code>MAKEFLAGS</code>.  This variable is
set up automatically by <code>make</code> to contain the flag letters that
<code>make</code> received.  Thus, if you do <span class="samp">make&nbsp;-ks</span><!-- /@w --> then
<code>MAKEFLAGS</code> gets the value <span class="samp">ks</span>.

   <p>As a consequence, every sub-<code>make</code> gets a value for <code>MAKEFLAGS</code>
in its environment.  In response, it takes the flags from that value and
processes them as if they had been given as arguments. 
See <a href="#Options-Summary">Summary of Options</a>.

   <p><a name="index-command-line-variable-definitions_002c-and-recursion-405"></a><a name="index-variables_002c-command-line_002c-and-recursion-406"></a><a name="index-recursion_002c-and-command-line-variable-definitions-407"></a>Likewise variables defined on the command line are passed to the
sub-<code>make</code> through <code>MAKEFLAGS</code>.  Words in the value of
<code>MAKEFLAGS</code> that contain <span class="samp">=</span>, <code>make</code> treats as variable
definitions just as if they appeared on the command line. 
See <a href="#Overriding">Overriding Variables</a>.

   <p><a name="index-_0040code_007b_002dC_007d_002c-and-recursion-408"></a><a name="index-_0040code_007b_002df_007d_002c-and-recursion-409"></a><a name="index-_0040code_007b_002do_007d_002c-and-recursion-410"></a><a name="index-_0040code_007b_002dW_007d_002c-and-recursion-411"></a><a name="index-_0040code_007b_002d_002ddirectory_007d_002c-and-recursion-412"></a><a name="index-_0040code_007b_002d_002dfile_007d_002c-and-recursion-413"></a><a name="index-_0040code_007b_002d_002dold_002dfile_007d_002c-and-recursion-414"></a><a name="index-_0040code_007b_002d_002dassume_002dold_007d_002c-and-recursion-415"></a><a name="index-_0040code_007b_002d_002dassume_002dnew_007d_002c-and-recursion-416"></a><a name="index-_0040code_007b_002d_002dnew_002dfile_007d_002c-and-recursion-417"></a><a name="index-recursion_002c-and-_0040code_007b_002dC_007d-418"></a><a name="index-recursion_002c-and-_0040code_007b_002df_007d-419"></a><a name="index-recursion_002c-and-_0040code_007b_002do_007d-420"></a><a name="index-recursion_002c-and-_0040code_007b_002dW_007d-421"></a>The options <span class="samp">-C</span>, <span class="samp">-f</span>, <span class="samp">-o</span>, and <span class="samp">-W</span> are not put
into <code>MAKEFLAGS</code>; these options are not passed down.

   <p><a name="index-_0040code_007b_002dj_007d_002c-and-recursion-422"></a><a name="index-_0040code_007b_002d_002djobs_007d_002c-and-recursion-423"></a><a name="index-recursion_002c-and-_0040code_007b_002dj_007d-424"></a><a name="index-job-slots_002c-and-recursion-425"></a>The <span class="samp">-j</span> option is a special case (see <a href="#Parallel">Parallel Execution</a>). 
If you set it to some numeric value <span class="samp">N</span> and your operating system
supports it (most any UNIX system will; others typically won't), the
parent <code>make</code> and all the sub-<code>make</code>s will communicate to
ensure that there are only <span class="samp">N</span> jobs running at the same time
between them all.  Note that any job that is marked recursive
(see <a href="#Instead-of-Execution">Instead of Executing the Commands</a>)
doesn't count against the total jobs (otherwise we could get <span class="samp">N</span>
sub-<code>make</code>s running and have no slots left over for any real work!)

   <p>If your operating system doesn't support the above communication, then
<span class="samp">-j 1</span> is always put into <code>MAKEFLAGS</code> instead of the value you
specified.  This is because if the <span class="samp">-j</span><!-- /@w --> option were passed down
to sub-<code>make</code>s, you would get many more jobs running in parallel
than you asked for.  If you give <span class="samp">-j</span> with no numeric argument,
meaning to run as many jobs as possible in parallel, this is passed
down, since multiple infinities are no more than one.

   <p>If you do not want to pass the other flags down, you must change the
value of <code>MAKEFLAGS</code>, like this:

<pre class="example">     subsystem:
             cd subdir &amp;&amp; $(MAKE) MAKEFLAGS=
</pre>
   <p><a name="index-MAKEOVERRIDES-426"></a>The command line variable definitions really appear in the variable
<code>MAKEOVERRIDES</code>, and <code>MAKEFLAGS</code> contains a reference to this
variable.  If you do want to pass flags down normally, but don't want to
pass down the command line variable definitions, you can reset
<code>MAKEOVERRIDES</code> to empty, like this:

<pre class="example">     MAKEOVERRIDES =
</pre>
   <p class="noindent"><a name="index-Arg-list-too-long-427"></a><a name="index-E2BIG-428"></a>This is not usually useful to do.  However, some systems have a small
fixed limit on the size of the environment, and putting so much
information into the value of <code>MAKEFLAGS</code> can exceed it.  If you
see the error message <span class="samp">Arg list too long</span>, this may be the problem. 
<a name="index-_002ePOSIX-429"></a><a name="index-POSIX_002e2-430"></a>(For strict compliance with POSIX.2, changing <code>MAKEOVERRIDES</code> does
not affect <code>MAKEFLAGS</code> if the special target <span class="samp">.POSIX</span> appears
in the makefile.  You probably do not care about this.)

   <p><a name="index-MFLAGS-431"></a>A similar variable <code>MFLAGS</code> exists also, for historical
compatibility.  It has the same value as <code>MAKEFLAGS</code> except that it
does not contain the command line variable definitions, and it always
begins with a hyphen unless it is empty (<code>MAKEFLAGS</code> begins with a
hyphen only when it begins with an option that has no single-letter
version, such as <span class="samp">--warn-undefined-variables</span>).  <code>MFLAGS</code> was
traditionally used explicitly in the recursive <code>make</code> command, like
this:

<pre class="example">     subsystem:
             cd subdir &amp;&amp; $(MAKE) $(MFLAGS)
</pre>
   <p class="noindent">but now <code>MAKEFLAGS</code> makes this usage redundant.  If you want your
makefiles to be compatible with old <code>make</code> programs, use this
technique; it will work fine with more modern <code>make</code> versions too.

   <p><a name="index-setting-options-from-environment-432"></a><a name="index-options_002c-setting-from-environment-433"></a><a name="index-setting-options-in-makefiles-434"></a><a name="index-options_002c-setting-in-makefiles-435"></a>The <code>MAKEFLAGS</code> variable can also be useful if you want to have
certain options, such as <span class="samp">-k</span> (see <a href="#Options-Summary">Summary of Options</a>), set each time you run <code>make</code>.  You simply put a value for
<code>MAKEFLAGS</code> in your environment.  You can also set <code>MAKEFLAGS</code> in
a makefile, to specify additional flags that should also be in effect for
that makefile.  (Note that you cannot use <code>MFLAGS</code> this way.  That
variable is set only for compatibility; <code>make</code> does not interpret a
value you set for it in any way.)

   <p>When <code>make</code> interprets the value of <code>MAKEFLAGS</code> (either from the
environment or from a makefile), it first prepends a hyphen if the value
does not already begin with one.  Then it chops the value into words
separated by blanks, and parses these words as if they were options given
on the command line (except that <span class="samp">-C</span>, <span class="samp">-f</span>, <span class="samp">-h</span>,
<span class="samp">-o</span>, <span class="samp">-W</span>, and their long-named versions are ignored; and there
is no error for an invalid option).

   <p>If you do put <code>MAKEFLAGS</code> in your environment, you should be sure not
to include any options that will drastically affect the actions of
<code>make</code> and undermine the purpose of makefiles and of <code>make</code>
itself.  For instance, the <span class="samp">-t</span>, <span class="samp">-n</span>, and <span class="samp">-q</span> options, if
put in one of these variables, could have disastrous consequences and would
certainly have at least surprising and probably annoying effects.

<div class="node">
<p><hr>
<a name="_002dw-Option"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Options_002fRecursion">Options/Recursion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Recursion">Recursion</a>
<br>
</div>

<h4 class="subsection">5.7.4 The <span class="samp">--print-directory</span> Option</h4>

<p><a name="index-directories_002c-printing-them-436"></a><a name="index-printing-directories-437"></a><a name="index-recursion_002c-and-printing-directories-438"></a>
If you use several levels of recursive <code>make</code> invocations, the
<span class="samp">-w</span> or <span class="samp">--print-directory</span><!-- /@w --> option can make the output a
lot easier to understand by showing each directory as <code>make</code>
starts processing it and as <code>make</code> finishes processing it.  For
example, if <span class="samp">make -w</span> is run in the directory <span class="file">/u/gnu/make</span>,
<code>make</code> will print a line of the form:

<pre class="example">     make: Entering directory `/u/gnu/make'.
</pre>
   <p class="noindent">before doing anything else, and a line of the form:

<pre class="example">     make: Leaving directory `/u/gnu/make'.
</pre>
   <p class="noindent">when processing is completed.

   <p><a name="index-_0040code_007b_002dC_007d_002c-and-_0040code_007b_002dw_007d-439"></a><a name="index-_0040code_007b_002d_002ddirectory_007d_002c-and-_0040code_007b_002d_002dprint_002ddirectory_007d-440"></a><a name="index-recursion_002c-and-_0040code_007b_002dw_007d-441"></a><a name="index-_0040code_007b_002dw_007d_002c-and-_0040code_007b_002dC_007d-442"></a><a name="index-_0040code_007b_002dw_007d_002c-and-recursion-443"></a><a name="index-_0040code_007b_002d_002dprint_002ddirectory_007d_002c-and-_0040code_007b_002d_002ddirectory_007d-444"></a><a name="index-_0040code_007b_002d_002dprint_002ddirectory_007d_002c-and-recursion-445"></a><a name="index-_0040code_007b_002d_002dno_002dprint_002ddirectory_007d-446"></a><a name="index-_0040code_007b_002d_002dprint_002ddirectory_007d_002c-disabling-447"></a><a name="index-_0040code_007b_002dw_007d_002c-disabling-448"></a>Normally, you do not need to specify this option because <span class="samp">make</span>
does it for you: <span class="samp">-w</span> is turned on automatically when you use the
<span class="samp">-C</span> option, and in sub-<code>make</code>s.  <code>make</code> will not
automatically turn on <span class="samp">-w</span> if you also use <span class="samp">-s</span>, which says to
be silent, or if you use <span class="samp">--no-print-directory</span> to explicitly
disable it.

<div class="node">
<p><hr>
<a name="Sequences"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Empty-Commands">Empty Commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Recursion">Recursion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>
<br>
</div>

<h3 class="section">5.8 Defining Canned Command Sequences</h3>

<p><a name="index-sequences-of-commands-449"></a><a name="index-commands_002c-sequences-of-450"></a>
When the same sequence of commands is useful in making various targets, you
can define it as a canned sequence with the <code>define</code> directive, and
refer to the canned sequence from the rules for those targets.  The canned
sequence is actually a variable, so the name must not conflict with other
variable names.

   <p>Here is an example of defining a canned sequence of commands:

<pre class="example">     define run-yacc
     yacc $(firstword $^)
     mv y.tab.c $@
     endef
</pre>
   <p><a name="index-_0040code_007byacc_007d-451"></a>
Here <code>run-yacc</code> is the name of the variable being defined;
<code>endef</code> marks the end of the definition; the lines in between are the
commands.  The <code>define</code> directive does not expand variable references
and function calls in the canned sequence; the <span class="samp">$</span> characters,
parentheses, variable names, and so on, all become part of the value of the
variable you are defining. 
See <a href="#Defining">Defining Variables Verbatim</a>,
for a complete explanation of <code>define</code>.

   <p>The first command in this example runs Yacc on the first prerequisite of
whichever rule uses the canned sequence.  The output file from Yacc is
always named <span class="file">y.tab.c</span>.  The second command moves the output to the
rule's target file name.

   <p>To use the canned sequence, substitute the variable into the commands of a
rule.  You can substitute it like any other variable
(see <a href="#Reference">Basics of Variable References</a>). 
Because variables defined by <code>define</code> are recursively expanded
variables, all the variable references you wrote inside the <code>define</code>
are expanded now.  For example:

<pre class="example">     foo.c : foo.y
             $(run-yacc)
</pre>
   <p class="noindent"><span class="samp">foo.y</span> will be substituted for the variable <span class="samp">$^</span> when it occurs in
<code>run-yacc</code>'s value, and <span class="samp">foo.c</span> for <span class="samp">$@</span>.

   <p>This is a realistic example, but this particular one is not needed in
practice because <code>make</code> has an implicit rule to figure out these
commands based on the file names involved
(see <a href="#Implicit-Rules">Using Implicit Rules</a>).

   <p><a name="index-_0040_0040_002c-and-_0040code_007bdefine_007d-452"></a><a name="index-_002d_002c-and-_0040code_007bdefine_007d-453"></a><a name="index-_002b_002c-and-_0040code_007bdefine_007d-454"></a>In command execution, each line of a canned sequence is treated just as
if the line appeared on its own in the rule, preceded by a tab.  In
particular, <code>make</code> invokes a separate subshell for each line.  You
can use the special prefix characters that affect command lines
(<span class="samp">@</span>, <span class="samp">-</span>, and <span class="samp">+</span>) on each line of a canned sequence. 
See <a href="#Commands">Writing the Commands in Rules</a>. 
For example, using this canned sequence:

<pre class="example">     define frobnicate
     @echo "frobnicating target $@"
     frob-step-1 $&lt; -o $@-step-1
     frob-step-2 $@-step-1 -o $@
     endef
</pre>
   <p class="noindent"><code>make</code> will not echo the first line, the <code>echo</code> command. 
But it <em>will</em> echo the following two command lines.

   <p>On the other hand, prefix characters on the command line that refers to
a canned sequence apply to every line in the sequence.  So the rule:

<pre class="example">     frob.out: frob.in
             @$(frobnicate)
</pre>
   <p class="noindent">does not echo <em>any</em> commands. 
(See <a href="#Echoing">Command Echoing</a>, for a full explanation of <span class="samp">@</span>.)

<div class="node">
<p><hr>
<a name="Empty-Commands"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Sequences">Sequences</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>
<br>
</div>

<h3 class="section">5.9 Using Empty Commands</h3>

<p><a name="index-empty-commands-455"></a><a name="index-commands_002c-empty-456"></a>
It is sometimes useful to define commands which do nothing.  This is done
simply by giving a command that consists of nothing but whitespace.  For
example:

<pre class="example">     target: ;
</pre>
   <p class="noindent">defines an empty command string for <span class="file">target</span>.  You could also use a
line beginning with a tab character to define an empty command string,
but this would be confusing because such a line looks empty.

   <p><a name="index-_002eDEFAULT_0040r_007b_002c-and-empty-commands_007d-457"></a>You may be wondering why you would want to define a command string that
does nothing.  The only reason this is useful is to prevent a target
from getting implicit commands (from implicit rules or the
<code>.DEFAULT</code> special target; see <a href="#Implicit-Rules">Implicit Rules</a> and
see <a href="#Last-Resort">Defining Last-Resort Default Rules</a>).

<!-- !!! another reason is for canonical stamp files: -->
<p>You may be inclined to define empty command strings for targets that are
not actual files, but only exist so that their prerequisites can be
remade.  However, this is not the best way to do that, because the
prerequisites may not be remade properly if the target file actually does exist. 
See <a href="#Phony-Targets">Phony Targets</a>, for a better way to do this.

<div class="node">
<p><hr>
<a name="Using-Variables"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Conditionals">Conditionals</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Commands">Commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">6 How to Use Variables</h2>

<p><a name="index-variable-458"></a><a name="index-value-459"></a><a name="index-recursive-variable-expansion-460"></a><a name="index-simple-variable-expansion-461"></a>
A <dfn>variable</dfn> is a name defined in a makefile to represent a string
of text, called the variable's <dfn>value</dfn>.  These values are
substituted by explicit request into targets, prerequisites, commands,
and other parts of the makefile.  (In some other versions of <code>make</code>,
variables are called <dfn>macros</dfn>.) 
<a name="index-macro-462"></a>
Variables and functions in all parts of a makefile are expanded when
read, except for the shell commands in rules, the right-hand sides of
variable definitions using <span class="samp">=</span>, and the bodies of variable
definitions using the <code>define</code> directive.

   <p>Variables can represent lists of file names, options to pass to compilers,
programs to run, directories to look in for source files, directories to
write output in, or anything else you can imagine.

   <p>A variable name may be any sequence of characters not containing <span class="samp">:</span>,
<span class="samp">#</span>, <span class="samp">=</span>, or leading or trailing whitespace.  However,
variable names containing characters other than letters, numbers, and
underscores should be avoided, as they may be given special meanings in the
future, and with some shells they cannot be passed through the environment to a
sub-<code>make</code>
(see <a href="#Variables_002fRecursion">Communicating Variables to a Sub-<code>make</code></a>).

   <p>Variable names are case-sensitive.  The names <span class="samp">foo</span>, <span class="samp">FOO</span>,
and <span class="samp">Foo</span> all refer to different variables.

   <p>It is traditional to use upper case letters in variable names, but we
recommend using lower case letters for variable names that serve internal
purposes in the makefile, and reserving upper case for parameters that
control implicit rules or for parameters that the user should override with
command options (see <a href="#Overriding">Overriding Variables</a>).

   <p>A few variables have names that are a single punctuation character or
just a few characters.  These are the <dfn>automatic variables</dfn>, and
they have particular specialized uses.  See <a href="#Automatic-Variables">Automatic Variables</a>.

<ul class="menu">
<li><a accesskey="1" href="#Reference">Reference</a>:                    How to use the value of a variable. 
<li><a accesskey="2" href="#Flavors">Flavors</a>:                      Variables come in two flavors. 
<li><a accesskey="3" href="#Advanced">Advanced</a>:                     Advanced features for referencing a variable. 
<li><a accesskey="4" href="#Values">Values</a>:                       All the ways variables get their values. 
<li><a accesskey="5" href="#Setting">Setting</a>:                      How to set a variable in the makefile. 
<li><a accesskey="6" href="#Appending">Appending</a>:                    How to append more text to the old value
                                  of a variable. 
<li><a accesskey="7" href="#Override-Directive">Override Directive</a>:           How to set a variable in the makefile even if
                                  the user has set it with a command argument. 
<li><a accesskey="8" href="#Defining">Defining</a>:                     An alternate way to set a variable
                                  to a verbatim string. 
<li><a accesskey="9" href="#Environment">Environment</a>:                  Variable values can come from the environment. 
<li><a href="#Target_002dspecific">Target-specific</a>:              Variable values can be defined on a per-target
                                  basis. 
<li><a href="#Pattern_002dspecific">Pattern-specific</a>:             Target-specific variable values can be applied
                                  to a group of targets that match a pattern. 
</ul>

<div class="node">
<p><hr>
<a name="Reference"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Flavors">Flavors</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Variables">Using Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables">Using Variables</a>
<br>
</div>

<h3 class="section">6.1 Basics of Variable References</h3>

<p><a name="index-variables_002c-how-to-reference-463"></a><a name="index-reference-to-variables-464"></a><a name="index-_0040code_007b_0024_007d_002c-in-variable-reference-465"></a><a name="index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-in-variable-reference-466"></a>
To substitute a variable's value, write a dollar sign followed by the name
of the variable in parentheses or braces: either <span class="samp">$(foo)</span> or
<span class="samp">${foo}</span> is a valid reference to the variable <code>foo</code>.  This
special significance of <span class="samp">$</span> is why you must write <span class="samp">$$</span> to have
the effect of a single dollar sign in a file name or command.

   <p>Variable references can be used in any context: targets, prerequisites,
commands, most directives, and new variable values.  Here is an
example of a common case, where a variable holds the names of all the
object files in a program:

<pre class="example">     objects = program.o foo.o utils.o
     program : $(objects)
             cc -o program $(objects)
     
     $(objects) : defs.h
</pre>
   <p>Variable references work by strict textual substitution.  Thus, the rule

<pre class="example">     foo = c
     prog.o : prog.$(foo)
             $(foo)$(foo) -$(foo) prog.$(foo)
</pre>
   <p class="noindent">could be used to compile a C program <span class="file">prog.c</span>.  Since spaces before
the variable value are ignored in variable assignments, the value of
<code>foo</code> is precisely <span class="samp">c</span>.  (Don't actually write your makefiles
this way!)

   <p>A dollar sign followed by a character other than a dollar sign,
open-parenthesis or open-brace treats that single character as the
variable name.  Thus, you could reference the variable <code>x</code> with
<span class="samp">$x</span>.  However, this practice is strongly discouraged, except in
the case of the automatic variables (see <a href="#Automatic-Variables">Automatic Variables</a>).

<div class="node">
<p><hr>
<a name="Flavors"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Advanced">Advanced</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Reference">Reference</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables">Using Variables</a>
<br>
</div>

<h3 class="section">6.2 The Two Flavors of Variables</h3>

<p><a name="index-flavors-of-variables-467"></a><a name="index-recursive-variable-expansion-468"></a><a name="index-variables_002c-flavors-469"></a><a name="index-recursively-expanded-variables-470"></a><a name="index-variables_002c-recursively-expanded-471"></a>
There are two ways that a variable in GNU <code>make</code> can have a value;
we call them the two <dfn>flavors</dfn> of variables.  The two flavors are
distinguished in how they are defined and in what they do when expanded.

   <p><a name="index-_003d-472"></a>The first flavor of variable is a <dfn>recursively expanded</dfn> variable. 
Variables of this sort are defined by lines using <span class="samp">=</span>
(see <a href="#Setting">Setting Variables</a>) or by the <code>define</code> directive
(see <a href="#Defining">Defining Variables Verbatim</a>).  The value you specify
is installed verbatim; if it contains references to other variables,
these references are expanded whenever this variable is substituted (in
the course of expanding some other string).  When this happens, it is
called <dfn>recursive expansion</dfn>.

   <p>For example,

<pre class="example">     foo = $(bar)
     bar = $(ugh)
     ugh = Huh?
     
     all:;echo $(foo)
</pre>
   <p class="noindent">will echo <span class="samp">Huh?</span>: <span class="samp">$(foo)</span> expands to <span class="samp">$(bar)</span> which
expands to <span class="samp">$(ugh)</span> which finally expands to <span class="samp">Huh?</span>.

   <p>This flavor of variable is the only sort supported by other versions of
<code>make</code>.  It has its advantages and its disadvantages.  An advantage
(most would say) is that:

<pre class="example">     CFLAGS = $(include_dirs) -O
     include_dirs = -Ifoo -Ibar
</pre>
   <p class="noindent">will do what was intended: when <span class="samp">CFLAGS</span> is expanded in a command,
it will expand to <span class="samp">-Ifoo -Ibar -O</span>.  A major disadvantage is that you
cannot append something on the end of a variable, as in

<pre class="example">     CFLAGS = $(CFLAGS) -O
</pre>
   <p class="noindent">because it will cause an infinite loop in the variable expansion. 
(Actually <code>make</code> detects the infinite loop and reports an error.) 
<a name="index-loops-in-variable-expansion-473"></a><a name="index-variables_002c-loops-in-expansion-474"></a>
Another disadvantage is that any functions
(see <a href="#Functions">Functions for Transforming Text</a>)
referenced in the definition will be executed every time the variable is
expanded.  This makes <code>make</code> run slower; worse, it causes the
<code>wildcard</code> and <code>shell</code> functions to give unpredictable results
because you cannot easily control when they are called, or even how many
times.

   <p>To avoid all the problems and inconveniences of recursively expanded
variables, there is another flavor: simply expanded variables.

   <p><a name="index-simply-expanded-variables-475"></a><a name="index-variables_002c-simply-expanded-476"></a><a name="index-_003a_003d-477"></a><dfn>Simply expanded variables</dfn> are defined by lines using <span class="samp">:=</span>
(see <a href="#Setting">Setting Variables</a>). 
The value of a simply expanded variable is scanned
once and for all, expanding any references to other variables and
functions, when the variable is defined.  The actual value of the simply
expanded variable is the result of expanding the text that you write. 
It does not contain any references to other variables; it contains their
values <em>as of the time this variable was defined</em>.  Therefore,

<pre class="example">     x := foo
     y := $(x) bar
     x := later
</pre>
   <p class="noindent">is equivalent to

<pre class="example">     y := foo bar
     x := later
</pre>
   <p>When a simply expanded variable is referenced, its value is substituted
verbatim.

   <p>Here is a somewhat more complicated example, illustrating the use of
<span class="samp">:=</span> in conjunction with the <code>shell</code> function. 
(See <a href="#Shell-Function">The <code>shell</code> Function</a>.)  This example
also shows use of the variable <code>MAKELEVEL</code>, which is changed
when it is passed down from level to level. 
(See <a href="#Variables_002fRecursion">Communicating Variables to a Sub-<code>make</code></a>, for information about <code>MAKELEVEL</code>.)

   <p><a name="index-MAKELEVEL-478"></a><a name="index-MAKE-479"></a>
<pre class="example">     ifeq (0,${MAKELEVEL})
     whoami    := $(shell whoami)
     host-type := $(shell arch)
     MAKE := ${MAKE} host-type=${host-type} whoami=${whoami}
     endif
</pre>
   <p class="noindent">An advantage of this use of <span class="samp">:=</span> is that a typical
`descend into a directory' command then looks like this:

<pre class="example">     ${subdirs}:
             ${MAKE} -C $@ all
</pre>
   <p>Simply expanded variables generally make complicated makefile programming
more predictable because they work like variables in most programming
languages.  They allow you to redefine a variable using its own value (or
its value processed in some way by one of the expansion functions) and to
use the expansion functions much more efficiently
(see <a href="#Functions">Functions for Transforming Text</a>).

   <p><a name="index-spaces_002c-in-variable-values-480"></a><a name="index-whitespace_002c-in-variable-values-481"></a><a name="index-variables_002c-spaces-in-values-482"></a>You can also use them to introduce controlled leading whitespace into
variable values.  Leading whitespace characters are discarded from your
input before substitution of variable references and function calls;
this means you can include leading spaces in a variable value by
protecting them with variable references, like this:

<pre class="example">     nullstring :=
     space := $(nullstring) # end of the line
</pre>
   <p class="noindent">Here the value of the variable <code>space</code> is precisely one space.  The
comment <span class="samp">#&nbsp;end&nbsp;of&nbsp;the&nbsp;line</span><!-- /@w --> is included here just for clarity. 
Since trailing space characters are <em>not</em> stripped from variable
values, just a space at the end of the line would have the same effect
(but be rather hard to read).  If you put whitespace at the end of a
variable value, it is a good idea to put a comment like that at the end
of the line to make your intent clear.  Conversely, if you do <em>not</em>
want any whitespace characters at the end of your variable value, you
must remember not to put a random comment on the end of the line after
some whitespace, such as this:

<pre class="example">     dir := /foo/bar    # directory to put the frobs in
</pre>
   <p class="noindent">Here the value of the variable <code>dir</code> is <span class="samp">/foo/bar&nbsp;&nbsp;&nbsp;&nbsp;</span><!-- /@w -->
(with four trailing spaces), which was probably not the intention. 
(Imagine something like <span class="samp">$(dir)/file</span><!-- /@w --> with this definition!)

   <p><a name="index-conditional-variable-assignment-483"></a><a name="index-variables_002c-conditional-assignment-484"></a><a name="index-_003f_003d-485"></a>There is another assignment operator for variables, <span class="samp">?=</span>.  This
is called a conditional variable assignment operator, because it only
has an effect if the variable is not yet defined.  This statement:

<pre class="example">     FOO ?= bar
</pre>
   <p class="noindent">is exactly equivalent to this
(see <a href="#Origin-Function">The <code>origin</code> Function</a>):

<pre class="example">     ifeq ($(origin FOO), undefined)
       FOO = bar
     endif
</pre>
   <p>Note that a variable set to an empty value is still defined, so
<span class="samp">?=</span> will not set that variable.

<div class="node">
<p><hr>
<a name="Advanced"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Values">Values</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Flavors">Flavors</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables">Using Variables</a>
<br>
</div>

<h3 class="section">6.3 Advanced Features for Reference to Variables</h3>

<p><a name="index-reference-to-variables-486"></a>
This section describes some advanced features you can use to reference
variables in more flexible ways.

<ul class="menu">
<li><a accesskey="1" href="#Substitution-Refs">Substitution Refs</a>:            Referencing a variable with
                                  substitutions on the value. 
<li><a accesskey="2" href="#Computed-Names">Computed Names</a>:               Computing the name of the variable to refer to. 
</ul>

<div class="node">
<p><hr>
<a name="Substitution-Refs"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Computed-Names">Computed Names</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Advanced">Advanced</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Advanced">Advanced</a>
<br>
</div>

<h4 class="subsection">6.3.1 Substitution References</h4>

<p><a name="index-modified-variable-reference-487"></a><a name="index-substitution-variable-reference-488"></a><a name="index-variables_002c-modified-reference-489"></a><a name="index-variables_002c-substitution-reference-490"></a>
<a name="index-variables_002c-substituting-suffix-in-491"></a><a name="index-suffix_002c-substituting-in-variables-492"></a>A <dfn>substitution reference</dfn> substitutes the value of a variable with
alterations that you specify.  It has the form
<span class="samp">$(</span><var>var</var><span class="samp">:</span><var>a</var><span class="samp">=</span><var>b</var><span class="samp">)</span> (or
<span class="samp">${</span><var>var</var><span class="samp">:</span><var>a</var><span class="samp">=</span><var>b</var><span class="samp">}</span>) and its meaning is to take the value
of the variable <var>var</var>, replace every <var>a</var> at the end of a word with
<var>b</var> in that value, and substitute the resulting string.

   <p>When we say &ldquo;at the end of a word&rdquo;, we mean that <var>a</var> must appear
either followed by whitespace or at the end of the value in order to be
replaced; other occurrences of <var>a</var> in the value are unaltered.  For
example:

<pre class="example">     foo := a.o b.o c.o
     bar := $(foo:.o=.c)
</pre>
   <p class="noindent">sets <span class="samp">bar</span> to <span class="samp">a.c b.c c.c</span>.  See <a href="#Setting">Setting Variables</a>.

   <p>A substitution reference is actually an abbreviation for use of the
<code>patsubst</code> expansion function (see <a href="#Text-Functions">Functions for String Substitution and Analysis</a>).  We provide
substitution references as well as <code>patsubst</code> for compatibility with
other implementations of <code>make</code>.

   <p><a name="index-patsubst-493"></a>Another type of substitution reference lets you use the full power of
the <code>patsubst</code> function.  It has the same form
<span class="samp">$(</span><var>var</var><span class="samp">:</span><var>a</var><span class="samp">=</span><var>b</var><span class="samp">)</span> described above, except that now
<var>a</var> must contain a single <span class="samp">%</span> character.  This case is
equivalent to <span class="samp">$(patsubst </span><var>a</var><span class="samp">,</span><var>b</var><span class="samp">,$(</span><var>var</var><span class="samp">))</span>. 
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>,
for a description of the <code>patsubst</code> function.

<pre class="example"><br>For example:<br>
     
     foo := a.o b.o c.o
     bar := $(foo:%.o=%.c)
</pre>
   <p class="noindent">sets <span class="samp">bar</span> to <span class="samp">a.c b.c c.c</span>.

<div class="node">
<p><hr>
<a name="Computed-Names"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Substitution-Refs">Substitution Refs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Advanced">Advanced</a>
<br>
</div>

<h4 class="subsection">6.3.2 Computed Variable Names</h4>

<p><a name="index-nested-variable-reference-494"></a><a name="index-computed-variable-name-495"></a><a name="index-variables_002c-computed-names-496"></a><a name="index-variables_002c-nested-references-497"></a><a name="index-variables_002c-_0040samp_007b_0024_007d-in-name-498"></a><a name="index-_0040code_007b_0024_007d_002c-in-variable-name-499"></a><a name="index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-in-variable-name-500"></a>
Computed variable names are a complicated concept needed only for
sophisticated makefile programming.  For most purposes you need not
consider them, except to know that making a variable with a dollar sign
in its name might have strange results.  However, if you are the type
that wants to understand everything, or you are actually interested in
what they do, read on.

   <p>Variables may be referenced inside the name of a variable.  This is
called a <dfn>computed variable name</dfn> or a <dfn>nested variable
reference</dfn>.  For example,

<pre class="example">     x = y
     y = z
     a := $($(x))
</pre>
   <p class="noindent">defines <code>a</code> as <span class="samp">z</span>: the <span class="samp">$(x)</span> inside <span class="samp">$($(x))</span> expands
to <span class="samp">y</span>, so <span class="samp">$($(x))</span> expands to <span class="samp">$(y)</span> which in turn expands
to <span class="samp">z</span>.  Here the name of the variable to reference is not stated
explicitly; it is computed by expansion of <span class="samp">$(x)</span>.  The reference
<span class="samp">$(x)</span> here is nested within the outer variable reference.

   <p>The previous example shows two levels of nesting, but any number of levels
is possible.  For example, here are three levels:

<pre class="example">     x = y
     y = z
     z = u
     a := $($($(x)))
</pre>
   <p class="noindent">Here the innermost <span class="samp">$(x)</span> expands to <span class="samp">y</span>, so <span class="samp">$($(x))</span>
expands to <span class="samp">$(y)</span> which in turn expands to <span class="samp">z</span>; now we have
<span class="samp">$(z)</span>, which becomes <span class="samp">u</span>.

   <p>References to recursively-expanded variables within a variable name are
reexpanded in the usual fashion.  For example:

<pre class="example">     x = $(y)
     y = z
     z = Hello
     a := $($(x))
</pre>
   <p class="noindent">defines <code>a</code> as <span class="samp">Hello</span>: <span class="samp">$($(x))</span> becomes <span class="samp">$($(y))</span>
which becomes <span class="samp">$(z)</span> which becomes <span class="samp">Hello</span>.

   <p>Nested variable references can also contain modified references and
function invocations (see <a href="#Functions">Functions for Transforming Text</a>),
just like any other reference. 
For example, using the <code>subst</code> function
(see <a href="#Text-Functions">Functions for String Substitution and Analysis</a>):

<pre class="example">     x = variable1
     variable2 := Hello
     y = $(subst 1,2,$(x))
     z = y
     a := $($($(z)))
</pre>
   <p class="noindent">eventually defines <code>a</code> as <span class="samp">Hello</span>.  It is doubtful that anyone
would ever want to write a nested reference as convoluted as this one, but
it works: <span class="samp">$($($(z)))</span> expands to <span class="samp">$($(y))</span> which becomes
<span class="samp">$($(subst 1,2,$(x)))</span>.  This gets the value <span class="samp">variable1</span> from
<code>x</code> and changes it by substitution to <span class="samp">variable2</span>, so that the
entire string becomes <span class="samp">$(variable2)</span>, a simple variable reference
whose value is <span class="samp">Hello</span>.

   <p>A computed variable name need not consist entirely of a single variable
reference.  It can contain several variable references, as well as some
invariant text.  For example,

<pre class="example">     a_dirs := dira dirb
     1_dirs := dir1 dir2
     
     a_files := filea fileb
     1_files := file1 file2
     
     ifeq "$(use_a)" "yes"
     a1 := a
     else
     a1 := 1
     endif
     
     ifeq "$(use_dirs)" "yes"
     df := dirs
     else
     df := files
     endif
     
     dirs := $($(a1)_$(df))
</pre>
   <p class="noindent">will give <code>dirs</code> the same value as <code>a_dirs</code>, <code>1_dirs</code>,
<code>a_files</code> or <code>1_files</code> depending on the settings of <code>use_a</code>
and <code>use_dirs</code>.

   <p>Computed variable names can also be used in substitution references:

<pre class="example">     a_objects := a.o b.o c.o
     1_objects := 1.o 2.o 3.o
     
     sources := $($(a1)_objects:.o=.c)
</pre>
   <p class="noindent">defines <code>sources</code> as either <span class="samp">a.c b.c c.c</span> or <span class="samp">1.c 2.c 3.c</span>,
depending on the value of <code>a1</code>.

   <p>The only restriction on this sort of use of nested variable references
is that they cannot specify part of the name of a function to be called. 
This is because the test for a recognized function name is done before
the expansion of nested references.  For example,

<pre class="example">     ifdef do_sort
     func := sort
     else
     func := strip
     endif
     
     bar := a d b g q c
     
     foo := $($(func) $(bar))
</pre>
   <p class="noindent">attempts to give <span class="samp">foo</span> the value of the variable <span class="samp">sort a d b g
q c</span> or <span class="samp">strip a d b g q c</span>, rather than giving <span class="samp">a d b g q c</span>
as the argument to either the <code>sort</code> or the <code>strip</code> function. 
This restriction could be removed in the future if that change is shown
to be a good idea.

   <p>You can also use computed variable names in the left-hand side of a
variable assignment, or in a <code>define</code> directive, as in:

<pre class="example">     dir = foo
     $(dir)_sources := $(wildcard $(dir)/*.c)
     define $(dir)_print
     lpr $($(dir)_sources)
     endef
</pre>
   <p class="noindent">This example defines the variables <span class="samp">dir</span>, <span class="samp">foo_sources</span>, and
<span class="samp">foo_print</span>.

   <p>Note that <dfn>nested variable references</dfn> are quite different from
<dfn>recursively expanded variables</dfn>
(see <a href="#Flavors">The Two Flavors of Variables</a>), though both are
used together in complex ways when doing makefile programming.

<div class="node">
<p><hr>
<a name="Values"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Setting">Setting</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Advanced">Advanced</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables">Using Variables</a>
<br>
</div>

<h3 class="section">6.4 How Variables Get Their Values</h3>

<p><a name="index-variables_002c-how-they-get-their-values-501"></a><a name="index-value_002c-how-a-variable-gets-it-502"></a>
Variables can get values in several different ways:

     <ul>
<li>You can specify an overriding value when you run <code>make</code>. 
See <a href="#Overriding">Overriding Variables</a>.

     <li>You can specify a value in the makefile, either
with an assignment (see <a href="#Setting">Setting Variables</a>) or with a
verbatim definition (see <a href="#Defining">Defining Variables Verbatim</a>).

     <li>Variables in the environment become <code>make</code> variables. 
See <a href="#Environment">Variables from the Environment</a>.

     <li>Several <dfn>automatic</dfn> variables are given new values for each rule. 
Each of these has a single conventional use. 
See <a href="#Automatic-Variables">Automatic Variables</a>.

     <li>Several variables have constant initial values. 
See <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>. 
</ul>

<div class="node">
<p><hr>
<a name="Setting"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Appending">Appending</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Values">Values</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables">Using Variables</a>
<br>
</div>

<h3 class="section">6.5 Setting Variables</h3>

<p><a name="index-setting-variables-503"></a><a name="index-variables_002c-setting-504"></a><a name="index-_003d-505"></a><a name="index-_003a_003d-506"></a><a name="index-_003f_003d-507"></a>
To set a variable from the makefile, write a line starting with the
variable name followed by <span class="samp">=</span> or <span class="samp">:=</span>.  Whatever follows the
<span class="samp">=</span> or <span class="samp">:=</span> on the line becomes the value.  For example,

<pre class="example">     objects = main.o foo.o bar.o utils.o
</pre>
   <p class="noindent">defines a variable named <code>objects</code>.  Whitespace around the variable
name and immediately after the <span class="samp">=</span> is ignored.

   <p>Variables defined with <span class="samp">=</span> are <dfn>recursively expanded</dfn> variables. 
Variables defined with <span class="samp">:=</span> are <dfn>simply expanded</dfn> variables; these
definitions can contain variable references which will be expanded before
the definition is made.  See <a href="#Flavors">The Two Flavors of Variables</a>.

   <p>The variable name may contain function and variable references, which
are expanded when the line is read to find the actual variable name to use.

   <p>There is no limit on the length of the value of a variable except the
amount of swapping space on the computer.  When a variable definition is
long, it is a good idea to break it into several lines by inserting
backslash-newline at convenient places in the definition.  This will not
affect the functioning of <code>make</code>, but it will make the makefile easier
to read.

   <p>Most variable names are considered to have the empty string as a value if
you have never set them.  Several variables have built-in initial values
that are not empty, but you can set them in the usual ways
(see <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>). 
Several special variables are set
automatically to a new value for each rule; these are called the
<dfn>automatic</dfn> variables (see <a href="#Automatic-Variables">Automatic Variables</a>).

   <p>If you'd like a variable to be set to a value only if it's not already
set, then you can use the shorthand operator <span class="samp">?=</span> instead of
<span class="samp">=</span>.  These two settings of the variable <span class="samp">FOO</span> are identical
(see <a href="#Origin-Function">The <code>origin</code> Function</a>):

<pre class="example">     FOO ?= bar
</pre>
   <p class="noindent">and

<pre class="example">     ifeq ($(origin FOO), undefined)
     FOO = bar
     endif
</pre>
   <div class="node">
<p><hr>
<a name="Appending"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Override-Directive">Override Directive</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Setting">Setting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables">Using Variables</a>
<br>
</div>

<h3 class="section">6.6 Appending More Text to Variables</h3>

<p><a name="index-_002b_003d-508"></a><a name="index-appending-to-variables-509"></a><a name="index-variables_002c-appending-to-510"></a>
Often it is useful to add more text to the value of a variable already defined. 
You do this with a line containing <span class="samp">+=</span>, like this:

<pre class="example">     objects += another.o
</pre>
   <p class="noindent">This takes the value of the variable <code>objects</code>, and adds the text
<span class="samp">another.o</span> to it (preceded by a single space).  Thus:

<pre class="example">     objects = main.o foo.o bar.o utils.o
     objects += another.o
</pre>
   <p class="noindent">sets <code>objects</code> to <span class="samp">main.o foo.o bar.o utils.o another.o</span>.

   <p>Using <span class="samp">+=</span> is similar to:

<pre class="example">     objects = main.o foo.o bar.o utils.o
     objects := $(objects) another.o
</pre>
   <p class="noindent">but differs in ways that become important when you use more complex values.

   <p>When the variable in question has not been defined before, <span class="samp">+=</span>
acts just like normal <span class="samp">=</span>: it defines a recursively-expanded
variable.  However, when there <em>is</em> a previous definition, exactly
what <span class="samp">+=</span> does depends on what flavor of variable you defined
originally.  See <a href="#Flavors">The Two Flavors of Variables</a>, for an
explanation of the two flavors of variables.

   <p>When you add to a variable's value with <span class="samp">+=</span>, <code>make</code> acts
essentially as if you had included the extra text in the initial
definition of the variable.  If you defined it first with <span class="samp">:=</span>,
making it a simply-expanded variable, <span class="samp">+=</span> adds to that
simply-expanded definition, and expands the new text before appending it
to the old value just as <span class="samp">:=</span> does
(see <a href="#Setting">Setting Variables</a>, for a full explanation of <span class="samp">:=</span>). 
In fact,

<pre class="example">     variable := value
     variable += more
</pre>
   <p class="noindent">is exactly equivalent to:

<p class="noindent">
<pre class="example">     variable := value
     variable := $(variable) more
</pre>
   <p>On the other hand, when you use <span class="samp">+=</span> with a variable that you defined
first to be recursively-expanded using plain <span class="samp">=</span>, <code>make</code> does
something a bit different.  Recall that when you define a
recursively-expanded variable, <code>make</code> does not expand the value you set
for variable and function references immediately.  Instead it stores the text
verbatim, and saves these variable and function references to be expanded
later, when you refer to the new variable (see <a href="#Flavors">The Two Flavors of Variables</a>).  When you use <span class="samp">+=</span> on a recursively-expanded variable,
it is this unexpanded text to which <code>make</code> appends the new text you
specify.

<pre class="example">     variable = value
     variable += more
</pre>
   <p class="noindent">is roughly equivalent to:

<pre class="example">     temp = value
     variable = $(temp) more
</pre>
   <p class="noindent">except that of course it never defines a variable called <code>temp</code>. 
The importance of this comes when the variable's old value contains
variable references.  Take this common example:

<pre class="example">     CFLAGS = $(includes) -O
     ...
     CFLAGS += -pg # enable profiling
</pre>
   <p class="noindent">The first line defines the <code>CFLAGS</code> variable with a reference to another
variable, <code>includes</code>.  (<code>CFLAGS</code> is used by the rules for C
compilation; see <a href="#Catalogue-of-Rules">Catalogue of Implicit Rules</a>.) 
Using <span class="samp">=</span> for the definition makes <code>CFLAGS</code> a recursively-expanded
variable, meaning <span class="samp">$(includes)&nbsp;-O</span><!-- /@w --> is <em>not</em> expanded when
<code>make</code> processes the definition of <code>CFLAGS</code>.  Thus, <code>includes</code>
need not be defined yet for its value to take effect.  It only has to be
defined before any reference to <code>CFLAGS</code>.  If we tried to append to the
value of <code>CFLAGS</code> without using <span class="samp">+=</span>, we might do it like this:

<pre class="example">     CFLAGS := $(CFLAGS) -pg # enable profiling
</pre>
   <p class="noindent">This is pretty close, but not quite what we want.  Using <span class="samp">:=</span>
redefines <code>CFLAGS</code> as a simply-expanded variable; this means
<code>make</code> expands the text <span class="samp">$(CFLAGS)&nbsp;-pg</span><!-- /@w --> before setting the
variable.  If <code>includes</code> is not yet defined, we get <span class="samp">&nbsp;-O&nbsp;-pg</span><!-- /@w -->, and a later definition of <code>includes</code> will have no effect. 
Conversely, by using <span class="samp">+=</span> we set <code>CFLAGS</code> to the
<em>unexpanded</em> value <span class="samp">$(includes)&nbsp;-O&nbsp;-pg</span><!-- /@w -->.  Thus we preserve
the reference to <code>includes</code>, so if that variable gets defined at
any later point, a reference like <span class="samp">$(CFLAGS)</span> still uses its
value.

<div class="node">
<p><hr>
<a name="Override-Directive"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Defining">Defining</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Appending">Appending</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables">Using Variables</a>
<br>
</div>

<h3 class="section">6.7 The <code>override</code> Directive</h3>

<p><a name="index-override-511"></a><a name="index-overriding-with-_0040code_007boverride_007d-512"></a><a name="index-variables_002c-overriding-513"></a>
If a variable has been set with a command argument
(see <a href="#Overriding">Overriding Variables</a>),
then ordinary assignments in the makefile are ignored.  If you want to set
the variable in the makefile even though it was set with a command
argument, you can use an <code>override</code> directive, which is a line that
looks like this:

<pre class="example">     override <var>variable</var> = <var>value</var>
</pre>
   <p class="noindent">or

<pre class="example">     override <var>variable</var> := <var>value</var>
</pre>
   <p>To append more text to a variable defined on the command line, use:

<pre class="example">     override <var>variable</var> += <var>more text</var>
</pre>
   <p class="noindent">See <a href="#Appending">Appending More Text to Variables</a>.

   <p>The <code>override</code> directive was not invented for escalation in the war
between makefiles and command arguments.  It was invented so you can alter
and add to values that the user specifies with command arguments.

   <p>For example, suppose you always want the <span class="samp">-g</span> switch when you run the
C compiler, but you would like to allow the user to specify the other
switches with a command argument just as usual.  You could use this
<code>override</code> directive:

<pre class="example">     override CFLAGS += -g
</pre>
   <p>You can also use <code>override</code> directives with <code>define</code> directives. 
This is done as you might expect:

<pre class="example">     override define foo
     bar
     endef
</pre>
   <p class="noindent">See <a href="#Defining">Defining Variables Verbatim</a>.

<div class="node">
<p><hr>
<a name="Defining"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Environment">Environment</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Override-Directive">Override Directive</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables">Using Variables</a>
<br>
</div>

<h3 class="section">6.8 Defining Variables Verbatim</h3>

<p><a name="index-define-514"></a><a name="index-endef-515"></a><a name="index-verbatim-variable-definition-516"></a><a name="index-defining-variables-verbatim-517"></a><a name="index-variables_002c-defining-verbatim-518"></a>
Another way to set the value of a variable is to use the <code>define</code>
directive.  This directive has an unusual syntax which allows newline
characters to be included in the value, which is convenient for defining
both canned sequences of commands
(see <a href="#Sequences">Defining Canned Command Sequences</a>), and also
sections of makefile syntax to use with <code>eval</code> (see <a href="#Eval-Function">Eval Function</a>).

   <p>The <code>define</code> directive is followed on the same line by the name of the
variable and nothing more.  The value to give the variable appears on the
following lines.  The end of the value is marked by a line containing just
the word <code>endef</code>.  Aside from this difference in syntax, <code>define</code>
works just like <span class="samp">=</span>: it creates a recursively-expanded variable
(see <a href="#Flavors">The Two Flavors of Variables</a>). 
The variable name may contain function and variable references, which
are expanded when the directive is read to find the actual variable name
to use.

   <p>You may nest <code>define</code> directives: <code>make</code> will keep track of
nested directives and report an error if they are not all properly
closed with <code>endef</code>.  Note that lines beginning with tab
characters are considered part of a command script, so any
<code>define</code> or <code>endef</code> strings appearing on such a line will
not be considered <code>make</code> operators.

<pre class="example">     define two-lines
     echo foo
     echo $(bar)
     endef
</pre>
   <p>The value in an ordinary assignment cannot contain a newline; but the
newlines that separate the lines of the value in a <code>define</code> become
part of the variable's value (except for the final newline which precedes
the <code>endef</code> and is not considered part of the value).

   <p>When used in a command script, the previous example is functionally
equivalent to this:

<pre class="example">     two-lines = echo foo; echo $(bar)
</pre>
   <p class="noindent">since two commands separated by semicolon behave much like two separate
shell commands.  However, note that using two separate lines means
<code>make</code> will invoke the shell twice, running an independent subshell
for each line.  See <a href="#Execution">Command Execution</a>.

   <p>If you want variable definitions made with <code>define</code> to take
precedence over command-line variable definitions, you can use the
<code>override</code> directive together with <code>define</code>:

<pre class="example">     override define two-lines
     foo
     $(bar)
     endef
</pre>
   <p class="noindent">See <a href="#Override-Directive">The <code>override</code> Directive</a>.

<div class="node">
<p><hr>
<a name="Environment"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Target_002dspecific">Target-specific</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Defining">Defining</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables">Using Variables</a>
<br>
</div>

<h3 class="section">6.9 Variables from the Environment</h3>

<p><a name="index-variables_002c-environment-519"></a><a name="index-environment-520"></a>Variables in <code>make</code> can come from the environment in which
<code>make</code> is run.  Every environment variable that <code>make</code> sees
when it starts up is transformed into a <code>make</code> variable with the
same name and value.  However, an explicit assignment in the makefile,
or with a command argument, overrides the environment.  (If the
<span class="samp">-e</span> flag is specified, then values from the environment override
assignments in the makefile.  See <a href="#Options-Summary">Summary of Options</a>.  But this is not recommended practice.)

   <p>Thus, by setting the variable <code>CFLAGS</code> in your environment, you can
cause all C compilations in most makefiles to use the compiler switches you
prefer.  This is safe for variables with standard or conventional meanings
because you know that no makefile will use them for other things.  (Note
this is not totally reliable; some makefiles set <code>CFLAGS</code> explicitly
and therefore are not affected by the value in the environment.)

   <p>When <code>make</code> runs a command script, variables defined in the
makefile are placed into the environment of that command.  This allows
you to pass values to sub-<code>make</code> invocations (see <a href="#Recursion">Recursive Use of <code>make</code></a>).  By default, only variables that came
from the environment or the command line are passed to recursive
invocations.  You can use the <code>export</code> directive to pass other
variables.  See <a href="#Variables_002fRecursion">Communicating Variables to a Sub-<code>make</code></a>, for full details.

   <p>Other use of variables from the environment is not recommended.  It is not
wise for makefiles to depend for their functioning on environment variables
set up outside their control, since this would cause different users to get
different results from the same makefile.  This is against the whole
purpose of most makefiles.

   <p><a name="index-SHELL_002c-import-from-environment-521"></a>Such problems would be especially likely with the variable
<code>SHELL</code>, which is normally present in the environment to specify
the user's choice of interactive shell.  It would be very undesirable
for this choice to affect <code>make</code>; so, <code>make</code> handles the
<code>SHELL</code> environment variable in a special way; see <a href="#Choosing-the-Shell">Choosing the Shell</a>.

<div class="node">
<p><hr>
<a name="Target_002dspecific"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Pattern_002dspecific">Pattern-specific</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Environment">Environment</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables">Using Variables</a>
<br>
</div>

<h3 class="section">6.10 Target-specific Variable Values</h3>

<p><a name="index-target_002dspecific-variables-522"></a><a name="index-variables_002c-target_002dspecific-523"></a>
Variable values in <code>make</code> are usually global; that is, they are the
same regardless of where they are evaluated (unless they're reset, of
course).  One exception to that is automatic variables
(see <a href="#Automatic-Variables">Automatic Variables</a>).

   <p>The other exception is <dfn>target-specific variable values</dfn>.  This
feature allows you to define different values for the same variable,
based on the target that <code>make</code> is currently building.  As with
automatic variables, these values are only available within the context
of a target's command script (and in other target-specific assignments).

   <p>Set a target-specific variable value like this:

<pre class="example">     <var>target</var> ... : <var>variable-assignment</var>
</pre>
   <p class="noindent">or like this:

<pre class="example">     <var>target</var> ... : override <var>variable-assignment</var>
</pre>
   <p class="noindent">or like this:

<pre class="example">     <var>target</var> ... : export <var>variable-assignment</var>
</pre>
   <p>Multiple <var>target</var> values create a target-specific variable value for
each member of the target list individually.

   <p>The <var>variable-assignment</var> can be any valid form of assignment;
recursive (<span class="samp">=</span>), static (<span class="samp">:=</span>), appending (<span class="samp">+=</span>), or
conditional (<span class="samp">?=</span>).  All variables that appear within the
<var>variable-assignment</var> are evaluated within the context of the
target: thus, any previously-defined target-specific variable values
will be in effect.  Note that this variable is actually distinct from
any &ldquo;global&rdquo; value: the two variables do not have to have the same
flavor (recursive vs. static).

   <p>Target-specific variables have the same priority as any other makefile
variable.  Variables provided on the command-line (and in the
environment if the <span class="samp">-e</span> option is in force) will take precedence. 
Specifying the <code>override</code> directive will allow the target-specific
variable value to be preferred.

   <p>There is one more special feature of target-specific variables: when
you define a target-specific variable that variable value is also in
effect for all prerequisites of this target, and all their
prerequisites, etc. (unless those prerequisites override that variable
with their own target-specific variable value).  So, for example, a
statement like this:

<pre class="example">     prog : CFLAGS = -g
     prog : prog.o foo.o bar.o
</pre>
   <p class="noindent">will set <code>CFLAGS</code> to <span class="samp">-g</span> in the command script for
<span class="file">prog</span>, but it will also set <code>CFLAGS</code> to <span class="samp">-g</span> in the
command scripts that create <span class="file">prog.o</span>, <span class="file">foo.o</span>, and
<span class="file">bar.o</span>, and any command scripts which create their
prerequisites.

   <p>Be aware that a given prerequisite will only be built once per
invocation of make, at most.  If the same file is a prerequisite of
multiple targets, and each of those targets has a different value for
the same target-specific variable, then the first target to be built
will cause that prerequisite to be built and the prerequisite will
inherit the target-specific value from the first target.  It will
ignore the target-specific values from any other targets.

<div class="node">
<p><hr>
<a name="Pattern_002dspecific"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Target_002dspecific">Target-specific</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Using-Variables">Using Variables</a>
<br>
</div>

<h3 class="section">6.11 Pattern-specific Variable Values</h3>

<p><a name="index-pattern_002dspecific-variables-524"></a><a name="index-variables_002c-pattern_002dspecific-525"></a>
In addition to target-specific variable values
(see <a href="#Target_002dspecific">Target-specific Variable Values</a>), GNU
<code>make</code> supports pattern-specific variable values.  In this form,
the variable is defined for any target that matches the pattern
specified.  If a target matches more than one pattern, all the
matching pattern-specific variables are interpreted in the order in
which they were defined in the makefile, and collected together into
one set.  Variables defined in this way are searched after any
target-specific variables defined explicitly for that target, and
before target-specific variables defined for the parent target.

   <p>Set a pattern-specific variable value like this:

<pre class="example">     <var>pattern</var> ... : <var>variable-assignment</var>
</pre>
   <p class="noindent">or like this:

<pre class="example">     <var>pattern</var> ... : override <var>variable-assignment</var>
</pre>
   <p class="noindent">where <var>pattern</var> is a %-pattern.  As with target-specific variable
values, multiple <var>pattern</var> values create a pattern-specific variable
value for each pattern individually.  The <var>variable-assignment</var> can
be any valid form of assignment.  Any command-line variable setting will
take precedence, unless <code>override</code> is specified.

   <p>For example:

<pre class="example">     %.o : CFLAGS = -O
</pre>
   <p class="noindent">will assign <code>CFLAGS</code> the value of <span class="samp">-O</span> for all targets
matching the pattern <code>%.o</code>.

<div class="node">
<p><hr>
<a name="Conditionals"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Functions">Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Variables">Using Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">7 Conditional Parts of Makefiles</h2>

<p><a name="index-conditionals-526"></a>A <dfn>conditional</dfn> causes part of a makefile to be obeyed or ignored
depending on the values of variables.  Conditionals can compare the
value of one variable to another, or the value of a variable to
a constant string.  Conditionals control what <code>make</code> actually
&ldquo;sees&rdquo; in the makefile, so they <em>cannot</em> be used to control shell
commands at the time of execution.

<ul class="menu">
<li><a accesskey="1" href="#Conditional-Example">Conditional Example</a>:          Example of a conditional
<li><a accesskey="2" href="#Conditional-Syntax">Conditional Syntax</a>:           The syntax of conditionals. 
<li><a accesskey="3" href="#Testing-Flags">Testing Flags</a>:                Conditionals that test flags. 
</ul>

<div class="node">
<p><hr>
<a name="Conditional-Example"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Syntax">Conditional Syntax</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditionals">Conditionals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Conditionals">Conditionals</a>
<br>
</div>

<h3 class="section">7.1 Example of a Conditional</h3>

<p>The following example of a conditional tells <code>make</code> to use one set
of libraries if the <code>CC</code> variable is <span class="samp">gcc</span>, and a different
set of libraries otherwise.  It works by controlling which of two
command lines will be used as the command for a rule.  The result is
that <span class="samp">CC=gcc</span> as an argument to <code>make</code> changes not only which
compiler is used but also which libraries are linked.

<pre class="example">     libs_for_gcc = -lgnu
     normal_libs =
     
     foo: $(objects)
     ifeq ($(CC),gcc)
             $(CC) -o foo $(objects) $(libs_for_gcc)
     else
             $(CC) -o foo $(objects) $(normal_libs)
     endif
</pre>
   <p>This conditional uses three directives: one <code>ifeq</code>, one <code>else</code>
and one <code>endif</code>.

   <p>The <code>ifeq</code> directive begins the conditional, and specifies the
condition.  It contains two arguments, separated by a comma and surrounded
by parentheses.  Variable substitution is performed on both arguments and
then they are compared.  The lines of the makefile following the
<code>ifeq</code> are obeyed if the two arguments match; otherwise they are
ignored.

   <p>The <code>else</code> directive causes the following lines to be obeyed if the
previous conditional failed.  In the example above, this means that the
second alternative linking command is used whenever the first alternative
is not used.  It is optional to have an <code>else</code> in a conditional.

   <p>The <code>endif</code> directive ends the conditional.  Every conditional must
end with an <code>endif</code>.  Unconditional makefile text follows.

   <p>As this example illustrates, conditionals work at the textual level:
the lines of the conditional are treated as part of the makefile, or
ignored, according to the condition.  This is why the larger syntactic
units of the makefile, such as rules, may cross the beginning or the
end of the conditional.

   <p>When the variable <code>CC</code> has the value <span class="samp">gcc</span>, the above example has
this effect:

<pre class="example">     foo: $(objects)
             $(CC) -o foo $(objects) $(libs_for_gcc)
</pre>
   <p class="noindent">When the variable <code>CC</code> has any other value, the effect is this:

<pre class="example">     foo: $(objects)
             $(CC) -o foo $(objects) $(normal_libs)
</pre>
   <p>Equivalent results can be obtained in another way by conditionalizing a
variable assignment and then using the variable unconditionally:

<pre class="example">     libs_for_gcc = -lgnu
     normal_libs =
     
     ifeq ($(CC),gcc)
       libs=$(libs_for_gcc)
     else
       libs=$(normal_libs)
     endif
     
     foo: $(objects)
             $(CC) -o foo $(objects) $(libs)
</pre>
   <div class="node">
<p><hr>
<a name="Conditional-Syntax"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Testing-Flags">Testing Flags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Example">Conditional Example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Conditionals">Conditionals</a>
<br>
</div>

<h3 class="section">7.2 Syntax of Conditionals</h3>

<p><a name="index-ifdef-527"></a><a name="index-ifeq-528"></a><a name="index-ifndef-529"></a><a name="index-ifneq-530"></a><a name="index-else-531"></a><a name="index-endif-532"></a>
The syntax of a simple conditional with no <code>else</code> is as follows:

<pre class="example">     <var>conditional-directive</var>
     <var>text-if-true</var>
     endif
</pre>
   <p class="noindent">The <var>text-if-true</var> may be any lines of text, to be considered as part
of the makefile if the condition is true.  If the condition is false, no
text is used instead.

   <p>The syntax of a complex conditional is as follows:

<pre class="example">     <var>conditional-directive</var>
     <var>text-if-true</var>
     else
     <var>text-if-false</var>
     endif
</pre>
   <p>or:

<pre class="example">     <var>conditional-directive</var>
     <var>text-if-one-is-true</var>
     else <var>conditional-directive</var>
     <var>text-if-true</var>
     else
     <var>text-if-false</var>
     endif
</pre>
   <p class="noindent">There can be as many &ldquo;<code>else</code> <var>conditional-directive</var>&rdquo;
clauses as necessary.  Once a given condition is true,
<var>text-if-true</var> is used and no other clause is used; if no
condition is true then <var>text-if-false</var> is used.  The
<var>text-if-true</var> and <var>text-if-false</var> can be any number of lines
of text.

   <p>The syntax of the <var>conditional-directive</var> is the same whether the
conditional is simple or complex; after an <code>else</code> or not.  There
are four different directives that test different conditions.  Here is
a table of them:

     <dl>
<dt><code>ifeq (</code><var>arg1</var><code>, </code><var>arg2</var><code>)</code><dt><code>ifeq '</code><var>arg1</var><code>' '</code><var>arg2</var><code>'</code><dt><code>ifeq "</code><var>arg1</var><code>" "</code><var>arg2</var><code>"</code><dt><code>ifeq "</code><var>arg1</var><code>" '</code><var>arg2</var><code>'</code><dt><code>ifeq '</code><var>arg1</var><code>' "</code><var>arg2</var><code>"</code><dd>Expand all variable references in <var>arg1</var> and <var>arg2</var> and
compare them.  If they are identical, the <var>text-if-true</var> is
effective; otherwise, the <var>text-if-false</var>, if any, is effective.

     <p>Often you want to test if a variable has a non-empty value.  When the
value results from complex expansions of variables and functions,
expansions you would consider empty may actually contain whitespace
characters and thus are not seen as empty.  However, you can use the
<code>strip</code> function (see <a href="#Text-Functions">Text Functions</a>) to avoid interpreting
whitespace as a non-empty value.  For example:

     <pre class="example">          ifeq ($(strip $(foo)),)
          <var>text-if-empty</var>
          endif
     </pre>
     <p class="noindent">will evaluate <var>text-if-empty</var> even if the expansion of
<code>$(foo)</code> contains whitespace characters.

     <br><dt><code>ifneq (</code><var>arg1</var><code>, </code><var>arg2</var><code>)</code><dt><code>ifneq '</code><var>arg1</var><code>' '</code><var>arg2</var><code>'</code><dt><code>ifneq "</code><var>arg1</var><code>" "</code><var>arg2</var><code>"</code><dt><code>ifneq "</code><var>arg1</var><code>" '</code><var>arg2</var><code>'</code><dt><code>ifneq '</code><var>arg1</var><code>' "</code><var>arg2</var><code>"</code><dd>Expand all variable references in <var>arg1</var> and <var>arg2</var> and
compare them.  If they are different, the <var>text-if-true</var> is
effective; otherwise, the <var>text-if-false</var>, if any, is effective.

     <br><dt><code>ifdef </code><var>variable-name</var><dd>The <code>ifdef</code> form takes the <em>name</em> of a variable as its
argument, not a reference to a variable.  The value of that variable
has a non-empty value, the <var>text-if-true</var> is effective; otherwise,
the <var>text-if-false</var>, if any, is effective.  Variables that have
never been defined have an empty value.  The text <var>variable-name</var>
is expanded, so it could be a variable or function that expands
to the name of a variable.  For example:

     <pre class="example">          bar = true
          foo = bar
          ifdef $(foo)
          frobozz = yes
          endif
     </pre>
     <p>The variable reference <code>$(foo)</code> is expanded, yielding <code>bar</code>,
which is considered to be the name of a variable.  The variable
<code>bar</code> is not expanded, but its value is examined to determine if
it is non-empty.

     <p>Note that <code>ifdef</code> only tests whether a variable has a value.  It
does not expand the variable to see if that value is nonempty. 
Consequently, tests using <code>ifdef</code> return true for all definitions
except those like <code>foo =</code>.  To test for an empty value, use
<code>ifeq&nbsp;($(foo),)</code><!-- /@w -->.  For example,

     <pre class="example">          bar =
          foo = $(bar)
          ifdef foo
          frobozz = yes
          else
          frobozz = no
          endif
     </pre>
     <p class="noindent">sets <span class="samp">frobozz</span> to <span class="samp">yes</span>, while:

     <pre class="example">          foo =
          ifdef foo
          frobozz = yes
          else
          frobozz = no
          endif
     </pre>
     <p class="noindent">sets <span class="samp">frobozz</span> to <span class="samp">no</span>.

     <br><dt><code>ifndef </code><var>variable-name</var><dd>If the variable <var>variable-name</var> has an empty value, the
<var>text-if-true</var> is effective; otherwise, the <var>text-if-false</var>,
if any, is effective.  The rules for expansion and testing of
<var>variable-name</var> are identical to the <code>ifdef</code> directive. 
</dl>

   <p>Extra spaces are allowed and ignored at the beginning of the conditional
directive line, but a tab is not allowed.  (If the line begins with a tab,
it will be considered a command for a rule.)  Aside from this, extra spaces
or tabs may be inserted with no effect anywhere except within the directive
name or within an argument.  A comment starting with <span class="samp">#</span> may appear at
the end of the line.

   <p>The other two directives that play a part in a conditional are <code>else</code>
and <code>endif</code>.  Each of these directives is written as one word, with no
arguments.  Extra spaces are allowed and ignored at the beginning of the
line, and spaces or tabs at the end.  A comment starting with <span class="samp">#</span> may
appear at the end of the line.

   <p>Conditionals affect which lines of the makefile <code>make</code> uses.  If
the condition is true, <code>make</code> reads the lines of the
<var>text-if-true</var> as part of the makefile; if the condition is false,
<code>make</code> ignores those lines completely.  It follows that syntactic
units of the makefile, such as rules, may safely be split across the
beginning or the end of the conditional.

   <p><code>make</code> evaluates conditionals when it reads a makefile. 
Consequently, you cannot use automatic variables in the tests of
conditionals because they are not defined until commands are run
(see <a href="#Automatic-Variables">Automatic Variables</a>).

   <p>To prevent intolerable confusion, it is not permitted to start a
conditional in one makefile and end it in another.  However, you may
write an <code>include</code> directive within a conditional, provided you do
not attempt to terminate the conditional inside the included file.

<div class="node">
<p><hr>
<a name="Testing-Flags"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Syntax">Conditional Syntax</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Conditionals">Conditionals</a>
<br>
</div>

<h3 class="section">7.3 Conditionals that Test Flags</h3>

<p>You can write a conditional that tests <code>make</code> command flags such as
<span class="samp">-t</span> by using the variable <code>MAKEFLAGS</code> together with the
<code>findstring</code> function
(see <a href="#Text-Functions">Functions for String Substitution and Analysis</a>). 
This is useful when <code>touch</code> is not enough to make a file appear up
to date.

   <p>The <code>findstring</code> function determines whether one string appears as a
substring of another.  If you want to test for the <span class="samp">-t</span> flag,
use <span class="samp">t</span> as the first string and the value of <code>MAKEFLAGS</code> as
the other.

   <p>For example, here is how to arrange to use <span class="samp">ranlib -t</span> to finish
marking an archive file up to date:

<pre class="example">     archive.a: ...
     ifneq (,$(findstring t,$(MAKEFLAGS)))
             +touch archive.a
             +ranlib -t archive.a
     else
             ranlib archive.a
     endif
</pre>
   <p class="noindent">The <span class="samp">+</span> prefix marks those command lines as &ldquo;recursive&rdquo; so
that they will be executed despite use of the <span class="samp">-t</span> flag. 
See <a href="#Recursion">Recursive Use of <code>make</code></a>.

<div class="node">
<p><hr>
<a name="Functions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Running">Running</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditionals">Conditionals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">8 Functions for Transforming Text</h2>

<p><a name="index-functions-533"></a>
<dfn>Functions</dfn> allow you to do text processing in the makefile to compute
the files to operate on or the commands to use.  You use a function in a
<dfn>function call</dfn>, where you give the name of the function and some text
(the <dfn>arguments</dfn>) for the function to operate on.  The result of the
function's processing is substituted into the makefile at the point of the
call, just as a variable might be substituted.

<ul class="menu">
<li><a accesskey="1" href="#Syntax-of-Functions">Syntax of Functions</a>:          How to write a function call. 
<li><a accesskey="2" href="#Text-Functions">Text Functions</a>:               General-purpose text manipulation functions. 
<li><a accesskey="3" href="#File-Name-Functions">File Name Functions</a>:          Functions for manipulating file names. 
<li><a accesskey="4" href="#Conditional-Functions">Conditional Functions</a>:        Functions that implement conditions. 
<li><a accesskey="5" href="#Foreach-Function">Foreach Function</a>:             Repeat some text with controlled variation. 
<li><a accesskey="6" href="#Call-Function">Call Function</a>:                Expand a user-defined function. 
<li><a accesskey="7" href="#Value-Function">Value Function</a>:               Return the un-expanded value of a variable. 
<li><a accesskey="8" href="#Eval-Function">Eval Function</a>:                Evaluate the arguments as makefile syntax. 
<li><a accesskey="9" href="#Origin-Function">Origin Function</a>:              Find where a variable got its value. 
<li><a href="#Flavor-Function">Flavor Function</a>:              Find out the flavor of a variable. 
<li><a href="#Shell-Function">Shell Function</a>:               Substitute the output of a shell command. 
<li><a href="#Make-Control-Functions">Make Control Functions</a>:       Functions that control how make runs. 
</ul>

<div class="node">
<p><hr>
<a name="Syntax-of-Functions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Text-Functions">Text Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Functions">Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<h3 class="section">8.1 Function Call Syntax</h3>

<p><a name="index-_0040code_007b_0024_007d_002c-in-function-call-534"></a><a name="index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-in-function-call-535"></a><a name="index-arguments-of-functions-536"></a><a name="index-functions_002c-syntax-of-537"></a>
A function call resembles a variable reference.  It looks like this:

<pre class="example">     $(<var>function</var> <var>arguments</var>)
</pre>
   <p class="noindent">or like this:

<pre class="example">     ${<var>function</var> <var>arguments</var>}
</pre>
   <p>Here <var>function</var> is a function name; one of a short list of names
that are part of <code>make</code>.  You can also essentially create your own
functions by using the <code>call</code> builtin function.

   <p>The <var>arguments</var> are the arguments of the function.  They are
separated from the function name by one or more spaces or tabs, and if
there is more than one argument, then they are separated by commas. 
Such whitespace and commas are not part of an argument's value.  The
delimiters which you use to surround the function call, whether
parentheses or braces, can appear in an argument only in matching pairs;
the other kind of delimiters may appear singly.  If the arguments
themselves contain other function calls or variable references, it is
wisest to use the same kind of delimiters for all the references; write
<span class="samp">$(subst&nbsp;a,b,$(x))</span><!-- /@w -->, not <span class="samp">$(subst&nbsp;a,b,${x})</span><!-- /@w -->.  This
is because it is clearer, and because only one type of delimiter is
matched to find the end of the reference.

   <p>The text written for each argument is processed by substitution of
variables and function calls to produce the argument value, which
is the text on which the function acts.  The substitution is done in the
order in which the arguments appear.

   <p>Commas and unmatched parentheses or braces cannot appear in the text of an
argument as written; leading spaces cannot appear in the text of the first
argument as written.  These characters can be put into the argument value
by variable substitution.  First define variables <code>comma</code> and
<code>space</code> whose values are isolated comma and space characters, then
substitute these variables where such characters are wanted, like this:

<pre class="example">     comma:= ,
     empty:=
     space:= $(empty) $(empty)
     foo:= a b c
     bar:= $(subst $(space),$(comma),$(foo))
     # <span class="roman">bar is now `a,b,c'.</span>
</pre>
   <p class="noindent">Here the <code>subst</code> function replaces each space with a comma, through
the value of <code>foo</code>, and substitutes the result.

<div class="node">
<p><hr>
<a name="Text-Functions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#File-Name-Functions">File Name Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Syntax-of-Functions">Syntax of Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<h3 class="section">8.2 Functions for String Substitution and Analysis</h3>

<p><a name="index-functions_002c-for-text-538"></a>
Here are some functions that operate on strings:

     <dl>
<dt><code>$(subst </code><var>from</var><code>,</code><var>to</var><code>,</code><var>text</var><code>)</code><dd><a name="index-subst-539"></a>Performs a textual replacement on the text <var>text</var>: each occurrence
of <var>from</var> is replaced by <var>to</var>.  The result is substituted for
the function call.  For example,

     <pre class="example">          $(subst ee,EE,feet on the street)
     </pre>
     <p>substitutes the string <span class="samp">fEEt on the strEEt</span>.

     <br><dt><code>$(patsubst </code><var>pattern</var><code>,</code><var>replacement</var><code>,</code><var>text</var><code>)</code><dd><a name="index-patsubst-540"></a>Finds whitespace-separated words in <var>text</var> that match
<var>pattern</var> and replaces them with <var>replacement</var>.  Here
<var>pattern</var> may contain a <span class="samp">%</span> which acts as a wildcard,
matching any number of any characters within a word.  If
<var>replacement</var> also contains a <span class="samp">%</span>, the <span class="samp">%</span> is replaced
by the text that matched the <span class="samp">%</span> in <var>pattern</var>.  Only the first
<span class="samp">%</span> in the <var>pattern</var> and <var>replacement</var> is treated this
way; any subsequent <span class="samp">%</span> is unchanged.

     <p><a name="index-_0040code_007b_0025_007d_002c-quoting-in-_0040code_007bpatsubst_007d-541"></a><a name="index-_0040code_007b_0025_007d_002c-quoting-with-_0040code_007b_005c_007d-_0028backslash_0029-542"></a><a name="index-_0040code_007b_005c_007d-_0028backslash_0029_002c-to-quote-_0040code_007b_0025_007d-543"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-to-quote-_0040code_007b_0025_007d-544"></a><a name="index-quoting-_0040code_007b_0025_007d_002c-in-_0040code_007bpatsubst_007d-545"></a><span class="samp">%</span> characters in <code>patsubst</code> function invocations can be
quoted with preceding backslashes (<span class="samp">\</span>).  Backslashes that would
otherwise quote <span class="samp">%</span> characters can be quoted with more backslashes. 
Backslashes that quote <span class="samp">%</span> characters or other backslashes are
removed from the pattern before it is compared file names or has a stem
substituted into it.  Backslashes that are not in danger of quoting
<span class="samp">%</span> characters go unmolested.  For example, the pattern
<span class="file">the\%weird\\%pattern\\</span> has <span class="samp">the%weird\</span> preceding the
operative <span class="samp">%</span> character, and <span class="samp">pattern\\</span> following it.  The
final two backslashes are left alone because they cannot affect any
<span class="samp">%</span> character.

     <p>Whitespace between words is folded into single space characters;
leading and trailing whitespace is discarded.

     <p>For example,

     <pre class="example">          $(patsubst %.c,%.o,x.c.c bar.c)
     </pre>
     <p class="noindent">produces the value <span class="samp">x.c.o bar.o</span>.

     <p>Substitution references (see <a href="#Substitution-Refs">Substitution References</a>) are a simpler way to get the effect of the <code>patsubst</code>
function:

     <pre class="example">          $(<var>var</var>:<var>pattern</var>=<var>replacement</var>)
     </pre>
     <p class="noindent">is equivalent to

     <pre class="example">          $(patsubst <var>pattern</var>,<var>replacement</var>,$(<var>var</var>))
     </pre>
     <p>The second shorthand simplifies one of the most common uses of
<code>patsubst</code>: replacing the suffix at the end of file names.

     <pre class="example">          $(<var>var</var>:<var>suffix</var>=<var>replacement</var>)
     </pre>
     <p class="noindent">is equivalent to

     <pre class="example">          $(patsubst %<var>suffix</var>,%<var>replacement</var>,$(<var>var</var>))
     </pre>
     <p class="noindent">For example, you might have a list of object files:

     <pre class="example">          objects = foo.o bar.o baz.o
     </pre>
     <p class="noindent">To get the list of corresponding source files, you could simply write:

     <pre class="example">          $(objects:.o=.c)
     </pre>
     <p class="noindent">instead of using the general form:

     <pre class="example">          $(patsubst %.o,%.c,$(objects))
     </pre>
     <br><dt><code>$(strip </code><var>string</var><code>)</code><dd><a name="index-stripping-whitespace-546"></a><a name="index-whitespace_002c-stripping-547"></a><a name="index-spaces_002c-stripping-548"></a><a name="index-strip-549"></a>Removes leading and trailing whitespace from <var>string</var> and replaces
each internal sequence of one or more whitespace characters with a
single space.  Thus, <span class="samp">$(strip a b  c )</span> results in <span class="samp">a&nbsp;b&nbsp;c</span><!-- /@w -->.

     <p>The function <code>strip</code> can be very useful when used in conjunction
with conditionals.  When comparing something with the empty string
 using <code>ifeq</code> or <code>ifneq</code>, you usually want a string of
just whitespace to match the empty string (see <a href="#Conditionals">Conditionals</a>).

     <p>Thus, the following may fail to have the desired results:

     <pre class="example">          .PHONY: all
          ifneq   "$(needs_made)" ""
          all: $(needs_made)
          else
          all:;@echo 'Nothing to make!'
          endif
     </pre>
     <p class="noindent">Replacing the variable reference <span class="samp">$(needs_made)</span><!-- /@w --> with the
function call <span class="samp">$(strip&nbsp;$(needs_made))</span><!-- /@w --> in the <code>ifneq</code>
directive would make it more robust.

     <br><dt><code>$(findstring </code><var>find</var><code>,</code><var>in</var><code>)</code><dd><a name="index-findstring-550"></a><a name="index-searching-for-strings-551"></a><a name="index-finding-strings-552"></a><a name="index-strings_002c-searching-for-553"></a>Searches <var>in</var> for an occurrence of <var>find</var>.  If it occurs, the
value is <var>find</var>; otherwise, the value is empty.  You can use this
function in a conditional to test for the presence of a specific
substring in a given string.  Thus, the two examples,

     <pre class="example">          $(findstring a,a b c)
          $(findstring a,b c)
     </pre>
     <p class="noindent">produce the values <span class="samp">a</span> and  (the empty string),
respectively.  See <a href="#Testing-Flags">Testing Flags</a>, for a practical application of
<code>findstring</code>.

     <p><a name="index-filter-554"></a><a name="index-filtering-words-555"></a><a name="index-words_002c-filtering-556"></a><br><dt><code>$(filter </code><var>pattern</var><code>...,</code><var>text</var><code>)</code><dd>Returns all whitespace-separated words in <var>text</var> that <em>do</em> match
any of the <var>pattern</var> words, removing any words that <em>do not</em>
match.  The patterns are written using <span class="samp">%</span>, just like the patterns
used in the <code>patsubst</code> function above.

     <p>The <code>filter</code> function can be used to separate out different types
of strings (such as file names) in a variable.  For example:

     <pre class="example">          sources := foo.c bar.c baz.s ugh.h
          foo: $(sources)
                  cc $(filter %.c %.s,$(sources)) -o foo
     </pre>
     <p class="noindent">says that <span class="file">foo</span> depends of <span class="file">foo.c</span>, <span class="file">bar.c</span>,
<span class="file">baz.s</span> and <span class="file">ugh.h</span> but only <span class="file">foo.c</span>, <span class="file">bar.c</span> and
<span class="file">baz.s</span> should be specified in the command to the
compiler.

     <br><dt><code>$(filter-out </code><var>pattern</var><code>...,</code><var>text</var><code>)</code><dd><a name="index-filter_002dout-557"></a><a name="index-filtering-out-words-558"></a><a name="index-words_002c-filtering-out-559"></a>Returns all whitespace-separated words in <var>text</var> that <em>do not</em>
match any of the <var>pattern</var> words, removing the words that <em>do</em>
match one or more.  This is the exact opposite of the <code>filter</code>
function.

     <p>For example, given:

     <pre class="example">          objects=main1.o foo.o main2.o bar.o
          mains=main1.o main2.o
     </pre>
     <p class="noindent">the following generates a list which contains all the object files not
in <span class="samp">mains</span>:

     <pre class="example">          $(filter-out $(mains),$(objects))
     </pre>
     <p><a name="index-sort-560"></a><a name="index-sorting-words-561"></a><br><dt><code>$(sort </code><var>list</var><code>)</code><dd>Sorts the words of <var>list</var> in lexical order, removing duplicate
words.  The output is a list of words separated by single spaces. 
Thus,

     <pre class="example">          $(sort foo bar lose)
     </pre>
     <p class="noindent">returns the value <span class="samp">bar foo lose</span>.

     <p><a name="index-removing-duplicate-words-562"></a><a name="index-duplicate-words_002c-removing-563"></a><a name="index-words_002c-removing-duplicates-564"></a>Incidentally, since <code>sort</code> removes duplicate words, you can use
it for this purpose even if you don't care about the sort order.

     <br><dt><code>$(word </code><var>n</var><code>,</code><var>text</var><code>)</code><dd><a name="index-word-565"></a><a name="index-word_002c-selecting-a-566"></a><a name="index-selecting-a-word-567"></a>Returns the <var>n</var>th word of <var>text</var>.  The legitimate values of
<var>n</var> start from 1.  If <var>n</var> is bigger than the number of words
in <var>text</var>, the value is empty.  For example,

     <pre class="example">          $(word 2, foo bar baz)
     </pre>
     <p class="noindent">returns <span class="samp">bar</span>.

     <br><dt><code>$(wordlist </code><var>s</var><code>,</code><var>e</var><code>,</code><var>text</var><code>)</code><dd><a name="index-wordlist-568"></a><a name="index-words_002c-selecting-lists-of-569"></a><a name="index-selecting-word-lists-570"></a>Returns the list of words in <var>text</var> starting with word <var>s</var> and
ending with word <var>e</var> (inclusive).  The legitimate values of <var>s</var>
start from 1; <var>e</var> may start from 0.  If <var>s</var> is bigger than the
number of words in <var>text</var>, the value is empty.  If <var>e</var> is
bigger than the number of words in <var>text</var>, words up to the end of
<var>text</var> are returned.  If <var>s</var> is greater than <var>e</var>, nothing
is returned.  For example,

     <pre class="example">          $(wordlist 2, 3, foo bar baz)
     </pre>
     <p class="noindent">returns <span class="samp">bar baz</span>.

     <!-- Following item phrased to prevent overfull hbox.  -RJC 17 Jul 92 -->
<br><dt><code>$(words </code><var>text</var><code>)</code><dd><a name="index-words-571"></a><a name="index-words_002c-finding-number-572"></a>Returns the number of words in <var>text</var>. 
Thus, the last word of <var>text</var> is
<code>$(word&nbsp;$(words&nbsp;</code><var>text</var><code>),</code><var>text</var><code>)</code><!-- /@w -->.

     <br><dt><code>$(firstword </code><var>names</var><code>...)</code><dd><a name="index-firstword-573"></a><a name="index-words_002c-extracting-first-574"></a>The argument <var>names</var> is regarded as a series of names, separated
by whitespace.  The value is the first name in the series.  The rest
of the names are ignored.

     <p>For example,

     <pre class="example">          $(firstword foo bar)
     </pre>
     <p class="noindent">produces the result <span class="samp">foo</span>.  Although <code>$(firstword
</code><var>text</var><code>)</code> is the same as <code>$(word 1,</code><var>text</var><code>)</code>, the
<code>firstword</code> function is retained for its simplicity.

     <br><dt><code>$(lastword </code><var>names</var><code>...)</code><dd><a name="index-lastword-575"></a><a name="index-words_002c-extracting-last-576"></a>The argument <var>names</var> is regarded as a series of names, separated
by whitespace.  The value is the last name in the series.

     <p>For example,

     <pre class="example">          $(lastword foo bar)
     </pre>
     <p class="noindent">produces the result <span class="samp">bar</span>.  Although <code>$(lastword
</code><var>text</var><code>)</code> is the same as <code>$(word $(words </code><var>text</var><code>),</code><var>text</var><code>)</code>,
the <code>lastword</code> function was added for its simplicity and better
performance. 
</dl>

   <p>Here is a realistic example of the use of <code>subst</code> and
<code>patsubst</code>.  Suppose that a makefile uses the <code>VPATH</code> variable
to specify a list of directories that <code>make</code> should search for
prerequisite files
(see <a href="#General-Search"><code>VPATH</code> Search Path for All Prerequisites</a>). 
This example shows how to
tell the C compiler to search for header files in the same list of
directories.

   <p>The value of <code>VPATH</code> is a list of directories separated by colons,
such as <span class="samp">src:../headers</span>.  First, the <code>subst</code> function is used to
change the colons to spaces:

<pre class="example">     $(subst :, ,$(VPATH))
</pre>
   <p class="noindent">This produces <span class="samp">src ../headers</span>.  Then <code>patsubst</code> is used to turn
each directory name into a <span class="samp">-I</span> flag.  These can be added to the
value of the variable <code>CFLAGS</code>, which is passed automatically to the C
compiler, like this:

<pre class="example">     override CFLAGS += $(patsubst %,-I%,$(subst :, ,$(VPATH)))
</pre>
   <p class="noindent">The effect is to append the text <span class="samp">-Isrc -I../headers</span> to the
previously given value of <code>CFLAGS</code>.  The <code>override</code> directive is
used so that the new value is assigned even if the previous value of
<code>CFLAGS</code> was specified with a command argument (see <a href="#Override-Directive">The <code>override</code> Directive</a>).

<div class="node">
<p><hr>
<a name="File-Name-Functions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Functions">Conditional Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Text-Functions">Text Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<h3 class="section">8.3 Functions for File Names</h3>

<p><a name="index-functions_002c-for-file-names-577"></a><a name="index-file-name-functions-578"></a>
Several of the built-in expansion functions relate specifically to
taking apart file names or lists of file names.

   <p>Each of the following functions performs a specific transformation on a
file name.  The argument of the function is regarded as a series of file
names, separated by whitespace.  (Leading and trailing whitespace is
ignored.)  Each file name in the series is transformed in the same way and
the results are concatenated with single spaces between them.

     <dl>
<dt><code>$(dir </code><var>names</var><code>...)</code><dd><a name="index-dir-579"></a><a name="index-directory-part-580"></a><a name="index-file-name_002c-directory-part-581"></a>Extracts the directory-part of each file name in <var>names</var>.  The
directory-part of the file name is everything up through (and
including) the last slash in it.  If the file name contains no slash,
the directory part is the string <span class="samp">./</span>.  For example,

     <pre class="example">          $(dir src/foo.c hacks)
     </pre>
     <p class="noindent">produces the result <span class="samp">src/ ./</span>.

     <br><dt><code>$(notdir </code><var>names</var><code>...)</code><dd><a name="index-notdir-582"></a><a name="index-file-name_002c-nondirectory-part-583"></a><a name="index-nondirectory-part-584"></a>Extracts all but the directory-part of each file name in <var>names</var>. 
If the file name contains no slash, it is left unchanged.  Otherwise,
everything through the last slash is removed from it.

     <p>A file name that ends with a slash becomes an empty string.  This is
unfortunate, because it means that the result does not always have the
same number of whitespace-separated file names as the argument had;
but we do not see any other valid alternative.

     <p>For example,

     <pre class="example">          $(notdir src/foo.c hacks)
     </pre>
     <p class="noindent">produces the result <span class="samp">foo.c hacks</span>.

     <br><dt><code>$(suffix </code><var>names</var><code>...)</code><dd><a name="index-suffix-585"></a><a name="index-suffix_002c-function-to-find-586"></a><a name="index-file-name-suffix-587"></a>Extracts the suffix of each file name in <var>names</var>.  If the file name
contains a period, the suffix is everything starting with the last
period.  Otherwise, the suffix is the empty string.  This frequently
means that the result will be empty when <var>names</var> is not, and if
<var>names</var> contains multiple file names, the result may contain fewer
file names.

     <p>For example,

     <pre class="example">          $(suffix src/foo.c src-1.0/bar.c hacks)
     </pre>
     <p class="noindent">produces the result <span class="samp">.c .c</span>.

     <br><dt><code>$(basename </code><var>names</var><code>...)</code><dd><a name="index-basename-588"></a><a name="index-basename-589"></a><a name="index-file-name_002c-basename-of-590"></a>Extracts all but the suffix of each file name in <var>names</var>.  If the
file name contains a period, the basename is everything starting up to
(and not including) the last period.  Periods in the directory part are
ignored.  If there is no period, the basename is the entire file name. 
For example,

     <pre class="example">          $(basename src/foo.c src-1.0/bar hacks)
     </pre>
     <p class="noindent">produces the result <span class="samp">src/foo src-1.0/bar hacks</span>.

     <!-- plural convention with dots (be consistent) -->
<br><dt><code>$(addsuffix </code><var>suffix</var><code>,</code><var>names</var><code>...)</code><dd><a name="index-addsuffix-591"></a><a name="index-suffix_002c-adding-592"></a><a name="index-file-name-suffix_002c-adding-593"></a>The argument <var>names</var> is regarded as a series of names, separated
by whitespace; <var>suffix</var> is used as a unit.  The value of
<var>suffix</var> is appended to the end of each individual name and the
resulting larger names are concatenated with single spaces between
them.  For example,

     <pre class="example">          $(addsuffix .c,foo bar)
     </pre>
     <p class="noindent">produces the result <span class="samp">foo.c bar.c</span>.

     <br><dt><code>$(addprefix </code><var>prefix</var><code>,</code><var>names</var><code>...)</code><dd><a name="index-addprefix-594"></a><a name="index-prefix_002c-adding-595"></a><a name="index-file-name-prefix_002c-adding-596"></a>The argument <var>names</var> is regarded as a series of names, separated
by whitespace; <var>prefix</var> is used as a unit.  The value of
<var>prefix</var> is prepended to the front of each individual name and the
resulting larger names are concatenated with single spaces between
them.  For example,

     <pre class="example">          $(addprefix src/,foo bar)
     </pre>
     <p class="noindent">produces the result <span class="samp">src/foo src/bar</span>.

     <br><dt><code>$(join </code><var>list1</var><code>,</code><var>list2</var><code>)</code><dd><a name="index-join-597"></a><a name="index-joining-lists-of-words-598"></a><a name="index-words_002c-joining-lists-599"></a>Concatenates the two arguments word by word: the two first words (one
from each argument) concatenated form the first word of the result, the
two second words form the second word of the result, and so on.  So the
<var>n</var>th word of the result comes from the <var>n</var>th word of each
argument.  If one argument has more words that the other, the extra
words are copied unchanged into the result.

     <p>For example, <span class="samp">$(join a b,.c .o)</span> produces <span class="samp">a.c b.o</span>.

     <p>Whitespace between the words in the lists is not preserved; it is
replaced with a single space.

     <p>This function can merge the results of the <code>dir</code> and
<code>notdir</code> functions, to produce the original list of files which
was given to those two functions.

     <br><dt><code>$(wildcard </code><var>pattern</var><code>)</code><dd><a name="index-wildcard-600"></a><a name="index-wildcard_002c-function-601"></a>The argument <var>pattern</var> is a file name pattern, typically containing
wildcard characters (as in shell file name patterns).  The result of
<code>wildcard</code> is a space-separated list of the names of existing files
that match the pattern. 
See <a href="#Wildcards">Using Wildcard Characters in File Names</a>.

     <br><dt><code>$(realpath </code><var>names</var><code>...)</code><dd><a name="index-realpath-602"></a><a name="index-realpath-603"></a><a name="index-file-name_002c-realpath-of-604"></a>For each file name in <var>names</var> return the canonical absolute name. 
A canonical name does not contain any <code>.</code> or <code>..</code> components,
nor any repeated path separators (<code>/</code>) or symlinks.  In case of a
failure the empty string is returned.  Consult the <code>realpath(3)</code>
documentation for a list of possible failure causes.

     <br><dt><code>$(abspath </code><var>names</var><code>...)</code><dd><a name="index-abspath-605"></a><a name="index-abspath-606"></a><a name="index-file-name_002c-abspath-of-607"></a>For each file name in <var>names</var> return an absolute name that does
not contain any <code>.</code> or <code>..</code> components, nor any repeated path
separators (<code>/</code>).  Note that, in contrast to <code>realpath</code>
function, <code>abspath</code> does not resolve symlinks and does not require
the file names to refer to an existing file or directory.  Use the
<code>wildcard</code> function to test for existence. 
</dl>

<div class="node">
<p><hr>
<a name="Conditional-Functions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Foreach-Function">Foreach Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#File-Name-Functions">File Name Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<h3 class="section">8.4 Functions for Conditionals</h3>

<p><a name="index-if-608"></a><a name="index-conditional-expansion-609"></a>There are three functions that provide conditional expansion.  A key
aspect of these functions is that not all of the arguments are
expanded initially.  Only those arguments which need to be expanded,
will be expanded.

     <dl>
<dt><code>$(if </code><var>condition</var><code>,</code><var>then-part</var><code>[,</code><var>else-part</var><code>])</code><dd><a name="index-if-610"></a>The <code>if</code> function provides support for conditional expansion in a
functional context (as opposed to the GNU <code>make</code> makefile
conditionals such as <code>ifeq</code> (see <a href="#Conditional-Syntax">Syntax of Conditionals</a>).

     <p>The first argument, <var>condition</var>, first has all preceding and
trailing whitespace stripped, then is expanded.  If it expands to any
non-empty string, then the condition is considered to be true.  If it
expands to an empty string, the condition is considered to be false.

     <p>If the condition is true then the second argument, <var>then-part</var>, is
evaluated and this is used as the result of the evaluation of the entire
<code>if</code> function.

     <p>If the condition is false then the third argument, <var>else-part</var>, is
evaluated and this is the result of the <code>if</code> function.  If there is
no third argument, the <code>if</code> function evaluates to nothing (the
empty string).

     <p>Note that only one of the <var>then-part</var> or the <var>else-part</var> will be
evaluated, never both.  Thus, either can contain side-effects (such as
<code>shell</code> function calls, etc.)

     <br><dt><code>$(or </code><var>condition1</var><code>[,</code><var>condition2</var><code>[,</code><var>condition3</var><code>...]])</code><dd><a name="index-or-611"></a>The <code>or</code> function provides a &ldquo;short-circuiting&rdquo; OR operation. 
Each argument is expanded, in order.  If an argument expands to a
non-empty string the processing stops and the result of the expansion
is that string.  If, after all arguments are expanded, all of them are
false (empty), then the result of the expansion is the empty string.

     <br><dt><code>$(and </code><var>condition1</var><code>[,</code><var>condition2</var><code>[,</code><var>condition3</var><code>...]])</code><dd><a name="index-and-612"></a>The <code>and</code> function provides a &ldquo;short-circuiting&rdquo; AND operation. 
Each argument is expanded, in order.  If an argument expands to an
empty string the processing stops and the result of the expansion is
the empty string.  If all arguments expand to a non-empty string then
the result of the expansion is the expansion of the last argument.

   </dl>

<div class="node">
<p><hr>
<a name="Foreach-Function"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Call-Function">Call Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conditional-Functions">Conditional Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<h3 class="section">8.5 The <code>foreach</code> Function</h3>

<p><a name="index-foreach-613"></a><a name="index-words_002c-iterating-over-614"></a>
The <code>foreach</code> function is very different from other functions.  It
causes one piece of text to be used repeatedly, each time with a different
substitution performed on it.  It resembles the <code>for</code> command in the
shell <code>sh</code> and the <code>foreach</code> command in the C-shell <code>csh</code>.

   <p>The syntax of the <code>foreach</code> function is:

<pre class="example">     $(foreach <var>var</var>,<var>list</var>,<var>text</var>)
</pre>
   <p class="noindent">The first two arguments, <var>var</var> and <var>list</var>, are expanded before
anything else is done; note that the last argument, <var>text</var>, is
<strong>not</strong> expanded at the same time.  Then for each word of the expanded
value of <var>list</var>, the variable named by the expanded value of <var>var</var>
is set to that word, and <var>text</var> is expanded.  Presumably <var>text</var>
contains references to that variable, so its expansion will be different
each time.

   <p>The result is that <var>text</var> is expanded as many times as there are
whitespace-separated words in <var>list</var>.  The multiple expansions of
<var>text</var> are concatenated, with spaces between them, to make the result
of <code>foreach</code>.

   <p>This simple example sets the variable <span class="samp">files</span> to the list of all files
in the directories in the list <span class="samp">dirs</span>:

<pre class="example">     dirs := a b c d
     files := $(foreach dir,$(dirs),$(wildcard $(dir)/*))
</pre>
   <p>Here <var>text</var> is <span class="samp">$(wildcard $(dir)/*)</span>.  The first repetition
finds the value <span class="samp">a</span> for <code>dir</code>, so it produces the same result
as <span class="samp">$(wildcard a/*)</span>; the second repetition produces the result
of <span class="samp">$(wildcard b/*)</span>; and the third, that of <span class="samp">$(wildcard c/*)</span>.

   <p>This example has the same result (except for setting <span class="samp">dirs</span>) as
the following example:

<pre class="example">     files := $(wildcard a/* b/* c/* d/*)
</pre>
   <p>When <var>text</var> is complicated, you can improve readability by giving it
a name, with an additional variable:

<pre class="example">     find_files = $(wildcard $(dir)/*)
     dirs := a b c d
     files := $(foreach dir,$(dirs),$(find_files))
</pre>
   <p class="noindent">Here we use the variable <code>find_files</code> this way.  We use plain <span class="samp">=</span>
to define a recursively-expanding variable, so that its value contains an
actual function call to be reexpanded under the control of <code>foreach</code>;
a simply-expanded variable would not do, since <code>wildcard</code> would be
called only once at the time of defining <code>find_files</code>.

   <p>The <code>foreach</code> function has no permanent effect on the variable
<var>var</var>; its value and flavor after the <code>foreach</code> function call are
the same as they were beforehand.  The other values which are taken from
<var>list</var> are in effect only temporarily, during the execution of
<code>foreach</code>.  The variable <var>var</var> is a simply-expanded variable
during the execution of <code>foreach</code>.  If <var>var</var> was undefined
before the <code>foreach</code> function call, it is undefined after the call. 
See <a href="#Flavors">The Two Flavors of Variables</a>.

   <p>You must take care when using complex variable expressions that result in
variable names because many strange things are valid variable names, but
are probably not what you intended.  For example,

<pre class="smallexample">     files := $(foreach Esta escrito en espanol!,b c ch,$(find_files))
</pre>
   <p class="noindent">might be useful if the value of <code>find_files</code> references the variable
whose name is <span class="samp">Esta escrito en espanol!</span> (es un nombre bastante largo,
no?), but it is more likely to be a mistake.

<div class="node">
<p><hr>
<a name="Call-Function"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Value-Function">Value Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Foreach-Function">Foreach Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<h3 class="section">8.6 The <code>call</code> Function</h3>

<p><a name="index-call-615"></a><a name="index-functions_002c-user-defined-616"></a><a name="index-user-defined-functions-617"></a>
The <code>call</code> function is unique in that it can be used to create new
parameterized functions.  You can write a complex expression as the
value of a variable, then use <code>call</code> to expand it with different
values.

   <p>The syntax of the <code>call</code> function is:

<pre class="example">     $(call <var>variable</var>,<var>param</var>,<var>param</var>,...)
</pre>
   <p>When <code>make</code> expands this function, it assigns each <var>param</var> to
temporary variables <code>$(1)</code>, <code>$(2)</code>, etc.  The variable
<code>$(0)</code> will contain <var>variable</var>.  There is no maximum number of
parameter arguments.  There is no minimum, either, but it doesn't make
sense to use <code>call</code> with no parameters.

   <p>Then <var>variable</var> is expanded as a <code>make</code> variable in the context
of these temporary assignments.  Thus, any reference to <code>$(1)</code> in
the value of <var>variable</var> will resolve to the first <var>param</var> in the
invocation of <code>call</code>.

   <p>Note that <var>variable</var> is the <em>name</em> of a variable, not a
<em>reference</em> to that variable.  Therefore you would not normally use
a <span class="samp">$</span> or parentheses when writing it.  (You can, however, use a
variable reference in the name if you want the name not to be a
constant.)

   <p>If <var>variable</var> is the name of a builtin function, the builtin function
is always invoked (even if a <code>make</code> variable by that name also
exists).

   <p>The <code>call</code> function expands the <var>param</var> arguments before
assigning them to temporary variables.  This means that <var>variable</var>
values containing references to builtin functions that have special
expansion rules, like <code>foreach</code> or <code>if</code>, may not work as you
expect.

   <p>Some examples may make this clearer.

   <p>This macro simply reverses its arguments:

<pre class="smallexample">     reverse = $(2) $(1)
     
     foo = $(call reverse,a,b)
</pre>
   <p class="noindent">Here <var>foo</var> will contain <span class="samp">b a</span>.

   <p>This one is slightly more interesting: it defines a macro to search for
the first instance of a program in <code>PATH</code>:

<pre class="smallexample">     pathsearch = $(firstword $(wildcard $(addsuffix /$(1),$(subst :, ,$(PATH)))))
     
     LS := $(call pathsearch,ls)
</pre>
   <p class="noindent">Now the variable LS contains <code>/bin/ls</code> or similar.

   <p>The <code>call</code> function can be nested.  Each recursive invocation gets
its own local values for <code>$(1)</code>, etc. that mask the values of
higher-level <code>call</code>.  For example, here is an implementation of a
<dfn>map</dfn> function:

<pre class="smallexample">     map = $(foreach a,$(2),$(call $(1),$(a)))
</pre>
   <p>Now you can <var>map</var> a function that normally takes only one argument,
such as <code>origin</code>, to multiple values in one step:

<pre class="smallexample">     o = $(call map,origin,o map MAKE)
</pre>
   <p>and end up with <var>o</var> containing something like <span class="samp">file file default</span>.

   <p>A final caution: be careful when adding whitespace to the arguments to
<code>call</code>.  As with other functions, any whitespace contained in the
second and subsequent arguments is kept; this can cause strange
effects.  It's generally safest to remove all extraneous whitespace when
providing parameters to <code>call</code>.

<div class="node">
<p><hr>
<a name="Value-Function"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Eval-Function">Eval Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Call-Function">Call Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">8.7 The <code>value</code> Function</h3>

<p><a name="index-value-618"></a><a name="index-variables_002c-unexpanded-value-619"></a>
The <code>value</code> function provides a way for you to use the value of a
variable <em>without</em> having it expanded.  Please note that this
does not undo expansions which have already occurred; for example if
you create a simply expanded variable its value is expanded during the
definition; in that case the <code>value</code> function will return the
same result as using the variable directly.

   <p>The syntax of the <code>value</code> function is:

<pre class="example">     $(value <var>variable</var>)
</pre>
   <p>Note that <var>variable</var> is the <em>name</em> of a variable; not a
<em>reference</em> to that variable.  Therefore you would not normally
use a <span class="samp">$</span> or parentheses when writing it.  (You can, however, use
a variable reference in the name if you want the name not to be a
constant.)

   <p>The result of this function is a string containing the value of
<var>variable</var>, without any expansion occurring.  For example, in this
makefile:

<pre class="example">     FOO = $PATH
     
     all:
             @echo $(FOO)
             @echo $(value FOO)
</pre>
   <p class="noindent">The first output line would be <code>ATH</code>, since the &ldquo;$P&rdquo; would be
expanded as a <code>make</code> variable, while the second output line would
be the current value of your <code>$PATH</code> environment variable, since
the <code>value</code> function avoided the expansion.

   <p>The <code>value</code> function is most often used in conjunction with the
<code>eval</code> function (see <a href="#Eval-Function">Eval Function</a>).

<div class="node">
<p><hr>
<a name="Eval-Function"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Origin-Function">Origin Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Value-Function">Value Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h3 class="section">8.8 The <code>eval</code> Function</h3>

<p><a name="index-eval-620"></a><a name="index-evaluating-makefile-syntax-621"></a><a name="index-makefile-syntax_002c-evaluating-622"></a>
The <code>eval</code> function is very special: it allows you to define new
makefile constructs that are not constant; which are the result of
evaluating other variables and functions.  The argument to the
<code>eval</code> function is expanded, then the results of that expansion
are parsed as makefile syntax.  The expanded results can define new
<code>make</code> variables, targets, implicit or explicit rules, etc.

   <p>The result of the <code>eval</code> function is always the empty string;
thus, it can be placed virtually anywhere in a makefile without
causing syntax errors.

   <p>It's important to realize that the <code>eval</code> argument is expanded
<em>twice</em>; first by the <code>eval</code> function, then the results of
that expansion are expanded again when they are parsed as makefile
syntax.  This means you may need to provide extra levels of escaping
for &ldquo;$&rdquo; characters when using <code>eval</code>.  The <code>value</code>
function (see <a href="#Value-Function">Value Function</a>) can sometimes be useful in these
situations, to circumvent unwanted expansions.

   <p>Here is an example of how <code>eval</code> can be used; this example
combines a number of concepts and other functions.  Although it might
seem overly complex to use <code>eval</code> in this example, rather than
just writing out the rules, consider two things: first, the template
definition (in <code>PROGRAM_template</code>) could need to be much more
complex than it is here; and second, you might put the complex,
&ldquo;generic&rdquo; part of this example into another makefile, then include
it in all the individual makefiles.  Now your individual makefiles are
quite straightforward.

<pre class="example">     PROGRAMS    = server client
     
     server_OBJS = server.o server_priv.o server_access.o
     server_LIBS = priv protocol
     
     client_OBJS = client.o client_api.o client_mem.o
     client_LIBS = protocol
     
     # Everything after this is generic
     
     .PHONY: all
     all: $(PROGRAMS)
     
     define PROGRAM_template
      $(1): $$($(1)_OBJS) $$($(1)_LIBS:%=-l%)
      ALL_OBJS   += $$($(1)_OBJS)
     endef
     
     $(foreach prog,$(PROGRAMS),$(eval $(call PROGRAM_template,$(prog))))
     
     $(PROGRAMS):
             $(LINK.o) $^ $(LDLIBS) -o $@
     
     clean:
             rm -f $(ALL_OBJS) $(PROGRAMS)
</pre>
   <div class="node">
<p><hr>
<a name="Origin-Function"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Flavor-Function">Flavor Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Eval-Function">Eval Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<h3 class="section">8.9 The <code>origin</code> Function</h3>

<p><a name="index-origin-623"></a><a name="index-variables_002c-origin-of-624"></a><a name="index-origin-of-variable-625"></a>
The <code>origin</code> function is unlike most other functions in that it does
not operate on the values of variables; it tells you something <em>about</em>
a variable.  Specifically, it tells you where it came from.

   <p>The syntax of the <code>origin</code> function is:

<pre class="example">     $(origin <var>variable</var>)
</pre>
   <p>Note that <var>variable</var> is the <em>name</em> of a variable to inquire about;
not a <em>reference</em> to that variable.  Therefore you would not normally
use a <span class="samp">$</span> or parentheses when writing it.  (You can, however, use a
variable reference in the name if you want the name not to be a constant.)

   <p>The result of this function is a string telling you how the variable
<var>variable</var> was defined:

     <dl>
<dt><span class="samp">undefined</span><dd>
if <var>variable</var> was never defined.

     <br><dt><span class="samp">default</span><dd>
if <var>variable</var> has a default definition, as is usual with <code>CC</code>
and so on.  See <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>. 
Note that if you have redefined a default variable, the <code>origin</code>
function will return the origin of the later definition.

     <br><dt><span class="samp">environment</span><dd>
if <var>variable</var> was defined as an environment variable and the
<span class="samp">-e</span> option is <em>not</em> turned on (see <a href="#Options-Summary">Summary of Options</a>).

     <br><dt><span class="samp">environment override</span><dd>
if <var>variable</var> was defined as an environment variable and the
<span class="samp">-e</span><!-- /@w --> option <em>is</em> turned on (see <a href="#Options-Summary">Summary of Options</a>).

     <br><dt><span class="samp">file</span><dd>
if <var>variable</var> was defined in a makefile.

     <br><dt><span class="samp">command line</span><dd>
if <var>variable</var> was defined on the command line.

     <br><dt><span class="samp">override</span><dd>
if <var>variable</var> was defined with an <code>override</code> directive in a
makefile (see <a href="#Override-Directive">The <code>override</code> Directive</a>).

     <br><dt><span class="samp">automatic</span><dd>
if <var>variable</var> is an automatic variable defined for the
execution of the commands for each rule
(see <a href="#Automatic-Variables">Automatic Variables</a>). 
</dl>

   <p>This information is primarily useful (other than for your curiosity) to
determine if you want to believe the value of a variable.  For example,
suppose you have a makefile <span class="file">foo</span> that includes another makefile
<span class="file">bar</span>.  You want a variable <code>bletch</code> to be defined in <span class="file">bar</span>
if you run the command <span class="samp">make&nbsp;-f&nbsp;bar</span><!-- /@w -->, even if the environment contains
a definition of <code>bletch</code>.  However, if <span class="file">foo</span> defined
<code>bletch</code> before including <span class="file">bar</span>, you do not want to override that
definition.  This could be done by using an <code>override</code> directive in
<span class="file">foo</span>, giving that definition precedence over the later definition in
<span class="file">bar</span>; unfortunately, the <code>override</code> directive would also
override any command line definitions.  So, <span class="file">bar</span> could
include:

<pre class="example">     ifdef bletch
     ifeq "$(origin bletch)" "environment"
     bletch = barf, gag, etc.
     endif
     endif
</pre>
   <p class="noindent">If <code>bletch</code> has been defined from the environment, this will redefine
it.

   <p>If you want to override a previous definition of <code>bletch</code> if it came
from the environment, even under <span class="samp">-e</span>, you could instead write:

<pre class="example">     ifneq "$(findstring environment,$(origin bletch))" ""
     bletch = barf, gag, etc.
     endif
</pre>
   <p>Here the redefinition takes place if <span class="samp">$(origin bletch)</span> returns either
<span class="samp">environment</span> or <span class="samp">environment override</span>. 
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

<div class="node">
<p><hr>
<a name="Flavor-Function"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Shell-Function">Shell Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Origin-Function">Origin Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<h3 class="section">8.10 The <code>flavor</code> Function</h3>

<p><a name="index-flavor-626"></a><a name="index-variables_002c-flavor-of-627"></a><a name="index-flavor-of-variable-628"></a>
The <code>flavor</code> function is unlike most other functions (and like
<code>origin</code> function) in that it does not operate on the values of
variables; it tells you something <em>about</em> a variable. 
Specifically, it tells you the flavor of a variable (see <a href="#Flavors">The Two Flavors of Variables</a>).

   <p>The syntax of the <code>flavor</code> function is:

<pre class="example">     $(flavor <var>variable</var>)
</pre>
   <p>Note that <var>variable</var> is the <em>name</em> of a variable to inquire about;
not a <em>reference</em> to that variable.  Therefore you would not normally
use a <span class="samp">$</span> or parentheses when writing it.  (You can, however, use a
variable reference in the name if you want the name not to be a constant.)

   <p>The result of this function is a string that identifies the flavor of the
variable <var>variable</var>:

     <dl>
<dt><span class="samp">undefined</span><dd>
if <var>variable</var> was never defined.

     <br><dt><span class="samp">recursive</span><dd>
if <var>variable</var> is a recursively expanded variable.

     <br><dt><span class="samp">simple</span><dd>
if <var>variable</var> is a simply expanded variable.

   </dl>

<div class="node">
<p><hr>
<a name="Shell-Function"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Make-Control-Functions">Make Control Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Flavor-Function">Flavor Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<h3 class="section">8.11 The <code>shell</code> Function</h3>

<p><a name="index-shell-629"></a><a name="index-commands_002c-expansion-630"></a><a name="index-backquotes-631"></a><a name="index-shell-command_002c-function-for-632"></a>
The <code>shell</code> function is unlike any other function other than the
<code>wildcard</code> function
(see <a href="#Wildcard-Function">The Function <code>wildcard</code></a>) in that it
communicates with the world outside of <code>make</code>.

   <p>The <code>shell</code> function performs the same function that backquotes
(<span class="samp">`</span>) perform in most shells: it does <dfn>command expansion</dfn>. 
This means that it takes as an argument a shell command and evaluates
to the output of the command.  The only processing <code>make</code> does on
the result is to convert each newline (or carriage-return / newline
pair) to a single space.  If there is a trailing (carriage-return
and) newline it will simply be removed.

   <p>The commands run by calls to the <code>shell</code> function are run when the
function calls are expanded (see <a href="#Reading-Makefiles">How <code>make</code> Reads a Makefile</a>).  Because this function involves
spawning a new shell, you should carefully consider the performance
implications of using the <code>shell</code> function within recursively
expanded variables vs. simply expanded variables (see <a href="#Flavors">The Two Flavors of Variables</a>).

   <p>Here are some examples of the use of the <code>shell</code> function:

<pre class="example">     contents := $(shell cat foo)
</pre>
   <p class="noindent">sets <code>contents</code> to the contents of the file <span class="file">foo</span>, with a space
(rather than a newline) separating each line.

<pre class="example">     files := $(shell echo *.c)
</pre>
   <p class="noindent">sets <code>files</code> to the expansion of <span class="samp">*.c</span>.  Unless <code>make</code> is
using a very strange shell, this has the same result as
<span class="samp">$(wildcard&nbsp;*.c)</span><!-- /@w --> (as long as at least one <span class="samp">.c</span> file
exists).

<div class="node">
<p><hr>
<a name="Make-Control-Functions"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Shell-Function">Shell Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>
<br>
</div>

<h3 class="section">8.12 Functions That Control Make</h3>

<p><a name="index-functions_002c-for-controlling-make-633"></a><a name="index-controlling-make-634"></a>
These functions control the way make runs.  Generally, they are used to
provide information to the user of the makefile or to cause make to stop
if some sort of environmental error is detected.

     <dl>
<dt><code>$(error </code><var>text</var><code>...)</code><dd><a name="index-error-635"></a><a name="index-error_002c-stopping-on-636"></a><a name="index-stopping-make-637"></a>Generates a fatal error where the message is <var>text</var>.  Note that the
error is generated whenever this function is evaluated.  So, if you put
it inside a command script or on the right side of a recursive variable
assignment, it won't be evaluated until later.  The <var>text</var> will be
expanded before the error is generated.

     <p>For example,

     <pre class="example">          ifdef ERROR1
          $(error error is $(ERROR1))
          endif
     </pre>
     <p class="noindent">will generate a fatal error during the read of the makefile if the
<code>make</code> variable <code>ERROR1</code> is defined.  Or,

     <pre class="example">          ERR = $(error found an error!)
          
          .PHONY: err
          err: ; $(ERR)
     </pre>
     <p class="noindent">will generate a fatal error while <code>make</code> is running, if the
<code>err</code> target is invoked.

     <br><dt><code>$(warning </code><var>text</var><code>...)</code><dd><a name="index-warning-638"></a><a name="index-warnings_002c-printing-639"></a><a name="index-printing-user-warnings-640"></a>This function works similarly to the <code>error</code> function, above,
except that <code>make</code> doesn't exit.  Instead, <var>text</var> is expanded
and the resulting message is displayed, but processing of the makefile
continues.

     <p>The result of the expansion of this function is the empty string.

     <br><dt><code>$(info </code><var>text</var><code>...)</code><dd><a name="index-info-641"></a><a name="index-printing-messages-642"></a>This function does nothing more than print its (expanded) argument(s)
to standard output.  No makefile name or line number is added.  The
result of the expansion of this function is the empty string. 
</dl>

<div class="node">
<p><hr>
<a name="Running"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Implicit-Rules">Implicit Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Functions">Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">9 How to Run <code>make</code></h2>

<p>A makefile that says how to recompile a program can be used in more
than one way.  The simplest use is to recompile every file that is out
of date.  Usually, makefiles are written so that if you run
<code>make</code> with no arguments, it does just that.

   <p>But you might want to update only some of the files; you might want to use
a different compiler or different compiler options; you might want just to
find out which files are out of date without changing them.

   <p>By giving arguments when you run <code>make</code>, you can do any of these
things and many others.

   <p><a name="index-exit-status-of-make-643"></a>The exit status of <code>make</code> is always one of three values:
     <dl>
<dt><code>0</code><dd>The exit status is zero if <code>make</code> is successful. 
<br><dt><code>2</code><dd>The exit status is two if <code>make</code> encounters any errors. 
It will print messages describing the particular errors. 
<br><dt><code>1</code><dd>The exit status is one if you use the <span class="samp">-q</span> flag and <code>make</code>
determines that some target is not already up to date. 
See <a href="#Instead-of-Execution">Instead of Executing the Commands</a>. 
</dl>

<ul class="menu">
<li><a accesskey="1" href="#Makefile-Arguments">Makefile Arguments</a>:           How to specify which makefile to use. 
<li><a accesskey="2" href="#Goals">Goals</a>:                        How to use goal arguments to specify which
                                  parts of the makefile to use. 
<li><a accesskey="3" href="#Instead-of-Execution">Instead of Execution</a>:         How to use mode flags to specify what
                                  kind of thing to do with the commands
                                  in the makefile other than simply
                                  execute them. 
<li><a accesskey="4" href="#Avoiding-Compilation">Avoiding Compilation</a>:         How to avoid recompiling certain files. 
<li><a accesskey="5" href="#Overriding">Overriding</a>:                   How to override a variable to specify
                                  an alternate compiler and other things. 
<li><a accesskey="6" href="#Testing">Testing</a>:                      How to proceed past some errors, to
                                  test compilation. 
<li><a accesskey="7" href="#Options-Summary">Options Summary</a>:              Summary of Options
</ul>

<div class="node">
<p><hr>
<a name="Makefile-Arguments"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Goals">Goals</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Running">Running</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running">Running</a>
<br>
</div>

<h3 class="section">9.1 Arguments to Specify the Makefile</h3>

<p><a name="index-_0040code_007b_002d_002dfile_007d-644"></a><a name="index-_0040code_007b_002d_002dmakefile_007d-645"></a><a name="index-_0040code_007b_002df_007d-646"></a>
The way to specify the name of the makefile is with the <span class="samp">-f</span> or
<span class="samp">--file</span> option (<span class="samp">--makefile</span> also works).  For example,
<span class="samp">-f altmake</span> says to use the file <span class="file">altmake</span> as the makefile.

   <p>If you use the <span class="samp">-f</span> flag several times and follow each <span class="samp">-f</span>
with an argument, all the specified files are used jointly as
makefiles.

   <p>If you do not use the <span class="samp">-f</span> or <span class="samp">--file</span> flag, the default is
to try <span class="file">GNUmakefile</span>, <span class="file">makefile</span>, and <span class="file">Makefile</span>, in
that order, and use the first of these three which exists or can be made
(see <a href="#Makefiles">Writing Makefiles</a>).

<div class="node">
<p><hr>
<a name="Goals"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Instead-of-Execution">Instead of Execution</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Makefile-Arguments">Makefile Arguments</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running">Running</a>
<br>
</div>

<h3 class="section">9.2 Arguments to Specify the Goals</h3>

<p><a name="index-goal_002c-how-to-specify-647"></a>
The <dfn>goals</dfn> are the targets that <code>make</code> should strive ultimately
to update.  Other targets are updated as well if they appear as
prerequisites of goals, or prerequisites of prerequisites of goals, etc.

   <p>By default, the goal is the first target in the makefile (not counting
targets that start with a period).  Therefore, makefiles are usually
written so that the first target is for compiling the entire program or
programs they describe.  If the first rule in the makefile has several
targets, only the first target in the rule becomes the default goal, not
the whole list.  You can manage the selection of the default goal from
within your makefile using the <code>.DEFAULT_GOAL</code> variable
(see <a href="#Special-Variables">Other Special Variables</a>).

   <p>You can also specify a different goal or goals with command-line
arguments to <code>make</code>.  Use the name of the goal as an argument. 
If you specify several goals, <code>make</code> processes each of them in
turn, in the order you name them.

   <p>Any target in the makefile may be specified as a goal (unless it
starts with <span class="samp">-</span> or contains an <span class="samp">=</span>, in which case it will be
parsed as a switch or variable definition, respectively).  Even
targets not in the makefile may be specified, if <code>make</code> can find
implicit rules that say how to make them.

   <p><a name="index-MAKECMDGOALS-648"></a><code>Make</code> will set the special variable <code>MAKECMDGOALS</code> to the
list of goals you specified on the command line.  If no goals were given
on the command line, this variable is empty.  Note that this variable
should be used only in special circumstances.

   <p>An example of appropriate use is to avoid including <span class="file">.d</span> files
during <code>clean</code> rules (see <a href="#Automatic-Prerequisites">Automatic Prerequisites</a>), so
<code>make</code> won't create them only to immediately remove them
again:

<pre class="example">     sources = foo.c bar.c
     
     ifneq ($(MAKECMDGOALS),clean)
     include $(sources:.c=.d)
     endif
</pre>
   <p>One use of specifying a goal is if you want to compile only a part of
the program, or only one of several programs.  Specify as a goal each
file that you wish to remake.  For example, consider a directory containing
several programs, with a makefile that starts like this:

<pre class="example">     .PHONY: all
     all: size nm ld ar as
</pre>
   <p>If you are working on the program <code>size</code>, you might want to say
<span class="samp">make&nbsp;size</span><!-- /@w --> so that only the files of that program are recompiled.

   <p>Another use of specifying a goal is to make files that are not normally
made.  For example, there may be a file of debugging output, or a
version of the program that is compiled specially for testing, which has
a rule in the makefile but is not a prerequisite of the default goal.

   <p>Another use of specifying a goal is to run the commands associated with
a phony target (see <a href="#Phony-Targets">Phony Targets</a>) or empty target (see <a href="#Empty-Targets">Empty Target Files to Record Events</a>).  Many makefiles contain
a phony target named <span class="file">clean</span> which deletes everything except source
files.  Naturally, this is done only if you request it explicitly with
<span class="samp">make&nbsp;clean</span><!-- /@w -->.  Following is a list of typical phony and empty
target names.  See <a href="#Standard-Targets">Standard Targets</a>, for a detailed list of all the
standard target names which GNU software packages use.

     <dl>
<dt><span class="file">all</span><dd><a name="index-_0040code_007ball_007d-_0040r_007b_0028standard-target_0029_007d-649"></a>Make all the top-level targets the makefile knows about.

     <br><dt><span class="file">clean</span><dd><a name="index-_0040code_007bclean_007d-_0040r_007b_0028standard-target_0029_007d-650"></a>Delete all files that are normally created by running <code>make</code>.

     <br><dt><span class="file">mostlyclean</span><dd><a name="index-_0040code_007bmostlyclean_007d-_0040r_007b_0028standard-target_0029_007d-651"></a>Like <span class="samp">clean</span>, but may refrain from deleting a few files that people
normally don't want to recompile.  For example, the <span class="samp">mostlyclean</span>
target for GCC does not delete <span class="file">libgcc.a</span>, because recompiling it
is rarely necessary and takes a lot of time.

     <br><dt><span class="file">distclean</span><dd><a name="index-_0040code_007bdistclean_007d-_0040r_007b_0028standard-target_0029_007d-652"></a><dt><span class="file">realclean</span><dd><a name="index-_0040code_007brealclean_007d-_0040r_007b_0028standard-target_0029_007d-653"></a><dt><span class="file">clobber</span><dd><a name="index-_0040code_007bclobber_007d-_0040r_007b_0028standard-target_0029_007d-654"></a>Any of these targets might be defined to delete <em>more</em> files than
<span class="samp">clean</span> does.  For example, this would delete configuration files
or links that you would normally create as preparation for compilation,
even if the makefile itself cannot create these files.

     <br><dt><span class="file">install</span><dd><a name="index-_0040code_007binstall_007d-_0040r_007b_0028standard-target_0029_007d-655"></a>Copy the executable file into a directory that users typically search
for commands; copy any auxiliary files that the executable uses into
the directories where it will look for them.

     <br><dt><span class="file">print</span><dd><a name="index-_0040code_007bprint_007d-_0040r_007b_0028standard-target_0029_007d-656"></a>Print listings of the source files that have changed.

     <br><dt><span class="file">tar</span><dd><a name="index-_0040code_007btar_007d-_0040r_007b_0028standard-target_0029_007d-657"></a>Create a tar file of the source files.

     <br><dt><span class="file">shar</span><dd><a name="index-_0040code_007bshar_007d-_0040r_007b_0028standard-target_0029_007d-658"></a>Create a shell archive (shar file) of the source files.

     <br><dt><span class="file">dist</span><dd><a name="index-_0040code_007bdist_007d-_0040r_007b_0028standard-target_0029_007d-659"></a>Create a distribution file of the source files.  This might
be a tar file, or a shar file, or a compressed version of one of the
above, or even more than one of the above.

     <br><dt><span class="file">TAGS</span><dd><a name="index-_0040code_007bTAGS_007d-_0040r_007b_0028standard-target_0029_007d-660"></a>Update a tags table for this program.

     <br><dt><span class="file">check</span><dd><a name="index-_0040code_007bcheck_007d-_0040r_007b_0028standard-target_0029_007d-661"></a><dt><span class="file">test</span><dd><a name="index-_0040code_007btest_007d-_0040r_007b_0028standard-target_0029_007d-662"></a>Perform self tests on the program this makefile builds. 
</dl>

<div class="node">
<p><hr>
<a name="Instead-of-Execution"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Avoiding-Compilation">Avoiding Compilation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Goals">Goals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running">Running</a>
<br>
</div>

<h3 class="section">9.3 Instead of Executing the Commands</h3>

<p><a name="index-execution_002c-instead-of-663"></a><a name="index-commands_002c-instead-of-executing-664"></a>
The makefile tells <code>make</code> how to tell whether a target is up to date,
and how to update each target.  But updating the targets is not always
what you want.  Certain options specify other activities for <code>make</code>.

<!-- Extra blank lines make it print better. -->
<dl>
<dt><span class="samp">-n</span><dt><span class="samp">--just-print</span><dt><span class="samp">--dry-run</span><dt><span class="samp">--recon</span><dd><a name="index-_0040code_007b_002d_002djust_002dprint_007d-665"></a><a name="index-_0040code_007b_002d_002ddry_002drun_007d-666"></a><a name="index-_0040code_007b_002d_002drecon_007d-667"></a><a name="index-_0040code_007b_002dn_007d-668"></a>
&ldquo;No-op&rdquo;.  The activity is to print what commands would be used to make
the targets up to date, but not actually execute them.

     <br><dt><span class="samp">-t</span><dt><span class="samp">--touch</span><dd><a name="index-_0040code_007b_002d_002dtouch_007d-669"></a><a name="index-touching-files-670"></a><a name="index-target_002c-touching-671"></a><a name="index-_0040code_007b_002dt_007d-672"></a>
&ldquo;Touch&rdquo;.  The activity is to mark the targets as up to date without
actually changing them.  In other words, <code>make</code> pretends to compile
the targets but does not really change their contents.

     <br><dt><span class="samp">-q</span><dt><span class="samp">--question</span><dd><a name="index-_0040code_007b_002d_002dquestion_007d-673"></a><a name="index-_0040code_007b_002dq_007d-674"></a><a name="index-question-mode-675"></a>
&ldquo;Question&rdquo;.  The activity is to find out silently whether the targets
are up to date already; but execute no commands in either case.  In other
words, neither compilation nor output will occur.

     <br><dt><span class="samp">-W </span><var>file</var><dt><span class="samp">--what-if=</span><var>file</var><dt><span class="samp">--assume-new=</span><var>file</var><dt><span class="samp">--new-file=</span><var>file</var><dd><a name="index-_0040code_007b_002d_002dwhat_002dif_007d-676"></a><a name="index-_0040code_007b_002dW_007d-677"></a><a name="index-_0040code_007b_002d_002dassume_002dnew_007d-678"></a><a name="index-_0040code_007b_002d_002dnew_002dfile_007d-679"></a><a name="index-what-if-680"></a><a name="index-files_002c-assuming-new-681"></a>
&ldquo;What if&rdquo;.  Each <span class="samp">-W</span> flag is followed by a file name.  The given
files' modification times are recorded by <code>make</code> as being the present
time, although the actual modification times remain the same. 
You can use the <span class="samp">-W</span> flag in conjunction with the <span class="samp">-n</span> flag
to see what would happen if you were to modify specific files. 
</dl>

   <p>With the <span class="samp">-n</span> flag, <code>make</code> prints the commands that it would
normally execute but does not execute them.

   <p>With the <span class="samp">-t</span> flag, <code>make</code> ignores the commands in the rules
and uses (in effect) the command <code>touch</code> for each target that needs to
be remade.  The <code>touch</code> command is also printed, unless <span class="samp">-s</span> or
<code>.SILENT</code> is used.  For speed, <code>make</code> does not actually invoke
the program <code>touch</code>.  It does the work directly.

   <p>With the <span class="samp">-q</span> flag, <code>make</code> prints nothing and executes no
commands, but the exit status code it returns is zero if and only if the
targets to be considered are already up to date.  If the exit status is
one, then some updating needs to be done.  If <code>make</code> encounters an
error, the exit status is two, so you can distinguish an error from a
target that is not up to date.

   <p>It is an error to use more than one of these three flags in the same
invocation of <code>make</code>.

   <p><a name="index-_002b_002c-and-command-execution-682"></a>The <span class="samp">-n</span>, <span class="samp">-t</span>, and <span class="samp">-q</span> options do not affect command
lines that begin with <span class="samp">+</span> characters or contain the strings
<span class="samp">$(MAKE)</span> or <span class="samp">${MAKE}</span>.  Note that only the line containing
the <span class="samp">+</span> character or the strings <span class="samp">$(MAKE)</span> or <span class="samp">${MAKE}</span>
is run regardless of these options.  Other lines in the same rule are
not run unless they too begin with <span class="samp">+</span> or contain <span class="samp">$(MAKE)</span> or
<span class="samp">${MAKE}</span> (See <a href="#MAKE-Variable">How the <code>MAKE</code> Variable Works</a>.)

   <p>The <span class="samp">-W</span> flag provides two features:

     <ul>
<li>If you also use the <span class="samp">-n</span> or <span class="samp">-q</span> flag, you can see what
<code>make</code> would do if you were to modify some files.

     <li>Without the <span class="samp">-n</span> or <span class="samp">-q</span> flag, when <code>make</code> is actually
executing commands, the <span class="samp">-W</span> flag can direct <code>make</code> to act
as if some files had been modified, without actually modifying the
files. 
</ul>

   <p>Note that the options <span class="samp">-p</span> and <span class="samp">-v</span> allow you to obtain other
information about <code>make</code> or about the makefiles in use
(see <a href="#Options-Summary">Summary of Options</a>).

<div class="node">
<p><hr>
<a name="Avoiding-Compilation"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Overriding">Overriding</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Instead-of-Execution">Instead of Execution</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running">Running</a>
<br>
</div>

<h3 class="section">9.4 Avoiding Recompilation of Some Files</h3>

<p><a name="index-_0040code_007b_002do_007d-683"></a><a name="index-_0040code_007b_002d_002dold_002dfile_007d-684"></a><a name="index-_0040code_007b_002d_002dassume_002dold_007d-685"></a><a name="index-files_002c-assuming-old-686"></a><a name="index-files_002c-avoiding-recompilation-of-687"></a><a name="index-recompilation_002c-avoiding-688"></a>
Sometimes you may have changed a source file but you do not want to
recompile all the files that depend on it.  For example, suppose you add
a macro or a declaration to a header file that many other files depend
on.  Being conservative, <code>make</code> assumes that any change in the
header file requires recompilation of all dependent files, but you know
that they do not need to be recompiled and you would rather not waste
the time waiting for them to compile.

   <p>If you anticipate the problem before changing the header file, you can
use the <span class="samp">-t</span> flag.  This flag tells <code>make</code> not to run the
commands in the rules, but rather to mark the target up to date by
changing its last-modification date.  You would follow this procedure:

     <ol type=1 start=1>
<li>Use the command <span class="samp">make</span> to recompile the source files that really
need recompilation, ensuring that the object files are up-to-date
before you begin.

     <li>Make the changes in the header files.

     <li>Use the command <span class="samp">make -t</span> to mark all the object files as
up to date.  The next time you run <code>make</code>, the changes in the
header files will not cause any recompilation.
        </ol>

   <p>If you have already changed the header file at a time when some files
do need recompilation, it is too late to do this.  Instead, you can
use the <span class="samp">-o&nbsp;</span><var>file</var><!-- /@w --> flag, which marks a specified file as
&ldquo;old&rdquo; (see <a href="#Options-Summary">Summary of Options</a>).  This means
that the file itself will not be remade, and nothing else will be
remade on its account.  Follow this procedure:

     <ol type=1 start=1>
<li>Recompile the source files that need compilation for reasons independent
of the particular header file, with <span class="samp">make -o </span><var>headerfile</var>. 
If several header files are involved, use a separate <span class="samp">-o</span> option
for each header file.

     <li>Touch all the object files with <span class="samp">make -t</span>.
        </ol>

<div class="node">
<p><hr>
<a name="Overriding"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Testing">Testing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Avoiding-Compilation">Avoiding Compilation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running">Running</a>
<br>
</div>

<h3 class="section">9.5 Overriding Variables</h3>

<p><a name="index-overriding-variables-with-arguments-689"></a><a name="index-variables_002c-overriding-with-arguments-690"></a><a name="index-command-line-variables-691"></a><a name="index-variables_002c-command-line-692"></a>
An argument that contains <span class="samp">=</span> specifies the value of a variable:
<var>v</var><span class="samp">=</span><var>x</var> sets the value of the variable <var>v</var> to <var>x</var>. 
If you specify a value in this way, all ordinary assignments of the same
variable in the makefile are ignored; we say they have been
<dfn>overridden</dfn> by the command line argument.

   <p>The most common way to use this facility is to pass extra flags to
compilers.  For example, in a properly written makefile, the variable
<code>CFLAGS</code> is included in each command that runs the C compiler, so a
file <span class="file">foo.c</span> would be compiled something like this:

<pre class="example">     cc -c $(CFLAGS) foo.c
</pre>
   <p>Thus, whatever value you set for <code>CFLAGS</code> affects each compilation
that occurs.  The makefile probably specifies the usual value for
<code>CFLAGS</code>, like this:

<pre class="example">     CFLAGS=-g
</pre>
   <p>Each time you run <code>make</code>, you can override this value if you
wish.  For example, if you say <span class="samp">make CFLAGS='-g -O'</span>, each C
compilation will be done with <span class="samp">cc -c -g -O</span>.  (This also
illustrates how you can use quoting in the shell to enclose spaces and
other special characters in the value of a variable when you override
it.)

   <p>The variable <code>CFLAGS</code> is only one of many standard variables that
exist just so that you can change them this way.  See <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>, for a complete list.

   <p>You can also program the makefile to look at additional variables of your
own, giving the user the ability to control other aspects of how the
makefile works by changing the variables.

   <p>When you override a variable with a command argument, you can define either
a recursively-expanded variable or a simply-expanded variable.  The
examples shown above make a recursively-expanded variable; to make a
simply-expanded variable, write <span class="samp">:=</span> instead of <span class="samp">=</span>.  But, unless
you want to include a variable reference or function call in the
<em>value</em> that you specify, it makes no difference which kind of
variable you create.

   <p>There is one way that the makefile can change a variable that you have
overridden.  This is to use the <code>override</code> directive, which is a line
that looks like this: <span class="samp">override </span><var>variable</var><span class="samp"> = </span><var>value</var>
(see <a href="#Override-Directive">The <code>override</code> Directive</a>).

<div class="node">
<p><hr>
<a name="Testing"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Options-Summary">Options Summary</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Overriding">Overriding</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running">Running</a>
<br>
</div>

<h3 class="section">9.6 Testing the Compilation of a Program</h3>

<p><a name="index-testing-compilation-693"></a><a name="index-compilation_002c-testing-694"></a>
Normally, when an error happens in executing a shell command, <code>make</code>
gives up immediately, returning a nonzero status.  No further commands are
executed for any target.  The error implies that the goal cannot be
correctly remade, and <code>make</code> reports this as soon as it knows.

   <p>When you are compiling a program that you have just changed, this is not
what you want.  Instead, you would rather that <code>make</code> try compiling
every file that can be tried, to show you as many compilation errors
as possible.

   <p><a name="index-_0040code_007b_002dk_007d-695"></a><a name="index-_0040code_007b_002d_002dkeep_002dgoing_007d-696"></a>On these occasions, you should use the <span class="samp">-k</span> or
<span class="samp">--keep-going</span> flag.  This tells <code>make</code> to continue to
consider the other prerequisites of the pending targets, remaking them
if necessary, before it gives up and returns nonzero status.  For
example, after an error in compiling one object file, <span class="samp">make -k</span>
will continue compiling other object files even though it already
knows that linking them will be impossible.  In addition to continuing
after failed shell commands, <span class="samp">make -k</span> will continue as much as
possible after discovering that it does not know how to make a target
or prerequisite file.  This will always cause an error message, but
without <span class="samp">-k</span>, it is a fatal error (see <a href="#Options-Summary">Summary of Options</a>).

   <p>The usual behavior of <code>make</code> assumes that your purpose is to get the
goals up to date; once <code>make</code> learns that this is impossible, it might
as well report the failure immediately.  The <span class="samp">-k</span> flag says that the
real purpose is to test as much as possible of the changes made in the
program, perhaps to find several independent problems so that you can
correct them all before the next attempt to compile.  This is why Emacs'
<kbd>M-x compile</kbd> command passes the <span class="samp">-k</span> flag by default.

<div class="node">
<p><hr>
<a name="Options-Summary"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Testing">Testing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running">Running</a>
<br>
</div>

<h3 class="section">9.7 Summary of Options</h3>

<p><a name="index-options-697"></a><a name="index-flags-698"></a><a name="index-switches-699"></a>
Here is a table of all the options <code>make</code> understands:

     <dl>
<dt><span class="samp">-b</span><dd><a name="index-_0040code_007b_002db_007d-700"></a><dt><span class="samp">-m</span><dd><a name="index-_0040code_007b_002dm_007d-701"></a>These options are ignored for compatibility with other versions of <code>make</code>.

     <br><dt><span class="samp">-B</span><dd><a name="index-_0040code_007b_002dB_007d-702"></a><dt><span class="samp">--always-make</span><dd><a name="index-_0040code_007b_002d_002dalways_002dmake_007d-703"></a>Consider all targets out-of-date.  GNU <code>make</code> proceeds to
consider targets and their prerequisites using the normal algorithms;
however, all targets so considered are always remade regardless of the
status of their prerequisites.  To avoid infinite recursion, if
<code>MAKE_RESTARTS</code> (see <a href="#Special-Variables">Other Special Variables</a>) is set to a number greater than 0 this option is disabled
when considering whether to remake makefiles (see <a href="#Remaking-Makefiles">How Makefiles Are Remade</a>).

     <br><dt><span class="samp">-C </span><var>dir</var><dd><a name="index-_0040code_007b_002dC_007d-704"></a><dt><span class="samp">--directory=</span><var>dir</var><dd><a name="index-_0040code_007b_002d_002ddirectory_007d-705"></a>Change to directory <var>dir</var> before reading the makefiles.  If multiple
<span class="samp">-C</span> options are specified, each is interpreted relative to the
previous one: <span class="samp">-C / -C etc</span> is equivalent to <span class="samp">-C /etc</span>. 
This is typically used with recursive invocations of <code>make</code>
(see <a href="#Recursion">Recursive Use of <code>make</code></a>).

     <br><dt><span class="samp">-d</span><dd><a name="index-_0040code_007b_002dd_007d-706"></a><!-- Extra blank line here makes the table look better. -->

     <p>Print debugging information in addition to normal processing.  The
debugging information says which files are being considered for
remaking, which file-times are being compared and with what results,
which files actually need to be remade, which implicit rules are
considered and which are applied&mdash;everything interesting about how
<code>make</code> decides what to do.  The <code>-d</code> option is equivalent to
<span class="samp">--debug=a</span> (see below).

     <br><dt><span class="samp">--debug[=</span><var>options</var><span class="samp">]</span><dd><a name="index-_0040code_007b_002d_002ddebug_007d-707"></a><!-- Extra blank line here makes the table look better. -->

     <p>Print debugging information in addition to normal processing.  Various
levels and types of output can be chosen.  With no arguments, print the
&ldquo;basic&rdquo; level of debugging.  Possible arguments are below; only the
first character is considered, and values must be comma- or
space-separated.

          <dl>
<dt><code>a (</code><i>all</i><code>)</code><dd>All types of debugging output are enabled.  This is equivalent to using
<span class="samp">-d</span>.

          <br><dt><code>b (</code><i>basic</i><code>)</code><dd>Basic debugging prints each target that was found to be out-of-date, and
whether the build was successful or not.

          <br><dt><code>v (</code><i>verbose</i><code>)</code><dd>A level above <span class="samp">basic</span>; includes messages about which makefiles were
parsed, prerequisites that did not need to be rebuilt, etc.  This option
also enables <span class="samp">basic</span> messages.

          <br><dt><code>i (</code><i>implicit</i><code>)</code><dd>Prints messages describing the implicit rule searches for each target. 
This option also enables <span class="samp">basic</span> messages.

          <br><dt><code>j (</code><i>jobs</i><code>)</code><dd>Prints messages giving details on the invocation of specific subcommands.

          <br><dt><code>m (</code><i>makefile</i><code>)</code><dd>By default, the above messages are not enabled while trying to remake
the makefiles.  This option enables messages while rebuilding makefiles,
too.  Note that the <span class="samp">all</span> option does enable this option.  This
option also enables <span class="samp">basic</span> messages. 
</dl>

     <br><dt><span class="samp">-e</span><dd><a name="index-_0040code_007b_002de_007d-708"></a><dt><span class="samp">--environment-overrides</span><dd><a name="index-_0040code_007b_002d_002denvironment_002doverrides_007d-709"></a>Give variables taken from the environment precedence
over variables from makefiles. 
See <a href="#Environment">Variables from the Environment</a>.

     <br><dt><span class="samp">-f </span><var>file</var><dd><a name="index-_0040code_007b_002df_007d-710"></a><dt><span class="samp">--file=</span><var>file</var><dd><a name="index-_0040code_007b_002d_002dfile_007d-711"></a><dt><span class="samp">--makefile=</span><var>file</var><dd><a name="index-_0040code_007b_002d_002dmakefile_007d-712"></a>Read the file named <var>file</var> as a makefile. 
See <a href="#Makefiles">Writing Makefiles</a>.

     <br><dt><span class="samp">-h</span><dd><a name="index-_0040code_007b_002dh_007d-713"></a><dt><span class="samp">--help</span><dd><a name="index-_0040code_007b_002d_002dhelp_007d-714"></a><!-- Extra blank line here makes the table look better. -->

     <p>Remind you of the options that <code>make</code> understands and then exit.

     <br><dt><span class="samp">-i</span><dd><a name="index-_0040code_007b_002di_007d-715"></a><dt><span class="samp">--ignore-errors</span><dd><a name="index-_0040code_007b_002d_002dignore_002derrors_007d-716"></a>Ignore all errors in commands executed to remake files. 
See <a href="#Errors">Errors in Commands</a>.

     <br><dt><span class="samp">-I </span><var>dir</var><dd><a name="index-_0040code_007b_002dI_007d-717"></a><dt><span class="samp">--include-dir=</span><var>dir</var><dd><a name="index-_0040code_007b_002d_002dinclude_002ddir_007d-718"></a>Specifies a directory <var>dir</var> to search for included makefiles. 
See <a href="#Include">Including Other Makefiles</a>.  If several <span class="samp">-I</span>
options are used to specify several directories, the directories are
searched in the order specified.

     <br><dt><span class="samp">-j [</span><var>jobs</var><span class="samp">]</span><dd><a name="index-_0040code_007b_002dj_007d-719"></a><dt><span class="samp">--jobs[=</span><var>jobs</var><span class="samp">]</span><dd><a name="index-_0040code_007b_002d_002djobs_007d-720"></a>Specifies the number of jobs (commands) to run simultaneously.  With no
argument, <code>make</code> runs as many jobs simultaneously as possible.  If
there is more than one <span class="samp">-j</span> option, the last one is effective. 
See <a href="#Parallel">Parallel Execution</a>,
for more information on how commands are run. 
Note that this option is ignored on MS-DOS.

     <br><dt><span class="samp">-k</span><dd><a name="index-_0040code_007b_002dk_007d-721"></a><dt><span class="samp">--keep-going</span><dd><a name="index-_0040code_007b_002d_002dkeep_002dgoing_007d-722"></a>Continue as much as possible after an error.  While the target that
failed, and those that depend on it, cannot be remade, the other
prerequisites of these targets can be processed all the same. 
See <a href="#Testing">Testing the Compilation of a Program</a>.

     <br><dt><span class="samp">-l [</span><var>load</var><span class="samp">]</span><dd><a name="index-_0040code_007b_002dl_007d-723"></a><dt><span class="samp">--load-average[=</span><var>load</var><span class="samp">]</span><dd><a name="index-_0040code_007b_002d_002dload_002daverage_007d-724"></a><dt><span class="samp">--max-load[=</span><var>load</var><span class="samp">]</span><dd><a name="index-_0040code_007b_002d_002dmax_002dload_007d-725"></a>Specifies that no new jobs (commands) should be started if there are
other jobs running and the load average is at least <var>load</var> (a
floating-point number).  With no argument, removes a previous load
limit.  See <a href="#Parallel">Parallel Execution</a>.

     <br><dt><span class="samp">-L</span><dd><a name="index-_0040code_007b_002dL_007d-726"></a><dt><span class="samp">--check-symlink-times</span><dd><a name="index-_0040code_007b_002d_002dcheck_002dsymlink_002dtimes_007d-727"></a>On systems that support symbolic links, this option causes <code>make</code>
to consider the timestamps on any symbolic links in addition to the
timestamp on the file referenced by those links.  When this option is
provided, the most recent timestamp among the file and the symbolic
links is taken as the modification time for this target file.

     <br><dt><span class="samp">-n</span><dd><a name="index-_0040code_007b_002dn_007d-728"></a><dt><span class="samp">--just-print</span><dd><a name="index-_0040code_007b_002d_002djust_002dprint_007d-729"></a><dt><span class="samp">--dry-run</span><dd><a name="index-_0040code_007b_002d_002ddry_002drun_007d-730"></a><dt><span class="samp">--recon</span><dd><a name="index-_0040code_007b_002d_002drecon_007d-731"></a><!-- Extra blank line here makes the table look better. -->

     <p>Print the commands that would be executed, but do not execute them. 
See <a href="#Instead-of-Execution">Instead of Executing the Commands</a>.

     <br><dt><span class="samp">-o </span><var>file</var><dd><a name="index-_0040code_007b_002do_007d-732"></a><dt><span class="samp">--old-file=</span><var>file</var><dd><a name="index-_0040code_007b_002d_002dold_002dfile_007d-733"></a><dt><span class="samp">--assume-old=</span><var>file</var><dd><a name="index-_0040code_007b_002d_002dassume_002dold_007d-734"></a>Do not remake the file <var>file</var> even if it is older than its
prerequisites, and do not remake anything on account of changes in
<var>file</var>.  Essentially the file is treated as very old and its rules
are ignored.  See <a href="#Avoiding-Compilation">Avoiding Recompilation of Some Files</a>.

     <br><dt><span class="samp">-p</span><dd><a name="index-_0040code_007b_002dp_007d-735"></a><dt><span class="samp">--print-data-base</span><dd><a name="index-_0040code_007b_002d_002dprint_002ddata_002dbase_007d-736"></a><a name="index-data-base-of-_0040code_007bmake_007d-rules-737"></a><a name="index-predefined-rules-and-variables_002c-printing-738"></a>Print the data base (rules and variable values) that results from
reading the makefiles; then execute as usual or as otherwise specified. 
This also prints the version information given by the <span class="samp">-v</span> switch
(see below).  To print the data base without trying to remake any files,
use <span class="samp">make&nbsp;-qp</span><!-- /@w -->.  To print the data base of predefined rules and
variables, use <span class="samp">make&nbsp;-p&nbsp;-f&nbsp;/dev/null</span><!-- /@w -->.  The data base output
contains filename and linenumber information for command and variable
definitions, so it can be a useful debugging tool in complex environments.

     <br><dt><span class="samp">-q</span><dd><a name="index-_0040code_007b_002dq_007d-739"></a><dt><span class="samp">--question</span><dd><a name="index-_0040code_007b_002d_002dquestion_007d-740"></a>&ldquo;Question mode&rdquo;.  Do not run any commands, or print anything; just
return an exit status that is zero if the specified targets are already
up to date, one if any remaking is required, or two if an error is
encountered.  See <a href="#Instead-of-Execution">Instead of Executing the Commands</a>.

     <br><dt><span class="samp">-r</span><dd><a name="index-_0040code_007b_002dr_007d-741"></a><dt><span class="samp">--no-builtin-rules</span><dd><a name="index-_0040code_007b_002d_002dno_002dbuiltin_002drules_007d-742"></a>Eliminate use of the built-in implicit rules (see <a href="#Implicit-Rules">Using Implicit Rules</a>).  You can still define your own by writing
pattern rules (see <a href="#Pattern-Rules">Defining and Redefining Pattern Rules</a>).  The <span class="samp">-r</span> option also clears out the default list of
suffixes for suffix rules (see <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>).  But you can still define your own suffixes with a rule for
<code>.SUFFIXES</code>, and then define your own suffix rules.  Note that only
<em>rules</em> are affected by the <code>-r</code> option; default variables
remain in effect (see <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>); see the <span class="samp">-R</span> option below.

     <br><dt><span class="samp">-R</span><dd><a name="index-_0040code_007b_002dR_007d-743"></a><dt><span class="samp">--no-builtin-variables</span><dd><a name="index-_0040code_007b_002d_002dno_002dbuiltin_002dvariables_007d-744"></a>Eliminate use of the built-in rule-specific variables (see <a href="#Implicit-Variables">Variables Used by Implicit Rules</a>).  You can still define
your own, of course.  The <span class="samp">-R</span> option also automatically enables
the <span class="samp">-r</span> option (see above), since it doesn't make sense to have
implicit rules without any definitions for the variables that they use.

     <br><dt><span class="samp">-s</span><dd><a name="index-_0040code_007b_002ds_007d-745"></a><dt><span class="samp">--silent</span><dd><a name="index-_0040code_007b_002d_002dsilent_007d-746"></a><dt><span class="samp">--quiet</span><dd><a name="index-_0040code_007b_002d_002dquiet_007d-747"></a><!-- Extra blank line here makes the table look better. -->

     <p>Silent operation; do not print the commands as they are executed. 
See <a href="#Echoing">Command Echoing</a>.

     <br><dt><span class="samp">-S</span><dd><a name="index-_0040code_007b_002dS_007d-748"></a><dt><span class="samp">--no-keep-going</span><dd><a name="index-_0040code_007b_002d_002dno_002dkeep_002dgoing_007d-749"></a><dt><span class="samp">--stop</span><dd><a name="index-_0040code_007b_002d_002dstop_007d-750"></a><!-- Extra blank line here makes the table look better. -->

     <p>Cancel the effect of the <span class="samp">-k</span> option.  This is never necessary
except in a recursive <code>make</code> where <span class="samp">-k</span> might be inherited
from the top-level <code>make</code> via <code>MAKEFLAGS</code>
(see <a href="#Recursion">Recursive Use of <code>make</code></a>)
or if you set <span class="samp">-k</span> in <code>MAKEFLAGS</code> in your environment.

     <br><dt><span class="samp">-t</span><dd><a name="index-_0040code_007b_002dt_007d-751"></a><dt><span class="samp">--touch</span><dd><a name="index-_0040code_007b_002d_002dtouch_007d-752"></a><!-- Extra blank line here makes the table look better. -->

     <p>Touch files (mark them up to date without really changing them)
instead of running their commands.  This is used to pretend that the
commands were done, in order to fool future invocations of
<code>make</code>.  See <a href="#Instead-of-Execution">Instead of Executing the Commands</a>.

     <br><dt><span class="samp">-v</span><dd><a name="index-_0040code_007b_002dv_007d-753"></a><dt><span class="samp">--version</span><dd><a name="index-_0040code_007b_002d_002dversion_007d-754"></a>Print the version of the <code>make</code> program plus a copyright, a list
of authors, and a notice that there is no warranty; then exit.

     <br><dt><span class="samp">-w</span><dd><a name="index-_0040code_007b_002dw_007d-755"></a><dt><span class="samp">--print-directory</span><dd><a name="index-_0040code_007b_002d_002dprint_002ddirectory_007d-756"></a>Print a message containing the working directory both before and after
executing the makefile.  This may be useful for tracking down errors
from complicated nests of recursive <code>make</code> commands. 
See <a href="#Recursion">Recursive Use of <code>make</code></a>.  (In practice, you
rarely need to specify this option since <span class="samp">make</span> does it for you;
see <a href="#_002dw-Option">The <span class="samp">--print-directory</span> Option</a>.)

     <dt><span class="samp">--no-print-directory</span><dd><a name="index-_0040code_007b_002d_002dno_002dprint_002ddirectory_007d-757"></a>Disable printing of the working directory under <code>-w</code>. 
This option is useful when <code>-w</code> is turned on automatically,
but you do not want to see the extra messages. 
See <a href="#_002dw-Option">The <span class="samp">--print-directory</span> Option</a>.

     <br><dt><span class="samp">-W </span><var>file</var><dd><a name="index-_0040code_007b_002dW_007d-758"></a><dt><span class="samp">--what-if=</span><var>file</var><dd><a name="index-_0040code_007b_002d_002dwhat_002dif_007d-759"></a><dt><span class="samp">--new-file=</span><var>file</var><dd><a name="index-_0040code_007b_002d_002dnew_002dfile_007d-760"></a><dt><span class="samp">--assume-new=</span><var>file</var><dd><a name="index-_0040code_007b_002d_002dassume_002dnew_007d-761"></a>Pretend that the target <var>file</var> has just been modified.  When used
with the <span class="samp">-n</span> flag, this shows you what would happen if you were
to modify that file.  Without <span class="samp">-n</span>, it is almost the same as
running a <code>touch</code> command on the given file before running
<code>make</code>, except that the modification time is changed only in the
imagination of <code>make</code>. 
See <a href="#Instead-of-Execution">Instead of Executing the Commands</a>.

     <br><dt><span class="samp">--warn-undefined-variables</span><dd><a name="index-_0040code_007b_002d_002dwarn_002dundefined_002dvariables_007d-762"></a><a name="index-variables_002c-warning-for-undefined-763"></a><a name="index-undefined-variables_002c-warning-message-764"></a>Issue a warning message whenever <code>make</code> sees a reference to an
undefined variable.  This can be helpful when you are trying to debug
makefiles which use variables in complex ways. 
</dl>

<div class="node">
<p><hr>
<a name="Implicit-Rules"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Archives">Archives</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Running">Running</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">10 Using Implicit Rules</h2>

<p><a name="index-implicit-rule-765"></a><a name="index-rule_002c-implicit-766"></a>
Certain standard ways of remaking target files are used very often.  For
example, one customary way to make an object file is from a C source file
using the C compiler, <code>cc</code>.

   <p><dfn>Implicit rules</dfn> tell <code>make</code> how to use customary techniques so
that you do not have to specify them in detail when you want to use
them.  For example, there is an implicit rule for C compilation.  File
names determine which implicit rules are run.  For example, C
compilation typically takes a <span class="file">.c</span> file and makes a <span class="file">.o</span> file. 
So <code>make</code> applies the implicit rule for C compilation when it sees
this combination of file name endings.

   <p>A chain of implicit rules can apply in sequence; for example, <code>make</code>
will remake a <span class="file">.o</span> file from a <span class="file">.y</span> file by way of a <span class="file">.c</span> file.

   <p>The built-in implicit rules use several variables in their commands so
that, by changing the values of the variables, you can change the way the
implicit rule works.  For example, the variable <code>CFLAGS</code> controls the
flags given to the C compiler by the implicit rule for C compilation.

   <p>You can define your own implicit rules by writing <dfn>pattern rules</dfn>.

   <p><dfn>Suffix rules</dfn> are a more limited way to define implicit rules. 
Pattern rules are more general and clearer, but suffix rules are
retained for compatibility.

<ul class="menu">
<li><a accesskey="1" href="#Using-Implicit">Using Implicit</a>:               How to use an existing implicit rule
                                  to get the commands for updating a file. 
<li><a accesskey="2" href="#Catalogue-of-Rules">Catalogue of Rules</a>:           A list of built-in implicit rules. 
<li><a accesskey="3" href="#Implicit-Variables">Implicit Variables</a>:           How to change what predefined rules do. 
<li><a accesskey="4" href="#Chained-Rules">Chained Rules</a>:                How to use a chain of implicit rules. 
<li><a accesskey="5" href="#Pattern-Rules">Pattern Rules</a>:                How to define new implicit rules. 
<li><a accesskey="6" href="#Last-Resort">Last Resort</a>:                  How to define commands for rules which
                                  cannot find any. 
<li><a accesskey="7" href="#Suffix-Rules">Suffix Rules</a>:                 The old-fashioned style of implicit rule. 
<li><a accesskey="8" href="#Implicit-Rule-Search">Implicit Rule Search</a>:         The precise algorithm for applying
                                  implicit rules. 
</ul>

<div class="node">
<p><hr>
<a name="Using-Implicit"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Catalogue-of-Rules">Catalogue of Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Implicit-Rules">Implicit Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Implicit-Rules">Implicit Rules</a>
<br>
</div>

<h3 class="section">10.1 Using Implicit Rules</h3>

<p><a name="index-implicit-rule_002c-how-to-use-767"></a><a name="index-rule_002c-implicit_002c-how-to-use-768"></a>
To allow <code>make</code> to find a customary method for updating a target file,
all you have to do is refrain from specifying commands yourself.  Either
write a rule with no command lines, or don't write a rule at all.  Then
<code>make</code> will figure out which implicit rule to use based on which
kind of source file exists or can be made.

   <p>For example, suppose the makefile looks like this:

<pre class="example">     foo : foo.o bar.o
             cc -o foo foo.o bar.o $(CFLAGS) $(LDFLAGS)
</pre>
   <p class="noindent">Because you mention <span class="file">foo.o</span> but do not give a rule for it, <code>make</code>
will automatically look for an implicit rule that tells how to update it. 
This happens whether or not the file <span class="file">foo.o</span> currently exists.

   <p>If an implicit rule is found, it can supply both commands and one or
more prerequisites (the source files).  You would want to write a rule
for <span class="file">foo.o</span> with no command lines if you need to specify additional
prerequisites, such as header files, that the implicit rule cannot
supply.

   <p>Each implicit rule has a target pattern and prerequisite patterns.  There may
be many implicit rules with the same target pattern.  For example, numerous
rules make <span class="samp">.o</span> files: one, from a <span class="samp">.c</span> file with the C compiler;
another, from a <span class="samp">.p</span> file with the Pascal compiler; and so on.  The rule
that actually applies is the one whose prerequisites exist or can be made. 
So, if you have a file <span class="file">foo.c</span>, <code>make</code> will run the C compiler;
otherwise, if you have a file <span class="file">foo.p</span>, <code>make</code> will run the Pascal
compiler; and so on.

   <p>Of course, when you write the makefile, you know which implicit rule you
want <code>make</code> to use, and you know it will choose that one because you
know which possible prerequisite files are supposed to exist. 
See <a href="#Catalogue-of-Rules">Catalogue of Implicit Rules</a>,
for a catalogue of all the predefined implicit rules.

   <p>Above, we said an implicit rule applies if the required prerequisites &ldquo;exist
or can be made&rdquo;.  A file &ldquo;can be made&rdquo; if it is mentioned explicitly in
the makefile as a target or a prerequisite, or if an implicit rule can be
recursively found for how to make it.  When an implicit prerequisite is the
result of another implicit rule, we say that <dfn>chaining</dfn> is occurring. 
See <a href="#Chained-Rules">Chains of Implicit Rules</a>.

   <p>In general, <code>make</code> searches for an implicit rule for each target, and
for each double-colon rule, that has no commands.  A file that is mentioned
only as a prerequisite is considered a target whose rule specifies nothing,
so implicit rule search happens for it.  See <a href="#Implicit-Rule-Search">Implicit Rule Search Algorithm</a>, for the
details of how the search is done.

   <p>Note that explicit prerequisites do not influence implicit rule search. 
For example, consider this explicit rule:

<pre class="example">     foo.o: foo.p
</pre>
   <p class="noindent">The prerequisite on <span class="file">foo.p</span> does not necessarily mean that
<code>make</code> will remake <span class="file">foo.o</span> according to the implicit rule to
make an object file, a <span class="file">.o</span> file, from a Pascal source file, a
<span class="file">.p</span> file.  For example, if <span class="file">foo.c</span> also exists, the implicit
rule to make an object file from a C source file is used instead,
because it appears before the Pascal rule in the list of predefined
implicit rules (see <a href="#Catalogue-of-Rules">Catalogue of Implicit Rules</a>).

   <p>If you do not want an implicit rule to be used for a target that has no
commands, you can give that target empty commands by writing a semicolon
(see <a href="#Empty-Commands">Defining Empty Commands</a>).

<div class="node">
<p><hr>
<a name="Catalogue-of-Rules"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Implicit-Variables">Implicit Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Implicit">Using Implicit</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Implicit-Rules">Implicit Rules</a>
<br>
</div>

<h3 class="section">10.2 Catalogue of Implicit Rules</h3>

<p><a name="index-implicit-rule_002c-predefined-769"></a><a name="index-rule_002c-implicit_002c-predefined-770"></a>
Here is a catalogue of predefined implicit rules which are always
available unless the makefile explicitly overrides or cancels them. 
See <a href="#Canceling-Rules">Canceling Implicit Rules</a>, for information on
canceling or overriding an implicit rule.  The <span class="samp">-r</span> or
<span class="samp">--no-builtin-rules</span> option cancels all predefined rules.

   <p>This manual only documents the default rules available on POSIX-based
operating systems.  Other operating systems, such as VMS, Windows,
OS/2, etc. may have different sets of default rules.  To see the full
list of default rules and variables available in your version of GNU
<code>make</code>, run <span class="samp">make -p</span> in a directory with no makefile.

   <p>Not all of these rules will always be defined, even when the <span class="samp">-r</span>
option is not given.  Many of the predefined implicit rules are
implemented in <code>make</code> as suffix rules, so which ones will be
defined depends on the <dfn>suffix list</dfn> (the list of prerequisites of
the special target <code>.SUFFIXES</code>).  The default suffix list is:
<code>.out</code>, <code>.a</code>, <code>.ln</code>, <code>.o</code>, <code>.c</code>, <code>.cc</code>,
<code>.C</code>, <code>.cpp</code>, <code>.p</code>, <code>.f</code>, <code>.F</code>, <code>.r</code>, <code>.y</code>,
<code>.l</code>, <code>.s</code>, <code>.S</code>, <code>.mod</code>, <code>.sym</code>, <code>.def</code>,
<code>.h</code>, <code>.info</code>, <code>.dvi</code>, <code>.tex</code>, <code>.texinfo</code>,
<code>.texi</code>, <code>.txinfo</code>, <code>.w</code>, <code>.ch</code> <code>.web</code>,
<code>.sh</code>, <code>.elc</code>, <code>.el</code>.  All of the implicit rules
described below whose prerequisites have one of these suffixes are
actually suffix rules.  If you modify the suffix list, the only
predefined suffix rules in effect will be those named by one or two of
the suffixes that are on the list you specify; rules whose suffixes fail
to be on the list are disabled.  See <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>, for full details on suffix rules.

     <dl>
<dt>Compiling C programs<dd><a name="index-C_002c-rule-to-compile-771"></a><a name="index-cc-772"></a><a name="index-gcc-773"></a><a name="index-_002eo-774"></a><a name="index-_002ec-775"></a><var>n</var><span class="file">.o</span> is made automatically from <var>n</var><span class="file">.c</span> with
a command of the form <span class="samp">$(CC) -c $(CPPFLAGS) $(CFLAGS)</span>.

     <br><dt>Compiling C++ programs<dd><a name="index-C_002b_002b_002c-rule-to-compile-776"></a><a name="index-g_002b_002b-777"></a><a name="index-_002ecc-778"></a><a name="index-_002ecpp-779"></a><a name="index-_002eC-780"></a><var>n</var><span class="file">.o</span> is made automatically from <var>n</var><span class="file">.cc</span>,
<var>n</var><span class="file">.cpp</span>, or <var>n</var><span class="file">.C</span> with a command of the form
<span class="samp">$(CXX) -c $(CPPFLAGS) $(CXXFLAGS)</span>.  We encourage you to use the
suffix <span class="samp">.cc</span> for C++ source files instead of <span class="samp">.C</span>.

     <br><dt>Compiling Pascal programs<dd><a name="index-Pascal_002c-rule-to-compile-781"></a><a name="index-pc-782"></a><a name="index-_002ep-783"></a><var>n</var><span class="file">.o</span> is made automatically from <var>n</var><span class="file">.p</span>
with the command <span class="samp">$(PC) -c $(PFLAGS)</span>.

     <br><dt>Compiling Fortran and Ratfor programs<dd><a name="index-Fortran_002c-rule-to-compile-784"></a><a name="index-Ratfor_002c-rule-to-compile-785"></a><a name="index-f77-786"></a><a name="index-_002ef-787"></a><a name="index-_002er-788"></a><a name="index-_002eF-789"></a><var>n</var><span class="file">.o</span> is made automatically from <var>n</var><span class="file">.r</span>,
<var>n</var><span class="file">.F</span> or <var>n</var><span class="file">.f</span> by running the
Fortran compiler.  The precise command used is as follows:

          <dl>
<dt><span class="samp">.f</span><dd><span class="samp">$(FC) -c $(FFLAGS)</span>. 
<br><dt><span class="samp">.F</span><dd><span class="samp">$(FC) -c $(FFLAGS) $(CPPFLAGS)</span>. 
<br><dt><span class="samp">.r</span><dd><span class="samp">$(FC) -c $(FFLAGS) $(RFLAGS)</span>. 
</dl>

     <br><dt>Preprocessing Fortran and Ratfor programs<dd><var>n</var><span class="file">.f</span> is made automatically from <var>n</var><span class="file">.r</span> or
<var>n</var><span class="file">.F</span>.  This rule runs just the preprocessor to convert a
Ratfor or preprocessable Fortran program into a strict Fortran
program.  The precise command used is as follows:

          <dl>
<dt><span class="samp">.F</span><dd><span class="samp">$(FC) -F $(CPPFLAGS) $(FFLAGS)</span>. 
<br><dt><span class="samp">.r</span><dd><span class="samp">$(FC) -F $(FFLAGS) $(RFLAGS)</span>. 
</dl>

     <br><dt>Compiling Modula-2 programs<dd><a name="index-Modula_002d2_002c-rule-to-compile-790"></a><a name="index-m2c-791"></a><a name="index-_002esym-792"></a><a name="index-_002edef-793"></a><a name="index-_002emod-794"></a><var>n</var><span class="file">.sym</span> is made from <var>n</var><span class="file">.def</span> with a command
of the form <span class="samp">$(M2C) $(M2FLAGS) $(DEFFLAGS)</span>.  <var>n</var><span class="file">.o</span>
is made from <var>n</var><span class="file">.mod</span>; the form is:
<span class="samp">$(M2C)&nbsp;$(M2FLAGS)&nbsp;$(MODFLAGS)</span><!-- /@w -->.

     <br><dt>Assembling and preprocessing assembler programs<dd><a name="index-assembly_002c-rule-to-compile-795"></a><a name="index-as-796"></a><a name="index-_002es-797"></a><var>n</var><span class="file">.o</span> is made automatically from <var>n</var><span class="file">.s</span> by
running the assembler, <code>as</code>.  The precise command is
<span class="samp">$(AS) $(ASFLAGS)</span>.

     <p><a name="index-_002eS-798"></a><var>n</var><span class="file">.s</span> is made automatically from <var>n</var><span class="file">.S</span> by
running the C preprocessor, <code>cpp</code>.  The precise command is
<span class="samp">$(CPP)&nbsp;$(CPPFLAGS)</span><!-- /@w -->.

     <br><dt>Linking a single object file<dd><a name="index-linking_002c-predefined-rule-for-799"></a><a name="index-ld-800"></a><a name="index-_002eo-801"></a><var>n</var> is made automatically from <var>n</var><span class="file">.o</span> by running
the linker (usually called <code>ld</code>) via the C compiler.  The precise
command used is <span class="samp">$(CC)&nbsp;$(LDFLAGS)&nbsp;</span><var>n</var><span class="samp">.o&nbsp;$(LOADLIBES)&nbsp;$(LDLIBS)</span><!-- /@w -->.

     <p>This rule does the right thing for a simple program with only one
source file.  It will also do the right thing if there are multiple
object files (presumably coming from various other source files), one
of which has a name matching that of the executable file.  Thus,

     <pre class="example">          x: y.o z.o
     </pre>
     <p class="noindent">when <span class="file">x.c</span>, <span class="file">y.c</span> and <span class="file">z.c</span> all exist will execute:

     <pre class="example">          cc -c x.c -o x.o
          cc -c y.c -o y.o
          cc -c z.c -o z.o
          cc x.o y.o z.o -o x
          rm -f x.o
          rm -f y.o
          rm -f z.o
     </pre>
     <p class="noindent">In more complicated cases, such as when there is no object file whose
name derives from the executable file name, you must write an explicit
command for linking.

     <p>Each kind of file automatically made into <span class="samp">.o</span> object files will
be automatically linked by using the compiler (<span class="samp">$(CC)</span>,
<span class="samp">$(FC)</span> or <span class="samp">$(PC)</span>; the C compiler <span class="samp">$(CC)</span> is used to
assemble <span class="samp">.s</span> files) without the <span class="samp">-c</span> option.  This could be
done by using the <span class="samp">.o</span> object files as intermediates, but it is
faster to do the compiling and linking in one step, so that's how it's
done.

     <br><dt>Yacc for C programs<dd><a name="index-yacc-802"></a><a name="index-Yacc_002c-rule-to-run-803"></a><a name="index-_002ey-804"></a><var>n</var><span class="file">.c</span> is made automatically from <var>n</var><span class="file">.y</span> by
running Yacc with the command <span class="samp">$(YACC) $(YFLAGS)</span>.

     <br><dt>Lex for C programs<dd><a name="index-lex-805"></a><a name="index-Lex_002c-rule-to-run-806"></a><a name="index-_002el-807"></a><var>n</var><span class="file">.c</span> is made automatically from <var>n</var><span class="file">.l</span> by
running Lex.  The actual command is <span class="samp">$(LEX) $(LFLAGS)</span>.

     <br><dt>Lex for Ratfor programs<dd><var>n</var><span class="file">.r</span> is made automatically from <var>n</var><span class="file">.l</span> by
running Lex.  The actual command is <span class="samp">$(LEX) $(LFLAGS)</span>.

     <p>The convention of using the same suffix <span class="samp">.l</span> for all Lex files
regardless of whether they produce C code or Ratfor code makes it
impossible for <code>make</code> to determine automatically which of the two
languages you are using in any particular case.  If <code>make</code> is
called upon to remake an object file from a <span class="samp">.l</span> file, it must
guess which compiler to use.  It will guess the C compiler, because
that is more common.  If you are using Ratfor, make sure <code>make</code>
knows this by mentioning <var>n</var><span class="file">.r</span> in the makefile.  Or, if you
are using Ratfor exclusively, with no C files, remove <span class="samp">.c</span> from
the list of implicit rule suffixes with:

     <pre class="example">          .SUFFIXES:
          .SUFFIXES: .o .r .f .l ...
     </pre>
     <br><dt>Making Lint Libraries from C, Yacc, or Lex programs<dd><a name="index-lint-808"></a><a name="index-_0040code_007blint_007d_002c-rule-to-run-809"></a><a name="index-_002eln-810"></a><var>n</var><span class="file">.ln</span> is made from <var>n</var><span class="file">.c</span> by running <code>lint</code>. 
The precise command is <span class="samp">$(LINT)&nbsp;$(LINTFLAGS)&nbsp;$(CPPFLAGS)&nbsp;-i</span><!-- /@w -->. 
The same command is used on the C code produced from
<var>n</var><span class="file">.y</span> or <var>n</var><span class="file">.l</span>.

     <br><dt>TeX and Web<dd><a name="index-_0040TeX_007b_007d_002c-rule-to-run-811"></a><a name="index-Web_002c-rule-to-run-812"></a><a name="index-tex-813"></a><a name="index-cweave-814"></a><a name="index-weave-815"></a><a name="index-tangle-816"></a><a name="index-ctangle-817"></a><a name="index-_002edvi-818"></a><a name="index-_002etex-819"></a><a name="index-_002eweb-820"></a><a name="index-_002ew-821"></a><a name="index-_002ech-822"></a><var>n</var><span class="file">.dvi</span> is made from <var>n</var><span class="file">.tex</span> with the command
<span class="samp">$(TEX)</span>.  <var>n</var><span class="file">.tex</span> is made from <var>n</var><span class="file">.web</span> with
<span class="samp">$(WEAVE)</span>, or from <var>n</var><span class="file">.w</span> (and from <var>n</var><span class="file">.ch</span> if
it exists or can be made) with <span class="samp">$(CWEAVE)</span>.  <var>n</var><span class="file">.p</span> is
made from <var>n</var><span class="file">.web</span> with <span class="samp">$(TANGLE)</span> and <var>n</var><span class="file">.c</span>
is made from <var>n</var><span class="file">.w</span> (and from <var>n</var><span class="file">.ch</span> if it exists
or can be made) with <span class="samp">$(CTANGLE)</span>.

     <br><dt>Texinfo and Info<dd><a name="index-Texinfo_002c-rule-to-format-823"></a><a name="index-Info_002c-rule-to-format-824"></a><a name="index-texi2dvi-825"></a><a name="index-makeinfo-826"></a><a name="index-_002etexinfo-827"></a><a name="index-_002einfo-828"></a><a name="index-_002etexi-829"></a><a name="index-_002etxinfo-830"></a><var>n</var><span class="file">.dvi</span> is made from <var>n</var><span class="file">.texinfo</span>,
<var>n</var><span class="file">.texi</span>, or <var>n</var><span class="file">.txinfo</span>, with the command
<span class="samp">$(TEXI2DVI)&nbsp;$(TEXI2DVI_FLAGS)</span><!-- /@w -->.  <var>n</var><span class="file">.info</span> is made from
<var>n</var><span class="file">.texinfo</span>, <var>n</var><span class="file">.texi</span>, or <var>n</var><span class="file">.txinfo</span>, with
the command <span class="samp">$(MAKEINFO)&nbsp;$(MAKEINFO_FLAGS)</span><!-- /@w -->.

     <br><dt>RCS<dd><a name="index-RCS_002c-rule-to-extract-from-831"></a><a name="index-co-832"></a><a name="index-_002cv-_0040r_007b_0028RCS-file-extension_0029_007d-833"></a>Any file <var>n</var> is extracted if necessary from an RCS file
named either <var>n</var><span class="file">,v</span> or <span class="file">RCS/</span><var>n</var><span class="file">,v</span>.  The precise
command used is <span class="samp">$(CO)&nbsp;$(COFLAGS)</span><!-- /@w -->.  <var>n</var> will not be
extracted from RCS if it already exists, even if the RCS file is
newer.  The rules for RCS are terminal
(see <a href="#Match_002dAnything-Rules">Match-Anything Pattern Rules</a>),
so RCS files cannot be generated from another source; they must
actually exist.

     <br><dt>SCCS<dd><a name="index-SCCS_002c-rule-to-extract-from-834"></a><a name="index-get-835"></a><a name="index-s_002e-_0040r_007b_0028SCCS-file-prefix_0029_007d-836"></a>Any file <var>n</var> is extracted if necessary from an SCCS file
named either <span class="file">s.</span><var>n</var> or <span class="file">SCCS/s.</span><var>n</var>.  The precise
command used is <span class="samp">$(GET)&nbsp;$(GFLAGS)</span><!-- /@w -->.  The rules for SCCS are
terminal (see <a href="#Match_002dAnything-Rules">Match-Anything Pattern Rules</a>),
so SCCS files cannot be generated from another source; they must
actually exist.

     <p><a name="index-_002esh-837"></a>For the benefit of SCCS, a file <var>n</var> is copied from
<var>n</var><span class="file">.sh</span> and made executable (by everyone).  This is for
shell scripts that are checked into SCCS.  Since RCS preserves the
execution permission of a file, you do not need to use this feature
with RCS.

     <p>We recommend that you avoid using of SCCS.  RCS is widely held to be
superior, and is also free.  By choosing free software in place of
comparable (or inferior) proprietary software, you support the free
software movement. 
</dl>

   <p>Usually, you want to change only the variables listed in the table
above, which are documented in the following section.

   <p>However, the commands in built-in implicit rules actually use
variables such as <code>COMPILE.c</code>, <code>LINK.p</code>, and
<code>PREPROCESS.S</code>, whose values contain the commands listed above.

   <p><code>make</code> follows the convention that the rule to compile a
<span class="file">.</span><var>x</var> source file uses the variable <code>COMPILE.</code><var>x</var>. 
Similarly, the rule to produce an executable from a <span class="file">.</span><var>x</var>
file uses <code>LINK.</code><var>x</var>; and the rule to preprocess a
<span class="file">.</span><var>x</var> file uses <code>PREPROCESS.</code><var>x</var>.

   <p><a name="index-OUTPUT_005fOPTION-838"></a>Every rule that produces an object file uses the variable
<code>OUTPUT_OPTION</code>.  <code>make</code> defines this variable either to
contain <span class="samp">-o $@</span>, or to be empty, depending on a compile-time
option.  You need the <span class="samp">-o</span> option to ensure that the output goes
into the right file when the source file is in a different directory,
as when using <code>VPATH</code> (see <a href="#Directory-Search">Directory Search</a>).  However,
compilers on some systems do not accept a <span class="samp">-o</span> switch for object
files.  If you use such a system, and use <code>VPATH</code>, some
compilations will put their output in the wrong place. 
A possible workaround for this problem is to give <code>OUTPUT_OPTION</code>
the value <span class="samp">;&nbsp;mv&nbsp;$*.o&nbsp;$@</span><!-- /@w -->.

<div class="node">
<p><hr>
<a name="Implicit-Variables"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Chained-Rules">Chained Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Catalogue-of-Rules">Catalogue of Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Implicit-Rules">Implicit Rules</a>
<br>
</div>

<h3 class="section">10.3 Variables Used by Implicit Rules</h3>

<p><a name="index-flags-for-compilers-839"></a>
The commands in built-in implicit rules make liberal use of certain
predefined variables.  You can alter the values of these variables in
the makefile, with arguments to <code>make</code>, or in the environment to
alter how the implicit rules work without redefining the rules
themselves.  You can cancel all variables used by implicit rules with
the <span class="samp">-R</span> or <span class="samp">--no-builtin-variables</span> option.

   <p>For example, the command used to compile a C source file actually says
<span class="samp">$(CC) -c $(CFLAGS) $(CPPFLAGS)</span>.  The default values of the variables
used are <span class="samp">cc</span> and nothing, resulting in the command <span class="samp">cc -c</span>.  By
redefining <span class="samp">CC</span> to <span class="samp">ncc</span>, you could cause <span class="samp">ncc</span> to be
used for all C compilations performed by the implicit rule.  By redefining
<span class="samp">CFLAGS</span> to be <span class="samp">-g</span>, you could pass the <span class="samp">-g</span> option to
each compilation.  <em>All</em> implicit rules that do C compilation use
<span class="samp">$(CC)</span> to get the program name for the compiler and <em>all</em>
include <span class="samp">$(CFLAGS)</span> among the arguments given to the compiler.

   <p>The variables used in implicit rules fall into two classes: those that are
names of programs (like <code>CC</code>) and those that contain arguments for the
programs (like <code>CFLAGS</code>).  (The &ldquo;name of a program&rdquo; may also contain
some command arguments, but it must start with an actual executable program
name.)  If a variable value contains more than one argument, separate them
with spaces.

   <p>The following tables describe of some of the more commonly-used predefined
variables.  This list is not exhaustive, and the default values shown here may
not be what are selected by <code>make</code> for your environment.  To see the
complete list of predefined variables for your instance of GNU <code>make</code> you
can run <span class="samp">make -p</span> in a directory with no makefiles.

   <p>Here is a table of some of the more common variables used as names of
programs in built-in rules:
makefiles.

     <dl>
<dt><code>AR</code><dd><a name="index-AR-840"></a>Archive-maintaining program; default <span class="samp">ar</span>. 
<a name="index-ar-841"></a>
<br><dt><code>AS</code><dd><a name="index-AS-842"></a>Program for compiling assembly files; default <span class="samp">as</span>. 
<a name="index-as-843"></a>
<br><dt><code>CC</code><dd><a name="index-CC-844"></a>Program for compiling C programs; default <span class="samp">cc</span>. 
<a name="index-cc-845"></a>
<br><dt><code>CO</code><dd><a name="index-CO-846"></a>Program for checking out files from RCS; default <span class="samp">co</span>. 
<a name="index-cc-847"></a>
<br><dt><code>CXX</code><dd><a name="index-CXX-848"></a>Program for compiling C++ programs; default <span class="samp">g++</span>. 
<a name="index-g_002b_002b-849"></a>
<br><dt><code>CO</code><dd><a name="index-CO-850"></a>Program for extracting a file from RCS; default <span class="samp">co</span>. 
<a name="index-co-851"></a>
<br><dt><code>CPP</code><dd><a name="index-CPP-852"></a>Program for running the C preprocessor, with results to standard output;
default <span class="samp">$(CC) -E</span>.

     <br><dt><code>FC</code><dd><a name="index-FC-853"></a>Program for compiling or preprocessing Fortran and Ratfor programs;
default <span class="samp">f77</span>. 
<a name="index-f77-854"></a>
<br><dt><code>GET</code><dd><a name="index-GET-855"></a>Program for extracting a file from SCCS; default <span class="samp">get</span>. 
<a name="index-get-856"></a>
<br><dt><code>LEX</code><dd><a name="index-LEX-857"></a>Program to use to turn Lex grammars into source code; default <span class="samp">lex</span>. 
<a name="index-lex-858"></a>
<br><dt><code>YACC</code><dd><a name="index-YACC-859"></a>Program to use to turn Yacc grammars into source code; default <span class="samp">yacc</span>. 
<a name="index-yacc-860"></a>
<br><dt><code>LINT</code><dd><a name="index-LINT-861"></a>Program to use to run lint on source code; default <span class="samp">lint</span>. 
<a name="index-lint-862"></a>
<br><dt><code>M2C</code><dd><a name="index-M2C-863"></a>Program to use to compile Modula-2 source code; default <span class="samp">m2c</span>. 
<a name="index-m2c-864"></a>
<br><dt><code>PC</code><dd><a name="index-PC-865"></a>Program for compiling Pascal programs; default <span class="samp">pc</span>. 
<a name="index-pc-866"></a>
<br><dt><code>MAKEINFO</code><dd><a name="index-MAKEINFO-867"></a>Program to convert a Texinfo source file into an Info file; default
<span class="samp">makeinfo</span>. 
<a name="index-makeinfo-868"></a>
<br><dt><code>TEX</code><dd><a name="index-TEX-869"></a>Program to make TeX <span class="sc">dvi</span> files from TeX source;
default <span class="samp">tex</span>. 
<a name="index-tex-870"></a>
<br><dt><code>TEXI2DVI</code><dd><a name="index-TEXI2DVI-871"></a>Program to make TeX <span class="sc">dvi</span> files from Texinfo source;
default <span class="samp">texi2dvi</span>. 
<a name="index-texi2dvi-872"></a>
<br><dt><code>WEAVE</code><dd><a name="index-WEAVE-873"></a>Program to translate Web into TeX; default <span class="samp">weave</span>. 
<a name="index-weave-874"></a>
<br><dt><code>CWEAVE</code><dd><a name="index-CWEAVE-875"></a>Program to translate C Web into TeX; default <span class="samp">cweave</span>. 
<a name="index-cweave-876"></a>
<br><dt><code>TANGLE</code><dd><a name="index-TANGLE-877"></a>Program to translate Web into Pascal; default <span class="samp">tangle</span>. 
<a name="index-tangle-878"></a>
<br><dt><code>CTANGLE</code><dd><a name="index-CTANGLE-879"></a>Program to translate C Web into C; default <span class="samp">ctangle</span>. 
<a name="index-ctangle-880"></a>
<br><dt><code>RM</code><dd><a name="index-RM-881"></a>Command to remove a file; default <span class="samp">rm -f</span>. 
<a name="index-rm-882"></a></dl>

   <p>Here is a table of variables whose values are additional arguments for the
programs above.  The default values for all of these is the empty
string, unless otherwise noted.

     <dl>
<dt><code>ARFLAGS</code><dd><a name="index-ARFLAGS-883"></a>Flags to give the archive-maintaining program; default <span class="samp">rv</span>.

     <br><dt><code>ASFLAGS</code><dd><a name="index-ASFLAGS-884"></a>Extra flags to give to the assembler (when explicitly
invoked on a <span class="samp">.s</span> or <span class="samp">.S</span> file).

     <br><dt><code>CFLAGS</code><dd><a name="index-CFLAGS-885"></a>Extra flags to give to the C compiler.

     <br><dt><code>CXXFLAGS</code><dd><a name="index-CXXFLAGS-886"></a>Extra flags to give to the C++ compiler.

     <br><dt><code>COFLAGS</code><dd><a name="index-COFLAGS-887"></a>Extra flags to give to the RCS <code>co</code> program.

     <br><dt><code>CPPFLAGS</code><dd><a name="index-CPPFLAGS-888"></a>Extra flags to give to the C preprocessor and programs
that use it (the C and Fortran compilers).

     <br><dt><code>FFLAGS</code><dd><a name="index-FFLAGS-889"></a>Extra flags to give to the Fortran compiler.

     <br><dt><code>GFLAGS</code><dd><a name="index-GFLAGS-890"></a>Extra flags to give to the SCCS <code>get</code> program.

     <br><dt><code>LDFLAGS</code><dd><a name="index-LDFLAGS-891"></a>Extra flags to give to compilers when they are supposed to invoke the linker,
<span class="samp">ld</span>.

     <br><dt><code>LFLAGS</code><dd><a name="index-LFLAGS-892"></a>Extra flags to give to Lex.

     <br><dt><code>YFLAGS</code><dd><a name="index-YFLAGS-893"></a>Extra flags to give to Yacc.

     <br><dt><code>PFLAGS</code><dd><a name="index-PFLAGS-894"></a>Extra flags to give to the Pascal compiler.

     <br><dt><code>RFLAGS</code><dd><a name="index-RFLAGS-895"></a>Extra flags to give to the Fortran compiler for Ratfor programs.

     <br><dt><code>LINTFLAGS</code><dd><a name="index-LINTFLAGS-896"></a>Extra flags to give to lint. 
</dl>

<div class="node">
<p><hr>
<a name="Chained-Rules"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Pattern-Rules">Pattern Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Implicit-Variables">Implicit Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Implicit-Rules">Implicit Rules</a>
<br>
</div>

<h3 class="section">10.4 Chains of Implicit Rules</h3>

<p><a name="index-chains-of-rules-897"></a><a name="index-rule_002c-implicit_002c-chains-of-898"></a>Sometimes a file can be made by a sequence of implicit rules.  For example,
a file <var>n</var><span class="file">.o</span> could be made from <var>n</var><span class="file">.y</span> by running
first Yacc and then <code>cc</code>.  Such a sequence is called a <dfn>chain</dfn>.

   <p>If the file <var>n</var><span class="file">.c</span> exists, or is mentioned in the makefile, no
special searching is required: <code>make</code> finds that the object file can
be made by C compilation from <var>n</var><span class="file">.c</span>; later on, when considering
how to make <var>n</var><span class="file">.c</span>, the rule for running Yacc is
used.  Ultimately both <var>n</var><span class="file">.c</span> and <var>n</var><span class="file">.o</span> are
updated.

   <p><a name="index-intermediate-files-899"></a><a name="index-files_002c-intermediate-900"></a>However, even if <var>n</var><span class="file">.c</span> does not exist and is not mentioned,
<code>make</code> knows how to envision it as the missing link between
<var>n</var><span class="file">.o</span> and <var>n</var><span class="file">.y</span>!  In this case, <var>n</var><span class="file">.c</span> is
called an <dfn>intermediate file</dfn>.  Once <code>make</code> has decided to use the
intermediate file, it is entered in the data base as if it had been
mentioned in the makefile, along with the implicit rule that says how to
create it.

   <p>Intermediate files are remade using their rules just like all other
files.  But intermediate files are treated differently in two ways.

   <p>The first difference is what happens if the intermediate file does not
exist.  If an ordinary file <var>b</var> does not exist, and <code>make</code>
considers a target that depends on <var>b</var>, it invariably creates
<var>b</var> and then updates the target from <var>b</var>.  But if <var>b</var> is an
intermediate file, then <code>make</code> can leave well enough alone.  It
won't bother updating <var>b</var>, or the ultimate target, unless some
prerequisite of <var>b</var> is newer than that target or there is some other
reason to update that target.

   <p>The second difference is that if <code>make</code> <em>does</em> create <var>b</var>
in order to update something else, it deletes <var>b</var> later on after it
is no longer needed.  Therefore, an intermediate file which did not
exist before <code>make</code> also does not exist after <code>make</code>. 
<code>make</code> reports the deletion to you by printing a <span class="samp">rm -f</span>
command showing which file it is deleting.

   <p>Ordinarily, a file cannot be intermediate if it is mentioned in the
makefile as a target or prerequisite.  However, you can explicitly mark a
file as intermediate by listing it as a prerequisite of the special target
<code>.INTERMEDIATE</code>.  This takes effect even if the file is mentioned
explicitly in some other way.

   <p><a name="index-intermediate-files_002c-preserving-901"></a><a name="index-preserving-intermediate-files-902"></a><a name="index-secondary-files-903"></a>You can prevent automatic deletion of an intermediate file by marking it
as a <dfn>secondary</dfn> file.  To do this, list it as a prerequisite of the
special target <code>.SECONDARY</code>.  When a file is secondary, <code>make</code>
will not create the file merely because it does not already exist, but
<code>make</code> does not automatically delete the file.  Marking a file as
secondary also marks it as intermediate.

   <p>You can list the target pattern of an implicit rule (such as <span class="samp">%.o</span>)
as a prerequisite of the special target <code>.PRECIOUS</code> to preserve
intermediate files made by implicit rules whose target patterns match
that file's name; see <a href="#Interrupts">Interrupts</a>. 
<a name="index-preserving-with-_0040code_007b_002ePRECIOUS_007d-904"></a><a name="index-_0040code_007b_002ePRECIOUS_007d-intermediate-files-905"></a>
A chain can involve more than two implicit rules.  For example, it is
possible to make a file <span class="file">foo</span> from <span class="file">RCS/foo.y,v</span> by running RCS,
Yacc and <code>cc</code>.  Then both <span class="file">foo.y</span> and <span class="file">foo.c</span> are
intermediate files that are deleted at the end.

   <p>No single implicit rule can appear more than once in a chain.  This means
that <code>make</code> will not even consider such a ridiculous thing as making
<span class="file">foo</span> from <span class="file">foo.o.o</span> by running the linker twice.  This
constraint has the added benefit of preventing any infinite loop in the
search for an implicit rule chain.

   <p>There are some special implicit rules to optimize certain cases that would
otherwise be handled by rule chains.  For example, making <span class="file">foo</span> from
<span class="file">foo.c</span> could be handled by compiling and linking with separate
chained rules, using <span class="file">foo.o</span> as an intermediate file.  But what
actually happens is that a special rule for this case does the compilation
and linking with a single <code>cc</code> command.  The optimized rule is used in
preference to the step-by-step chain because it comes earlier in the
ordering of rules.

<div class="node">
<p><hr>
<a name="Pattern-Rules"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Last-Resort">Last Resort</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Chained-Rules">Chained Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Implicit-Rules">Implicit Rules</a>
<br>
</div>

<h3 class="section">10.5 Defining and Redefining Pattern Rules</h3>

<p>You define an implicit rule by writing a <dfn>pattern rule</dfn>.  A pattern
rule looks like an ordinary rule, except that its target contains the
character <span class="samp">%</span> (exactly one of them).  The target is considered a
pattern for matching file names; the <span class="samp">%</span> can match any nonempty
substring, while other characters match only themselves.  The prerequisites
likewise use <span class="samp">%</span> to show how their names relate to the target name.

   <p>Thus, a pattern rule <span class="samp">%.o : %.c</span> says how to make any file
<var>stem</var><span class="file">.o</span> from another file <var>stem</var><span class="file">.c</span>.

   <p>Note that expansion using <span class="samp">%</span> in pattern rules occurs
<strong>after</strong> any variable or function expansions, which take place
when the makefile is read.  See <a href="#Using-Variables">How to Use Variables</a>, and <a href="#Functions">Functions for Transforming Text</a>.

<ul class="menu">
<li><a accesskey="1" href="#Pattern-Intro">Pattern Intro</a>:                An introduction to pattern rules. 
<li><a accesskey="2" href="#Pattern-Examples">Pattern Examples</a>:             Examples of pattern rules. 
<li><a accesskey="3" href="#Automatic-Variables">Automatic Variables</a>:          How to use automatic variables in the
                                  commands of implicit rules. 
<li><a accesskey="4" href="#Pattern-Match">Pattern Match</a>:                How patterns match. 
<li><a accesskey="5" href="#Match_002dAnything-Rules">Match-Anything Rules</a>:         Precautions you should take prior to
                                  defining rules that can match any
                                  target file whatever. 
<li><a accesskey="6" href="#Canceling-Rules">Canceling Rules</a>:              How to override or cancel built-in rules. 
</ul>

<div class="node">
<p><hr>
<a name="Pattern-Intro"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Pattern-Examples">Pattern Examples</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Pattern-Rules">Pattern Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Rules">Pattern Rules</a>
<br>
</div>

<h4 class="subsection">10.5.1 Introduction to Pattern Rules</h4>

<p><a name="index-pattern-rule-906"></a><a name="index-rule_002c-pattern-907"></a>
A pattern rule contains the character <span class="samp">%</span> (exactly one of them)
in the target; otherwise, it looks exactly like an ordinary rule.  The
target is a pattern for matching file names; the <span class="samp">%</span> matches any
nonempty substring, while other characters match only themselves. 
<a name="index-target-pattern_002c-implicit-908"></a><a name="index-_0040code_007b_0025_007d_002c-in-pattern-rules-909"></a>
For example, <span class="samp">%.c</span> as a pattern matches any file name that ends in
<span class="samp">.c</span>.  <span class="samp">s.%.c</span> as a pattern matches any file name that starts
with <span class="samp">s.</span>, ends in <span class="samp">.c</span> and is at least five characters long. 
(There must be at least one character to match the <span class="samp">%</span>.)  The substring
that the <span class="samp">%</span> matches is called the <dfn>stem</dfn>.

   <p><span class="samp">%</span> in a prerequisite of a pattern rule stands for the same stem
that was matched by the <span class="samp">%</span> in the target.  In order for the
pattern rule to apply, its target pattern must match the file name
under consideration and all of its prerequisites (after pattern
substitution) must name files that exist or can be made.  These files
become prerequisites of the target. 
<a name="index-prerequisite-pattern_002c-implicit-910"></a>
Thus, a rule of the form

<pre class="example">     %.o : %.c ; <var>command</var>...
</pre>
   <p class="noindent">specifies how to make a file <var>n</var><span class="file">.o</span>, with another file
<var>n</var><span class="file">.c</span> as its prerequisite, provided that <var>n</var><span class="file">.c</span>
exists or can be made.

   <p>There may also be prerequisites that do not use <span class="samp">%</span>; such a prerequisite
attaches to every file made by this pattern rule.  These unvarying
prerequisites are useful occasionally.

   <p>A pattern rule need not have any prerequisites that contain <span class="samp">%</span>, or
in fact any prerequisites at all.  Such a rule is effectively a general
wildcard.  It provides a way to make any file that matches the target
pattern.  See <a href="#Last-Resort">Last Resort</a>.

<!-- !!! The end of of this paragraph should be rewritten.  -bob -->
<p>Pattern rules may have more than one target.  Unlike normal rules, this
does not act as many different rules with the same prerequisites and
commands.  If a pattern rule has multiple targets, <code>make</code> knows that
the rule's commands are responsible for making all of the targets.  The
commands are executed only once to make all the targets.  When searching
for a pattern rule to match a target, the target patterns of a rule other
than the one that matches the target in need of a rule are incidental:
<code>make</code> worries only about giving commands and prerequisites to the file
presently in question.  However, when this file's commands are run, the
other targets are marked as having been updated themselves. 
<a name="index-multiple-targets_002c-in-pattern-rule-911"></a><a name="index-target_002c-multiple-in-pattern-rule-912"></a>
The order in which pattern rules appear in the makefile is important
since this is the order in which they are considered. 
Of equally applicable
rules, only the first one found is used.  The rules you write take precedence
over those that are built in.  Note however, that a rule whose
prerequisites actually exist or are mentioned always takes priority over a
rule with prerequisites that must be made by chaining other implicit rules. 
<a name="index-pattern-rules_002c-order-of-913"></a><a name="index-order-of-pattern-rules-914"></a>
<div class="node">
<p><hr>
<a name="Pattern-Examples"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Automatic-Variables">Automatic Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Pattern-Intro">Pattern Intro</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Rules">Pattern Rules</a>
<br>
</div>

<h4 class="subsection">10.5.2 Pattern Rule Examples</h4>

<p>Here are some examples of pattern rules actually predefined in
<code>make</code>.  First, the rule that compiles <span class="samp">.c</span> files into <span class="samp">.o</span>
files:

<pre class="example">     %.o : %.c
             $(CC) -c $(CFLAGS) $(CPPFLAGS) $&lt; -o $@
</pre>
   <p class="noindent">defines a rule that can make any file <var>x</var><span class="file">.o</span> from
<var>x</var><span class="file">.c</span>.  The command uses the automatic variables <span class="samp">$@</span> and
<span class="samp">$&lt;</span> to substitute the names of the target file and the source file
in each case where the rule applies (see <a href="#Automatic-Variables">Automatic Variables</a>).

   <p>Here is a second built-in rule:

<pre class="example">     % :: RCS/%,v
             $(CO) $(COFLAGS) $&lt;
</pre>
   <p class="noindent">defines a rule that can make any file <var>x</var> whatsoever from a
corresponding file <var>x</var><span class="file">,v</span> in the subdirectory <span class="file">RCS</span>.  Since
the target is <span class="samp">%</span>, this rule will apply to any file whatever, provided
the appropriate prerequisite file exists.  The double colon makes the rule
<dfn>terminal</dfn>, which means that its prerequisite may not be an intermediate
file (see <a href="#Match_002dAnything-Rules">Match-Anything Pattern Rules</a>).

   <p>This pattern rule has two targets:

<pre class="example">     %.tab.c %.tab.h: %.y
             bison -d $&lt;
</pre>
   <p class="noindent"><!-- The following paragraph is rewritten to avoid overfull hboxes -->
This tells <code>make</code> that the command <span class="samp">bison -d </span><var>x</var><span class="samp">.y</span> will
make both <var>x</var><span class="file">.tab.c</span> and <var>x</var><span class="file">.tab.h</span>.  If the file
<span class="file">foo</span> depends on the files <span class="file">parse.tab.o</span> and <span class="file">scan.o</span>
and the file <span class="file">scan.o</span> depends on the file <span class="file">parse.tab.h</span>,
when <span class="file">parse.y</span> is changed, the command <span class="samp">bison -d parse.y</span>
will be executed only once, and the prerequisites of both
<span class="file">parse.tab.o</span> and <span class="file">scan.o</span> will be satisfied.  (Presumably
the file <span class="file">parse.tab.o</span> will be recompiled from <span class="file">parse.tab.c</span>
and the file <span class="file">scan.o</span> from <span class="file">scan.c</span>, while <span class="file">foo</span> is
linked from <span class="file">parse.tab.o</span>, <span class="file">scan.o</span>, and its other
prerequisites, and it will execute happily ever after.)

<div class="node">
<p><hr>
<a name="Automatic-Variables"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Pattern-Match">Pattern Match</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Pattern-Examples">Pattern Examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Rules">Pattern Rules</a>
<br>
</div>

<h4 class="subsection">10.5.3 Automatic Variables</h4>

<p><a name="index-automatic-variables-915"></a><a name="index-variables_002c-automatic-916"></a><a name="index-variables_002c-and-implicit-rule-917"></a>
Suppose you are writing a pattern rule to compile a <span class="samp">.c</span> file into a
<span class="samp">.o</span> file: how do you write the <span class="samp">cc</span> command so that it operates
on the right source file name?  You cannot write the name in the command,
because the name is different each time the implicit rule is applied.

   <p>What you do is use a special feature of <code>make</code>, the <dfn>automatic
variables</dfn>.  These variables have values computed afresh for each rule that
is executed, based on the target and prerequisites of the rule.  In this
example, you would use <span class="samp">$@</span> for the object file name and <span class="samp">$&lt;</span>
for the source file name.

   <p><a name="index-automatic-variables-in-prerequisites-918"></a><a name="index-prerequisites_002c-and-automatic-variables-919"></a>It's very important that you recognize the limited scope in which
automatic variable values are available: they only have values within
the command script.  In particular, you cannot use them anywhere
within the target list of a rule; they have no value there and will
expand to the empty string.  Also, they cannot be accessed directly
within the prerequisite list of a rule.  A common mistake is
attempting to use <code>$@</code> within the prerequisites list; this will
not work.  However, there is a special feature of GNU <code>make</code>,
secondary expansion (see <a href="#Secondary-Expansion">Secondary Expansion</a>), which will allow
automatic variable values to be used in prerequisite lists.

   <p>Here is a table of automatic variables:

     
<a name="index-_0024_0040_0040-920"></a>
<a name="index-_0040_0040-_0040r_007b_0028automatic-variable_0029_007d-921"></a>
<dl><dt><code>$@</code><dd>The file name of the target of the rule.  If the target is an archive
member, then <span class="samp">$@</span> is the name of the archive file.  In a pattern
rule that has multiple targets (see <a href="#Pattern-Intro">Introduction to Pattern Rules</a>), <span class="samp">$@</span> is the name of whichever target caused the
rule's commands to be run.

     <p><a name="index-_0024_0025-922"></a><a name="index-_0025-_0040r_007b_0028automatic-variable_0029_007d-923"></a><br><dt><code>$%</code><dd>The target member name, when the target is an archive member. 
See <a href="#Archives">Archives</a>.  For example, if the target is <span class="file">foo.a(bar.o)</span> then
<span class="samp">$%</span> is <span class="file">bar.o</span> and <span class="samp">$@</span> is <span class="file">foo.a</span>.  <span class="samp">$%</span> is
empty when the target is not an archive member.

     <p><a name="index-_0024_003c-924"></a><a name="index-_003c-_0040r_007b_0028automatic-variable_0029_007d-925"></a><br><dt><code>$&lt;</code><dd>The name of the first prerequisite.  If the target got its commands from
an implicit rule, this will be the first prerequisite added by the
implicit rule (see <a href="#Implicit-Rules">Implicit Rules</a>).

     <p><a name="index-_0024_003f-926"></a><a name="index-_003f-_0040r_007b_0028automatic-variable_0029_007d-927"></a><br><dt><code>$?</code><dd>The names of all the prerequisites that are newer than the target, with
spaces between them.  For prerequisites which are archive members, only
the member named is used (see <a href="#Archives">Archives</a>). 
<a name="index-prerequisites_002c-list-of-changed-928"></a><a name="index-list-of-changed-prerequisites-929"></a>
<a name="index-_0024_005e-930"></a><a name="index-_005e-_0040r_007b_0028automatic-variable_0029_007d-931"></a><br><dt><code>$^</code><dd>The names of all the prerequisites, with spaces between them.  For
prerequisites which are archive members, only the member named is used
(see <a href="#Archives">Archives</a>).  A target has only one prerequisite on each other file
it depends on, no matter how many times each file is listed as a
prerequisite.  So if you list a prerequisite more than once for a target,
the value of <code>$^</code> contains just one copy of the name.  This list
does <strong>not</strong> contain any of the order-only prerequisites; for those
see the <span class="samp">$|</span> variable, below. 
<a name="index-prerequisites_002c-list-of-all-932"></a><a name="index-list-of-all-prerequisites-933"></a>
<a name="index-_0024_002b-934"></a><a name="index-_002b-_0040r_007b_0028automatic-variable_0029_007d-935"></a><br><dt><code>$+</code><dd>This is like <span class="samp">$^</span>, but prerequisites listed more than once are
duplicated in the order they were listed in the makefile.  This is
primarily useful for use in linking commands where it is meaningful to
repeat library file names in a particular order.

     <p><a name="index-_0024_007c-936"></a><a name="index-_007c-_0040r_007b_0028automatic-variable_0029_007d-937"></a><br><dt><code>$|</code><dd>The names of all the order-only prerequisites, with spaces between
them.

     <p><a name="index-_0024_002a-938"></a><a name="index-_002a-_0040r_007b_0028automatic-variable_0029_007d-939"></a><br><dt><code>$*</code><dd>The stem with which an implicit rule matches (see <a href="#Pattern-Match">How Patterns Match</a>).  If the target is <span class="file">dir/a.foo.b</span> and the target
pattern is <span class="file">a.%.b</span> then the stem is <span class="file">dir/foo</span>.  The stem is
useful for constructing names of related files. 
<a name="index-stem_002c-variable-for-940"></a>
In a static pattern rule, the stem is part of the file name that matched
the <span class="samp">%</span> in the target pattern.

     <p>In an explicit rule, there is no stem; so <span class="samp">$*</span> cannot be determined
in that way.  Instead, if the target name ends with a recognized suffix
(see <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>), <span class="samp">$*</span> is set to
the target name minus the suffix.  For example, if the target name is
<span class="samp">foo.c</span>, then <span class="samp">$*</span> is set to <span class="samp">foo</span>, since <span class="samp">.c</span> is a
suffix.  GNU <code>make</code> does this bizarre thing only for compatibility
with other implementations of <code>make</code>.  You should generally avoid
using <span class="samp">$*</span> except in implicit rules or static pattern rules.

     <p>If the target name in an explicit rule does not end with a recognized
suffix, <span class="samp">$*</span> is set to the empty string for that rule. 
</dl>

   <p><span class="samp">$?</span> is useful even in explicit rules when you wish to operate on only
the prerequisites that have changed.  For example, suppose that an archive
named <span class="file">lib</span> is supposed to contain copies of several object files. 
This rule copies just the changed object files into the archive:

<pre class="example">     lib: foo.o bar.o lose.o win.o
             ar r lib $?
</pre>
   <p>Of the variables listed above, four have values that are single file
names, and three have values that are lists of file names.  These seven
have variants that get just the file's directory name or just the file
name within the directory.  The variant variables' names are formed by
appending <span class="samp">D</span> or <span class="samp">F</span>, respectively.  These variants are
semi-obsolete in GNU <code>make</code> since the functions <code>dir</code> and
<code>notdir</code> can be used to get a similar effect (see <a href="#File-Name-Functions">Functions for File Names</a>).  Note, however, that the
<span class="samp">D</span> variants all omit the trailing slash which always appears in
the output of the <code>dir</code> function.  Here is a table of the variants:

     
<a name="index-_0024_0028_0040_0040D_0029-941"></a>
<a name="index-_0040_0040D-_0040r_007b_0028automatic-variable_0029_007d-942"></a>
<dl><dt><span class="samp">$(@D)</span><dd>The directory part of the file name of the target, with the trailing
slash removed.  If the value of <span class="samp">$@</span> is <span class="file">dir/foo.o</span> then
<span class="samp">$(@D)</span> is <span class="file">dir</span>.  This value is <span class="file">.</span> if <span class="samp">$@</span> does
not contain a slash.

     <p><a name="index-_0024_0028_0040_0040F_0029-943"></a><a name="index-_0040_0040F-_0040r_007b_0028automatic-variable_0029_007d-944"></a><br><dt><span class="samp">$(@F)</span><dd>The file-within-directory part of the file name of the target.  If the
value of <span class="samp">$@</span> is <span class="file">dir/foo.o</span> then <span class="samp">$(@F)</span> is
<span class="file">foo.o</span>.  <span class="samp">$(@F)</span> is equivalent to <span class="samp">$(notdir $@)</span>.

     <p><a name="index-_0024_0028_002aD_0029-945"></a><a name="index-_002aD-_0040r_007b_0028automatic-variable_0029_007d-946"></a><br><dt><span class="samp">$(*D)</span><dd><a name="index-_0024_0028_002aF_0029-947"></a><a name="index-_002aF-_0040r_007b_0028automatic-variable_0029_007d-948"></a><dt><span class="samp">$(*F)</span><dd>The directory part and the file-within-directory
part of the stem; <span class="file">dir</span> and <span class="file">foo</span> in this example.

     <p><a name="index-_0024_0028_0025D_0029-949"></a><a name="index-_0025D-_0040r_007b_0028automatic-variable_0029_007d-950"></a><br><dt><span class="samp">$(%D)</span><dd><a name="index-_0024_0028_0025F_0029-951"></a><a name="index-_0025F-_0040r_007b_0028automatic-variable_0029_007d-952"></a><dt><span class="samp">$(%F)</span><dd>The directory part and the file-within-directory part of the target
archive member name.  This makes sense only for archive member targets
of the form <var>archive</var><span class="file">(</span><var>member</var><span class="file">)</span> and is useful only when
<var>member</var> may contain a directory name.  (See <a href="#Archive-Members">Archive Members as Targets</a>.)

     <p><a name="index-_0024_0028_003cD_0029-953"></a><a name="index-_003cD-_0040r_007b_0028automatic-variable_0029_007d-954"></a><br><dt><span class="samp">$(&lt;D)</span><dd><a name="index-_0024_0028_003cF_0029-955"></a><a name="index-_003cF-_0040r_007b_0028automatic-variable_0029_007d-956"></a><dt><span class="samp">$(&lt;F)</span><dd>The directory part and the file-within-directory
part of the first prerequisite.

     <p><a name="index-_0024_0028_005eD_0029-957"></a><a name="index-_005eD-_0040r_007b_0028automatic-variable_0029_007d-958"></a><br><dt><span class="samp">$(^D)</span><dd><a name="index-_0024_0028_005eF_0029-959"></a><a name="index-_005eF-_0040r_007b_0028automatic-variable_0029_007d-960"></a><dt><span class="samp">$(^F)</span><dd>Lists of the directory parts and the file-within-directory
parts of all prerequisites.

     <p><a name="index-_0024_0028_002bD_0029-961"></a><a name="index-_002bD-_0040r_007b_0028automatic-variable_0029_007d-962"></a><br><dt><span class="samp">$(+D)</span><dd><a name="index-_0024_0028_002bF_0029-963"></a><a name="index-_002bF-_0040r_007b_0028automatic-variable_0029_007d-964"></a><dt><span class="samp">$(+F)</span><dd>Lists of the directory parts and the file-within-directory
parts of all prerequisites, including multiple instances of duplicated
prerequisites.

     <p><a name="index-_0024_0028_003fD_0029-965"></a><a name="index-_003fD-_0040r_007b_0028automatic-variable_0029_007d-966"></a><br><dt><span class="samp">$(?D)</span><dd><a name="index-_0024_0028_003fF_0029-967"></a><a name="index-_003fF-_0040r_007b_0028automatic-variable_0029_007d-968"></a><dt><span class="samp">$(?F)</span><dd>Lists of the directory parts and the file-within-directory parts of
all prerequisites that are newer than the target. 
</dl>

   <p>Note that we use a special stylistic convention when we talk about these
automatic variables; we write &ldquo;the value of <span class="samp">$&lt;</span>&rdquo;, rather than
&ldquo;the&nbsp;variable&nbsp;<code>&lt;</code>&rdquo;<!-- /@w --> as we would write for ordinary variables
such as <code>objects</code> and <code>CFLAGS</code>.  We think this convention
looks more natural in this special case.  Please do not assume it has a
deep significance; <span class="samp">$&lt;</span> refers to the variable named <code>&lt;</code> just
as <span class="samp">$(CFLAGS)</span> refers to the variable named <code>CFLAGS</code>. 
You could just as well use <span class="samp">$(&lt;)</span> in place of <span class="samp">$&lt;</span>.

<div class="node">
<p><hr>
<a name="Pattern-Match"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Match_002dAnything-Rules">Match-Anything Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Automatic-Variables">Automatic Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Rules">Pattern Rules</a>
<br>
</div>

<h4 class="subsection">10.5.4 How Patterns Match</h4>

<p><a name="index-stem-969"></a>A target pattern is composed of a <span class="samp">%</span> between a prefix and a suffix,
either or both of which may be empty.  The pattern matches a file name only
if the file name starts with the prefix and ends with the suffix, without
overlap.  The text between the prefix and the suffix is called the
<dfn>stem</dfn>.  Thus, when the pattern <span class="samp">%.o</span> matches the file name
<span class="file">test.o</span>, the stem is <span class="samp">test</span>.  The pattern rule prerequisites are
turned into actual file names by substituting the stem for the character
<span class="samp">%</span>.  Thus, if in the same example one of the prerequisites is written
as <span class="samp">%.c</span>, it expands to <span class="samp">test.c</span>.

   <p>When the target pattern does not contain a slash (and it usually does
not), directory names in the file names are removed from the file name
before it is compared with the target prefix and suffix.  After the
comparison of the file name to the target pattern, the directory
names, along with the slash that ends them, are added on to the
prerequisite file names generated from the pattern rule's prerequisite
patterns and the file name.  The directories are ignored only for the
purpose of finding an implicit rule to use, not in the application of
that rule.  Thus, <span class="samp">e%t</span> matches the file name <span class="file">src/eat</span>,
with <span class="samp">src/a</span> as the stem.  When prerequisites are turned into file
names, the directories from the stem are added at the front, while the
rest of the stem is substituted for the <span class="samp">%</span>.  The stem
<span class="samp">src/a</span> with a prerequisite pattern <span class="samp">c%r</span> gives the file name
<span class="file">src/car</span>.

<div class="node">
<p><hr>
<a name="Match_002dAnything-Rules"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Canceling-Rules">Canceling Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Pattern-Match">Pattern Match</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Rules">Pattern Rules</a>
<br>
</div>

<h4 class="subsection">10.5.5 Match-Anything Pattern Rules</h4>

<p><a name="index-match_002danything-rule-970"></a><a name="index-terminal-rule-971"></a>When a pattern rule's target is just <span class="samp">%</span>, it matches any file name
whatever.  We call these rules <dfn>match-anything</dfn> rules.  They are very
useful, but it can take a lot of time for <code>make</code> to think about them,
because it must consider every such rule for each file name listed either
as a target or as a prerequisite.

   <p>Suppose the makefile mentions <span class="file">foo.c</span>.  For this target, <code>make</code>
would have to consider making it by linking an object file <span class="file">foo.c.o</span>,
or by C compilation-and-linking in one step from <span class="file">foo.c.c</span>, or by
Pascal compilation-and-linking from <span class="file">foo.c.p</span>, and many other
possibilities.

   <p>We know these possibilities are ridiculous since <span class="file">foo.c</span> is a C source
file, not an executable.  If <code>make</code> did consider these possibilities,
it would ultimately reject them, because files such as <span class="file">foo.c.o</span> and
<span class="file">foo.c.p</span> would not exist.  But these possibilities are so
numerous that <code>make</code> would run very slowly if it had to consider
them.

   <p>To gain speed, we have put various constraints on the way <code>make</code>
considers match-anything rules.  There are two different constraints that
can be applied, and each time you define a match-anything rule you must
choose one or the other for that rule.

   <p>One choice is to mark the match-anything rule as <dfn>terminal</dfn> by defining
it with a double colon.  When a rule is terminal, it does not apply unless
its prerequisites actually exist.  Prerequisites that could be made with
other implicit rules are not good enough.  In other words, no further
chaining is allowed beyond a terminal rule.

   <p>For example, the built-in implicit rules for extracting sources from RCS
and SCCS files are terminal; as a result, if the file <span class="file">foo.c,v</span> does
not exist, <code>make</code> will not even consider trying to make it as an
intermediate file from <span class="file">foo.c,v.o</span> or from <span class="file">RCS/SCCS/s.foo.c,v</span>. 
RCS and SCCS files are generally ultimate source files, which should not be
remade from any other files; therefore, <code>make</code> can save time by not
looking for ways to remake them.

   <p>If you do not mark the match-anything rule as terminal, then it is
nonterminal.  A nonterminal match-anything rule cannot apply to a file name
that indicates a specific type of data.  A file name indicates a specific
type of data if some non-match-anything implicit rule target matches it.

   <p>For example, the file name <span class="file">foo.c</span> matches the target for the pattern
rule <span class="samp">%.c : %.y</span> (the rule to run Yacc).  Regardless of whether this
rule is actually applicable (which happens only if there is a file
<span class="file">foo.y</span>), the fact that its target matches is enough to prevent
consideration of any nonterminal match-anything rules for the file
<span class="file">foo.c</span>.  Thus, <code>make</code> will not even consider trying to make
<span class="file">foo.c</span> as an executable file from <span class="file">foo.c.o</span>, <span class="file">foo.c.c</span>,
<span class="file">foo.c.p</span>, etc.

   <p>The motivation for this constraint is that nonterminal match-anything
rules are used for making files containing specific types of data (such as
executable files) and a file name with a recognized suffix indicates some
other specific type of data (such as a C source file).

   <p>Special built-in dummy pattern rules are provided solely to recognize
certain file names so that nonterminal match-anything rules will not be
considered.  These dummy rules have no prerequisites and no commands, and
they are ignored for all other purposes.  For example, the built-in
implicit rule

<pre class="example">     %.p :
</pre>
   <p class="noindent">exists to make sure that Pascal source files such as <span class="file">foo.p</span> match a
specific target pattern and thereby prevent time from being wasted looking
for <span class="file">foo.p.o</span> or <span class="file">foo.p.c</span>.

   <p>Dummy pattern rules such as the one for <span class="samp">%.p</span> are made for every
suffix listed as valid for use in suffix rules (see <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>).

<div class="node">
<p><hr>
<a name="Canceling-Rules"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Match_002dAnything-Rules">Match-Anything Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Rules">Pattern Rules</a>
<br>
</div>

<h4 class="subsection">10.5.6 Canceling Implicit Rules</h4>

<p>You can override a built-in implicit rule (or one you have defined
yourself) by defining a new pattern rule with the same target and
prerequisites, but different commands.  When the new rule is defined, the
built-in one is replaced.  The new rule's position in the sequence of
implicit rules is determined by where you write the new rule.

   <p>You can cancel a built-in implicit rule by defining a pattern rule with the
same target and prerequisites, but no commands.  For example, the following
would cancel the rule that runs the assembler:

<pre class="example">     %.o : %.s
</pre>
   <div class="node">
<p><hr>
<a name="Last-Resort"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Suffix-Rules">Suffix Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Pattern-Rules">Pattern Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Implicit-Rules">Implicit Rules</a>
<br>
</div>

<h3 class="section">10.6 Defining Last-Resort Default Rules</h3>

<p><a name="index-last_002dresort-default-rules-972"></a><a name="index-default-rules_002c-last_002dresort-973"></a>
You can define a last-resort implicit rule by writing a terminal
match-anything pattern rule with no prerequisites (see <a href="#Match_002dAnything-Rules">Match-Anything Rules</a>).  This is just like any other pattern rule; the only thing
special about it is that it will match any target.  So such a rule's
commands are used for all targets and prerequisites that have no commands
of their own and for which no other implicit rule applies.

   <p>For example, when testing a makefile, you might not care if the source
files contain real data, only that they exist.  Then you might do this:

<pre class="example">     %::
             touch $@
</pre>
   <p class="noindent">to cause all the source files needed (as prerequisites) to be created
automatically.

   <p><a name="index-_002eDEFAULT-974"></a>You can instead define commands to be used for targets for which there
are no rules at all, even ones which don't specify commands.  You do
this by writing a rule for the target <code>.DEFAULT</code>.  Such a rule's
commands are used for all prerequisites which do not appear as targets in
any explicit rule, and for which no implicit rule applies.  Naturally,
there is no <code>.DEFAULT</code> rule unless you write one.

   <p>If you use <code>.DEFAULT</code> with no commands or prerequisites:

<pre class="example">     .DEFAULT:
</pre>
   <p class="noindent">the commands previously stored for <code>.DEFAULT</code> are cleared. 
Then <code>make</code> acts as if you had never defined <code>.DEFAULT</code> at all.

   <p>If you do not want a target to get the commands from a match-anything
pattern rule or <code>.DEFAULT</code>, but you also do not want any commands
to be run for the target, you can give it empty commands (see <a href="#Empty-Commands">Defining Empty Commands</a>).

   <p>You can use a last-resort rule to override part of another makefile. 
See <a href="#Overriding-Makefiles">Overriding Part of Another Makefile</a>.

<div class="node">
<p><hr>
<a name="Suffix-Rules"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Implicit-Rule-Search">Implicit Rule Search</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Last-Resort">Last Resort</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Implicit-Rules">Implicit Rules</a>
<br>
</div>

<h3 class="section">10.7 Old-Fashioned Suffix Rules</h3>

<p><a name="index-old_002dfashioned-suffix-rules-975"></a><a name="index-suffix-rule-976"></a>
<dfn>Suffix rules</dfn> are the old-fashioned way of defining implicit rules for
<code>make</code>.  Suffix rules are obsolete because pattern rules are more
general and clearer.  They are supported in GNU <code>make</code> for
compatibility with old makefiles.  They come in two kinds:
<dfn>double-suffix</dfn> and <dfn>single-suffix</dfn>.

   <p>A double-suffix rule is defined by a pair of suffixes: the target suffix
and the source suffix.  It matches any file whose name ends with the
target suffix.  The corresponding implicit prerequisite is made by
replacing the target suffix with the source suffix in the file name.  A
two-suffix rule whose target and source suffixes are <span class="samp">.o</span> and
<span class="samp">.c</span> is equivalent to the pattern rule <span class="samp">%.o : %.c</span>.

   <p>A single-suffix rule is defined by a single suffix, which is the source
suffix.  It matches any file name, and the corresponding implicit
prerequisite name is made by appending the source suffix.  A single-suffix
rule whose source suffix is <span class="samp">.c</span> is equivalent to the pattern rule
<span class="samp">% : %.c</span>.

   <p>Suffix rule definitions are recognized by comparing each rule's target
against a defined list of known suffixes.  When <code>make</code> sees a rule
whose target is a known suffix, this rule is considered a single-suffix
rule.  When <code>make</code> sees a rule whose target is two known suffixes
concatenated, this rule is taken as a double-suffix rule.

   <p>For example, <span class="samp">.c</span> and <span class="samp">.o</span> are both on the default list of
known suffixes.  Therefore, if you define a rule whose target is
<span class="samp">.c.o</span>, <code>make</code> takes it to be a double-suffix rule with source
suffix <span class="samp">.c</span> and target suffix <span class="samp">.o</span>.  Here is the old-fashioned
way to define the rule for compiling a C source file:

<pre class="example">     .c.o:
             $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt;
</pre>
   <p>Suffix rules cannot have any prerequisites of their own.  If they have any,
they are treated as normal files with funny names, not as suffix rules. 
Thus, the rule:

<pre class="example">     .c.o: foo.h
             $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt;
</pre>
   <p class="noindent">tells how to make the file <span class="file">.c.o</span> from the prerequisite file
<span class="file">foo.h</span>, and is not at all like the pattern rule:

<pre class="example">     %.o: %.c foo.h
             $(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $&lt;
</pre>
   <p class="noindent">which tells how to make <span class="samp">.o</span> files from <span class="samp">.c</span> files, and makes all
<span class="samp">.o</span> files using this pattern rule also depend on <span class="file">foo.h</span>.

   <p>Suffix rules with no commands are also meaningless.  They do not remove
previous rules as do pattern rules with no commands (see <a href="#Canceling-Rules">Canceling Implicit Rules</a>).  They simply enter the suffix or pair of suffixes concatenated as
a target in the data base.

   <p><a name="index-_002eSUFFIXES-977"></a>The known suffixes are simply the names of the prerequisites of the special
target <code>.SUFFIXES</code>.  You can add your own suffixes by writing a rule
for <code>.SUFFIXES</code> that adds more prerequisites, as in:

<pre class="example">     .SUFFIXES: .hack .win
</pre>
   <p class="noindent">which adds <span class="samp">.hack</span> and <span class="samp">.win</span> to the end of the list of suffixes.

   <p>If you wish to eliminate the default known suffixes instead of just adding
to them, write a rule for <code>.SUFFIXES</code> with no prerequisites.  By
special dispensation, this eliminates all existing prerequisites of
<code>.SUFFIXES</code>.  You can then write another rule to add the suffixes you
want.  For example,

<pre class="example">     .SUFFIXES:            # <span class="roman">Delete the default suffixes</span>
     .SUFFIXES: .c .o .h   # <span class="roman">Define our suffix list</span>
</pre>
   <p>The <span class="samp">-r</span> or <span class="samp">--no-builtin-rules</span> flag causes the default
list of suffixes to be empty.

   <p><a name="index-SUFFIXES-978"></a>The variable <code>SUFFIXES</code> is defined to the default list of suffixes
before <code>make</code> reads any makefiles.  You can change the list of suffixes
with a rule for the special target <code>.SUFFIXES</code>, but that does not alter
this variable.

<div class="node">
<p><hr>
<a name="Implicit-Rule-Search"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Suffix-Rules">Suffix Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Implicit-Rules">Implicit Rules</a>
<br>
</div>

<h3 class="section">10.8 Implicit Rule Search Algorithm</h3>

<p><a name="index-implicit-rule_002c-search-algorithm-979"></a><a name="index-search-algorithm_002c-implicit-rule-980"></a>
Here is the procedure <code>make</code> uses for searching for an implicit rule
for a target <var>t</var>.  This procedure is followed for each double-colon
rule with no commands, for each target of ordinary rules none of which have
commands, and for each prerequisite that is not the target of any rule.  It
is also followed recursively for prerequisites that come from implicit
rules, in the search for a chain of rules.

   <p>Suffix rules are not mentioned in this algorithm because suffix rules are
converted to equivalent pattern rules once the makefiles have been read in.

   <p>For an archive member target of the form
<var>archive</var><span class="samp">(</span><var>member</var><span class="samp">)</span>, the following algorithm is run
twice, first using the entire target name <var>t</var>, and second using
<span class="samp">(</span><var>member</var><span class="samp">)</span> as the target <var>t</var> if the first run found no
rule.

     <ol type=1 start=1>
<li>Split <var>t</var> into a directory part, called <var>d</var>, and the rest,
called <var>n</var>.  For example, if <var>t</var> is <span class="samp">src/foo.o</span>, then
<var>d</var> is <span class="samp">src/</span> and <var>n</var> is <span class="samp">foo.o</span>.

     <li>Make a list of all the pattern rules one of whose targets matches
<var>t</var> or <var>n</var>.  If the target pattern contains a slash, it is
matched against <var>t</var>; otherwise, against <var>n</var>.

     <li>If any rule in that list is <em>not</em> a match-anything rule, then
remove all nonterminal match-anything rules from the list.

     <li>Remove from the list all rules with no commands.

     <li>For each pattern rule in the list:

          <ol type=a start=1>
<li>Find the stem <var>s</var>, which is the nonempty part of <var>t</var> or <var>n</var>
matched by the <span class="samp">%</span> in the target pattern.

          <li>Compute the prerequisite names by substituting <var>s</var> for <span class="samp">%</span>; if
the target pattern does not contain a slash, append <var>d</var> to
the front of each prerequisite name.

          <li>Test whether all the prerequisites exist or ought to exist.  (If a
file name is mentioned in the makefile as a target or as an explicit
prerequisite, then we say it ought to exist.)

          <p>If all prerequisites exist or ought to exist, or there are no prerequisites,
then this rule applies.
          </ol>

     <li>If no pattern rule has been found so far, try harder. 
For each pattern rule in the list:

          <ol type=a start=1>
<li>If the rule is terminal, ignore it and go on to the next rule.

          <li>Compute the prerequisite names as before.

          <li>Test whether all the prerequisites exist or ought to exist.

          <li>For each prerequisite that does not exist, follow this algorithm
recursively to see if the prerequisite can be made by an implicit
rule.

          <li>If all prerequisites exist, ought to exist, or can be
made by implicit rules, then this rule applies.
          </ol>

     <li>If no implicit rule applies, the rule for <code>.DEFAULT</code>, if any,
applies.  In that case, give <var>t</var> the same commands that
<code>.DEFAULT</code> has.  Otherwise, there are no commands for <var>t</var>.
        </ol>

   <p>Once a rule that applies has been found, for each target pattern of the
rule other than the one that matched <var>t</var> or <var>n</var>, the <span class="samp">%</span> in
the pattern is replaced with <var>s</var> and the resultant file name is stored
until the commands to remake the target file <var>t</var> are executed.  After
these commands are executed, each of these stored file names are entered
into the data base and marked as having been updated and having the same
update status as the file <var>t</var>.

   <p>When the commands of a pattern rule are executed for <var>t</var>, the automatic
variables are set corresponding to the target and prerequisites. 
See <a href="#Automatic-Variables">Automatic Variables</a>.

<div class="node">
<p><hr>
<a name="Archives"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Features">Features</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Implicit-Rules">Implicit Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">11 Using <code>make</code> to Update Archive Files</h2>

<p><a name="index-archive-981"></a>
<dfn>Archive files</dfn> are files containing named subfiles called
<dfn>members</dfn>; they are maintained with the program <code>ar</code> and their
main use is as subroutine libraries for linking.

<ul class="menu">
<li><a accesskey="1" href="#Archive-Members">Archive Members</a>:              Archive members as targets. 
<li><a accesskey="2" href="#Archive-Update">Archive Update</a>:               The implicit rule for archive member targets. 
<li><a accesskey="3" href="#Archive-Pitfalls">Archive Pitfalls</a>:             Dangers to watch out for when using archives. 
<li><a accesskey="4" href="#Archive-Suffix-Rules">Archive Suffix Rules</a>:         You can write a special kind of suffix rule
                                  for updating archives. 
</ul>

<div class="node">
<p><hr>
<a name="Archive-Members"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Archive-Update">Archive Update</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Archives">Archives</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Archives">Archives</a>
<br>
</div>

<h3 class="section">11.1 Archive Members as Targets</h3>

<p><a name="index-archive-member-targets-982"></a>
An individual member of an archive file can be used as a target or
prerequisite in <code>make</code>.  You specify the member named <var>member</var> in
archive file <var>archive</var> as follows:

<pre class="example">     <var>archive</var>(<var>member</var>)
</pre>
   <p class="noindent">This construct is available only in targets and prerequisites, not in
commands!  Most programs that you might use in commands do not support this
syntax and cannot act directly on archive members.  Only <code>ar</code> and
other programs specifically designed to operate on archives can do so. 
Therefore, valid commands to update an archive member target probably must
use <code>ar</code>.  For example, this rule says to create a member
<span class="file">hack.o</span> in archive <span class="file">foolib</span> by copying the file <span class="file">hack.o</span>:

<pre class="example">     foolib(hack.o) : hack.o
             ar cr foolib hack.o
</pre>
   <p>In fact, nearly all archive member targets are updated in just this way
and there is an implicit rule to do it for you.  <strong>Please note:</strong> The
<span class="samp">c</span> flag to <code>ar</code> is required if the archive file does not
already exist.

   <p>To specify several members in the same archive, you can write all the
member names together between the parentheses.  For example:

<pre class="example">     foolib(hack.o kludge.o)
</pre>
   <p class="noindent">is equivalent to:

<pre class="example">     foolib(hack.o) foolib(kludge.o)
</pre>
   <p><a name="index-wildcard_002c-in-archive-member-983"></a>You can also use shell-style wildcards in an archive member reference. 
See <a href="#Wildcards">Using Wildcard Characters in File Names</a>.  For
example, <span class="samp">foolib(*.o)</span><!-- /@w --> expands to all existing members of the
<span class="file">foolib</span> archive whose names end in <span class="samp">.o</span>; perhaps
<span class="samp">foolib(hack.o)<!-- /@w --> foolib(kludge.o)<!-- /@w --></span>.

<div class="node">
<p><hr>
<a name="Archive-Update"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Archive-Pitfalls">Archive Pitfalls</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Archive-Members">Archive Members</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Archives">Archives</a>
<br>
</div>

<h3 class="section">11.2 Implicit Rule for Archive Member Targets</h3>

<p>Recall that a target that looks like <var>a</var><span class="file">(</span><var>m</var><span class="file">)</span> stands for the
member named <var>m</var> in the archive file <var>a</var>.

   <p>When <code>make</code> looks for an implicit rule for such a target, as a special
feature it considers implicit rules that match <span class="file">(</span><var>m</var><span class="file">)</span>, as well as
those that match the actual target <var>a</var><span class="file">(</span><var>m</var><span class="file">)</span>.

   <p>This causes one special rule whose target is <span class="file">(%)</span> to match.  This
rule updates the target <var>a</var><span class="file">(</span><var>m</var><span class="file">)</span> by copying the file <var>m</var>
into the archive.  For example, it will update the archive member target
<span class="file">foo.a(bar.o)</span> by copying the <em>file</em> <span class="file">bar.o</span> into the
archive <span class="file">foo.a</span> as a <em>member</em> named <span class="file">bar.o</span>.

   <p>When this rule is chained with others, the result is very powerful. 
Thus, <span class="samp">make "foo.a(bar.o)"</span> (the quotes are needed to protect the
<span class="samp">(</span> and <span class="samp">)</span> from being interpreted specially by the shell) in
the presence of a file <span class="file">bar.c</span> is enough to cause the following
commands to be run, even without a makefile:

<pre class="example">     cc -c bar.c -o bar.o
     ar r foo.a bar.o
     rm -f bar.o
</pre>
   <p class="noindent">Here <code>make</code> has envisioned the file <span class="file">bar.o</span> as an intermediate
file.  See <a href="#Chained-Rules">Chains of Implicit Rules</a>.

   <p>Implicit rules such as this one are written using the automatic variable
<span class="samp">$%</span>.  See <a href="#Automatic-Variables">Automatic Variables</a>.

   <p>An archive member name in an archive cannot contain a directory name, but
it may be useful in a makefile to pretend that it does.  If you write an
archive member target <span class="file">foo.a(dir/file.o)</span>, <code>make</code> will perform
automatic updating with this command:

<pre class="example">     ar r foo.a dir/file.o
</pre>
   <p class="noindent">which has the effect of copying the file <span class="file">dir/file.o</span> into a member
named <span class="file">file.o</span>.  In connection with such usage, the automatic variables
<code>%D</code> and <code>%F</code> may be useful.

<ul class="menu">
<li><a accesskey="1" href="#Archive-Symbols">Archive Symbols</a>:              How to update archive symbol directories. 
</ul>

<div class="node">
<p><hr>
<a name="Archive-Symbols"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Archive-Update">Archive Update</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Archive-Update">Archive Update</a>
<br>
</div>

<h4 class="subsection">11.2.1 Updating Archive Symbol Directories</h4>

<p><a name="index-_0040code_007b_005f_005f_002eSYMDEF_007d-984"></a><a name="index-updating-archive-symbol-directories-985"></a><a name="index-archive-symbol-directory-updating-986"></a><a name="index-symbol-directories_002c-updating-archive-987"></a><a name="index-directories_002c-updating-archive-symbol-988"></a>
An archive file that is used as a library usually contains a special member
named <span class="file">__.SYMDEF</span> that contains a directory of the external symbol
names defined by all the other members.  After you update any other
members, you need to update <span class="file">__.SYMDEF</span> so that it will summarize the
other members properly.  This is done by running the <code>ranlib</code> program:

<pre class="example">     ranlib <var>archivefile</var>
</pre>
   <p>Normally you would put this command in the rule for the archive file,
and make all the members of the archive file prerequisites of that rule. 
For example,

<pre class="example">     libfoo.a: libfoo.a(x.o) libfoo.a(y.o) ...
             ranlib libfoo.a
</pre>
   <p class="noindent">The effect of this is to update archive members <span class="file">x.o</span>, <span class="file">y.o</span>,
etc., and then update the symbol directory member <span class="file">__.SYMDEF</span> by
running <code>ranlib</code>.  The rules for updating the members are not shown
here; most likely you can omit them and use the implicit rule which copies
files into the archive, as described in the preceding section.

   <p>This is not necessary when using the GNU <code>ar</code> program, which
updates the <span class="file">__.SYMDEF</span> member automatically.

<div class="node">
<p><hr>
<a name="Archive-Pitfalls"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Archive-Suffix-Rules">Archive Suffix Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Archive-Update">Archive Update</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Archives">Archives</a>
<br>
</div>

<h3 class="section">11.3 Dangers When Using Archives</h3>

<p><a name="index-archive_002c-and-parallel-execution-989"></a><a name="index-parallel-execution_002c-and-archive-update-990"></a><a name="index-archive_002c-and-_0040code_007b_002dj_007d-991"></a><a name="index-_0040code_007b_002dj_007d_002c-and-archive-update-992"></a>
It is important to be careful when using parallel execution (the
<code>-j</code> switch; see <a href="#Parallel">Parallel Execution</a>) and archives. 
If multiple <code>ar</code> commands run at the same time on the same archive
file, they will not know about each other and can corrupt the file.

   <p>Possibly a future version of <code>make</code> will provide a mechanism to
circumvent this problem by serializing all commands that operate on the
same archive file.  But for the time being, you must either write your
makefiles to avoid this problem in some other way, or not use <code>-j</code>.

<div class="node">
<p><hr>
<a name="Archive-Suffix-Rules"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Archive-Pitfalls">Archive Pitfalls</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Archives">Archives</a>
<br>
</div>

<h3 class="section">11.4 Suffix Rules for Archive Files</h3>

<p><a name="index-suffix-rule_002c-for-archive-993"></a><a name="index-archive_002c-suffix-rule-for-994"></a><a name="index-library-archive_002c-suffix-rule-for-995"></a><a name="index-_0040code_007b_002ea_007d-_0028archives_0029-996"></a>
You can write a special kind of suffix rule for dealing with archive
files.  See <a href="#Suffix-Rules">Suffix Rules</a>, for a full explanation of suffix rules. 
Archive suffix rules are obsolete in GNU <code>make</code>, because pattern
rules for archives are a more general mechanism (see <a href="#Archive-Update">Archive Update</a>).  But they are retained for compatibility with other
<code>make</code>s.

   <p>To write a suffix rule for archives, you simply write a suffix rule
using the target suffix <span class="samp">.a</span> (the usual suffix for archive files). 
For example, here is the old-fashioned suffix rule to update a library
archive from C source files:

<pre class="example">     .c.a:
             $(CC) $(CFLAGS) $(CPPFLAGS) -c $&lt; -o $*.o
             $(AR) r $@ $*.o
             $(RM) $*.o
</pre>
   <p class="noindent">This works just as if you had written the pattern rule:

<pre class="example">     (%.o): %.c
             $(CC) $(CFLAGS) $(CPPFLAGS) -c $&lt; -o $*.o
             $(AR) r $@ $*.o
             $(RM) $*.o
</pre>
   <p>In fact, this is just what <code>make</code> does when it sees a suffix rule
with <span class="samp">.a</span> as the target suffix.  Any double-suffix rule
<span class="samp">.</span><var>x</var><span class="samp">.a</span><!-- /@w --> is converted to a pattern rule with the target
pattern <span class="samp">(%.o)</span> and a prerequisite pattern of <span class="samp">%.</span><var>x</var>.

   <p>Since you might want to use <span class="samp">.a</span> as the suffix for some other kind
of file, <code>make</code> also converts archive suffix rules to pattern rules
in the normal way (see <a href="#Suffix-Rules">Suffix Rules</a>).  Thus a double-suffix rule
<span class="samp">.</span><var>x</var><span class="samp">.a</span><!-- /@w --> produces two pattern rules: <span class="samp">(%.o):<!-- /@w -->
%.</span><var>x</var><span class="samp"><!-- /@w --></span> and <span class="samp">%.a<!-- /@w -->: %.</span><var>x</var><span class="samp"><!-- /@w --></span>.

<div class="node">
<p><hr>
<a name="Features"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Missing">Missing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Archives">Archives</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">12 Features of GNU <code>make</code></h2>

<p><a name="index-features-of-GNU-_0040code_007bmake_007d-997"></a><a name="index-portability-998"></a><a name="index-compatibility-999"></a>
Here is a summary of the features of GNU <code>make</code>, for comparison
with and credit to other versions of <code>make</code>.  We consider the
features of <code>make</code> in 4.2 BSD systems as a baseline.  If you are
concerned with writing portable makefiles, you should not use the
features of <code>make</code> listed here, nor the ones in <a href="#Missing">Missing</a>.

   <p>Many features come from the version of <code>make</code> in System V.

     <ul>
<li>The <code>VPATH</code> variable and its special meaning. 
See <a href="#Directory-Search">Searching Directories for Prerequisites</a>. 
This feature exists in System V <code>make</code>, but is undocumented. 
It is documented in 4.3 BSD <code>make</code> (which says it mimics System V's
<code>VPATH</code> feature).

     <li>Included makefiles.  See <a href="#Include">Including Other Makefiles</a>. 
Allowing multiple files to be included with a single directive is a GNU
extension.

     <li>Variables are read from and communicated via the environment. 
See <a href="#Environment">Variables from the Environment</a>.

     <li>Options passed through the variable <code>MAKEFLAGS</code> to recursive
invocations of <code>make</code>. 
See <a href="#Options_002fRecursion">Communicating Options to a Sub-<code>make</code></a>.

     <li>The automatic variable <code>$%</code> is set to the member name
in an archive reference.  See <a href="#Automatic-Variables">Automatic Variables</a>.

     <li>The automatic variables <code>$@</code>, <code>$*</code>, <code>$&lt;</code>, <code>$%</code>,
and <code>$?</code> have corresponding forms like <code>$(@F)</code> and
<code>$(@D)</code>.  We have generalized this to <code>$^</code> as an obvious
extension.  See <a href="#Automatic-Variables">Automatic Variables</a>.

     <li>Substitution variable references. 
See <a href="#Reference">Basics of Variable References</a>.

     <li>The command-line options <span class="samp">-b</span> and <span class="samp">-m</span>, accepted and
ignored.  In System V <code>make</code>, these options actually do something.

     <li>Execution of recursive commands to run <code>make</code> via the variable
<code>MAKE</code> even if <span class="samp">-n</span>, <span class="samp">-q</span> or <span class="samp">-t</span> is specified. 
See <a href="#Recursion">Recursive Use of <code>make</code></a>.

     <li>Support for suffix <span class="samp">.a</span> in suffix rules.  See <a href="#Archive-Suffix-Rules">Archive Suffix Rules</a>.  This feature is obsolete in GNU <code>make</code>, because the
general feature of rule chaining (see <a href="#Chained-Rules">Chains of Implicit Rules</a>) allows one pattern rule for installing members in an
archive (see <a href="#Archive-Update">Archive Update</a>) to be sufficient.

     <li>The arrangement of lines and backslash-newline combinations in
commands is retained when the commands are printed, so they appear as
they do in the makefile, except for the stripping of initial
whitespace. 
</ul>

   <p>The following features were inspired by various other versions of
<code>make</code>.  In some cases it is unclear exactly which versions inspired
which others.

     <ul>
<li>Pattern rules using <span class="samp">%</span>. 
This has been implemented in several versions of <code>make</code>. 
We're not sure who invented it first, but it's been spread around a bit. 
See <a href="#Pattern-Rules">Defining and Redefining Pattern Rules</a>.

     <li>Rule chaining and implicit intermediate files. 
This was implemented by Stu Feldman in his version of <code>make</code>
for AT&amp;T Eighth Edition Research Unix, and later by Andrew Hume of
AT&amp;T Bell Labs in his <code>mk</code> program (where he terms it
&ldquo;transitive closure&rdquo;).  We do not really know if
we got this from either of them or thought it up ourselves at the
same time.  See <a href="#Chained-Rules">Chains of Implicit Rules</a>.

     <li>The automatic variable <code>$^</code> containing a list of all prerequisites
of the current target.  We did not invent this, but we have no idea who
did.  See <a href="#Automatic-Variables">Automatic Variables</a>.  The automatic variable
<code>$+</code> is a simple extension of <code>$^</code>.

     <li>The &ldquo;what if&rdquo; flag (<span class="samp">-W</span> in GNU <code>make</code>) was (as far as we know)
invented by Andrew Hume in <code>mk</code>. 
See <a href="#Instead-of-Execution">Instead of Executing the Commands</a>.

     <li>The concept of doing several things at once (parallelism) exists in
many incarnations of <code>make</code> and similar programs, though not in the
System V or BSD implementations.  See <a href="#Execution">Command Execution</a>.

     <li>Modified variable references using pattern substitution come from
SunOS 4.  See <a href="#Reference">Basics of Variable References</a>. 
This functionality was provided in GNU <code>make</code> by the
<code>patsubst</code> function before the alternate syntax was implemented
for compatibility with SunOS 4.  It is not altogether clear who
inspired whom, since GNU <code>make</code> had <code>patsubst</code> before SunOS
4 was released.

     <li>The special significance of <span class="samp">+</span> characters preceding command lines
(see <a href="#Instead-of-Execution">Instead of Executing the Commands</a>) is
mandated by
<cite>IEEE Standard 1003.2-1992</cite> (POSIX.2).

     <li>The <span class="samp">+=</span> syntax to append to the value of a variable comes from SunOS
4 <code>make</code>.  See <a href="#Appending">Appending More Text to Variables</a>.

     <li>The syntax <var>archive</var><span class="samp">(</span><var>mem1</var><span class="samp">&nbsp;</span><var>mem2</var><span class="samp">...)</span><!-- /@w --> to list
multiple members in a single archive file comes from SunOS 4 <code>make</code>. 
See <a href="#Archive-Members">Archive Members</a>.

     <li>The <code>-include</code> directive to include makefiles with no error for a
nonexistent file comes from SunOS 4 <code>make</code>.  (But note that SunOS 4
<code>make</code> does not allow multiple makefiles to be specified in one
<code>-include</code> directive.)  The same feature appears with the name
<code>sinclude</code> in SGI <code>make</code> and perhaps others. 
</ul>

   <p>The remaining features are inventions new in GNU <code>make</code>:

     <ul>
<li>Use the <span class="samp">-v</span> or <span class="samp">--version</span> option to print version and
copyright information.

     <li>Use the <span class="samp">-h</span> or <span class="samp">--help</span> option to summarize the options to
<code>make</code>.

     <li>Simply-expanded variables.  See <a href="#Flavors">The Two Flavors of Variables</a>.

     <li>Pass command-line variable assignments automatically through the
variable <code>MAKE</code> to recursive <code>make</code> invocations. 
See <a href="#Recursion">Recursive Use of <code>make</code></a>.

     <li>Use the <span class="samp">-C</span> or <span class="samp">--directory</span> command option to change
directory.  See <a href="#Options-Summary">Summary of Options</a>.

     <li>Make verbatim variable definitions with <code>define</code>. 
See <a href="#Defining">Defining Variables Verbatim</a>.

     <li>Declare phony targets with the special target <code>.PHONY</code>.

     <p>Andrew Hume of AT&amp;T Bell Labs implemented a similar feature with a
different syntax in his <code>mk</code> program.  This seems to be a case of
parallel discovery.  See <a href="#Phony-Targets">Phony Targets</a>.

     <li>Manipulate text by calling functions. 
See <a href="#Functions">Functions for Transforming Text</a>.

     <li>Use the <span class="samp">-o</span> or <span class="samp">--old-file</span>
option to pretend a file's modification-time is old. 
See <a href="#Avoiding-Compilation">Avoiding Recompilation of Some Files</a>.

     <li>Conditional execution.

     <p>This feature has been implemented numerous times in various versions
of <code>make</code>; it seems a natural extension derived from the features
of the C preprocessor and similar macro languages and is not a
revolutionary concept.  See <a href="#Conditionals">Conditional Parts of Makefiles</a>.

     <li>Specify a search path for included makefiles. 
See <a href="#Include">Including Other Makefiles</a>.

     <li>Specify extra makefiles to read with an environment variable. 
See <a href="#MAKEFILES-Variable">The Variable <code>MAKEFILES</code></a>.

     <li>Strip leading sequences of <span class="samp">./</span> from file names, so that
<span class="file">./</span><var>file</var> and <var>file</var> are considered to be the
same file.

     <li>Use a special search method for library prerequisites written in the
form <span class="samp">-l</span><var>name</var>. 
See <a href="#Libraries_002fSearch">Directory Search for Link Libraries</a>.

     <li>Allow suffixes for suffix rules
(see <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>) to contain any
characters.  In other versions of <code>make</code>, they must begin with
<span class="samp">.</span> and not contain any <span class="samp">/</span> characters.

     <li>Keep track of the current level of <code>make</code> recursion using the
variable <code>MAKELEVEL</code>.  See <a href="#Recursion">Recursive Use of <code>make</code></a>.

     <li>Provide any goals given on the command line in the variable
<code>MAKECMDGOALS</code>.  See <a href="#Goals">Arguments to Specify the Goals</a>.

     <li>Specify static pattern rules.  See <a href="#Static-Pattern">Static Pattern Rules</a>.

     <li>Provide selective <code>vpath</code> search. 
See <a href="#Directory-Search">Searching Directories for Prerequisites</a>.

     <li>Provide computed variable references. 
See <a href="#Reference">Basics of Variable References</a>.

     <li>Update makefiles.  See <a href="#Remaking-Makefiles">How Makefiles Are Remade</a>. 
System V <code>make</code> has a very, very limited form of this
functionality in that it will check out SCCS files for makefiles.

     <li>Various new built-in implicit rules. 
See <a href="#Catalogue-of-Rules">Catalogue of Implicit Rules</a>.

     <li>The built-in variable <span class="samp">MAKE_VERSION</span> gives the version number of
<code>make</code>. 
<a name="index-MAKE_005fVERSION-1000"></a></ul>

<div class="node">
<p><hr>
<a name="Missing"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Makefile-Conventions">Makefile Conventions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Features">Features</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">13 Incompatibilities and Missing Features</h2>

<p><a name="index-incompatibilities-1001"></a><a name="index-missing-features-1002"></a><a name="index-features_002c-missing-1003"></a>
The <code>make</code> programs in various other systems support a few features
that are not implemented in GNU <code>make</code>.  The POSIX.2 standard
(<cite>IEEE Standard 1003.2-1992</cite>) which specifies <code>make</code> does not
require any of these features.

     <ul>
<li>A target of the form <var>file</var><span class="samp">((</span><var>entry</var><span class="samp">))</span> stands for a member
of archive file <var>file</var>.  The member is chosen, not by name, but by
being an object file which defines the linker symbol <var>entry</var>.

     <p>This feature was not put into GNU <code>make</code> because of the
nonmodularity of putting knowledge into <code>make</code> of the internal
format of archive file symbol tables. 
See <a href="#Archive-Symbols">Updating Archive Symbol Directories</a>.

     <li>Suffixes (used in suffix rules) that end with the character <span class="samp">~</span>
have a special meaning to System V <code>make</code>;
they refer to the SCCS file that corresponds
to the file one would get without the <span class="samp">~</span>.  For example, the
suffix rule <span class="samp">.c~.o</span> would make the file <var>n</var><span class="file">.o</span> from
the SCCS file <span class="file">s.</span><var>n</var><span class="file">.c</span>.  For complete coverage, a whole
series of such suffix rules is required. 
See <a href="#Suffix-Rules">Old-Fashioned Suffix Rules</a>.

     <p>In GNU <code>make</code>, this entire series of cases is handled by two
pattern rules for extraction from SCCS, in combination with the
general feature of rule chaining. 
See <a href="#Chained-Rules">Chains of Implicit Rules</a>.

     <li>In System V and 4.3 BSD <code>make</code>, files found by <code>VPATH</code> search
(see <a href="#Directory-Search">Searching Directories for Prerequisites</a>) have their names changed inside command
strings.  We feel it is much cleaner to always use automatic variables
and thus make this feature obsolete.

     <li>In some Unix <code>make</code>s, the automatic variable <code>$*</code> appearing in
the prerequisites of a rule has the amazingly strange &ldquo;feature&rdquo; of
expanding to the full name of the <em>target of that rule</em>.  We cannot
imagine what went on in the minds of Unix <code>make</code> developers to do
this; it is utterly inconsistent with the normal definition of <code>$*</code>. 
<a name="index-_002a-_0040r_007b_0028automatic-variable_0029_002c-unsupported-bizarre-usage_007d-1004"></a>
<li>In some Unix <code>make</code>s, implicit rule search
(see <a href="#Implicit-Rules">Using Implicit Rules</a>) is apparently done for
<em>all</em> targets, not just those without commands.  This means you can
do:

     <pre class="example">          foo.o:
                  cc -c foo.c
     </pre>
     <p class="noindent">and Unix <code>make</code> will intuit that <span class="file">foo.o</span> depends on
<span class="file">foo.c</span>.

     <p>We feel that such usage is broken.  The prerequisite properties of
<code>make</code> are well-defined (for GNU <code>make</code>, at least),
and doing such a thing simply does not fit the model.

     <li>GNU <code>make</code> does not include any built-in implicit rules for
compiling or preprocessing EFL programs.  If we hear of anyone who is
using EFL, we will gladly add them.

     <li>It appears that in SVR4 <code>make</code>, a suffix rule can be specified with
no commands, and it is treated as if it had empty commands
(see <a href="#Empty-Commands">Empty Commands</a>).  For example:

     <pre class="example">          .c.a:
     </pre>
     <p class="noindent">will override the built-in <span class="file">.c.a</span> suffix rule.

     <p>We feel that it is cleaner for a rule without commands to always simply
add to the prerequisite list for the target.  The above example can be
easily rewritten to get the desired behavior in GNU <code>make</code>:

     <pre class="example">          .c.a: ;
     </pre>
     <li>Some versions of <code>make</code> invoke the shell with the <span class="samp">-e</span> flag,
except under <span class="samp">-k</span> (see <a href="#Testing">Testing the Compilation of a Program</a>).  The <span class="samp">-e</span> flag tells the shell to exit as soon as any
program it runs returns a nonzero status.  We feel it is cleaner to
write each shell command line to stand on its own and not require this
special treatment. 
</ul>

<!-- The makefile standards are in a separate file that is also -->
<!-- included by standards.texi. -->
<!-- This file is included by both standards.texi and make.texinfo. -->
<!-- It was broken out of standards.texi on 1/6/93 by roland. -->
<div class="node">
<p><hr>
<a name="Makefile-Conventions"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Quick-Reference">Quick Reference</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Missing">Missing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="chapter">14 Makefile Conventions</h2>

<!-- standards.texi does not print an index, but make.texinfo does. -->
<p><a name="index-makefile_002c-conventions-for-1005"></a><a name="index-conventions-for-makefiles-1006"></a><a name="index-standards-for-makefiles-1007"></a>
<!-- Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 2000, 2001, -->
<!-- 2004, 2005 Free Software Foundation, Inc. -->

<!-- Permission is granted to copy, distribute and/or modify this document -->
<!-- under the terms of the GNU Free Documentation License, Version 1.1 -->
<!-- or any later version published by the Free Software Foundation; -->
<!-- with no Invariant Sections, with no -->
<!-- Front-Cover Texts, and with no Back-Cover Texts. -->
<!-- A copy of the license is included in the section entitled ``GNU -->
<!-- Free Documentation License''. -->
<p>This
describes conventions for writing the Makefiles for GNU programs. 
Using Automake will help you write a Makefile that follows these
conventions.

<ul class="menu">
<li><a accesskey="1" href="#Makefile-Basics">Makefile Basics</a>:              General Conventions for Makefiles
<li><a accesskey="2" href="#Utilities-in-Makefiles">Utilities in Makefiles</a>:       Utilities in Makefiles
<li><a accesskey="3" href="#Command-Variables">Command Variables</a>:            Variables for Specifying Commands
<li><a accesskey="4" href="#Directory-Variables">Directory Variables</a>:          Variables for Installation Directories
<li><a accesskey="5" href="#Standard-Targets">Standard Targets</a>:             Standard Targets for Users
<li><a accesskey="6" href="#Install-Command-Categories">Install Command Categories</a>:   Three categories of commands in the `install'
                                  rule: normal, pre-install and post-install. 
</ul>

<div class="node">
<p><hr>
<a name="Makefile-Basics"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Utilities-in-Makefiles">Utilities in Makefiles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefile-Conventions">Makefile Conventions</a>
<br>
</div>

<h3 class="section">14.1 General Conventions for Makefiles</h3>

<p>Every Makefile should contain this line:

<pre class="example">     SHELL = /bin/sh
</pre>
   <p class="noindent">to avoid trouble on systems where the <code>SHELL</code> variable might be
inherited from the environment.  (This is never a problem with GNU
<code>make</code>.)

   <p>Different <code>make</code> programs have incompatible suffix lists and
implicit rules, and this sometimes creates confusion or misbehavior.  So
it is a good idea to set the suffix list explicitly using only the
suffixes you need in the particular Makefile, like this:

<pre class="example">     .SUFFIXES:
     .SUFFIXES: .c .o
</pre>
   <p class="noindent">The first line clears out the suffix list, the second introduces all
suffixes which may be subject to implicit rules in this Makefile.

   <p>Don't assume that <span class="file">.</span> is in the path for command execution.  When
you need to run programs that are a part of your package during the
make, please make sure that it uses <span class="file">./</span> if the program is built as
part of the make or <span class="file">$(srcdir)/</span> if the file is an unchanging part
of the source code.  Without one of these prefixes, the current search
path is used.

   <p>The distinction between <span class="file">./</span> (the <dfn>build directory</dfn>) and
<span class="file">$(srcdir)/</span> (the <dfn>source directory</dfn>) is important because
users can build in a separate directory using the <span class="samp">--srcdir</span> option
to <span class="file">configure</span>.  A rule of the form:

<pre class="smallexample">     foo.1 : foo.man sedscript
             sed -e sedscript foo.man &gt; foo.1
</pre>
   <p class="noindent">will fail when the build directory is not the source directory, because
<span class="file">foo.man</span> and <span class="file">sedscript</span> are in the source directory.

   <p>When using GNU <code>make</code>, relying on <span class="samp">VPATH</span> to find the source
file will work in the case where there is a single dependency file,
since the <code>make</code> automatic variable <span class="samp">$&lt;</span> will represent the
source file wherever it is.  (Many versions of <code>make</code> set <span class="samp">$&lt;</span>
only in implicit rules.)  A Makefile target like

<pre class="smallexample">     foo.o : bar.c
             $(CC) -I. -I$(srcdir) $(CFLAGS) -c bar.c -o foo.o
</pre>
   <p class="noindent">should instead be written as

<pre class="smallexample">     foo.o : bar.c
             $(CC) -I. -I$(srcdir) $(CFLAGS) -c $&lt; -o $@
</pre>
   <p class="noindent">in order to allow <span class="samp">VPATH</span> to work correctly.  When the target has
multiple dependencies, using an explicit <span class="samp">$(srcdir)</span> is the easiest
way to make the rule work well.  For example, the target above for
<span class="file">foo.1</span> is best written as:

<pre class="smallexample">     foo.1 : foo.man sedscript
             sed -e $(srcdir)/sedscript $(srcdir)/foo.man &gt; $@
</pre>
   <p>GNU distributions usually contain some files which are not source
files&mdash;for example, Info files, and the output from Autoconf, Automake,
Bison or Flex.  Since these files normally appear in the source
directory, they should always appear in the source directory, not in the
build directory.  So Makefile rules to update them should put the
updated files in the source directory.

   <p>However, if a file does not appear in the distribution, then the
Makefile should not put it in the source directory, because building a
program in ordinary circumstances should not modify the source directory
in any way.

   <p>Try to make the build and installation targets, at least (and all their
subtargets) work correctly with a parallel <code>make</code>.

<div class="node">
<p><hr>
<a name="Utilities-in-Makefiles"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Command-Variables">Command Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Makefile-Basics">Makefile Basics</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefile-Conventions">Makefile Conventions</a>
<br>
</div>

<h3 class="section">14.2 Utilities in Makefiles</h3>

<p>Write the Makefile commands (and any shell scripts, such as
<code>configure</code>) to run in <code>sh</code>, not in <code>csh</code>.  Don't use any
special features of <code>ksh</code> or <code>bash</code>.

   <p>The <code>configure</code> script and the Makefile rules for building and
installation should not use any utilities directly except these:

<!-- dd find -->
<!-- gunzip gzip md5sum -->
<!-- mkfifo mknod tee uname -->
<pre class="example">     cat cmp cp diff echo egrep expr false grep install-info
     ln ls mkdir mv pwd rm rmdir sed sleep sort tar test touch true
</pre>
   <p>The compression program <code>gzip</code> can be used in the <code>dist</code> rule.

   <p>Stick to the generally supported options for these programs.  For
example, don't use <span class="samp">mkdir -p</span>, convenient as it may be, because
most systems don't support it.

   <p>It is a good idea to avoid creating symbolic links in makefiles, since a
few systems don't support them.

   <p>The Makefile rules for building and installation can also use compilers
and related programs, but should do so via <code>make</code> variables so that the
user can substitute alternatives.  Here are some of the programs we
mean:

<pre class="example">     ar bison cc flex install ld ldconfig lex
     make makeinfo ranlib texi2dvi yacc
</pre>
   <p>Use the following <code>make</code> variables to run those programs:

<pre class="example">     $(AR) $(BISON) $(CC) $(FLEX) $(INSTALL) $(LD) $(LDCONFIG) $(LEX)
     $(MAKE) $(MAKEINFO) $(RANLIB) $(TEXI2DVI) $(YACC)
</pre>
   <p>When you use <code>ranlib</code> or <code>ldconfig</code>, you should make sure
nothing bad happens if the system does not have the program in question. 
Arrange to ignore an error from that command, and print a message before
the command to tell the user that failure of this command does not mean
a problem.  (The Autoconf <span class="samp">AC_PROG_RANLIB</span> macro can help with
this.)

   <p>If you use symbolic links, you should implement a fallback for systems
that don't have symbolic links.

   <p>Additional utilities that can be used via Make variables are:

<pre class="example">     chgrp chmod chown mknod
</pre>
   <p>It is ok to use other utilities in Makefile portions (or scripts)
intended only for particular systems where you know those utilities
exist.

<div class="node">
<p><hr>
<a name="Command-Variables"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Directory-Variables">Directory Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Utilities-in-Makefiles">Utilities in Makefiles</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefile-Conventions">Makefile Conventions</a>
<br>
</div>

<h3 class="section">14.3 Variables for Specifying Commands</h3>

<p>Makefiles should provide variables for overriding certain commands, options,
and so on.

   <p>In particular, you should run most utility programs via variables. 
Thus, if you use Bison, have a variable named <code>BISON</code> whose default
value is set with <span class="samp">BISON = bison</span>, and refer to it with
<code>$(BISON)</code> whenever you need to use Bison.

   <p>File management utilities such as <code>ln</code>, <code>rm</code>, <code>mv</code>, and
so on, need not be referred to through variables in this way, since users
don't need to replace them with other programs.

   <p>Each program-name variable should come with an options variable that is
used to supply options to the program.  Append <span class="samp">FLAGS</span> to the
program-name variable name to get the options variable name&mdash;for
example, <code>BISONFLAGS</code>.  (The names <code>CFLAGS</code> for the C
compiler, <code>YFLAGS</code> for yacc, and <code>LFLAGS</code> for lex, are
exceptions to this rule, but we keep them because they are standard.) 
Use <code>CPPFLAGS</code> in any compilation command that runs the
preprocessor, and use <code>LDFLAGS</code> in any compilation command that
does linking as well as in any direct use of <code>ld</code>.

   <p>If there are C compiler options that <em>must</em> be used for proper
compilation of certain files, do not include them in <code>CFLAGS</code>. 
Users expect to be able to specify <code>CFLAGS</code> freely themselves. 
Instead, arrange to pass the necessary options to the C compiler
independently of <code>CFLAGS</code>, by writing them explicitly in the
compilation commands or by defining an implicit rule, like this:

<pre class="smallexample">     CFLAGS = -g
     ALL_CFLAGS = -I. $(CFLAGS)
     .c.o:
             $(CC) -c $(CPPFLAGS) $(ALL_CFLAGS) $&lt;
</pre>
   <p>Do include the <span class="samp">-g</span> option in <code>CFLAGS</code>, because that is not
<em>required</em> for proper compilation.  You can consider it a default
that is only recommended.  If the package is set up so that it is
compiled with GCC by default, then you might as well include <span class="samp">-O</span>
in the default value of <code>CFLAGS</code> as well.

   <p>Put <code>CFLAGS</code> last in the compilation command, after other variables
containing compiler options, so the user can use <code>CFLAGS</code> to
override the others.

   <p><code>CFLAGS</code> should be used in every invocation of the C compiler,
both those which do compilation and those which do linking.

   <p>Every Makefile should define the variable <code>INSTALL</code>, which is the
basic command for installing a file into the system.

   <p>Every Makefile should also define the variables <code>INSTALL_PROGRAM</code>
and <code>INSTALL_DATA</code>.  (The default for <code>INSTALL_PROGRAM</code> should
be <code>$(INSTALL)</code>; the default for <code>INSTALL_DATA</code> should be
<code>${INSTALL} -m 644</code>.)  Then it should use those variables as the
commands for actual installation, for executables and nonexecutables
respectively.  Use these variables as follows:

<pre class="example">     $(INSTALL_PROGRAM) foo $(bindir)/foo
     $(INSTALL_DATA) libfoo.a $(libdir)/libfoo.a
</pre>
   <p>Optionally, you may prepend the value of <code>DESTDIR</code> to the target
filename.  Doing this allows the installer to create a snapshot of the
installation to be copied onto the real target filesystem later.  Do not
set the value of <code>DESTDIR</code> in your Makefile, and do not include it
in any installed files.  With support for <code>DESTDIR</code>, the above
examples become:

<pre class="example">     $(INSTALL_PROGRAM) foo $(DESTDIR)$(bindir)/foo
     $(INSTALL_DATA) libfoo.a $(DESTDIR)$(libdir)/libfoo.a
</pre>
   <p class="noindent">Always use a file name, not a directory name, as the second argument of
the installation commands.  Use a separate command for each file to be
installed.

<div class="node">
<p><hr>
<a name="Directory-Variables"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Standard-Targets">Standard Targets</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Command-Variables">Command Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefile-Conventions">Makefile Conventions</a>
<br>
</div>

<h3 class="section">14.4 Variables for Installation Directories</h3>

<p>Installation directories should always be named by variables, so it is
easy to install in a nonstandard place.  The standard names for these
variables and the values they should have in GNU packages are
described below.  They are based on a standard filesystem layout;
variants of it are used in GNU/Linux and other modern operating
systems.

   <p>Installers are expected to override these values when calling
<span class="command">make</span> (e.g., <kbd>make prefix=/usr install</kbd> or
<span class="command">configure</span> (e.g., <kbd>configure --prefix=/usr</kbd>).  GNU
packages should not try to guess which value should be appropriate for
these variables on the system they are being installed onto: use the
default settings specified here so that all GNU packages behave
identically, allowing the installer to achieve any desired layout.

   <p>These two variables set the root for the installation.  All the other
installation directories should be subdirectories of one of these two,
and nothing should be directly installed into these two directories.

     <dl>
<dt><code>prefix</code><dd><a name="index-prefix-1008"></a>A prefix used in constructing the default values of the variables listed
below.  The default value of <code>prefix</code> should be <span class="file">/usr/local</span>. 
When building the complete GNU system, the prefix will be empty and
<span class="file">/usr</span> will be a symbolic link to <span class="file">/</span>. 
(If you are using Autoconf, write it as <span class="samp">@prefix@</span>.)

     <p>Running <span class="samp">make install</span> with a different value of <code>prefix</code> from
the one used to build the program should <em>not</em> recompile the
program.

     <br><dt><code>exec_prefix</code><dd><a name="index-exec_005fprefix-1009"></a>A prefix used in constructing the default values of some of the
variables listed below.  The default value of <code>exec_prefix</code> should
be <code>$(prefix)</code>. 
(If you are using Autoconf, write it as <span class="samp">@exec_prefix@</span>.)

     <p>Generally, <code>$(exec_prefix)</code> is used for directories that contain
machine-specific files (such as executables and subroutine libraries),
while <code>$(prefix)</code> is used directly for other directories.

     <p>Running <span class="samp">make install</span> with a different value of <code>exec_prefix</code>
from the one used to build the program should <em>not</em> recompile the
program. 
</dl>

   <p>Executable programs are installed in one of the following directories.

     <dl>
<dt><code>bindir</code><dd><a name="index-bindir-1010"></a>The directory for installing executable programs that users can run. 
This should normally be <span class="file">/usr/local/bin</span>, but write it as
<span class="file">$(exec_prefix)/bin</span>. 
(If you are using Autoconf, write it as <span class="samp">@bindir@</span>.)

     <br><dt><code>sbindir</code><dd><a name="index-sbindir-1011"></a>The directory for installing executable programs that can be run from
the shell, but are only generally useful to system administrators.  This
should normally be <span class="file">/usr/local/sbin</span>, but write it as
<span class="file">$(exec_prefix)/sbin</span>. 
(If you are using Autoconf, write it as <span class="samp">@sbindir@</span>.)

     <br><dt><code>libexecdir</code><dd><a name="index-libexecdir-1012"></a><!-- This paragraph adjusted to avoid overfull hbox -roland 5jul94 -->
The directory for installing executable programs to be run by other
programs rather than by users.  This directory should normally be
<span class="file">/usr/local/libexec</span>, but write it as <span class="file">$(exec_prefix)/libexec</span>. 
(If you are using Autoconf, write it as <span class="samp">@libexecdir@</span>.)

     <p>The definition of <span class="samp">libexecdir</span> is the same for all packages, so
you should install your data in a subdirectory thereof.  Most packages
install their data under <span class="file">$(libexecdir)/</span><var>package-name</var><span class="file">/</span>,
possibly within additional subdirectories thereof, such as
<span class="file">$(libexecdir)/</span><var>package-name</var><span class="file">/</span><var>machine</var><span class="file">/</span><var>version</var>. 
</dl>

   <p>Data files used by the program during its execution are divided into
categories in two ways.

     <ul>
<li>Some files are normally modified by programs; others are never normally
modified (though users may edit some of these).

     <li>Some files are architecture-independent and can be shared by all
machines at a site; some are architecture-dependent and can be shared
only by machines of the same kind and operating system; others may never
be shared between two machines. 
</ul>

   <p>This makes for six different possibilities.  However, we want to
discourage the use of architecture-dependent files, aside from object
files and libraries.  It is much cleaner to make other data files
architecture-independent, and it is generally not hard.

   <p>Here are the variables Makefiles should use to specify directories
to put these various kinds of files in:

     <dl>
<dt><span class="samp">datarootdir</span><dd>The root of the directory tree for read-only architecture-independent
data files.  This should normally be <span class="file">/usr/local/share</span>, but
write it as <span class="file">$(prefix)/share</span>.  (If you are using Autoconf, write
it as <span class="samp">@datarootdir@</span>.)  <span class="samp">datadir</span>'s default value is
based on this variable; so are <span class="samp">infodir</span>, <span class="samp">mandir</span>, and
others.

     <br><dt><span class="samp">datadir</span><dd>The directory for installing idiosyncratic read-only
architecture-independent data files for this program.  This is usually
the same place as <span class="samp">datarootdir</span>, but we use the two separate
variables so that you can move these program-specific files without
altering the location for Info files, man pages, etc.

     <p>This should normally be <span class="file">/usr/local/share</span>, but write it as
<span class="file">$(datarootdir)</span>.  (If you are using Autoconf, write it as
<span class="samp">@datadir@</span>.)

     <p>The definition of <span class="samp">datadir</span> is the same for all packages, so you
should install your data in a subdirectory thereof.  Most packages
install their data under <span class="file">$(datadir)/</span><var>package-name</var><span class="file">/</span>.

     <br><dt><span class="samp">sysconfdir</span><dd>The directory for installing read-only data files that pertain to a
single machine&ndash;that is to say, files for configuring a host.  Mailer
and network configuration files, <span class="file">/etc/passwd</span>, and so forth belong
here.  All the files in this directory should be ordinary ASCII text
files.  This directory should normally be <span class="file">/usr/local/etc</span>, but
write it as <span class="file">$(prefix)/etc</span>. 
(If you are using Autoconf, write it as <span class="samp">@sysconfdir@</span>.)

     <p>Do not install executables here in this directory (they probably belong
in <span class="file">$(libexecdir)</span> or <span class="file">$(sbindir)</span>).  Also do not install
files that are modified in the normal course of their use (programs
whose purpose is to change the configuration of the system excluded). 
Those probably belong in <span class="file">$(localstatedir)</span>.

     <br><dt><span class="samp">sharedstatedir</span><dd>The directory for installing architecture-independent data files which
the programs modify while they run.  This should normally be
<span class="file">/usr/local/com</span>, but write it as <span class="file">$(prefix)/com</span>. 
(If you are using Autoconf, write it as <span class="samp">@sharedstatedir@</span>.)

     <br><dt><span class="samp">localstatedir</span><dd>The directory for installing data files which the programs modify while
they run, and that pertain to one specific machine.  Users should never
need to modify files in this directory to configure the package's
operation; put such configuration information in separate files that go
in <span class="file">$(datadir)</span> or <span class="file">$(sysconfdir)</span>.  <span class="file">$(localstatedir)</span>
should normally be <span class="file">/usr/local/var</span>, but write it as
<span class="file">$(prefix)/var</span>. 
(If you are using Autoconf, write it as <span class="samp">@localstatedir@</span>.) 
</dl>

   <p>These variables specify the directory for installing certain specific
types of files, if your program has them.  Every GNU package should
have Info files, so every program needs <span class="samp">infodir</span>, but not all
need <span class="samp">libdir</span> or <span class="samp">lispdir</span>.

     <dl>
<dt><span class="samp">includedir</span><dd><!-- rewritten to avoid overfull hbox -roland -->
The directory for installing header files to be included by user
programs with the C <span class="samp">#include</span> preprocessor directive.  This
should normally be <span class="file">/usr/local/include</span>, but write it as
<span class="file">$(prefix)/include</span>. 
(If you are using Autoconf, write it as <span class="samp">@includedir@</span>.)

     <p>Most compilers other than GCC do not look for header files in directory
<span class="file">/usr/local/include</span>.  So installing the header files this way is
only useful with GCC.  Sometimes this is not a problem because some
libraries are only really intended to work with GCC.  But some libraries
are intended to work with other compilers.  They should install their
header files in two places, one specified by <code>includedir</code> and one
specified by <code>oldincludedir</code>.

     <br><dt><span class="samp">oldincludedir</span><dd>The directory for installing <span class="samp">#include</span> header files for use with
compilers other than GCC.  This should normally be <span class="file">/usr/include</span>. 
(If you are using Autoconf, you can write it as <span class="samp">@oldincludedir@</span>.)

     <p>The Makefile commands should check whether the value of
<code>oldincludedir</code> is empty.  If it is, they should not try to use
it; they should cancel the second installation of the header files.

     <p>A package should not replace an existing header in this directory unless
the header came from the same package.  Thus, if your Foo package
provides a header file <span class="file">foo.h</span>, then it should install the header
file in the <code>oldincludedir</code> directory if either (1) there is no
<span class="file">foo.h</span> there or (2) the <span class="file">foo.h</span> that exists came from the Foo
package.

     <p>To tell whether <span class="file">foo.h</span> came from the Foo package, put a magic
string in the file&mdash;part of a comment&mdash;and <code>grep</code> for that string.

     <br><dt><span class="samp">docdir</span><dd>The directory for installing documentation files (other than Info) for
this package.  By default, it should be
<span class="file">/usr/local/share/doc/</span><var>yourpkg</var>, but it should be written as
<span class="file">$(datarootdir)/doc/</span><var>yourpkg</var>.  (If you are using Autoconf,
write it as <span class="samp">@docdir@</span>.)  The <var>yourpkg</var> subdirectory, which
may include a version number, prevents collisions among files with
common names, such as <span class="file">README</span>.

     <br><dt><span class="samp">infodir</span><dd>The directory for installing the Info files for this package.  By
default, it should be <span class="file">/usr/local/share/info</span>, but it should be
written as <span class="file">$(datarootdir)/info</span>.  (If you are using Autoconf,
write it as <span class="samp">@infodir@</span>.)  <code>infodir</code> is separate from
<code>docdir</code> for compatibility with existing practice.

     <br><dt><span class="samp">htmldir</span><dt><span class="samp">dvidir</span><dt><span class="samp">pdfdir</span><dt><span class="samp">psdir</span><dd>Directories for installing documentation files in the particular
format.  (It is not required to support documentation in all these
formats.)  They should all be set to <code>$(docdir)</code> by default.  (If
you are using Autoconf, write them as <span class="samp">@htmldir@</span>,
<span class="samp">@dvidir@</span>, etc.)  Packages which supply several translations
of their documentation should install them in
<span class="samp">$(htmldir)/</span><var>ll</var>, <span class="samp">$(pdfdir)/</span><var>ll</var>, etc. where
<var>ll</var> is a locale abbreviation such as <span class="samp">en</span> or <span class="samp">pt_BR</span>.

     <br><dt><span class="samp">libdir</span><dd>The directory for object files and libraries of object code.  Do not
install executables here, they probably ought to go in <span class="file">$(libexecdir)</span>
instead.  The value of <code>libdir</code> should normally be
<span class="file">/usr/local/lib</span>, but write it as <span class="file">$(exec_prefix)/lib</span>. 
(If you are using Autoconf, write it as <span class="samp">@libdir@</span>.)

     <br><dt><span class="samp">lispdir</span><dd>The directory for installing any Emacs Lisp files in this package.  By
default, it should be <span class="file">/usr/local/share/emacs/site-lisp</span>, but it
should be written as <span class="file">$(datarootdir)/emacs/site-lisp</span>.

     <p>If you are using Autoconf, write the default as <span class="samp">@lispdir@</span>. 
In order to make <span class="samp">@lispdir@</span> work, you need the following lines
in your <span class="file">configure.in</span> file:

     <pre class="example">          lispdir='${datarootdir}/emacs/site-lisp'
          AC_SUBST(lispdir)
     </pre>
     <br><dt><span class="samp">localedir</span><dd>The directory for installing locale-specific message catalogs for this
package.  By default, it should be <span class="file">/usr/local/share/locale</span>, but
it should be written as <span class="file">$(datarootdir)/locale</span>.  (If you are
using Autoconf, write it as <span class="samp">@localedir@</span>.)  This directory
usually has a subdirectory per locale. 
</dl>

   <p>Unix-style man pages are installed in one of the following:

     <dl>
<dt><span class="samp">mandir</span><dd>The top-level directory for installing the man pages (if any) for this
package.  It will normally be <span class="file">/usr/local/share/man</span>, but you
should write it as <span class="file">$(datarootdir)/man</span>.  (If you are using
Autoconf, write it as <span class="samp">@mandir@</span>.)

     <br><dt><span class="samp">man1dir</span><dd>The directory for installing section 1 man pages.  Write it as
<span class="file">$(mandir)/man1</span>. 
<br><dt><span class="samp">man2dir</span><dd>The directory for installing section 2 man pages.  Write it as
<span class="file">$(mandir)/man2</span>
<br><dt><span class="samp">...</span><dd>
<strong>Don't make the primary documentation for any GNU software be a
man page.  Write a manual in Texinfo instead.  Man pages are just for
the sake of people running GNU software on Unix, which is a secondary
application only.</strong>

     <br><dt><span class="samp">manext</span><dd>The file name extension for the installed man page.  This should contain
a period followed by the appropriate digit; it should normally be <span class="samp">.1</span>.

     <br><dt><span class="samp">man1ext</span><dd>The file name extension for installed section 1 man pages. 
<br><dt><span class="samp">man2ext</span><dd>The file name extension for installed section 2 man pages. 
<br><dt><span class="samp">...</span><dd>Use these names instead of <span class="samp">manext</span> if the package needs to install man
pages in more than one section of the manual. 
</dl>

   <p>And finally, you should set the following variable:

     <dl>
<dt><span class="samp">srcdir</span><dd>The directory for the sources being compiled.  The value of this
variable is normally inserted by the <code>configure</code> shell script. 
(If you are using Autconf, use <span class="samp">srcdir = @srcdir@</span>.) 
</dl>

   <p>For example:

<pre class="smallexample">     <!-- I have changed some of the comments here slightly to fix an overfull -->
     <!-- hbox, so the make manual can format correctly. -roland -->
     # Common prefix for installation directories.
     # NOTE: This directory must exist when you start the install.
     prefix = /usr/local
     datarootdir = $(prefix)/share
     datadir = $(datarootdir)
     exec_prefix = $(prefix)
     # Where to put the executable for the command `gcc'.
     bindir = $(exec_prefix)/bin
     # Where to put the directories used by the compiler.
     libexecdir = $(exec_prefix)/libexec
     # Where to put the Info files.
     infodir = $(datarootdir)/info
</pre>
   <p>If your program installs a large number of files into one of the
standard user-specified directories, it might be useful to group them
into a subdirectory particular to that program.  If you do this, you
should write the <code>install</code> rule to create these subdirectories.

   <p>Do not expect the user to include the subdirectory name in the value of
any of the variables listed above.  The idea of having a uniform set of
variable names for installation directories is to enable the user to
specify the exact same values for several different GNU packages.  In
order for this to be useful, all the packages must be designed so that
they will work sensibly when the user does so.

<div class="node">
<p><hr>
<a name="Standard-Targets"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Install-Command-Categories">Install Command Categories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Directory-Variables">Directory Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefile-Conventions">Makefile Conventions</a>
<br>
</div>

<h3 class="section">14.5 Standard Targets for Users</h3>

<p>All GNU programs should have the following targets in their Makefiles:

     <dl>
<dt><span class="samp">all</span><dd>Compile the entire program.  This should be the default target.  This
target need not rebuild any documentation files; Info files should
normally be included in the distribution, and DVI files should be made
only when explicitly asked for.

     <p>By default, the Make rules should compile and link with <span class="samp">-g</span>, so
that executable programs have debugging symbols.  Users who don't mind
being helpless can strip the executables later if they wish.

     <br><dt><span class="samp">install</span><dd>Compile the program and copy the executables, libraries, and so on to
the file names where they should reside for actual use.  If there is a
simple test to verify that a program is properly installed, this target
should run that test.

     <p>Do not strip executables when installing them.  Devil-may-care users can
use the <code>install-strip</code> target to do that.

     <p>If possible, write the <code>install</code> target rule so that it does not
modify anything in the directory where the program was built, provided
<span class="samp">make all</span> has just been done.  This is convenient for building the
program under one user name and installing it under another.

     <p>The commands should create all the directories in which files are to be
installed, if they don't already exist.  This includes the directories
specified as the values of the variables <code>prefix</code> and
<code>exec_prefix</code>, as well as all subdirectories that are needed. 
One way to do this is by means of an <code>installdirs</code> target
as described below.

     <p>Use <span class="samp">-</span> before any command for installing a man page, so that
<code>make</code> will ignore any errors.  This is in case there are systems
that don't have the Unix man page documentation system installed.

     <p>The way to install Info files is to copy them into <span class="file">$(infodir)</span>
with <code>$(INSTALL_DATA)</code> (see <a href="#Command-Variables">Command Variables</a>), and then run
the <code>install-info</code> program if it is present.  <code>install-info</code>
is a program that edits the Info <span class="file">dir</span> file to add or update the
menu entry for the given Info file; it is part of the Texinfo package. 
Here is a sample rule to install an Info file:

     <!-- This example has been carefully formatted for the Make manual. -->
<!-- Please do not reformat it without talking to roland@gnu.ai.mit.edu. -->
<pre class="smallexample">          $(DESTDIR)$(infodir)/foo.info: foo.info
                  $(POST_INSTALL)
          # There may be a newer info file in . than in srcdir.
                  -if test -f foo.info; then d=.; \
                   else d=$(srcdir); fi; \
                  $(INSTALL_DATA) $$d/foo.info $(DESTDIR)$@; \
          # Run install-info only if it exists.
          # Use `if' instead of just prepending `-' to the
          # line so we notice real errors from install-info.
          # We use `$(SHELL) -c' because some shells do not
          # fail gracefully when there is an unknown command.
                  if $(SHELL) -c 'install-info --version' \
                     &gt;/dev/null 2&gt;&amp;1; then \
                    install-info --dir-file=$(DESTDIR)$(infodir)/dir \
                                 $(DESTDIR)$(infodir)/foo.info; \
                  else true; fi
     </pre>
     <p>When writing the <code>install</code> target, you must classify all the
commands into three categories: normal ones, <dfn>pre-installation</dfn>
commands and <dfn>post-installation</dfn> commands.  See <a href="#Install-Command-Categories">Install Command Categories</a>.

     <br><dt><span class="samp">install-html</span><dt><span class="samp">install-dvi</span><dt><span class="samp">install-pdf</span><dt><span class="samp">install-ps</span><dd>These targets install documentation in formats other than Info;
they're intended to be called explicitly by the person installing the
package, if that format is desired.  GNU prefers Info files, so these
must be installed by the <code>install</code> target.

     <p>When you have many documentation files to install, we recommend that
you avoid collisions and clutter by arranging for these targets to
install in subdirectories of the appropriate installation directory,
such as <code>htmldir</code>.  As one example, if your package has multiple
manuals, and you wish to install HTML documentation with many files
(such as the &ldquo;split&rdquo; mode output by <code>makeinfo --html</code>), you'll
certainly want to use subdirectories, or two nodes with the same name
in different manuals will overwrite each other.

     <br><dt><span class="samp">uninstall</span><dd>Delete all the installed files&mdash;the copies that the <span class="samp">install</span>
and <span class="samp">install-*</span> targets create.

     <p>This rule should not modify the directories where compilation is done,
only the directories where files are installed.

     <p>The uninstallation commands are divided into three categories, just like
the installation commands.  See <a href="#Install-Command-Categories">Install Command Categories</a>.

     <br><dt><span class="samp">install-strip</span><dd>Like <code>install</code>, but strip the executable files while installing
them.  In simple cases, this target can use the <code>install</code> target in
a simple way:

     <pre class="smallexample">          install-strip:
                  $(MAKE) INSTALL_PROGRAM='$(INSTALL_PROGRAM) -s' \
                          install
     </pre>
     <p>But if the package installs scripts as well as real executables, the
<code>install-strip</code> target can't just refer to the <code>install</code>
target; it has to strip the executables but not the scripts.

     <p><code>install-strip</code> should not strip the executables in the build
directory which are being copied for installation.  It should only strip
the copies that are installed.

     <p>Normally we do not recommend stripping an executable unless you are sure
the program has no bugs.  However, it can be reasonable to install a
stripped executable for actual execution while saving the unstripped
executable elsewhere in case there is a bug.

     <!-- The gratuitous blank line here is to make the table look better -->
<!-- in the printed Make manual.  Please leave it in. -->
<br><dt><span class="samp">clean</span><dd>
Delete all files in the current directory that are normally created by
building the program.  Also delete files in other directories if they
are created by this makefile.  However, don't delete the files that
record the configuration.  Also preserve files that could be made by
building, but normally aren't because the distribution comes with
them.  There is no need to delete parent directories that were created
with <span class="samp">mkdir -p</span>, since they could have existed anyway.

     <p>Delete <span class="file">.dvi</span> files here if they are not part of the distribution.

     <br><dt><span class="samp">distclean</span><dd>Delete all files in the current directory (or created by this
makefile) that are created by configuring or building the program.  If
you have unpacked the source and built the program without creating
any other files, <span class="samp">make distclean</span> should leave only the files
that were in the distribution.  However, there is no need to delete
parent directories that were created with <span class="samp">mkdir -p</span>, since they
could have existed anyway.

     <br><dt><span class="samp">mostlyclean</span><dd>Like <span class="samp">clean</span>, but may refrain from deleting a few files that people
normally don't want to recompile.  For example, the <span class="samp">mostlyclean</span>
target for GCC does not delete <span class="file">libgcc.a</span>, because recompiling it
is rarely necessary and takes a lot of time.

     <br><dt><span class="samp">maintainer-clean</span><dd>Delete almost everything that can be reconstructed with this Makefile. 
This typically includes everything deleted by <code>distclean</code>, plus
more: C source files produced by Bison, tags tables, Info files, and
so on.

     <p>The reason we say &ldquo;almost everything&rdquo; is that running the command
<span class="samp">make maintainer-clean</span> should not delete <span class="file">configure</span> even
if <span class="file">configure</span> can be remade using a rule in the Makefile.  More
generally, <span class="samp">make maintainer-clean</span> should not delete anything
that needs to exist in order to run <span class="file">configure</span> and then begin to
build the program.  Also, there is no need to delete parent
directories that were created with <span class="samp">mkdir -p</span>, since they could
have existed anyway.  These are the only exceptions;
<code>maintainer-clean</code> should delete everything else that can be
rebuilt.

     <p>The <span class="samp">maintainer-clean</span> target is intended to be used by a maintainer of
the package, not by ordinary users.  You may need special tools to
reconstruct some of the files that <span class="samp">make maintainer-clean</span> deletes. 
Since these files are normally included in the distribution, we don't
take care to make them easy to reconstruct.  If you find you need to
unpack the full distribution again, don't blame us.

     <p>To help make users aware of this, the commands for the special
<code>maintainer-clean</code> target should start with these two:

     <pre class="smallexample">          @echo 'This command is intended for maintainers to use; it'
          @echo 'deletes files that may need special tools to rebuild.'
     </pre>
     <br><dt><span class="samp">TAGS</span><dd>Update a tags table for this program. 
<!-- ADR: how? -->

     <br><dt><span class="samp">info</span><dd>Generate any Info files needed.  The best way to write the rules is as
follows:

     <pre class="smallexample">          info: foo.info
          
          foo.info: foo.texi chap1.texi chap2.texi
                  $(MAKEINFO) $(srcdir)/foo.texi
     </pre>
     <p class="noindent">You must define the variable <code>MAKEINFO</code> in the Makefile.  It should
run the <code>makeinfo</code> program, which is part of the Texinfo
distribution.

     <p>Normally a GNU distribution comes with Info files, and that means the
Info files are present in the source directory.  Therefore, the Make
rule for an info file should update it in the source directory.  When
users build the package, ordinarily Make will not update the Info files
because they will already be up to date.

     <br><dt><span class="samp">dvi</span><dt><span class="samp">html</span><dt><span class="samp">pdf</span><dt><span class="samp">ps</span><dd>Generate documentation files in the given format, if possible. 
Here's an example rule for generating DVI files from Texinfo:

     <pre class="smallexample">          dvi: foo.dvi
          
          foo.dvi: foo.texi chap1.texi chap2.texi
                  $(TEXI2DVI) $(srcdir)/foo.texi
     </pre>
     <p class="noindent">You must define the variable <code>TEXI2DVI</code> in the Makefile.  It should
run the program <code>texi2dvi</code>, which is part of the Texinfo
distribution.<a rel="footnote" href="#fn-3" name="fnd-3"><sup>3</sup></a>  Alternatively,
write just the dependencies, and allow GNU <code>make</code> to provide the command.

     <p>Here's another example, this one for generating HTML from Texinfo:

     <pre class="smallexample">          html: foo.html
          
          foo.html: foo.texi chap1.texi chap2.texi
                  $(TEXI2HTML) $(srcdir)/foo.texi
     </pre>
     <p class="noindent">Again, you would define the variable <code>TEXI2HTML</code> in the Makefile;
for example, it might run <code>makeinfo --no-split --html</code>
(<span class="command">makeinfo</span> is part of the Texinfo distribution).

     <br><dt><span class="samp">dist</span><dd>Create a distribution tar file for this program.  The tar file should be
set up so that the file names in the tar file start with a subdirectory
name which is the name of the package it is a distribution for.  This
name can include the version number.

     <p>For example, the distribution tar file of GCC version 1.40 unpacks into
a subdirectory named <span class="file">gcc-1.40</span>.

     <p>The easiest way to do this is to create a subdirectory appropriately
named, use <code>ln</code> or <code>cp</code> to install the proper files in it, and
then <code>tar</code> that subdirectory.

     <p>Compress the tar file with <code>gzip</code>.  For example, the actual
distribution file for GCC version 1.40 is called <span class="file">gcc-1.40.tar.gz</span>.

     <p>The <code>dist</code> target should explicitly depend on all non-source files
that are in the distribution, to make sure they are up to date in the
distribution. 
See <a href="standards.html#Releases">Making Releases (GNU Coding Standards)</a>.

     <br><dt><span class="samp">check</span><dd>Perform self-tests (if any).  The user must build the program before
running the tests, but need not install the program; you should write
the self-tests so that they work when the program is built but not
installed. 
</dl>

   <p>The following targets are suggested as conventional names, for programs
in which they are useful.

     <dl>
<dt><code>installcheck</code><dd>Perform installation tests (if any).  The user must build and install
the program before running the tests.  You should not assume that
<span class="file">$(bindir)</span> is in the search path.

     <br><dt><code>installdirs</code><dd>It's useful to add a target named <span class="samp">installdirs</span> to create the
directories where files are installed, and their parent directories. 
There is a script called <span class="file">mkinstalldirs</span> which is convenient for
this; you can find it in the Texinfo package. 
<!-- It's in /gd/gnu/lib/mkinstalldirs. -->
You can use a rule like this:

     <!-- This has been carefully formatted to look decent in the Make manual. -->
<!-- Please be sure not to make it extend any further to the right.-roland -->
<pre class="smallexample">          # Make sure all installation directories (e.g. $(bindir))
          # actually exist by making them if necessary.
          installdirs: mkinstalldirs
                  $(srcdir)/mkinstalldirs $(bindir) $(datadir) \
                                          $(libdir) $(infodir) \
                                          $(mandir)
     </pre>
     <p class="noindent">or, if you wish to support <span class="env">DESTDIR</span>,

     <pre class="smallexample">          # Make sure all installation directories (e.g. $(bindir))
          # actually exist by making them if necessary.
          installdirs: mkinstalldirs
                  $(srcdir)/mkinstalldirs \
                      $(DESTDIR)$(bindir) $(DESTDIR)$(datadir) \
                      $(DESTDIR)$(libdir) $(DESTDIR)$(infodir) \
                      $(DESTDIR)$(mandir)
     </pre>
     <p>This rule should not modify the directories where compilation is done. 
It should do nothing but create installation directories. 
</dl>

<div class="node">
<p><hr>
<a name="Install-Command-Categories"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Standard-Targets">Standard Targets</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Makefile-Conventions">Makefile Conventions</a>
<br>
</div>

<h3 class="section">14.6 Install Command Categories</h3>

<p><a name="index-pre_002dinstallation-commands-1013"></a><a name="index-post_002dinstallation-commands-1014"></a>When writing the <code>install</code> target, you must classify all the
commands into three categories: normal ones, <dfn>pre-installation</dfn>
commands and <dfn>post-installation</dfn> commands.

   <p>Normal commands move files into their proper places, and set their
modes.  They may not alter any files except the ones that come entirely
from the package they belong to.

   <p>Pre-installation and post-installation commands may alter other files;
in particular, they can edit global configuration files or data bases.

   <p>Pre-installation commands are typically executed before the normal
commands, and post-installation commands are typically run after the
normal commands.

   <p>The most common use for a post-installation command is to run
<code>install-info</code>.  This cannot be done with a normal command, since
it alters a file (the Info directory) which does not come entirely and
solely from the package being installed.  It is a post-installation
command because it needs to be done after the normal command which
installs the package's Info files.

   <p>Most programs don't need any pre-installation commands, but we have the
feature just in case it is needed.

   <p>To classify the commands in the <code>install</code> rule into these three
categories, insert <dfn>category lines</dfn> among them.  A category line
specifies the category for the commands that follow.

   <p>A category line consists of a tab and a reference to a special Make
variable, plus an optional comment at the end.  There are three
variables you can use, one for each category; the variable name
specifies the category.  Category lines are no-ops in ordinary execution
because these three Make variables are normally undefined (and you
<em>should not</em> define them in the makefile).

   <p>Here are the three possible category lines, each with a comment that
explains what it means:

<pre class="smallexample">             $(PRE_INSTALL)     # <span class="roman">Pre-install commands follow.</span>
             $(POST_INSTALL)    # <span class="roman">Post-install commands follow.</span>
             $(NORMAL_INSTALL)  # <span class="roman">Normal commands follow.</span>
</pre>
   <p>If you don't use a category line at the beginning of the <code>install</code>
rule, all the commands are classified as normal until the first category
line.  If you don't use any category lines, all the commands are
classified as normal.

   <p>These are the category lines for <code>uninstall</code>:

<pre class="smallexample">             $(PRE_UNINSTALL)     # <span class="roman">Pre-uninstall commands follow.</span>
             $(POST_UNINSTALL)    # <span class="roman">Post-uninstall commands follow.</span>
             $(NORMAL_UNINSTALL)  # <span class="roman">Normal commands follow.</span>
</pre>
   <p>Typically, a pre-uninstall command would be used for deleting entries
from the Info directory.

   <p>If the <code>install</code> or <code>uninstall</code> target has any dependencies
which act as subroutines of installation, then you should start
<em>each</em> dependency's commands with a category line, and start the
main target's commands with a category line also.  This way, you can
ensure that each command is placed in the right category regardless of
which of the dependencies actually run.

   <p>Pre-installation and post-installation commands should not run any
programs except for these:

<pre class="example">     [ basename bash cat chgrp chmod chown cmp cp dd diff echo
     egrep expand expr false fgrep find getopt grep gunzip gzip
     hostname install install-info kill ldconfig ln ls md5sum
     mkdir mkfifo mknod mv printenv pwd rm rmdir sed sort tee
     test touch true uname xargs yes
</pre>
   <p><a name="index-binary-packages-1015"></a>The reason for distinguishing the commands in this way is for the sake
of making binary packages.  Typically a binary package contains all the
executables and other files that need to be installed, and has its own
method of installing them&mdash;so it does not need to run the normal
installation commands.  But installing the binary package does need to
execute the pre-installation and post-installation commands.

   <p>Programs to build binary packages work by extracting the
pre-installation and post-installation commands.  Here is one way of
extracting the pre-installation commands (the <span class="option">-s</span> option to
<span class="command">make</span> is needed to silence messages about entering
subdirectories):

<pre class="smallexample">     make -s -n install -o all \
           PRE_INSTALL=pre-install \
           POST_INSTALL=post-install \
           NORMAL_INSTALL=normal-install \
       | gawk -f pre-install.awk
</pre>
   <p class="noindent">where the file <span class="file">pre-install.awk</span> could contain this:

<pre class="smallexample">     $0 ~ /^(normal-install|post-install)[ \t]*$/ {on = 0}
     on {print $0}
     $0 ~ /^pre-install[ \t]*$/ {on = 1}
</pre>
   <div class="node">
<p><hr>
<a name="Quick-Reference"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Error-Messages">Error Messages</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Makefile-Conventions">Makefile Conventions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="appendix">Appendix A Quick Reference</h2>

<p>This appendix summarizes the directives, text manipulation functions,
and special variables which GNU <code>make</code> understands. 
See <a href="#Special-Targets">Special Targets</a>, <a href="#Catalogue-of-Rules">Catalogue of Implicit Rules</a>,
and <a href="#Options-Summary">Summary of Options</a>,
for other summaries.

   <p>Here is a summary of the directives GNU <code>make</code> recognizes:

     <dl>
<dt><code>define </code><var>variable</var><dt><code>endef</code><dd>
Define a multi-line, recursively-expanded variable.<br>
See <a href="#Sequences">Sequences</a>.

     <br><dt><code>ifdef </code><var>variable</var><dt><code>ifndef </code><var>variable</var><dt><code>ifeq (</code><var>a</var><code>,</code><var>b</var><code>)</code><dt><code>ifeq "</code><var>a</var><code>" "</code><var>b</var><code>"</code><dt><code>ifeq '</code><var>a</var><code>' '</code><var>b</var><code>'</code><dt><code>ifneq (</code><var>a</var><code>,</code><var>b</var><code>)</code><dt><code>ifneq "</code><var>a</var><code>" "</code><var>b</var><code>"</code><dt><code>ifneq '</code><var>a</var><code>' '</code><var>b</var><code>'</code><dt><code>else</code><dt><code>endif</code><dd>
Conditionally evaluate part of the makefile.<br>
See <a href="#Conditionals">Conditionals</a>.

     <br><dt><code>include </code><var>file</var><dt><code>-include </code><var>file</var><dt><code>sinclude </code><var>file</var><dd>
Include another makefile.<br>
See <a href="#Include">Including Other Makefiles</a>.

     <br><dt><code>override </code><var>variable</var><code> = </code><var>value</var><dt><code>override </code><var>variable</var><code> := </code><var>value</var><dt><code>override </code><var>variable</var><code> += </code><var>value</var><dt><code>override </code><var>variable</var><code> ?= </code><var>value</var><dt><code>override define </code><var>variable</var><dt><code>endef</code><dd>
Define a variable, overriding any previous definition, even one from
the command line.<br>
See <a href="#Override-Directive">The <code>override</code> Directive</a>.

     <br><dt><code>export</code><dd>
Tell <code>make</code> to export all variables to child processes by default.<br>
See <a href="#Variables_002fRecursion">Communicating Variables to a Sub-<code>make</code></a>.

     <br><dt><code>export </code><var>variable</var><dt><code>export </code><var>variable</var><code> = </code><var>value</var><dt><code>export </code><var>variable</var><code> := </code><var>value</var><dt><code>export </code><var>variable</var><code> += </code><var>value</var><dt><code>export </code><var>variable</var><code> ?= </code><var>value</var><dt><code>unexport </code><var>variable</var><dd>Tell <code>make</code> whether or not to export a particular variable to child
processes.<br>
See <a href="#Variables_002fRecursion">Communicating Variables to a Sub-<code>make</code></a>.

     <br><dt><code>vpath </code><var>pattern</var> <var>path</var><dd>Specify a search path for files matching a <span class="samp">%</span> pattern.<br>
See <a href="#Selective-Search">The <code>vpath</code> Directive</a>.

     <br><dt><code>vpath </code><var>pattern</var><dd>Remove all search paths previously specified for <var>pattern</var>.

     <br><dt><code>vpath</code><dd>Remove all search paths previously specified in any <code>vpath</code>
directive. 
</dl>

   <p>Here is a summary of the built-in functions (see <a href="#Functions">Functions</a>):

     <dl>
<dt><code>$(subst </code><var>from</var><code>,</code><var>to</var><code>,</code><var>text</var><code>)</code><dd>Replace <var>from</var> with <var>to</var> in <var>text</var>.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(patsubst </code><var>pattern</var><code>,</code><var>replacement</var><code>,</code><var>text</var><code>)</code><dd>Replace words matching <var>pattern</var> with <var>replacement</var> in <var>text</var>.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(strip </code><var>string</var><code>)</code><dd>Remove excess whitespace characters from <var>string</var>.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(findstring </code><var>find</var><code>,</code><var>text</var><code>)</code><dd>Locate <var>find</var> in <var>text</var>.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(filter </code><var>pattern</var><code>...,</code><var>text</var><code>)</code><dd>Select words in <var>text</var> that match one of the <var>pattern</var> words.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(filter-out </code><var>pattern</var><code>...,</code><var>text</var><code>)</code><dd>Select words in <var>text</var> that <em>do not</em> match any of the <var>pattern</var> words.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(sort </code><var>list</var><code>)</code><dd>Sort the words in <var>list</var> lexicographically, removing duplicates.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(word </code><var>n</var><code>,</code><var>text</var><code>)</code><dd>Extract the <var>n</var>th word (one-origin) of <var>text</var>.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(words </code><var>text</var><code>)</code><dd>Count the number of words in <var>text</var>.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(wordlist </code><var>s</var><code>,</code><var>e</var><code>,</code><var>text</var><code>)</code><dd>Returns the list of words in <var>text</var> from <var>s</var> to <var>e</var>.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(firstword </code><var>names</var><code>...)</code><dd>Extract the first word of <var>names</var>.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(lastword </code><var>names</var><code>...)</code><dd>Extract the last word of <var>names</var>.<br>
See <a href="#Text-Functions">Functions for String Substitution and Analysis</a>.

     <br><dt><code>$(dir </code><var>names</var><code>...)</code><dd>Extract the directory part of each file name.<br>
See <a href="#File-Name-Functions">Functions for File Names</a>.

     <br><dt><code>$(notdir </code><var>names</var><code>...)</code><dd>Extract the non-directory part of each file name.<br>
See <a href="#File-Name-Functions">Functions for File Names</a>.

     <br><dt><code>$(suffix </code><var>names</var><code>...)</code><dd>Extract the suffix (the last <span class="samp">.</span> and following characters) of each file name.<br>
See <a href="#File-Name-Functions">Functions for File Names</a>.

     <br><dt><code>$(basename </code><var>names</var><code>...)</code><dd>Extract the base name (name without suffix) of each file name.<br>
See <a href="#File-Name-Functions">Functions for File Names</a>.

     <br><dt><code>$(addsuffix </code><var>suffix</var><code>,</code><var>names</var><code>...)</code><dd>Append <var>suffix</var> to each word in <var>names</var>.<br>
See <a href="#File-Name-Functions">Functions for File Names</a>.

     <br><dt><code>$(addprefix </code><var>prefix</var><code>,</code><var>names</var><code>...)</code><dd>Prepend <var>prefix</var> to each word in <var>names</var>.<br>
See <a href="#File-Name-Functions">Functions for File Names</a>.

     <br><dt><code>$(join </code><var>list1</var><code>,</code><var>list2</var><code>)</code><dd>Join two parallel lists of words.<br>
See <a href="#File-Name-Functions">Functions for File Names</a>.

     <br><dt><code>$(wildcard </code><var>pattern</var><code>...)</code><dd>Find file names matching a shell file name pattern (<em>not</em> a
<span class="samp">%</span> pattern).<br>
See <a href="#Wildcard-Function">The Function <code>wildcard</code></a>.

     <br><dt><code>$(realpath </code><var>names</var><code>...)</code><dd>For each file name in <var>names</var>, expand to an absolute name that
does not contain any <code>.</code>, <code>..</code>, nor symlinks.<br>
See <a href="#File-Name-Functions">Functions for File Names</a>.

     <br><dt><code>$(abspath </code><var>names</var><code>...)</code><dd>For each file name in <var>names</var>, expand to an absolute name that
does not contain any <code>.</code> or <code>..</code> components, but preserves
symlinks.<br>
See <a href="#File-Name-Functions">Functions for File Names</a>.

     <br><dt><code>$(error </code><var>text</var><code>...)</code><dd>
When this function is evaluated, <code>make</code> generates a fatal error
with the message <var>text</var>.<br>
See <a href="#Make-Control-Functions">Functions That Control Make</a>.

     <br><dt><code>$(warning </code><var>text</var><code>...)</code><dd>
When this function is evaluated, <code>make</code> generates a warning with
the message <var>text</var>.<br>
See <a href="#Make-Control-Functions">Functions That Control Make</a>.

     <br><dt><code>$(shell </code><var>command</var><code>)</code><dd>
Execute a shell command and return its output.<br>
See <a href="#Shell-Function">The <code>shell</code> Function</a>.

     <br><dt><code>$(origin </code><var>variable</var><code>)</code><dd>
Return a string describing how the <code>make</code> variable <var>variable</var> was
defined.<br>
See <a href="#Origin-Function">The <code>origin</code> Function</a>.

     <br><dt><code>$(flavor </code><var>variable</var><code>)</code><dd>
Return a string describing the flavor of the <code>make</code> variable
<var>variable</var>.<br>
See <a href="#Flavor-Function">The <code>flavor</code> Function</a>.

     <br><dt><code>$(foreach </code><var>var</var><code>,</code><var>words</var><code>,</code><var>text</var><code>)</code><dd>
Evaluate <var>text</var> with <var>var</var> bound to each word in <var>words</var>,
and concatenate the results.<br>
See <a href="#Foreach-Function">The <code>foreach</code> Function</a>.

     <br><dt><code>$(call </code><var>var</var><code>,</code><var>param</var><code>,...)</code><dd>
Evaluate the variable <var>var</var> replacing any references to <code>$(1)</code>,
<code>$(2)</code> with the first, second, etc. <var>param</var> values.<br>
See <a href="#Call-Function">The <code>call</code> Function</a>.

     <br><dt><code>$(eval </code><var>text</var><code>)</code><dd>
Evaluate <var>text</var> then read the results as makefile commands. 
Expands to the empty string.<br>
See <a href="#Eval-Function">The <code>eval</code> Function</a>.

     <br><dt><code>$(value </code><var>var</var><code>)</code><dd>
Evaluates to the contents of the variable <var>var</var>, with no expansion
performed on it.<br>
See <a href="#Value-Function">The <code>value</code> Function</a>. 
</dl>

   <p>Here is a summary of the automatic variables. 
See <a href="#Automatic-Variables">Automatic Variables</a>,
for full information.

     <dl>
<dt><code>$@</code><dd>The file name of the target.

     <br><dt><code>$%</code><dd>The target member name, when the target is an archive member.

     <br><dt><code>$&lt;</code><dd>The name of the first prerequisite.

     <br><dt><code>$?</code><dd>The names of all the prerequisites that are
newer than the target, with spaces between them. 
For prerequisites which are archive members, only
the member named is used (see <a href="#Archives">Archives</a>).

     <br><dt><code>$^</code><dt><code>$+</code><dd>The names of all the prerequisites, with spaces between them.  For
prerequisites which are archive members, only the member named is used
(see <a href="#Archives">Archives</a>).  The value of <code>$^</code> omits duplicate
prerequisites, while <code>$+</code> retains them and preserves their order.

     <br><dt><code>$*</code><dd>The stem with which an implicit rule matches
(see <a href="#Pattern-Match">How Patterns Match</a>).

     <br><dt><code>$(@D)</code><dt><code>$(@F)</code><dd>The directory part and the file-within-directory part of <code>$@</code>.

     <br><dt><code>$(*D)</code><dt><code>$(*F)</code><dd>The directory part and the file-within-directory part of <code>$*</code>.

     <br><dt><code>$(%D)</code><dt><code>$(%F)</code><dd>The directory part and the file-within-directory part of <code>$%</code>.

     <br><dt><code>$(&lt;D)</code><dt><code>$(&lt;F)</code><dd>The directory part and the file-within-directory part of <code>$&lt;</code>.

     <br><dt><code>$(^D)</code><dt><code>$(^F)</code><dd>The directory part and the file-within-directory part of <code>$^</code>.

     <br><dt><code>$(+D)</code><dt><code>$(+F)</code><dd>The directory part and the file-within-directory part of <code>$+</code>.

     <br><dt><code>$(?D)</code><dt><code>$(?F)</code><dd>The directory part and the file-within-directory part of <code>$?</code>. 
</dl>

   <p>These variables are used specially by GNU <code>make</code>:

     <dl>
<dt><code>MAKEFILES</code><dd>
Makefiles to be read on every invocation of <code>make</code>.<br>
See <a href="#MAKEFILES-Variable">The Variable <code>MAKEFILES</code></a>.

     <br><dt><code>VPATH</code><dd>
Directory search path for files not found in the current directory.<br>
See <a href="#General-Search"><code>VPATH</code> Search Path for All Prerequisites</a>.

     <br><dt><code>SHELL</code><dd>
The name of the system default command interpreter, usually <span class="file">/bin/sh</span>. 
You can set <code>SHELL</code> in the makefile to change the shell used to run
commands.  See <a href="#Execution">Command Execution</a>.  The <code>SHELL</code>
variable is handled specially when importing from and exporting to the
environment.  See <a href="#Choosing-the-Shell">Choosing the Shell</a>.

     <br><dt><code>MAKESHELL</code><dd>
On MS-DOS only, the name of the command interpreter that is to be used
by <code>make</code>.  This value takes precedence over the value of
<code>SHELL</code>.  See <a href="#Execution">MAKESHELL variable</a>.

     <br><dt><code>MAKE</code><dd>
The name with which <code>make</code> was invoked. 
Using this variable in commands has special meaning. 
See <a href="#MAKE-Variable">How the <code>MAKE</code> Variable Works</a>.

     <br><dt><code>MAKELEVEL</code><dd>
The number of levels of recursion (sub-<code>make</code>s).<br>
See <a href="#Variables_002fRecursion">Variables/Recursion</a>.

     <br><dt><code>MAKEFLAGS</code><dd>
The flags given to <code>make</code>.  You can set this in the environment or
a makefile to set flags.<br>
See <a href="#Options_002fRecursion">Communicating Options to a Sub-<code>make</code></a>.

     <p>It is <em>never</em> appropriate to use <code>MAKEFLAGS</code> directly on a
command line: its contents may not be quoted correctly for use in the
shell.  Always allow recursive <code>make</code>'s to obtain these values
through the environment from its parent.

     <br><dt><code>MAKECMDGOALS</code><dd>
The targets given to <code>make</code> on the command line.  Setting this
variable has no effect on the operation of <code>make</code>.<br>
See <a href="#Goals">Arguments to Specify the Goals</a>.

     <br><dt><code>CURDIR</code><dd>
Set to the pathname of the current working directory (after all
<code>-C</code> options are processed, if any).  Setting this variable has no
effect on the operation of <code>make</code>.<br>
See <a href="#Recursion">Recursive Use of <code>make</code></a>.

     <br><dt><code>SUFFIXES</code><dd>
The default list of suffixes before <code>make</code> reads any makefiles.

     <br><dt><code>.LIBPATTERNS</code><dd>Defines the naming of the libraries <code>make</code> searches for, and their
order.<br>
See <a href="#Libraries_002fSearch">Directory Search for Link Libraries</a>. 
</dl>

<div class="node">
<p><hr>
<a name="Error-Messages"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Complex-Makefile">Complex Makefile</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Quick-Reference">Quick Reference</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<!-- node-name,  next,  previous,  up -->
<h2 class="appendix">Appendix B Errors Generated by Make</h2>

<p>Here is a list of the more common errors you might see generated by
<code>make</code>, and some information about what they mean and how to fix
them.

   <p>Sometimes <code>make</code> errors are not fatal, especially in the presence
of a <code>-</code> prefix on a command script line, or the <code>-k</code> command
line option.  Errors that are fatal are prefixed with the string
<code>***</code>.

   <p>Error messages are all either prefixed with the name of the program
(usually <span class="samp">make</span>), or, if the error is found in a makefile, the name
of the file and linenumber containing the problem.

   <p>In the table below, these common prefixes are left off.

     <dl>
<dt><span class="samp">[</span><var>foo</var><span class="samp">] Error </span><var>NN</var><dt><span class="samp">[</span><var>foo</var><span class="samp">] </span><var>signal description</var><dd>These errors are not really <code>make</code> errors at all.  They mean that a
program that <code>make</code> invoked as part of a command script returned a
non-0 error code (<span class="samp">Error </span><var>NN</var>), which <code>make</code> interprets
as failure, or it exited in some other abnormal fashion (with a
signal of some type).  See <a href="#Errors">Errors in Commands</a>.

     <p>If no <code>***</code> is attached to the message, then the subprocess failed
but the rule in the makefile was prefixed with the <code>-</code> special
character, so <code>make</code> ignored the error.

     <br><dt><span class="samp">missing separator.  Stop.</span><dt><span class="samp">missing separator (did you mean TAB instead of 8 spaces?).  Stop.</span><dd>This means that <code>make</code> could not understand much of anything about
the command line it just read.  GNU <code>make</code> looks for various kinds
of separators (<code>:</code>, <code>=</code>, TAB characters, etc.) to help it
decide what kind of commandline it's seeing.  This means it couldn't
find a valid one.

     <p>One of the most common reasons for this message is that you (or perhaps
your oh-so-helpful editor, as is the case with many MS-Windows editors)
have attempted to indent your command scripts with spaces instead of a
TAB character.  In this case, <code>make</code> will use the second form of
the error above.  Remember that every line in the command script must
begin with a TAB character.  Eight spaces do not count.  See <a href="#Rule-Syntax">Rule Syntax</a>.

     <br><dt><span class="samp">commands commence before first target.  Stop.</span><dt><span class="samp">missing rule before commands.  Stop.</span><dd>This means the first thing in the makefile seems to be part of a command
script: it begins with a TAB character and doesn't appear to be a legal
<code>make</code> command (such as a variable assignment).  Command scripts
must always be associated with a target.

     <p>The second form is generated if the line has a semicolon as the first
non-whitespace character; <code>make</code> interprets this to mean you left
out the "target: prerequisite" section of a rule.  See <a href="#Rule-Syntax">Rule Syntax</a>.

     <br><dt><span class="samp">No rule to make target `</span><var>xxx</var><span class="samp">'.</span><dt><span class="samp">No rule to make target `</span><var>xxx</var><span class="samp">', needed by `</span><var>yyy</var><span class="samp">'.</span><dd>This means that <code>make</code> decided it needed to build a target, but
then couldn't find any instructions in the makefile on how to do that,
either explicit or implicit (including in the default rules database).

     <p>If you want that file to be built, you will need to add a rule to your
makefile describing how that target can be built.  Other possible
sources of this problem are typos in the makefile (if that filename is
wrong) or a corrupted source tree (if that file is not supposed to be
built, but rather only a prerequisite).

     <br><dt><span class="samp">No targets specified and no makefile found.  Stop.</span><dt><span class="samp">No targets.  Stop.</span><dd>The former means that you didn't provide any targets to be built on the
command line, and <code>make</code> couldn't find any makefiles to read in. 
The latter means that some makefile was found, but it didn't contain any
default goal and none was given on the command line.  GNU <code>make</code>
has nothing to do in these situations. 
See <a href="#Makefile-Arguments">Arguments to Specify the Makefile</a>.

     <br><dt><span class="samp">Makefile `</span><var>xxx</var><span class="samp">' was not found.</span><dt><span class="samp">Included makefile `</span><var>xxx</var><span class="samp">' was not found.</span><dd>A makefile specified on the command line (first form) or included
(second form) was not found.

     <br><dt><span class="samp">warning: overriding commands for target `</span><var>xxx</var><span class="samp">'</span><dt><span class="samp">warning: ignoring old commands for target `</span><var>xxx</var><span class="samp">'</span><dd>GNU <code>make</code> allows commands to be specified only once per target
(except for double-colon rules).  If you give commands for a target
which already has been defined to have commands, this warning is issued
and the second set of commands will overwrite the first set. 
See <a href="#Multiple-Rules">Multiple Rules for One Target</a>.

     <br><dt><span class="samp">Circular </span><var>xxx</var><span class="samp"> &lt;- </span><var>yyy</var><span class="samp"> dependency dropped.</span><dd>This means that <code>make</code> detected a loop in the dependency graph:
after tracing the prerequisite <var>yyy</var> of target <var>xxx</var>, and its
prerequisites, etc., one of them depended on <var>xxx</var> again.

     <br><dt><span class="samp">Recursive variable `</span><var>xxx</var><span class="samp">' references itself (eventually).  Stop.</span><dd>This means you've defined a normal (recursive) <code>make</code> variable
<var>xxx</var> that, when it's expanded, will refer to itself (<var>xxx</var>). 
This is not allowed; either use simply-expanded variables (<code>:=</code>) or
use the append operator (<code>+=</code>).  See <a href="#Using-Variables">How to Use Variables</a>.

     <br><dt><span class="samp">Unterminated variable reference.  Stop.</span><dd>This means you forgot to provide the proper closing parenthesis
or brace in your variable or function reference.

     <br><dt><span class="samp">insufficient arguments to function `</span><var>xxx</var><span class="samp">'.  Stop.</span><dd>This means you haven't provided the requisite number of arguments for
this function.  See the documentation of the function for a description
of its arguments.  See <a href="#Functions">Functions for Transforming Text</a>.

     <br><dt><span class="samp">missing target pattern.  Stop.</span><dt><span class="samp">multiple target patterns.  Stop.</span><dt><span class="samp">target pattern contains no `%'.  Stop.</span><dt><span class="samp">mixed implicit and static pattern rules.  Stop.</span><dd>These are generated for malformed static pattern rules.  The first means
there's no pattern in the target section of the rule; the second means
there are multiple patterns in the target section; the third means
the target doesn't contain a pattern character (<code>%</code>); and the
fourth means that all three parts of the static pattern rule contain
pattern characters (<code>%</code>)&ndash;only the first two parts should. 
See <a href="#Static-Usage">Syntax of Static Pattern Rules</a>.

     <br><dt><span class="samp">warning: -jN forced in submake: disabling jobserver mode.</span><dd>This warning and the next are generated if <code>make</code> detects error
conditions related to parallel processing on systems where
sub-<code>make</code>s can communicate (see <a href="#Options_002fRecursion">Communicating Options to a Sub-<code>make</code></a>).  This warning is
generated if a recursive invocation of a <code>make</code> process is forced
to have <span class="samp">-j</span><var>N</var> in its argument list (where <var>N</var> is greater
than one).  This could happen, for example, if you set the <code>MAKE</code>
environment variable to <span class="samp">make -j2</span>.  In this case, the
sub-<code>make</code> doesn't communicate with other <code>make</code> processes and
will simply pretend it has two jobs of its own.

     <br><dt><span class="samp">warning: jobserver unavailable: using -j1.  Add `+' to parent make rule.</span><dd>In order for <code>make</code> processes to communicate, the parent will pass
information to the child.  Since this could result in problems if the
child process isn't actually a <code>make</code>, the parent will only do this
if it thinks the child is a <code>make</code>.  The parent uses the normal
algorithms to determine this (see <a href="#MAKE-Variable">How the <code>MAKE</code> Variable Works</a>).  If the makefile is constructed such that the parent
doesn't know the child is a <code>make</code> process, then the child will
receive only part of the information necessary.  In this case, the child
will generate this warning message and proceed with its build in a
sequential manner.

   </dl>

<div class="node">
<p><hr>
<a name="Complex-Makefile"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Error-Messages">Error Messages</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="appendix">Appendix C Complex Makefile Example</h2>

<p>Here is the makefile for the GNU <code>tar</code> program.  This is a
moderately complex makefile.

   <p>Because it is the first target, the default goal is <span class="samp">all</span>.  An
interesting feature of this makefile is that <span class="file">testpad.h</span> is a
source file automatically created by the <code>testpad</code> program,
itself compiled from <span class="file">testpad.c</span>.

   <p>If you type <span class="samp">make</span> or <span class="samp">make all</span>, then <code>make</code> creates
the <span class="file">tar</span> executable, the <span class="file">rmt</span> daemon that provides
remote tape access, and the <span class="file">tar.info</span> Info file.

   <p>If you type <span class="samp">make install</span>, then <code>make</code> not only creates
<span class="file">tar</span>, <span class="file">rmt</span>, and <span class="file">tar.info</span>, but also installs
them.

   <p>If you type <span class="samp">make clean</span>, then <code>make</code> removes the <span class="samp">.o</span>
files, and the <span class="file">tar</span>, <span class="file">rmt</span>, <span class="file">testpad</span>,
<span class="file">testpad.h</span>, and <span class="file">core</span> files.

   <p>If you type <span class="samp">make distclean</span>, then <code>make</code> not only removes
the same files as does <span class="samp">make clean</span> but also the
<span class="file">TAGS</span>, <span class="file">Makefile</span>, and <span class="file">config.status</span> files. 
(Although it is not evident, this makefile (and
<span class="file">config.status</span>) is generated by the user with the
<code>configure</code> program, which is provided in the <code>tar</code>
distribution, but is not shown here.)

   <p>If you type <span class="samp">make realclean</span>, then <code>make</code> removes the same
files as does <span class="samp">make distclean</span> and also removes the Info files
generated from <span class="file">tar.texinfo</span>.

   <p>In addition, there are targets <code>shar</code> and <code>dist</code> that create
distribution kits.

<pre class="example">     # Generated automatically from Makefile.in by configure.
     # Un*x Makefile for GNU tar program.
     # Copyright (C) 1991 Free Software Foundation, Inc.
     
     # This program is free software; you can redistribute
     # it and/or modify it under the terms of the GNU
     # General Public License ...
     ...
     ...
     
     SHELL = /bin/sh
     
     #### Start of system configuration section. ####
     
     srcdir = .
     
     # If you use gcc, you should either run the
     # fixincludes script that comes with it or else use
     # gcc with the -traditional option.  Otherwise ioctl
     # calls will be compiled incorrectly on some systems.
     CC = gcc -O
     YACC = bison -y
     INSTALL = /usr/local/bin/install -c
     INSTALLDATA = /usr/local/bin/install -c -m 644
     
     # Things you might add to DEFS:
     # -DSTDC_HEADERS        If you have ANSI C headers and
     #                       libraries.
     # -DPOSIX               If you have POSIX.1 headers and
     #                       libraries.
     # -DBSD42               If you have sys/dir.h (unless
     #                       you use -DPOSIX), sys/file.h,
     #                       and st_blocks in `struct stat'.
     # -DUSG                 If you have System V/ANSI C
     #                       string and memory functions
     #                       and headers, sys/sysmacros.h,
     #                       fcntl.h, getcwd, no valloc,
     #                       and ndir.h (unless
     #                       you use -DDIRENT).
     # -DNO_MEMORY_H         If USG or STDC_HEADERS but do not
     #                       include memory.h.
     # -DDIRENT              If USG and you have dirent.h
     #                       instead of ndir.h.
     # -DSIGTYPE=int         If your signal handlers
     #                       return int, not void.
     # -DNO_MTIO             If you lack sys/mtio.h
     #                       (magtape ioctls).
     # -DNO_REMOTE           If you do not have a remote shell
     #                       or rexec.
     # -DUSE_REXEC           To use rexec for remote tape
     #                       operations instead of
     #                       forking rsh or remsh.
     # -DVPRINTF_MISSING     If you lack vprintf function
     #                       (but have _doprnt).
     # -DDOPRNT_MISSING      If you lack _doprnt function.
     #                       Also need to define
     #                       -DVPRINTF_MISSING.
     # -DFTIME_MISSING       If you lack ftime system call.
     # -DSTRSTR_MISSING      If you lack strstr function.
     # -DVALLOC_MISSING      If you lack valloc function.
     # -DMKDIR_MISSING       If you lack mkdir and
     #                       rmdir system calls.
     # -DRENAME_MISSING      If you lack rename system call.
     # -DFTRUNCATE_MISSING   If you lack ftruncate
     #                       system call.
     # -DV7                  On Version 7 Unix (not
     #                       tested in a long time).
     # -DEMUL_OPEN3          If you lack a 3-argument version
     #                       of open, and want to emulate it
     #                       with system calls you do have.
     # -DNO_OPEN3            If you lack the 3-argument open
     #                       and want to disable the tar -k
     #                       option instead of emulating open.
     # -DXENIX               If you have sys/inode.h
     #                       and need it 94 to be included.
     
     DEFS =  -DSIGTYPE=int -DDIRENT -DSTRSTR_MISSING \
             -DVPRINTF_MISSING -DBSD42
     # Set this to rtapelib.o unless you defined NO_REMOTE,
     # in which case make it empty.
     RTAPELIB = rtapelib.o
     LIBS =
     DEF_AR_FILE = /dev/rmt8
     DEFBLOCKING = 20
     
     CDEBUG = -g
     CFLAGS = $(CDEBUG) -I. -I$(srcdir) $(DEFS) \
             -DDEF_AR_FILE=\"$(DEF_AR_FILE)\" \
             -DDEFBLOCKING=$(DEFBLOCKING)
     LDFLAGS = -g
     
     prefix = /usr/local
     # Prefix for each installed program,
     # normally empty or `g'.
     binprefix =
     
     # The directory to install tar in.
     bindir = $(prefix)/bin
     
     # The directory to install the info files in.
     infodir = $(prefix)/info
     
     #### End of system configuration section. ####
     
     SRC1 =  tar.c create.c extract.c buffer.c \
             getoldopt.c update.c gnu.c mangle.c
     SRC2 =  version.c list.c names.c diffarch.c \
             port.c wildmat.c getopt.c
     SRC3 =  getopt1.c regex.c getdate.y
     SRCS =  $(SRC1) $(SRC2) $(SRC3)
     OBJ1 =  tar.o create.o extract.o buffer.o \
             getoldopt.o update.o gnu.o mangle.o
     OBJ2 =  version.o list.o names.o diffarch.o \
             port.o wildmat.o getopt.o
     OBJ3 =  getopt1.o regex.o getdate.o $(RTAPELIB)
     OBJS =  $(OBJ1) $(OBJ2) $(OBJ3)
     AUX =   README COPYING ChangeLog Makefile.in  \
             makefile.pc configure configure.in \
             tar.texinfo tar.info* texinfo.tex \
             tar.h port.h open3.h getopt.h regex.h \
             rmt.h rmt.c rtapelib.c alloca.c \
             msd_dir.h msd_dir.c tcexparg.c \
             level-0 level-1 backup-specs testpad.c
     
     .PHONY: all
     all:    tar rmt tar.info
     
     .PHONY: tar
     tar:    $(OBJS)
             $(CC) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)
     
     rmt:    rmt.c
             $(CC) $(CFLAGS) $(LDFLAGS) -o $@ rmt.c
     
     tar.info: tar.texinfo
             makeinfo tar.texinfo
     
     .PHONY: install
     install: all
             $(INSTALL) tar $(bindir)/$(binprefix)tar
             -test ! -f rmt || $(INSTALL) rmt /etc/rmt
             $(INSTALLDATA) $(srcdir)/tar.info* $(infodir)
     
     $(OBJS): tar.h port.h testpad.h
     regex.o buffer.o tar.o: regex.h
     # getdate.y has 8 shift/reduce conflicts.
     
     testpad.h: testpad
             ./testpad
     
     testpad: testpad.o
             $(CC) -o $@ testpad.o
     
     TAGS:   $(SRCS)
             etags $(SRCS)
     
     .PHONY: clean
     clean:
             rm -f *.o tar rmt testpad testpad.h core
     
     .PHONY: distclean
     distclean: clean
             rm -f TAGS Makefile config.status
     
     .PHONY: realclean
     realclean: distclean
             rm -f tar.info*
     
     .PHONY: shar
     shar: $(SRCS) $(AUX)
             shar $(SRCS) $(AUX) | compress \
               &gt; tar-`sed -e '/version_string/!d' \
                          -e 's/[^0-9.]*\([0-9.]*\).*/\1/' \
                          -e q
                          version.c`.shar.Z
     
     .PHONY: dist
     dist: $(SRCS) $(AUX)
             echo tar-`sed \
                  -e '/version_string/!d' \
                  -e 's/[^0-9.]*\([0-9.]*\).*/\1/' \
                  -e q
                  version.c` &gt; .fname
             -rm -rf `cat .fname`
             mkdir `cat .fname`
             ln $(SRCS) $(AUX) `cat .fname`
             tar chZf `cat .fname`.tar.Z `cat .fname`
             -rm -rf `cat .fname` .fname
     
     tar.zoo: $(SRCS) $(AUX)
             -rm -rf tmp.dir
             -mkdir tmp.dir
             -rm tar.zoo
             for X in $(SRCS) $(AUX) ; do \
                 echo $$X ; \
                 sed 's/$$/^M/' $$X \
                 &gt; tmp.dir/$$X ; done
             cd tmp.dir ; zoo aM ../tar.zoo *
             -rm -rf tmp.dir
</pre>
   <div class="node">
<p><hr>
<a name="GNU-Free-Documentation-License"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Concept-Index">Concept Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Complex-Makefile">Complex Makefile</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="appendixsection">Appendix D GNU Free Documentation License</h2>

<p><a name="index-FDL_002c-GNU-Free-Documentation-License-1016"></a><div align="center">Version 1.2, November 2002</div>

<pre class="display">     Copyright &copy; 2000,2001,2002 Free Software Foundation, Inc.
     51 Franklin St, Fifth Floor, Boston, MA  02110-1301, USA
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
     <ol type=1 start=0>
<li>PREAMBLE

     <p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <dfn>free</dfn> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially. 
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

     <p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

     <p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

     <li>APPLICABILITY AND DEFINITIONS

     <p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

     <p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

     <p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

     <p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

     <p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

     <p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent. 
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.

     <p>Examples of suitable formats for Transparent copies include plain
<span class="sc">ascii</span> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.

     <p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

     <p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.

     <p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

     <li>VERBATIM COPYING

     <p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

     <p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

     <li>COPYING IN QUANTITY

     <p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition. 
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

     <p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

     <p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material. 
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

     <p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

     <li>MODIFICATIONS

     <p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

          <ol type=A start=1>
<li>Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

          <li>List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

          <li>State on the Title page the name of the publisher of the
Modified Version, as the publisher.

          <li>Preserve all the copyright notices of the Document.

          <li>Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

          <li>Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

          <li>Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

          <li>Include an unaltered copy of this License.

          <li>Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

          <li>Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section. 
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

          <li>For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

          <li>Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

          <li>Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

          <li>Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

          <li>Preserve any Warranty Disclaimers.
          </ol>

     <p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice. 
These titles must be distinct from any other section titles.

     <p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

     <p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

     <p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

     <li>COMBINING DOCUMENTS

     <p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

     <p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number. 
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

     <p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;

     <li>COLLECTIONS OF DOCUMENTS

     <p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

     <p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

     <li>AGGREGATION WITH INDEPENDENT WORKS

     <p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit. 
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

     <p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form. 
Otherwise they must appear on printed covers that bracket the whole
aggregate.

     <li>TRANSLATION

     <p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4. 
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

     <p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.

     <li>TERMINATION

     <p>You may not copy, modify, sublicense, or distribute the Document except
as expressly provided for under this License.  Any other attempt to
copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this
License will not have their licenses terminated so long as such
parties remain in full compliance.

     <li>FUTURE REVISIONS OF THIS LICENSE

     <p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.

     <p>Each version of the License is given a distinguishing version number. 
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.
        </ol>

<h3 class="appendixsec">D.1 ADDENDUM: How to use this License for your documents</h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

<pre class="smallexample">       Copyright (C)  <var>year</var>  <var>your name</var>.
       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.2
       or any later version published by the Free Software Foundation;
       with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
       Texts.  A copy of the license is included in the section entitled ``GNU
       Free Documentation License''.
</pre>
   <p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with...Texts.&rdquo; line with this:

<pre class="smallexample">         with the Invariant Sections being <var>list their titles</var>, with
         the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
         being <var>list</var>.
</pre>
   <p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

   <p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

<!-- Local Variables: -->
<!-- ispell-local-pdict: "ispell-dict" -->
<!-- End: -->
<div class="node">
<p><hr>
<a name="Concept-Index"></a>Next:&nbsp;<a rel="next" accesskey="n" href="#Name-Index">Name Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="unnumbered">Index of Concepts</h2>

<ul class="index-cp" compact>
<li><a href="#index-_0040code_007b_0023_007d-_0028comments_0029_002c-in-commands-298"><code>#</code> (comments), in commands</a>: <a href="#Command-Syntax">Command Syntax</a></li>
<li><a href="#index-_0040code_007b_0023_007d-_0028comments_0029_002c-in-makefile-56"><code>#</code> (comments), in makefile</a>: <a href="#Makefile-Contents">Makefile Contents</a></li>
<li><a href="#index-_0040code_007b_0023include_007d-284"><code>#include</code></a>: <a href="#Automatic-Prerequisites">Automatic Prerequisites</a></li>
<li><a href="#index-_0040code_007b_0024_007d_002c-in-function-call-534"><code>$</code>, in function call</a>: <a href="#Syntax-of-Functions">Syntax of Functions</a></li>
<li><a href="#index-_0040code_007b_0024_007d_002c-in-rules-146"><code>$</code>, in rules</a>: <a href="#Rule-Syntax">Rule Syntax</a></li>
<li><a href="#index-_0040code_007b_0024_007d_002c-in-variable-name-499"><code>$</code>, in variable name</a>: <a href="#Computed-Names">Computed Names</a></li>
<li><a href="#index-_0040code_007b_0024_007d_002c-in-variable-reference-465"><code>$</code>, in variable reference</a>: <a href="#Reference">Reference</a></li>
<li><a href="#index-_0040code_007b_0025_007d_002c-in-pattern-rules-909"><code>%</code>, in pattern rules</a>: <a href="#Pattern-Intro">Pattern Intro</a></li>
<li><a href="#index-_0040code_007b_0025_007d_002c-quoting-in-_0040code_007bpatsubst_007d-541"><code>%</code>, quoting in <code>patsubst</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-_0040code_007b_0025_007d_002c-quoting-in-static-pattern-269"><code>%</code>, quoting in static pattern</a>: <a href="#Static-Usage">Static Usage</a></li>
<li><a href="#index-_0040code_007b_0025_007d_002c-quoting-in-_0040code_007bvpath_007d-184"><code>%</code>, quoting in <code>vpath</code></a>: <a href="#Selective-Search">Selective Search</a></li>
<li><a href="#index-_0040code_007b_0025_007d_002c-quoting-with-_0040code_007b_005c_007d-_0028backslash_0029-270"><code>%</code>, quoting with <code>\</code> (backslash)</a>: <a href="#Static-Usage">Static Usage</a></li>
<li><a href="#index-_0040code_007b_0025_007d_002c-quoting-with-_0040code_007b_005c_007d-_0028backslash_0029-185"><code>%</code>, quoting with <code>\</code> (backslash)</a>: <a href="#Selective-Search">Selective Search</a></li>
<li><a href="#index-_0040code_007b_0025_007d_002c-quoting-with-_0040code_007b_005c_007d-_0028backslash_0029-542"><code>%</code>, quoting with <code>\</code> (backslash)</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-_0040code_007b_002a_007d-_0028wildcard-character_0029-159"><code>*</code> (wildcard character)</a>: <a href="#Wildcards">Wildcards</a></li>
<li><a href="#index-_002b_002c-and-command-execution-682">+, and command execution</a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_002b_002c-and-commands-383">+, and commands</a>: <a href="#MAKE-Variable">MAKE Variable</a></li>
<li><a href="#index-_002b_002c-and-_0040code_007bdefine_007d-454">+, and <code>define</code></a>: <a href="#Sequences">Sequences</a></li>
<li><a href="#index-_002b_003d-508">+=</a>: <a href="#Appending">Appending</a></li>
<li><a href="#index-_002b_003d_002c-expansion-113">+=, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-_002cv-_0040r_007b_0028RCS-file-extension_0029_007d-833"><code>,v </code><span class="roman">(RCS file extension)</span></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_0040code_007b_002d_007d-_0028in-commands_0029-356"><code>-</code> (in commands)</a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-_002d_002c-and-_0040code_007bdefine_007d-453">-, and <code>define</code></a>: <a href="#Sequences">Sequences</a></li>
<li><a href="#index-_0040code_007b_002d_002dalways_002dmake_007d-703"><code>--always-make</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dassume_002dnew_007d-761"><code>--assume-new</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dassume_002dnew_007d-678"><code>--assume-new</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002d_002dassume_002dnew_007d_002c-and-recursion-416"><code>--assume-new</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002d_002dassume_002dold_007d-685"><code>--assume-old</code></a>: <a href="#Avoiding-Compilation">Avoiding Compilation</a></li>
<li><a href="#index-_0040code_007b_002d_002dassume_002dold_007d-734"><code>--assume-old</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dassume_002dold_007d_002c-and-recursion-415"><code>--assume-old</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002d_002dcheck_002dsymlink_002dtimes_007d-727"><code>--check-symlink-times</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002ddebug_007d-707"><code>--debug</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002ddirectory_007d-705"><code>--directory</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002ddirectory_007d-378"><code>--directory</code></a>: <a href="#Recursion">Recursion</a></li>
<li><a href="#index-_0040code_007b_002d_002ddirectory_007d_002c-and-_0040code_007b_002d_002dprint_002ddirectory_007d-440"><code>--directory</code>, and <code>--print-directory</code></a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-_0040code_007b_002d_002ddirectory_007d_002c-and-recursion-412"><code>--directory</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002d_002ddry_002drun_007d-730"><code>--dry-run</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002ddry_002drun_007d-316"><code>--dry-run</code></a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-_0040code_007b_002d_002ddry_002drun_007d-666"><code>--dry-run</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002d_002denvironment_002doverrides_007d-709"><code>--environment-overrides</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dfile_007d-711"><code>--file</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dfile_007d-66"><code>--file</code></a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-_0040code_007b_002d_002dfile_007d-644"><code>--file</code></a>: <a href="#Makefile-Arguments">Makefile Arguments</a></li>
<li><a href="#index-_0040code_007b_002d_002dfile_007d_002c-and-recursion-413"><code>--file</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002d_002dhelp_007d-714"><code>--help</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dignore_002derrors_007d-716"><code>--ignore-errors</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dignore_002derrors_007d-359"><code>--ignore-errors</code></a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-_0040code_007b_002d_002dinclude_002ddir_007d-718"><code>--include-dir</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dinclude_002ddir_007d-82"><code>--include-dir</code></a>: <a href="#Include">Include</a></li>
<li><a href="#index-_0040code_007b_002d_002djobs_007d-720"><code>--jobs</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002djobs_007d-344"><code>--jobs</code></a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-_0040code_007b_002d_002djobs_007d_002c-and-recursion-423"><code>--jobs</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002d_002djust_002dprint_007d-315"><code>--just-print</code></a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-_0040code_007b_002d_002djust_002dprint_007d-665"><code>--just-print</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002d_002djust_002dprint_007d-729"><code>--just-print</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dkeep_002dgoing_007d-722"><code>--keep-going</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dkeep_002dgoing_007d-362"><code>--keep-going</code></a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-_0040code_007b_002d_002dkeep_002dgoing_007d-696"><code>--keep-going</code></a>: <a href="#Testing">Testing</a></li>
<li><a href="#index-_0040code_007b_002d_002dload_002daverage_007d-724"><code>--load-average</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dload_002daverage_007d-352"><code>--load-average</code></a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-_0040code_007b_002d_002dmakefile_007d-645"><code>--makefile</code></a>: <a href="#Makefile-Arguments">Makefile Arguments</a></li>
<li><a href="#index-_0040code_007b_002d_002dmakefile_007d-712"><code>--makefile</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dmakefile_007d-67"><code>--makefile</code></a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-_0040code_007b_002d_002dmax_002dload_007d-725"><code>--max-load</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dmax_002dload_007d-351"><code>--max-load</code></a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-_0040code_007b_002d_002dnew_002dfile_007d-679"><code>--new-file</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002d_002dnew_002dfile_007d-760"><code>--new-file</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dnew_002dfile_007d_002c-and-recursion-417"><code>--new-file</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002d_002dno_002dbuiltin_002drules_007d-742"><code>--no-builtin-rules</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dno_002dbuiltin_002dvariables_007d-744"><code>--no-builtin-variables</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dno_002dkeep_002dgoing_007d-749"><code>--no-keep-going</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dno_002dprint_002ddirectory_007d-446"><code>--no-print-directory</code></a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-_0040code_007b_002d_002dno_002dprint_002ddirectory_007d-757"><code>--no-print-directory</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dold_002dfile_007d-733"><code>--old-file</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dold_002dfile_007d-684"><code>--old-file</code></a>: <a href="#Avoiding-Compilation">Avoiding Compilation</a></li>
<li><a href="#index-_0040code_007b_002d_002dold_002dfile_007d_002c-and-recursion-414"><code>--old-file</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002d_002dprint_002ddata_002dbase_007d-736"><code>--print-data-base</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dprint_002ddirectory_007d-756"><code>--print-directory</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dprint_002ddirectory_007d_002c-and-_0040code_007b_002d_002ddirectory_007d-444"><code>--print-directory</code>, and <code>--directory</code></a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-_0040code_007b_002d_002dprint_002ddirectory_007d_002c-and-recursion-445"><code>--print-directory</code>, and recursion</a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-_0040code_007b_002d_002dprint_002ddirectory_007d_002c-disabling-447"><code>--print-directory</code>, disabling</a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-_0040code_007b_002d_002dquestion_007d-673"><code>--question</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002d_002dquestion_007d-740"><code>--question</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dquiet_007d-747"><code>--quiet</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dquiet_007d-320"><code>--quiet</code></a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-_0040code_007b_002d_002drecon_007d-731"><code>--recon</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002drecon_007d-667"><code>--recon</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002d_002drecon_007d-317"><code>--recon</code></a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-_0040code_007b_002d_002dsilent_007d-746"><code>--silent</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dsilent_007d-319"><code>--silent</code></a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-_0040code_007b_002d_002dstop_007d-750"><code>--stop</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dtouch_007d-669"><code>--touch</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002d_002dtouch_007d-752"><code>--touch</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dtouch_007d_002c-and-recursion-386"><code>--touch</code>, and recursion</a>: <a href="#MAKE-Variable">MAKE Variable</a></li>
<li><a href="#index-_0040code_007b_002d_002dversion_007d-754"><code>--version</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dwarn_002dundefined_002dvariables_007d-762"><code>--warn-undefined-variables</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002d_002dwhat_002dif_007d-676"><code>--what-if</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002d_002dwhat_002dif_007d-759"><code>--what-if</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dB_007d-702"><code>-B</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002db_007d-700"><code>-b</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dC_007d-704"><code>-C</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dC_007d-377"><code>-C</code></a>: <a href="#Recursion">Recursion</a></li>
<li><a href="#index-_0040code_007b_002dC_007d_002c-and-_0040code_007b_002dw_007d-439"><code>-C</code>, and <code>-w</code></a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-_0040code_007b_002dC_007d_002c-and-recursion-408"><code>-C</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002dd_007d-706"><code>-d</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002de_007d-708"><code>-e</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002de_007d-_0028shell-flag_0029-287"><code>-e</code> (shell flag)</a>: <a href="#Automatic-Prerequisites">Automatic Prerequisites</a></li>
<li><a href="#index-_0040code_007b_002df_007d-646"><code>-f</code></a>: <a href="#Makefile-Arguments">Makefile Arguments</a></li>
<li><a href="#index-_0040code_007b_002df_007d-65"><code>-f</code></a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-_0040code_007b_002df_007d-710"><code>-f</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002df_007d_002c-and-recursion-409"><code>-f</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002dh_007d-713"><code>-h</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dI_007d-717"><code>-I</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dI_007d-81"><code>-I</code></a>: <a href="#Include">Include</a></li>
<li><a href="#index-_0040code_007b_002di_007d-358"><code>-i</code></a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-_0040code_007b_002di_007d-715"><code>-i</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dj_007d-719"><code>-j</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dj_007d-343"><code>-j</code></a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-_0040code_007b_002dj_007d_002c-and-archive-update-992"><code>-j</code>, and archive update</a>: <a href="#Archive-Pitfalls">Archive Pitfalls</a></li>
<li><a href="#index-_0040code_007b_002dj_007d_002c-and-recursion-422"><code>-j</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002dk_007d-361"><code>-k</code></a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-_0040code_007b_002dk_007d-721"><code>-k</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dk_007d-695"><code>-k</code></a>: <a href="#Testing">Testing</a></li>
<li><a href="#index-_0040code_007b_002dl_007d-723"><code>-l</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dL_007d-726"><code>-L</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dl_007d-_0028library-search_0029-208"><code>-l</code> (library search)</a>: <a href="#Libraries_002fSearch">Libraries/Search</a></li>
<li><a href="#index-_0040code_007b_002dl_007d-_0028load-average_0029-350"><code>-l</code> (load average)</a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-_0040code_007b_002dm_007d-701"><code>-m</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dM_007d-_0028to-compiler_0029-285"><code>-M</code> (to compiler)</a>: <a href="#Automatic-Prerequisites">Automatic Prerequisites</a></li>
<li><a href="#index-_0040code_007b_002dMM_007d-_0028to-GNU-compiler_0029-288"><code>-MM</code> (to GNU compiler)</a>: <a href="#Automatic-Prerequisites">Automatic Prerequisites</a></li>
<li><a href="#index-_0040code_007b_002dn_007d-314"><code>-n</code></a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-_0040code_007b_002dn_007d-668"><code>-n</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002dn_007d-728"><code>-n</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002do_007d-683"><code>-o</code></a>: <a href="#Avoiding-Compilation">Avoiding Compilation</a></li>
<li><a href="#index-_0040code_007b_002do_007d-732"><code>-o</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002do_007d_002c-and-recursion-410"><code>-o</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002dp_007d-735"><code>-p</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dq_007d-739"><code>-q</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dq_007d-674"><code>-q</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002dr_007d-741"><code>-r</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dR_007d-743"><code>-R</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002ds_007d-745"><code>-s</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dS_007d-748"><code>-S</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002ds_007d-318"><code>-s</code></a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-_0040code_007b_002dt_007d-751"><code>-t</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dt_007d-672"><code>-t</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002dt_007d_002c-and-recursion-384"><code>-t</code>, and recursion</a>: <a href="#MAKE-Variable">MAKE Variable</a></li>
<li><a href="#index-_0040code_007b_002dv_007d-753"><code>-v</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dW_007d-758"><code>-W</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dW_007d-677"><code>-W</code></a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-_0040code_007b_002dw_007d-755"><code>-w</code></a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-_0040code_007b_002dw_007d_002c-and-_0040code_007b_002dC_007d-442"><code>-w</code>, and <code>-C</code></a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-_0040code_007b_002dW_007d_002c-and-recursion-411"><code>-W</code>, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007b_002dw_007d_002c-and-recursion-443"><code>-w</code>, and recursion</a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-_0040code_007b_002dw_007d_002c-disabling-448"><code>-w</code>, disabling</a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-_0040code_007b_002ea_007d-_0028archives_0029-996"><code>.a</code> (archives)</a>: <a href="#Archive-Suffix-Rules">Archive Suffix Rules</a></li>
<li><a href="#index-_002ec-775"><code>.c</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002eC-780"><code>.C</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002ecc-778"><code>.cc</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002ech-822"><code>.ch</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002ecpp-779"><code>.cpp</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_0040code_007b_002ed_007d-290"><code>.d</code></a>: <a href="#Automatic-Prerequisites">Automatic Prerequisites</a></li>
<li><a href="#index-_002edef-793"><code>.def</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002edvi-818"><code>.dvi</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002ef-787"><code>.f</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002eF-789"><code>.F</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002einfo-828"><code>.info</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002el-807"><code>.l</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_0040code_007b_002eLIBPATTERNS_007d_002c-and-link-libraries-210"><code>.LIBPATTERNS</code>, and link libraries</a>: <a href="#Libraries_002fSearch">Libraries/Search</a></li>
<li><a href="#index-_002eln-810"><code>.ln</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002emod-794"><code>.mod</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002eo-801"><code>.o</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002ep-783"><code>.p</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_0040code_007b_002ePRECIOUS_007d-intermediate-files-905"><code>.PRECIOUS</code> intermediate files</a>: <a href="#Chained-Rules">Chained Rules</a></li>
<li><a href="#index-_002er-788"><code>.r</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002eS-798"><code>.S</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002es-797"><code>.s</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002esh-837"><code>.sh</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002esym-792"><code>.sym</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002etex-819"><code>.tex</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002etexi-829"><code>.texi</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002etexinfo-827"><code>.texinfo</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002etxinfo-830"><code>.txinfo</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002ew-821"><code>.w</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002eweb-820"><code>.web</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_002ey-804"><code>.y</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_0040code_007b_003a_003a_007d-rules-_0028double_002dcolon_0029-280"><code>::</code> rules (double-colon)</a>: <a href="#Double_002dColon">Double-Colon</a></li>
<li><a href="#index-_003a_003d-506">:=</a>: <a href="#Setting">Setting</a></li>
<li><a href="#index-_003a_003d-477">:=</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-_003d-505">=</a>: <a href="#Setting">Setting</a></li>
<li><a href="#index-_003d-472">=</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-_003d_002c-expansion-111">=, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-_0040code_007b_003f_007d-_0028wildcard-character_0029-160"><code>?</code> (wildcard character)</a>: <a href="#Wildcards">Wildcards</a></li>
<li><a href="#index-_003f_003d-507">?=</a>: <a href="#Setting">Setting</a></li>
<li><a href="#index-_003f_003d-485">?=</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-_003f_003d_002c-expansion-112">?=, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-_0040code_007b_0040_0040_007d-_0028in-commands_0029-311"><code>@</code> (in commands)</a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-_0040_0040_002c-and-_0040code_007bdefine_007d-452">@, and <code>define</code></a>: <a href="#Sequences">Sequences</a></li>
<li><a href="#index-_0040code_007b_005b_0040dots_007b_007d_005d_007d-_0028wildcard-characters_0029-161"><code>[...]</code> (wildcard characters)</a>: <a href="#Wildcards">Wildcards</a></li>
<li><a href="#index-_0040code_007b_005c_007d-_0028backslash_0029_002c-for-continuation-lines-20"><code>\</code> (backslash), for continuation lines</a>: <a href="#Simple-Makefile">Simple Makefile</a></li>
<li><a href="#index-_0040code_007b_005c_007d-_0028backslash_0029_002c-in-commands-304"><code>\</code> (backslash), in commands</a>: <a href="#Splitting-Lines">Splitting Lines</a></li>
<li><a href="#index-_0040code_007b_005c_007d-_0028backslash_0029_002c-to-quote-_0040code_007b_0025_007d-543"><code>\</code> (backslash), to quote <code>%</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-_0040code_007b_005c_007d-_0028backslash_0029_002c-to-quote-_0040code_007b_0025_007d-271"><code>\</code> (backslash), to quote <code>%</code></a>: <a href="#Static-Usage">Static Usage</a></li>
<li><a href="#index-_0040code_007b_005c_007d-_0028backslash_0029_002c-to-quote-_0040code_007b_0025_007d-186"><code>\</code> (backslash), to quote <code>%</code></a>: <a href="#Selective-Search">Selective Search</a></li>
<li><a href="#index-_0040code_007b_005f_005f_002eSYMDEF_007d-984"><code>__.SYMDEF</code></a>: <a href="#Archive-Symbols">Archive Symbols</a></li>
<li><a href="#index-abspath-606">abspath</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-algorithm-for-directory-search-189">algorithm for directory search</a>: <a href="#Search-Algorithm">Search Algorithm</a></li>
<li><a href="#index-_0040code_007ball_007d-_0040r_007b_0028standard-target_0029_007d-649"><code>all</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-appending-to-variables-509">appending to variables</a>: <a href="#Appending">Appending</a></li>
<li><a href="#index-ar-841"><code>ar</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-archive-981">archive</a>: <a href="#Archives">Archives</a></li>
<li><a href="#index-archive-member-targets-982">archive member targets</a>: <a href="#Archive-Members">Archive Members</a></li>
<li><a href="#index-archive-symbol-directory-updating-986">archive symbol directory updating</a>: <a href="#Archive-Symbols">Archive Symbols</a></li>
<li><a href="#index-archive_002c-and-_0040code_007b_002dj_007d-991">archive, and <code>-j</code></a>: <a href="#Archive-Pitfalls">Archive Pitfalls</a></li>
<li><a href="#index-archive_002c-and-parallel-execution-989">archive, and parallel execution</a>: <a href="#Archive-Pitfalls">Archive Pitfalls</a></li>
<li><a href="#index-archive_002c-suffix-rule-for-994">archive, suffix rule for</a>: <a href="#Archive-Suffix-Rules">Archive Suffix Rules</a></li>
<li><a href="#index-Arg-list-too-long-427">Arg list too long</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-arguments-of-functions-536">arguments of functions</a>: <a href="#Syntax-of-Functions">Syntax of Functions</a></li>
<li><a href="#index-as-796"><code>as</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-as-843"><code>as</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-assembly_002c-rule-to-compile-795">assembly, rule to compile</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-automatic-generation-of-prerequisites-79">automatic generation of prerequisites</a>: <a href="#Include">Include</a></li>
<li><a href="#index-automatic-generation-of-prerequisites-282">automatic generation of prerequisites</a>: <a href="#Automatic-Prerequisites">Automatic Prerequisites</a></li>
<li><a href="#index-automatic-variables-915">automatic variables</a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-automatic-variables-in-prerequisites-918">automatic variables in prerequisites</a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-backquotes-631">backquotes</a>: <a href="#Shell-Function">Shell Function</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-for-continuation-lines-21">backslash (<code>\</code>), for continuation lines</a>: <a href="#Simple-Makefile">Simple Makefile</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-in-commands-303">backslash (<code>\</code>), in commands</a>: <a href="#Splitting-Lines">Splitting Lines</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-to-quote-_0040code_007b_0025_007d-187">backslash (<code>\</code>), to quote <code>%</code></a>: <a href="#Selective-Search">Selective Search</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-to-quote-_0040code_007b_0025_007d-544">backslash (<code>\</code>), to quote <code>%</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-to-quote-_0040code_007b_0025_007d-272">backslash (<code>\</code>), to quote <code>%</code></a>: <a href="#Static-Usage">Static Usage</a></li>
<li><a href="#index-backslashes-in-pathnames-and-wildcard-expansion-175">backslashes in pathnames and wildcard expansion</a>: <a href="#Wildcard-Pitfall">Wildcard Pitfall</a></li>
<li><a href="#index-basename-589">basename</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-binary-packages-1015">binary packages</a>: <a href="#Install-Command-Categories">Install Command Categories</a></li>
<li><a href="#index-broken-pipe-345">broken pipe</a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-bugs_002c-reporting-5">bugs, reporting</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-built_002din-special-targets-228">built-in special targets</a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-C_002b_002b_002c-rule-to-compile-776">C++, rule to compile</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-C_002c-rule-to-compile-771">C, rule to compile</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-cc-847"><code>cc</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-cc-772"><code>cc</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_0040code_007bcd_007d-_0028shell-command_0029-326"><code>cd</code> (shell command)</a>: <a href="#Execution">Execution</a></li>
<li><a href="#index-_0040code_007bcd_007d-_0028shell-command_0029-382"><code>cd</code> (shell command)</a>: <a href="#MAKE-Variable">MAKE Variable</a></li>
<li><a href="#index-chains-of-rules-897">chains of rules</a>: <a href="#Chained-Rules">Chained Rules</a></li>
<li><a href="#index-_0040code_007bcheck_007d-_0040r_007b_0028standard-target_0029_007d-661"><code>check</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-_0040code_007bclean_007d-_0040r_007b_0028standard-target_0029_007d-650"><code>clean</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-_0040code_007bclean_007d-target-47"><code>clean</code> target</a>: <a href="#Cleanup">Cleanup</a></li>
<li><a href="#index-_0040code_007bclean_007d-target-25"><code>clean</code> target</a>: <a href="#Simple-Makefile">Simple Makefile</a></li>
<li><a href="#index-cleaning-up-45">cleaning up</a>: <a href="#Cleanup">Cleanup</a></li>
<li><a href="#index-_0040code_007bclobber_007d-_0040r_007b_0028standard-target_0029_007d-654"><code>clobber</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-co-851"><code>co</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-co-832"><code>co</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-combining-rules-by-prerequisite-44">combining rules by prerequisite</a>: <a href="#Combine-By-Prerequisite">Combine By Prerequisite</a></li>
<li><a href="#index-command-line-variable-definitions_002c-and-recursion-405">command line variable definitions, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-command-line-variables-691">command line variables</a>: <a href="#Overriding">Overriding</a></li>
<li><a href="#index-command-syntax-294">command syntax</a>: <a href="#Command-Syntax">Command Syntax</a></li>
<li><a href="#index-commands-143">commands</a>: <a href="#Rule-Syntax">Rule Syntax</a></li>
<li><a href="#index-commands-setting-shell-variables-328">commands setting shell variables</a>: <a href="#Execution">Execution</a></li>
<li><a href="#index-commands_002c-backslash-_0028_0040code_007b_005c_007d_0029-in-301">commands, backslash (<code>\</code>) in</a>: <a href="#Splitting-Lines">Splitting Lines</a></li>
<li><a href="#index-commands_002c-comments-in-297">commands, comments in</a>: <a href="#Command-Syntax">Command Syntax</a></li>
<li><a href="#index-commands_002c-echoing-312">commands, echoing</a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-commands_002c-empty-456">commands, empty</a>: <a href="#Empty-Commands">Empty Commands</a></li>
<li><a href="#index-commands_002c-errors-in-354">commands, errors in</a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-commands_002c-execution-322">commands, execution</a>: <a href="#Execution">Execution</a></li>
<li><a href="#index-commands_002c-execution-in-parallel-339">commands, execution in parallel</a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-commands_002c-expansion-630">commands, expansion</a>: <a href="#Shell-Function">Shell Function</a></li>
<li><a href="#index-commands_002c-how-to-write-291">commands, how to write</a>: <a href="#Commands">Commands</a></li>
<li><a href="#index-commands_002c-instead-of-executing-664">commands, instead of executing</a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-commands_002c-introduction-to-15">commands, introduction to</a>: <a href="#Rule-Introduction">Rule Introduction</a></li>
<li><a href="#index-commands_002c-quoting-newlines-in-302">commands, quoting newlines in</a>: <a href="#Splitting-Lines">Splitting Lines</a></li>
<li><a href="#index-commands_002c-sequences-of-450">commands, sequences of</a>: <a href="#Sequences">Sequences</a></li>
<li><a href="#index-commands_002c-splitting-299">commands, splitting</a>: <a href="#Splitting-Lines">Splitting Lines</a></li>
<li><a href="#index-commands_002c-using-variables-in-308">commands, using variables in</a>: <a href="#Variables-in-Commands">Variables in Commands</a></li>
<li><a href="#index-comments_002c-in-commands-296">comments, in commands</a>: <a href="#Command-Syntax">Command Syntax</a></li>
<li><a href="#index-comments_002c-in-makefile-55">comments, in makefile</a>: <a href="#Makefile-Contents">Makefile Contents</a></li>
<li><a href="#index-compatibility-999">compatibility</a>: <a href="#Features">Features</a></li>
<li><a href="#index-compatibility-in-exporting-398">compatibility in exporting</a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-compilation_002c-testing-694">compilation, testing</a>: <a href="#Testing">Testing</a></li>
<li><a href="#index-computed-variable-name-495">computed variable name</a>: <a href="#Computed-Names">Computed Names</a></li>
<li><a href="#index-conditional-expansion-609">conditional expansion</a>: <a href="#Conditional-Functions">Conditional Functions</a></li>
<li><a href="#index-conditional-variable-assignment-483">conditional variable assignment</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-conditionals-526">conditionals</a>: <a href="#Conditionals">Conditionals</a></li>
<li><a href="#index-continuation-lines-19">continuation lines</a>: <a href="#Simple-Makefile">Simple Makefile</a></li>
<li><a href="#index-controlling-make-634">controlling make</a>: <a href="#Make-Control-Functions">Make Control Functions</a></li>
<li><a href="#index-conventions-for-makefiles-1006">conventions for makefiles</a>: <a href="#Makefile-Conventions">Makefile Conventions</a></li>
<li><a href="#index-ctangle-817"><code>ctangle</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-ctangle-880"><code>ctangle</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-cweave-814"><code>cweave</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-cweave-876"><code>cweave</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-data-base-of-_0040code_007bmake_007d-rules-737">data base of <code>make</code> rules</a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-deducing-commands-_0028implicit-rules_0029-41">deducing commands (implicit rules)</a>: <a href="#make-Deduces">make Deduces</a></li>
<li><a href="#index-default-directories-for-included-makefiles-84">default directories for included makefiles</a>: <a href="#Include">Include</a></li>
<li><a href="#index-default-goal-29">default goal</a>: <a href="#How-Make-Works">How Make Works</a></li>
<li><a href="#index-default-goal-137">default goal</a>: <a href="#Rules">Rules</a></li>
<li><a href="#index-default-makefile-name-59">default makefile name</a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-default-rules_002c-last_002dresort-973">default rules, last-resort</a>: <a href="#Last-Resort">Last Resort</a></li>
<li><a href="#index-define_002c-expansion-114">define, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-defining-variables-verbatim-517">defining variables verbatim</a>: <a href="#Defining">Defining</a></li>
<li><a href="#index-deletion-of-target-files-365">deletion of target files</a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-deletion-of-target-files-370">deletion of target files</a>: <a href="#Interrupts">Interrupts</a></li>
<li><a href="#index-directive-54">directive</a>: <a href="#Makefile-Contents">Makefile Contents</a></li>
<li><a href="#index-directories_002c-printing-them-436">directories, printing them</a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-directories_002c-updating-archive-symbol-988">directories, updating archive symbol</a>: <a href="#Archive-Symbols">Archive Symbols</a></li>
<li><a href="#index-directory-part-580">directory part</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-directory-search-_0028_0040code_007bVPATH_007d_0029-181">directory search (<code>VPATH</code>)</a>: <a href="#Directory-Search">Directory Search</a></li>
<li><a href="#index-directory-search-_0028_0040code_007bVPATH_007d_0029_002c-and-implicit-rules-197">directory search (<code>VPATH</code>), and implicit rules</a>: <a href="#Implicit_002fSearch">Implicit/Search</a></li>
<li><a href="#index-directory-search-_0028_0040code_007bVPATH_007d_0029_002c-and-link-libraries-205">directory search (<code>VPATH</code>), and link libraries</a>: <a href="#Libraries_002fSearch">Libraries/Search</a></li>
<li><a href="#index-directory-search-_0028_0040code_007bVPATH_007d_0029_002c-and-shell-commands-195">directory search (<code>VPATH</code>), and shell commands</a>: <a href="#Commands_002fSearch">Commands/Search</a></li>
<li><a href="#index-directory-search-algorithm-190">directory search algorithm</a>: <a href="#Search-Algorithm">Search Algorithm</a></li>
<li><a href="#index-directory-search_002c-traditional-_0028GPATH_0029-192">directory search, traditional (GPATH)</a>: <a href="#Search-Algorithm">Search Algorithm</a></li>
<li><a href="#index-_0040code_007bdist_007d-_0040r_007b_0028standard-target_0029_007d-659"><code>dist</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-_0040code_007bdistclean_007d-_0040r_007b_0028standard-target_0029_007d-652"><code>distclean</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-in-function-call-535">dollar sign (<code>$</code>), in function call</a>: <a href="#Syntax-of-Functions">Syntax of Functions</a></li>
<li><a href="#index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-in-rules-145">dollar sign (<code>$</code>), in rules</a>: <a href="#Rule-Syntax">Rule Syntax</a></li>
<li><a href="#index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-in-variable-name-500">dollar sign (<code>$</code>), in variable name</a>: <a href="#Computed-Names">Computed Names</a></li>
<li><a href="#index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-in-variable-reference-466">dollar sign (<code>$</code>), in variable reference</a>: <a href="#Reference">Reference</a></li>
<li><a href="#index-DOS_002c-choosing-a-shell-in-335">DOS, choosing a shell in</a>: <a href="#Choosing-the-Shell">Choosing the Shell</a></li>
<li><a href="#index-double_002dcolon-rules-277">double-colon rules</a>: <a href="#Double_002dColon">Double-Colon</a></li>
<li><a href="#index-duplicate-words_002c-removing-563">duplicate words, removing</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-E2BIG-428">E2BIG</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-echoing-of-commands-309">echoing of commands</a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-editor-9">editor</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-Emacs-_0028_0040code_007bM_002dx-compile_007d_0029-363">Emacs (<code>M-x compile</code>)</a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-empty-commands-455">empty commands</a>: <a href="#Empty-Commands">Empty Commands</a></li>
<li><a href="#index-empty-targets-221">empty targets</a>: <a href="#Empty-Targets">Empty Targets</a></li>
<li><a href="#index-environment-520">environment</a>: <a href="#Environment">Environment</a></li>
<li><a href="#index-environment_002c-and-recursion-388">environment, and recursion</a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-environment_002c-_0040code_007bSHELL_007d-in-332">environment, <code>SHELL</code> in</a>: <a href="#Choosing-the-Shell">Choosing the Shell</a></li>
<li><a href="#index-error_002c-stopping-on-636">error, stopping on</a>: <a href="#Make-Control-Functions">Make Control Functions</a></li>
<li><a href="#index-errors-_0028in-commands_0029-353">errors (in commands)</a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-errors-with-wildcards-172">errors with wildcards</a>: <a href="#Wildcard-Pitfall">Wildcard Pitfall</a></li>
<li><a href="#index-evaluating-makefile-syntax-621">evaluating makefile syntax</a>: <a href="#Eval-Function">Eval Function</a></li>
<li><a href="#index-execution_002c-in-parallel-341">execution, in parallel</a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-execution_002c-instead-of-663">execution, instead of</a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-execution_002c-of-commands-323">execution, of commands</a>: <a href="#Execution">Execution</a></li>
<li><a href="#index-exit-status-_0028errors_0029-355">exit status (errors)</a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-exit-status-of-make-643">exit status of make</a>: <a href="#Running">Running</a></li>
<li><a href="#index-expansion_002c-secondary-125">expansion, secondary</a>: <a href="#Secondary-Expansion">Secondary Expansion</a></li>
<li><a href="#index-explicit-rule_002c-definition-of-50">explicit rule, definition of</a>: <a href="#Makefile-Contents">Makefile Contents</a></li>
<li><a href="#index-explicit-rule_002c-expansion-123">explicit rule, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-explicit-rules_002c-secondary-expansion-of-128">explicit rules, secondary expansion of</a>: <a href="#Secondary-Expansion">Secondary Expansion</a></li>
<li><a href="#index-exporting-variables-389">exporting variables</a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-f77-854"><code>f77</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-f77-786"><code>f77</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-FDL_002c-GNU-Free-Documentation-License-1016">FDL, GNU Free Documentation License</a>: <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></li>
<li><a href="#index-features-of-GNU-_0040code_007bmake_007d-997">features of GNU <code>make</code></a>: <a href="#Features">Features</a></li>
<li><a href="#index-features_002c-missing-1003">features, missing</a>: <a href="#Missing">Missing</a></li>
<li><a href="#index-file-name-functions-578">file name functions</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-file-name-of-makefile-60">file name of makefile</a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-file-name-of-makefile_002c-how-to-specify-71">file name of makefile, how to specify</a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-file-name-prefix_002c-adding-596">file name prefix, adding</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-file-name-suffix-587">file name suffix</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-file-name-suffix_002c-adding-593">file name suffix, adding</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-file-name-with-wildcards-157">file name with wildcards</a>: <a href="#Wildcards">Wildcards</a></li>
<li><a href="#index-file-name_002c-abspath-of-607">file name, abspath of</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-file-name_002c-basename-of-590">file name, basename of</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-file-name_002c-directory-part-581">file name, directory part</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-file-name_002c-nondirectory-part-583">file name, nondirectory part</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-file-name_002c-realpath-of-604">file name, realpath of</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-files_002c-assuming-new-681">files, assuming new</a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-files_002c-assuming-old-686">files, assuming old</a>: <a href="#Avoiding-Compilation">Avoiding Compilation</a></li>
<li><a href="#index-files_002c-avoiding-recompilation-of-687">files, avoiding recompilation of</a>: <a href="#Avoiding-Compilation">Avoiding Compilation</a></li>
<li><a href="#index-files_002c-intermediate-900">files, intermediate</a>: <a href="#Chained-Rules">Chained Rules</a></li>
<li><a href="#index-filtering-out-words-558">filtering out words</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-filtering-words-555">filtering words</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-finding-strings-552">finding strings</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-flags-698">flags</a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-flags-for-compilers-839">flags for compilers</a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-flavor-of-variable-628">flavor of variable</a>: <a href="#Flavor-Function">Flavor Function</a></li>
<li><a href="#index-flavors-of-variables-467">flavors of variables</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-_0040code_007bFORCE_007d-219"><code>FORCE</code></a>: <a href="#Force-Targets">Force Targets</a></li>
<li><a href="#index-force-targets-217">force targets</a>: <a href="#Force-Targets">Force Targets</a></li>
<li><a href="#index-Fortran_002c-rule-to-compile-784">Fortran, rule to compile</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-functions-533">functions</a>: <a href="#Functions">Functions</a></li>
<li><a href="#index-functions_002c-for-controlling-make-633">functions, for controlling make</a>: <a href="#Make-Control-Functions">Make Control Functions</a></li>
<li><a href="#index-functions_002c-for-file-names-577">functions, for file names</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-functions_002c-for-text-538">functions, for text</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-functions_002c-syntax-of-537">functions, syntax of</a>: <a href="#Syntax-of-Functions">Syntax of Functions</a></li>
<li><a href="#index-functions_002c-user-defined-616">functions, user defined</a>: <a href="#Call-Function">Call Function</a></li>
<li><a href="#index-g_002b_002b-777"><code>g++</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-g_002b_002b-849"><code>g++</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-gcc-773"><code>gcc</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-generating-prerequisites-automatically-283">generating prerequisites automatically</a>: <a href="#Automatic-Prerequisites">Automatic Prerequisites</a></li>
<li><a href="#index-generating-prerequisites-automatically-80">generating prerequisites automatically</a>: <a href="#Include">Include</a></li>
<li><a href="#index-get-856"><code>get</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-get-835"><code>get</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-globbing-_0028wildcards_0029-158">globbing (wildcards)</a>: <a href="#Wildcards">Wildcards</a></li>
<li><a href="#index-goal-31">goal</a>: <a href="#How-Make-Works">How Make Works</a></li>
<li><a href="#index-goal_002c-default-138">goal, default</a>: <a href="#Rules">Rules</a></li>
<li><a href="#index-goal_002c-default-30">goal, default</a>: <a href="#How-Make-Works">How Make Works</a></li>
<li><a href="#index-goal_002c-how-to-specify-647">goal, how to specify</a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-home-directory-164">home directory</a>: <a href="#Wildcards">Wildcards</a></li>
<li><a href="#index-IEEE-Standard-1003_002e2-2">IEEE Standard 1003.2</a>: <a href="#Overview">Overview</a></li>
<li><a href="#index-ifdef_002c-expansion-115">ifdef, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-ifeq_002c-expansion-116">ifeq, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-ifndef_002c-expansion-117">ifndef, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-ifneq_002c-expansion-118">ifneq, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-implicit-rule-765">implicit rule</a>: <a href="#Implicit-Rules">Implicit Rules</a></li>
<li><a href="#index-implicit-rule_002c-and-directory-search-199">implicit rule, and directory search</a>: <a href="#Implicit_002fSearch">Implicit/Search</a></li>
<li><a href="#index-implicit-rule_002c-and-_0040code_007bVPATH_007d-200">implicit rule, and <code>VPATH</code></a>: <a href="#Implicit_002fSearch">Implicit/Search</a></li>
<li><a href="#index-implicit-rule_002c-definition-of-52">implicit rule, definition of</a>: <a href="#Makefile-Contents">Makefile Contents</a></li>
<li><a href="#index-implicit-rule_002c-expansion-121">implicit rule, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-implicit-rule_002c-how-to-use-767">implicit rule, how to use</a>: <a href="#Using-Implicit">Using Implicit</a></li>
<li><a href="#index-implicit-rule_002c-introduction-to-42">implicit rule, introduction to</a>: <a href="#make-Deduces">make Deduces</a></li>
<li><a href="#index-implicit-rule_002c-predefined-769">implicit rule, predefined</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-implicit-rule_002c-search-algorithm-979">implicit rule, search algorithm</a>: <a href="#Implicit-Rule-Search">Implicit Rule Search</a></li>
<li><a href="#index-implicit-rules_002c-secondary-expansion-of-132">implicit rules, secondary expansion of</a>: <a href="#Secondary-Expansion">Secondary Expansion</a></li>
<li><a href="#index-included-makefiles_002c-default-directories-83">included makefiles, default directories</a>: <a href="#Include">Include</a></li>
<li><a href="#index-including-_0028_0040code_007bMAKEFILE_005fLIST_007d-variable_0029-93">including (<code>MAKEFILE_LIST</code> variable)</a>: <a href="#MAKEFILE_005fLIST-Variable">MAKEFILE_LIST Variable</a></li>
<li><a href="#index-including-_0028_0040code_007bMAKEFILES_007d-variable_0029-89">including (<code>MAKEFILES</code> variable)</a>: <a href="#MAKEFILES-Variable">MAKEFILES Variable</a></li>
<li><a href="#index-including-other-makefiles-72">including other makefiles</a>: <a href="#Include">Include</a></li>
<li><a href="#index-incompatibilities-1001">incompatibilities</a>: <a href="#Missing">Missing</a></li>
<li><a href="#index-Info_002c-rule-to-format-824">Info, rule to format</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_0040code_007binstall_007d-_0040r_007b_0028standard-target_0029_007d-655"><code>install</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-intermediate-files-899">intermediate files</a>: <a href="#Chained-Rules">Chained Rules</a></li>
<li><a href="#index-intermediate-files_002c-preserving-901">intermediate files, preserving</a>: <a href="#Chained-Rules">Chained Rules</a></li>
<li><a href="#index-intermediate-targets_002c-explicit-237">intermediate targets, explicit</a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-interrupt-368">interrupt</a>: <a href="#Interrupts">Interrupts</a></li>
<li><a href="#index-job-slots-342">job slots</a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-job-slots_002c-and-recursion-425">job slots, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-jobs_002c-limiting-based-on-load-349">jobs, limiting based on load</a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-joining-lists-of-words-598">joining lists of words</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-killing-_0028interruption_0029-373">killing (interruption)</a>: <a href="#Interrupts">Interrupts</a></li>
<li><a href="#index-last_002dresort-default-rules-972">last-resort default rules</a>: <a href="#Last-Resort">Last Resort</a></li>
<li><a href="#index-ld-800"><code>ld</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-lex-858"><code>lex</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-lex-805"><code>lex</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-Lex_002c-rule-to-run-806">Lex, rule to run</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-libraries-for-linking_002c-directory-search-204">libraries for linking, directory search</a>: <a href="#Libraries_002fSearch">Libraries/Search</a></li>
<li><a href="#index-library-archive_002c-suffix-rule-for-995">library archive, suffix rule for</a>: <a href="#Archive-Suffix-Rules">Archive Suffix Rules</a></li>
<li><a href="#index-limiting-jobs-based-on-load-348">limiting jobs based on load</a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-link-libraries_002c-and-directory-search-203">link libraries, and directory search</a>: <a href="#Libraries_002fSearch">Libraries/Search</a></li>
<li><a href="#index-link-libraries_002c-patterns-matching-209">link libraries, patterns matching</a>: <a href="#Libraries_002fSearch">Libraries/Search</a></li>
<li><a href="#index-linking_002c-predefined-rule-for-799">linking, predefined rule for</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-lint-808"><code>lint</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-lint-862"><code>lint</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-_0040code_007blint_007d_002c-rule-to-run-809"><code>lint</code>, rule to run</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-list-of-all-prerequisites-933">list of all prerequisites</a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-list-of-changed-prerequisites-929">list of changed prerequisites</a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-load-average-347">load average</a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-loops-in-variable-expansion-473">loops in variable expansion</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-_0040code_007blpr_007d-_0028shell-command_0029-225"><code>lpr</code> (shell command)</a>: <a href="#Empty-Targets">Empty Targets</a></li>
<li><a href="#index-_0040code_007blpr_007d-_0028shell-command_0029-167"><code>lpr</code> (shell command)</a>: <a href="#Wildcard-Examples">Wildcard Examples</a></li>
<li><a href="#index-m2c-791"><code>m2c</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-m2c-864"><code>m2c</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-macro-462">macro</a>: <a href="#Using-Variables">Using Variables</a></li>
<li><a href="#index-_0040code_007bmake-depend_007d-286"><code>make depend</code></a>: <a href="#Automatic-Prerequisites">Automatic Prerequisites</a></li>
<li><a href="#index-makefile-7">makefile</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-makefile-name-57">makefile name</a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-makefile-name_002c-how-to-specify-69">makefile name, how to specify</a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-makefile-rule-parts-11">makefile rule parts</a>: <a href="#Rule-Introduction">Rule Introduction</a></li>
<li><a href="#index-makefile-syntax_002c-evaluating-622">makefile syntax, evaluating</a>: <a href="#Eval-Function">Eval Function</a></li>
<li><a href="#index-makefile_002c-and-_0040code_007bMAKEFILES_007d-variable-88">makefile, and <code>MAKEFILES</code> variable</a>: <a href="#MAKEFILES-Variable">MAKEFILES Variable</a></li>
<li><a href="#index-makefile_002c-conventions-for-1005">makefile, conventions for</a>: <a href="#Makefile-Conventions">Makefile Conventions</a></li>
<li><a href="#index-makefile_002c-how-_0040code_007bmake_007d-processes-28">makefile, how <code>make</code> processes</a>: <a href="#How-Make-Works">How Make Works</a></li>
<li><a href="#index-makefile_002c-how-to-write-48">makefile, how to write</a>: <a href="#Makefiles">Makefiles</a></li>
<li><a href="#index-makefile_002c-including-73">makefile, including</a>: <a href="#Include">Include</a></li>
<li><a href="#index-makefile_002c-overriding-106">makefile, overriding</a>: <a href="#Overriding-Makefiles">Overriding Makefiles</a></li>
<li><a href="#index-makefile_002c-parsing-109">makefile, parsing</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-makefile_002c-remaking-of-104">makefile, remaking of</a>: <a href="#Remaking-Makefiles">Remaking Makefiles</a></li>
<li><a href="#index-makefile_002c-simple-18">makefile, simple</a>: <a href="#Simple-Makefile">Simple Makefile</a></li>
<li><a href="#index-makefiles_002c-and-_0040code_007bMAKEFILE_005fLIST_007d-variable-92">makefiles, and <code>MAKEFILE_LIST</code> variable</a>: <a href="#MAKEFILE_005fLIST-Variable">MAKEFILE_LIST Variable</a></li>
<li><a href="#index-makefiles_002c-and-special-variables-95">makefiles, and special variables</a>: <a href="#Special-Variables">Special Variables</a></li>
<li><a href="#index-makeinfo-826"><code>makeinfo</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-makeinfo-868"><code>makeinfo</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-match_002danything-rule-970">match-anything rule</a>: <a href="#Match_002dAnything-Rules">Match-Anything Rules</a></li>
<li><a href="#index-match_002danything-rule_002c-used-to-override-107">match-anything rule, used to override</a>: <a href="#Overriding-Makefiles">Overriding Makefiles</a></li>
<li><a href="#index-missing-features-1002">missing features</a>: <a href="#Missing">Missing</a></li>
<li><a href="#index-mistakes-with-wildcards-171">mistakes with wildcards</a>: <a href="#Wildcard-Pitfall">Wildcard Pitfall</a></li>
<li><a href="#index-modified-variable-reference-487">modified variable reference</a>: <a href="#Substitution-Refs">Substitution Refs</a></li>
<li><a href="#index-Modula_002d2_002c-rule-to-compile-790">Modula-2, rule to compile</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_0040code_007bmostlyclean_007d-_0040r_007b_0028standard-target_0029_007d-651"><code>mostlyclean</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-multiple-rules-for-one-target-255">multiple rules for one target</a>: <a href="#Multiple-Rules">Multiple Rules</a></li>
<li><a href="#index-multiple-rules-for-one-target-_0028_0040code_007b_003a_003a_007d_0029-279">multiple rules for one target (<code>::</code>)</a>: <a href="#Double_002dColon">Double-Colon</a></li>
<li><a href="#index-multiple-targets-250">multiple targets</a>: <a href="#Multiple-Targets">Multiple Targets</a></li>
<li><a href="#index-multiple-targets_002c-in-pattern-rule-911">multiple targets, in pattern rule</a>: <a href="#Pattern-Intro">Pattern Intro</a></li>
<li><a href="#index-name-of-makefile-58">name of makefile</a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-name-of-makefile_002c-how-to-specify-70">name of makefile, how to specify</a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-nested-variable-reference-494">nested variable reference</a>: <a href="#Computed-Names">Computed Names</a></li>
<li><a href="#index-newline_002c-quoting_002c-in-commands-306">newline, quoting, in commands</a>: <a href="#Splitting-Lines">Splitting Lines</a></li>
<li><a href="#index-newline_002c-quoting_002c-in-makefile-23">newline, quoting, in makefile</a>: <a href="#Simple-Makefile">Simple Makefile</a></li>
<li><a href="#index-nondirectory-part-584">nondirectory part</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-normal-prerequisites-153">normal prerequisites</a>: <a href="#Prerequisite-Types">Prerequisite Types</a></li>
<li><a href="#index-_0040code_007bOBJ_007d-40"><code>OBJ</code></a>: <a href="#Variables-Simplify">Variables Simplify</a></li>
<li><a href="#index-_0040code_007bobj_007d-39"><code>obj</code></a>: <a href="#Variables-Simplify">Variables Simplify</a></li>
<li><a href="#index-_0040code_007bobjects_007d-35"><code>objects</code></a>: <a href="#Variables-Simplify">Variables Simplify</a></li>
<li><a href="#index-_0040code_007bOBJECTS_007d-36"><code>OBJECTS</code></a>: <a href="#Variables-Simplify">Variables Simplify</a></li>
<li><a href="#index-_0040code_007bobjs_007d-37"><code>objs</code></a>: <a href="#Variables-Simplify">Variables Simplify</a></li>
<li><a href="#index-_0040code_007bOBJS_007d-38"><code>OBJS</code></a>: <a href="#Variables-Simplify">Variables Simplify</a></li>
<li><a href="#index-old_002dfashioned-suffix-rules-975">old-fashioned suffix rules</a>: <a href="#Suffix-Rules">Suffix Rules</a></li>
<li><a href="#index-options-697">options</a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-options_002c-and-recursion-402">options, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-options_002c-setting-from-environment-433">options, setting from environment</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-options_002c-setting-in-makefiles-435">options, setting in makefiles</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-order-of-pattern-rules-914">order of pattern rules</a>: <a href="#Pattern-Intro">Pattern Intro</a></li>
<li><a href="#index-order_002donly-prerequisites-155">order-only prerequisites</a>: <a href="#Prerequisite-Types">Prerequisite Types</a></li>
<li><a href="#index-origin-of-variable-625">origin of variable</a>: <a href="#Origin-Function">Origin Function</a></li>
<li><a href="#index-overriding-makefiles-105">overriding makefiles</a>: <a href="#Overriding-Makefiles">Overriding Makefiles</a></li>
<li><a href="#index-overriding-variables-with-arguments-689">overriding variables with arguments</a>: <a href="#Overriding">Overriding</a></li>
<li><a href="#index-overriding-with-_0040code_007boverride_007d-512">overriding with <code>override</code></a>: <a href="#Override-Directive">Override Directive</a></li>
<li><a href="#index-parallel-execution-340">parallel execution</a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-parallel-execution_002c-and-archive-update-990">parallel execution, and archive update</a>: <a href="#Archive-Pitfalls">Archive Pitfalls</a></li>
<li><a href="#index-parallel-execution_002c-overriding-249">parallel execution, overriding</a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-parts-of-makefile-rule-12">parts of makefile rule</a>: <a href="#Rule-Introduction">Rule Introduction</a></li>
<li><a href="#index-Pascal_002c-rule-to-compile-781">Pascal, rule to compile</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-pattern-rule-906">pattern rule</a>: <a href="#Pattern-Intro">Pattern Intro</a></li>
<li><a href="#index-pattern-rule_002c-expansion-122">pattern rule, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-pattern-rules_002c-order-of-913">pattern rules, order of</a>: <a href="#Pattern-Intro">Pattern Intro</a></li>
<li><a href="#index-pattern-rules_002c-static-_0028not-implicit_0029-261">pattern rules, static (not implicit)</a>: <a href="#Static-Pattern">Static Pattern</a></li>
<li><a href="#index-pattern-rules_002c-static_002c-syntax-of-265">pattern rules, static, syntax of</a>: <a href="#Static-Usage">Static Usage</a></li>
<li><a href="#index-pattern_002dspecific-variables-524">pattern-specific variables</a>: <a href="#Pattern_002dspecific">Pattern-specific</a></li>
<li><a href="#index-pc-866"><code>pc</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-pc-782"><code>pc</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-phony-targets-212">phony targets</a>: <a href="#Phony-Targets">Phony Targets</a></li>
<li><a href="#index-pitfalls-of-wildcards-170">pitfalls of wildcards</a>: <a href="#Wildcard-Pitfall">Wildcard Pitfall</a></li>
<li><a href="#index-portability-998">portability</a>: <a href="#Features">Features</a></li>
<li><a href="#index-POSIX-1">POSIX</a>: <a href="#Overview">Overview</a></li>
<li><a href="#index-POSIX_002e2-430">POSIX.2</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-post_002dinstallation-commands-1014">post-installation commands</a>: <a href="#Install-Command-Categories">Install Command Categories</a></li>
<li><a href="#index-pre_002dinstallation-commands-1013">pre-installation commands</a>: <a href="#Install-Command-Categories">Install Command Categories</a></li>
<li><a href="#index-precious-targets-234">precious targets</a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-predefined-rules-and-variables_002c-printing-738">predefined rules and variables, printing</a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-prefix_002c-adding-595">prefix, adding</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-prerequisite-136">prerequisite</a>: <a href="#Rules">Rules</a></li>
<li><a href="#index-prerequisite-pattern_002c-implicit-910">prerequisite pattern, implicit</a>: <a href="#Pattern-Intro">Pattern Intro</a></li>
<li><a href="#index-prerequisite-pattern_002c-static-_0028not-implicit_0029-268">prerequisite pattern, static (not implicit)</a>: <a href="#Static-Usage">Static Usage</a></li>
<li><a href="#index-prerequisite-types-150">prerequisite types</a>: <a href="#Prerequisite-Types">Prerequisite Types</a></li>
<li><a href="#index-prerequisite_002c-expansion-120">prerequisite, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-prerequisites-148">prerequisites</a>: <a href="#Rule-Syntax">Rule Syntax</a></li>
<li><a href="#index-prerequisites_002c-and-automatic-variables-919">prerequisites, and automatic variables</a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-prerequisites_002c-automatic-generation-78">prerequisites, automatic generation</a>: <a href="#Include">Include</a></li>
<li><a href="#index-prerequisites_002c-automatic-generation-281">prerequisites, automatic generation</a>: <a href="#Automatic-Prerequisites">Automatic Prerequisites</a></li>
<li><a href="#index-prerequisites_002c-introduction-to-14">prerequisites, introduction to</a>: <a href="#Rule-Introduction">Rule Introduction</a></li>
<li><a href="#index-prerequisites_002c-list-of-all-932">prerequisites, list of all</a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-prerequisites_002c-list-of-changed-928">prerequisites, list of changed</a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-prerequisites_002c-normal-152">prerequisites, normal</a>: <a href="#Prerequisite-Types">Prerequisite Types</a></li>
<li><a href="#index-prerequisites_002c-order_002donly-154">prerequisites, order-only</a>: <a href="#Prerequisite-Types">Prerequisite Types</a></li>
<li><a href="#index-prerequisites_002c-varying-_0028static-pattern_0029-263">prerequisites, varying (static pattern)</a>: <a href="#Static-Pattern">Static Pattern</a></li>
<li><a href="#index-preserving-intermediate-files-902">preserving intermediate files</a>: <a href="#Chained-Rules">Chained Rules</a></li>
<li><a href="#index-preserving-with-_0040code_007b_002ePRECIOUS_007d-904">preserving with <code>.PRECIOUS</code></a>: <a href="#Chained-Rules">Chained Rules</a></li>
<li><a href="#index-preserving-with-_0040code_007b_002ePRECIOUS_007d-235">preserving with <code>.PRECIOUS</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-preserving-with-_0040code_007b_002eSECONDARY_007d-240">preserving with <code>.SECONDARY</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_0040code_007bprint_007d-_0040r_007b_0028standard-target_0029_007d-656"><code>print</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-_0040code_007bprint_007d-target-166"><code>print</code> target</a>: <a href="#Wildcard-Examples">Wildcard Examples</a></li>
<li><a href="#index-_0040code_007bprint_007d-target-224"><code>print</code> target</a>: <a href="#Empty-Targets">Empty Targets</a></li>
<li><a href="#index-printing-directories-437">printing directories</a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-printing-messages-642">printing messages</a>: <a href="#Make-Control-Functions">Make Control Functions</a></li>
<li><a href="#index-printing-of-commands-313">printing of commands</a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-printing-user-warnings-640">printing user warnings</a>: <a href="#Make-Control-Functions">Make Control Functions</a></li>
<li><a href="#index-problems-and-bugs_002c-reporting-6">problems and bugs, reporting</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-problems-with-wildcards-173">problems with wildcards</a>: <a href="#Wildcard-Pitfall">Wildcard Pitfall</a></li>
<li><a href="#index-processing-a-makefile-27">processing a makefile</a>: <a href="#How-Make-Works">How Make Works</a></li>
<li><a href="#index-question-mode-675">question mode</a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-quoting-_0040code_007b_0025_007d_002c-in-_0040code_007bpatsubst_007d-545">quoting <code>%</code>, in <code>patsubst</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-quoting-_0040code_007b_0025_007d_002c-in-static-pattern-273">quoting <code>%</code>, in static pattern</a>: <a href="#Static-Usage">Static Usage</a></li>
<li><a href="#index-quoting-_0040code_007b_0025_007d_002c-in-_0040code_007bvpath_007d-188">quoting <code>%</code>, in <code>vpath</code></a>: <a href="#Selective-Search">Selective Search</a></li>
<li><a href="#index-quoting-newline_002c-in-commands-305">quoting newline, in commands</a>: <a href="#Splitting-Lines">Splitting Lines</a></li>
<li><a href="#index-quoting-newline_002c-in-makefile-22">quoting newline, in makefile</a>: <a href="#Simple-Makefile">Simple Makefile</a></li>
<li><a href="#index-Ratfor_002c-rule-to-compile-785">Ratfor, rule to compile</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-RCS_002c-rule-to-extract-from-831">RCS, rule to extract from</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-reading-makefiles-108">reading makefiles</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-_0040code_007bREADME_007d-64"><code>README</code></a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-_0040code_007brealclean_007d-_0040r_007b_0028standard-target_0029_007d-653"><code>realclean</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-realpath-603">realpath</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-recompilation-8">recompilation</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-recompilation_002c-avoiding-688">recompilation, avoiding</a>: <a href="#Avoiding-Compilation">Avoiding Compilation</a></li>
<li><a href="#index-recording-events-with-empty-targets-223">recording events with empty targets</a>: <a href="#Empty-Targets">Empty Targets</a></li>
<li><a href="#index-recursion-375">recursion</a>: <a href="#Recursion">Recursion</a></li>
<li><a href="#index-recursion_002c-and-_0040code_007b_002dC_007d-418">recursion, and <code>-C</code></a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-recursion_002c-and-_0040code_007b_002df_007d-419">recursion, and <code>-f</code></a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-recursion_002c-and-_0040code_007b_002dj_007d-424">recursion, and <code>-j</code></a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-recursion_002c-and-_0040code_007b_002do_007d-420">recursion, and <code>-o</code></a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-recursion_002c-and-_0040code_007b_002dt_007d-385">recursion, and <code>-t</code></a>: <a href="#MAKE-Variable">MAKE Variable</a></li>
<li><a href="#index-recursion_002c-and-_0040code_007b_002dw_007d-441">recursion, and <code>-w</code></a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-recursion_002c-and-_0040code_007b_002dW_007d-421">recursion, and <code>-W</code></a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-recursion_002c-and-command-line-variable-definitions-407">recursion, and command line variable definitions</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-recursion_002c-and-environment-392">recursion, and environment</a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-recursion_002c-and-_0040code_007bMAKE_007d-variable-381">recursion, and <code>MAKE</code> variable</a>: <a href="#MAKE-Variable">MAKE Variable</a></li>
<li><a href="#index-recursion_002c-and-_0040code_007bMAKEFILES_007d-variable-91">recursion, and <code>MAKEFILES</code> variable</a>: <a href="#MAKEFILES-Variable">MAKEFILES Variable</a></li>
<li><a href="#index-recursion_002c-and-options-403">recursion, and options</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-recursion_002c-and-printing-directories-438">recursion, and printing directories</a>: <a href="#_002dw-Option">-w Option</a></li>
<li><a href="#index-recursion_002c-and-variables-393">recursion, and variables</a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-recursion_002c-level-of-400">recursion, level of</a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-recursive-variable-expansion-468">recursive variable expansion</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-recursive-variable-expansion-460">recursive variable expansion</a>: <a href="#Using-Variables">Using Variables</a></li>
<li><a href="#index-recursively-expanded-variables-470">recursively expanded variables</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-reference-to-variables-486">reference to variables</a>: <a href="#Advanced">Advanced</a></li>
<li><a href="#index-reference-to-variables-464">reference to variables</a>: <a href="#Reference">Reference</a></li>
<li><a href="#index-relinking-32">relinking</a>: <a href="#How-Make-Works">How Make Works</a></li>
<li><a href="#index-remaking-makefiles-103">remaking makefiles</a>: <a href="#Remaking-Makefiles">Remaking Makefiles</a></li>
<li><a href="#index-removal-of-target-files-366">removal of target files</a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-removal-of-target-files-371">removal of target files</a>: <a href="#Interrupts">Interrupts</a></li>
<li><a href="#index-removing-duplicate-words-562">removing duplicate words</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-removing-targets-on-failure-243">removing targets on failure</a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-removing_002c-to-clean-up-46">removing, to clean up</a>: <a href="#Cleanup">Cleanup</a></li>
<li><a href="#index-reporting-bugs-4">reporting bugs</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-rm-882"><code>rm</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-_0040code_007brm_007d-_0028shell-command_0029-26"><code>rm</code> (shell command)</a>: <a href="#Simple-Makefile">Simple Makefile</a></li>
<li><a href="#index-_0040code_007brm_007d-_0028shell-command_0029-165"><code>rm</code> (shell command)</a>: <a href="#Wildcard-Examples">Wildcard Examples</a></li>
<li><a href="#index-_0040code_007brm_007d-_0028shell-command_0029-215"><code>rm</code> (shell command)</a>: <a href="#Phony-Targets">Phony Targets</a></li>
<li><a href="#index-_0040code_007brm_007d-_0028shell-command_0029-357"><code>rm</code> (shell command)</a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-rule-commands-292">rule commands</a>: <a href="#Commands">Commands</a></li>
<li><a href="#index-rule-prerequisites-149">rule prerequisites</a>: <a href="#Rule-Syntax">Rule Syntax</a></li>
<li><a href="#index-rule-syntax-139">rule syntax</a>: <a href="#Rule-Syntax">Rule Syntax</a></li>
<li><a href="#index-rule-targets-142">rule targets</a>: <a href="#Rule-Syntax">Rule Syntax</a></li>
<li><a href="#index-rule_002c-double_002dcolon-_0028_0040code_007b_003a_003a_007d_0029-278">rule, double-colon (<code>::</code>)</a>: <a href="#Double_002dColon">Double-Colon</a></li>
<li><a href="#index-rule_002c-explicit_002c-definition-of-49">rule, explicit, definition of</a>: <a href="#Makefile-Contents">Makefile Contents</a></li>
<li><a href="#index-rule_002c-how-to-write-134">rule, how to write</a>: <a href="#Rules">Rules</a></li>
<li><a href="#index-rule_002c-implicit-766">rule, implicit</a>: <a href="#Implicit-Rules">Implicit Rules</a></li>
<li><a href="#index-rule_002c-implicit_002c-and-directory-search-201">rule, implicit, and directory search</a>: <a href="#Implicit_002fSearch">Implicit/Search</a></li>
<li><a href="#index-rule_002c-implicit_002c-and-_0040code_007bVPATH_007d-202">rule, implicit, and <code>VPATH</code></a>: <a href="#Implicit_002fSearch">Implicit/Search</a></li>
<li><a href="#index-rule_002c-implicit_002c-chains-of-898">rule, implicit, chains of</a>: <a href="#Chained-Rules">Chained Rules</a></li>
<li><a href="#index-rule_002c-implicit_002c-definition-of-51">rule, implicit, definition of</a>: <a href="#Makefile-Contents">Makefile Contents</a></li>
<li><a href="#index-rule_002c-implicit_002c-how-to-use-768">rule, implicit, how to use</a>: <a href="#Using-Implicit">Using Implicit</a></li>
<li><a href="#index-rule_002c-implicit_002c-introduction-to-43">rule, implicit, introduction to</a>: <a href="#make-Deduces">make Deduces</a></li>
<li><a href="#index-rule_002c-implicit_002c-predefined-770">rule, implicit, predefined</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-rule_002c-introduction-to-10">rule, introduction to</a>: <a href="#Rule-Introduction">Rule Introduction</a></li>
<li><a href="#index-rule_002c-multiple-for-one-target-257">rule, multiple for one target</a>: <a href="#Multiple-Rules">Multiple Rules</a></li>
<li><a href="#index-rule_002c-no-commands-or-prerequisites-220">rule, no commands or prerequisites</a>: <a href="#Force-Targets">Force Targets</a></li>
<li><a href="#index-rule_002c-pattern-907">rule, pattern</a>: <a href="#Pattern-Intro">Pattern Intro</a></li>
<li><a href="#index-rule_002c-static-pattern-260">rule, static pattern</a>: <a href="#Static-Pattern">Static Pattern</a></li>
<li><a href="#index-rule_002c-static-pattern-versus-implicit-275">rule, static pattern versus implicit</a>: <a href="#Static-versus-Implicit">Static versus Implicit</a></li>
<li><a href="#index-rule_002c-with-multiple-targets-253">rule, with multiple targets</a>: <a href="#Multiple-Targets">Multiple Targets</a></li>
<li><a href="#index-rules_002c-and-_0040code_007b_0024_007d-147">rules, and <code>$</code></a>: <a href="#Rule-Syntax">Rule Syntax</a></li>
<li><a href="#index-s_002e-_0040r_007b_0028SCCS-file-prefix_0029_007d-836"><code>s. </code><span class="roman">(SCCS file prefix)</span></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-SCCS_002c-rule-to-extract-from-834">SCCS, rule to extract from</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-search-algorithm_002c-implicit-rule-980">search algorithm, implicit rule</a>: <a href="#Implicit-Rule-Search">Implicit Rule Search</a></li>
<li><a href="#index-search-path-for-prerequisites-_0028_0040code_007bVPATH_007d_0029-180">search path for prerequisites (<code>VPATH</code>)</a>: <a href="#Directory-Search">Directory Search</a></li>
<li><a href="#index-search-path-for-prerequisites-_0028_0040code_007bVPATH_007d_0029_002c-and-implicit-rules-198">search path for prerequisites (<code>VPATH</code>), and implicit rules</a>: <a href="#Implicit_002fSearch">Implicit/Search</a></li>
<li><a href="#index-search-path-for-prerequisites-_0028_0040code_007bVPATH_007d_0029_002c-and-link-libraries-207">search path for prerequisites (<code>VPATH</code>), and link libraries</a>: <a href="#Libraries_002fSearch">Libraries/Search</a></li>
<li><a href="#index-searching-for-strings-551">searching for strings</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-secondary-expansion-124">secondary expansion</a>: <a href="#Secondary-Expansion">Secondary Expansion</a></li>
<li><a href="#index-secondary-expansion-and-explicit-rules-127">secondary expansion and explicit rules</a>: <a href="#Secondary-Expansion">Secondary Expansion</a></li>
<li><a href="#index-secondary-expansion-and-implicit-rules-131">secondary expansion and implicit rules</a>: <a href="#Secondary-Expansion">Secondary Expansion</a></li>
<li><a href="#index-secondary-expansion-and-static-pattern-rules-129">secondary expansion and static pattern rules</a>: <a href="#Secondary-Expansion">Secondary Expansion</a></li>
<li><a href="#index-secondary-files-903">secondary files</a>: <a href="#Chained-Rules">Chained Rules</a></li>
<li><a href="#index-secondary-targets-239">secondary targets</a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_0040code_007bsed_007d-_0028shell-command_0029-289"><code>sed</code> (shell command)</a>: <a href="#Automatic-Prerequisites">Automatic Prerequisites</a></li>
<li><a href="#index-selecting-a-word-567">selecting a word</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-selecting-word-lists-570">selecting word lists</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-sequences-of-commands-449">sequences of commands</a>: <a href="#Sequences">Sequences</a></li>
<li><a href="#index-setting-options-from-environment-432">setting options from environment</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-setting-options-in-makefiles-434">setting options in makefiles</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-setting-variables-503">setting variables</a>: <a href="#Setting">Setting</a></li>
<li><a href="#index-several-rules-for-one-target-256">several rules for one target</a>: <a href="#Multiple-Rules">Multiple Rules</a></li>
<li><a href="#index-several-targets-in-a-rule-251">several targets in a rule</a>: <a href="#Multiple-Targets">Multiple Targets</a></li>
<li><a href="#index-_0040code_007bshar_007d-_0040r_007b_0028standard-target_0029_007d-658"><code>shar</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-shell-command-24">shell command</a>: <a href="#Simple-Makefile">Simple Makefile</a></li>
<li><a href="#index-shell-command_002c-and-directory-search-194">shell command, and directory search</a>: <a href="#Commands_002fSearch">Commands/Search</a></li>
<li><a href="#index-shell-command_002c-execution-324">shell command, execution</a>: <a href="#Execution">Execution</a></li>
<li><a href="#index-shell-command_002c-function-for-632">shell command, function for</a>: <a href="#Shell-Function">Shell Function</a></li>
<li><a href="#index-shell-file-name-pattern-_0028in-_0040code_007binclude_007d_0029-75">shell file name pattern (in <code>include</code>)</a>: <a href="#Include">Include</a></li>
<li><a href="#index-shell-variables_002c-setting-in-commands-327">shell variables, setting in commands</a>: <a href="#Execution">Execution</a></li>
<li><a href="#index-shell-wildcards-_0028in-_0040code_007binclude_007d_0029-76">shell wildcards (in <code>include</code>)</a>: <a href="#Include">Include</a></li>
<li><a href="#index-shell_002c-choosing-the-329">shell, choosing the</a>: <a href="#Choosing-the-Shell">Choosing the Shell</a></li>
<li><a href="#index-SHELL_002c-exported-value-394">SHELL, exported value</a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-SHELL_002c-import-from-environment-521">SHELL, import from environment</a>: <a href="#Environment">Environment</a></li>
<li><a href="#index-shell_002c-in-DOS-and-Windows-334">shell, in DOS and Windows</a>: <a href="#Choosing-the-Shell">Choosing the Shell</a></li>
<li><a href="#index-_0040code_007bSHELL_007d_002c-MS_002dDOS-specifics-338"><code>SHELL</code>, MS-DOS specifics</a>: <a href="#Choosing-the-Shell">Choosing the Shell</a></li>
<li><a href="#index-_0040code_007bSHELL_007d_002c-value-of-330"><code>SHELL</code>, value of</a>: <a href="#Choosing-the-Shell">Choosing the Shell</a></li>
<li><a href="#index-signal-369">signal</a>: <a href="#Interrupts">Interrupts</a></li>
<li><a href="#index-silent-operation-310">silent operation</a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-simple-makefile-17">simple makefile</a>: <a href="#Simple-Makefile">Simple Makefile</a></li>
<li><a href="#index-simple-variable-expansion-461">simple variable expansion</a>: <a href="#Using-Variables">Using Variables</a></li>
<li><a href="#index-simplifying-with-variables-34">simplifying with variables</a>: <a href="#Variables-Simplify">Variables Simplify</a></li>
<li><a href="#index-simply-expanded-variables-475">simply expanded variables</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-sorting-words-561">sorting words</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-spaces_002c-in-variable-values-480">spaces, in variable values</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-spaces_002c-stripping-548">spaces, stripping</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-special-targets-227">special targets</a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-special-variables-96">special variables</a>: <a href="#Special-Variables">Special Variables</a></li>
<li><a href="#index-specifying-makefile-name-68">specifying makefile name</a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-splitting-commands-300">splitting commands</a>: <a href="#Splitting-Lines">Splitting Lines</a></li>
<li><a href="#index-standard-input-346">standard input</a>: <a href="#Parallel">Parallel</a></li>
<li><a href="#index-standards-conformance-3">standards conformance</a>: <a href="#Overview">Overview</a></li>
<li><a href="#index-standards-for-makefiles-1007">standards for makefiles</a>: <a href="#Makefile-Conventions">Makefile Conventions</a></li>
<li><a href="#index-static-pattern-rule-259">static pattern rule</a>: <a href="#Static-Pattern">Static Pattern</a></li>
<li><a href="#index-static-pattern-rule_002c-syntax-of-264">static pattern rule, syntax of</a>: <a href="#Static-Usage">Static Usage</a></li>
<li><a href="#index-static-pattern-rule_002c-versus-implicit-276">static pattern rule, versus implicit</a>: <a href="#Static-versus-Implicit">Static versus Implicit</a></li>
<li><a href="#index-static-pattern-rules_002c-secondary-expansion-of-130">static pattern rules, secondary expansion of</a>: <a href="#Secondary-Expansion">Secondary Expansion</a></li>
<li><a href="#index-stem-267">stem</a>: <a href="#Static-Usage">Static Usage</a></li>
<li><a href="#index-stem-969">stem</a>: <a href="#Pattern-Match">Pattern Match</a></li>
<li><a href="#index-stem_002c-variable-for-940">stem, variable for</a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-stopping-make-637">stopping make</a>: <a href="#Make-Control-Functions">Make Control Functions</a></li>
<li><a href="#index-strings_002c-searching-for-553">strings, searching for</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-stripping-whitespace-546">stripping whitespace</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-sub_002d_0040code_007bmake_007d-387">sub-<code>make</code></a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-subdirectories_002c-recursion-for-376">subdirectories, recursion for</a>: <a href="#Recursion">Recursion</a></li>
<li><a href="#index-substitution-variable-reference-488">substitution variable reference</a>: <a href="#Substitution-Refs">Substitution Refs</a></li>
<li><a href="#index-suffix-rule-976">suffix rule</a>: <a href="#Suffix-Rules">Suffix Rules</a></li>
<li><a href="#index-suffix-rule_002c-for-archive-993">suffix rule, for archive</a>: <a href="#Archive-Suffix-Rules">Archive Suffix Rules</a></li>
<li><a href="#index-suffix_002c-adding-592">suffix, adding</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-suffix_002c-function-to-find-586">suffix, function to find</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-suffix_002c-substituting-in-variables-492">suffix, substituting in variables</a>: <a href="#Substitution-Refs">Substitution Refs</a></li>
<li><a href="#index-switches-699">switches</a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-symbol-directories_002c-updating-archive-987">symbol directories, updating archive</a>: <a href="#Archive-Symbols">Archive Symbols</a></li>
<li><a href="#index-syntax-of-commands-295">syntax of commands</a>: <a href="#Command-Syntax">Command Syntax</a></li>
<li><a href="#index-syntax-of-rules-140">syntax of rules</a>: <a href="#Rule-Syntax">Rule Syntax</a></li>
<li><a href="#index-tab-character-_0028in-commands_0029-144">tab character (in commands)</a>: <a href="#Rule-Syntax">Rule Syntax</a></li>
<li><a href="#index-tabs-in-rules-16">tabs in rules</a>: <a href="#Rule-Introduction">Rule Introduction</a></li>
<li><a href="#index-_0040code_007bTAGS_007d-_0040r_007b_0028standard-target_0029_007d-660"><code>TAGS</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-tangle-816"><code>tangle</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-tangle-878"><code>tangle</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-_0040code_007btar_007d-_0040r_007b_0028standard-target_0029_007d-657"><code>tar</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-target-135">target</a>: <a href="#Rules">Rules</a></li>
<li><a href="#index-target-pattern_002c-implicit-908">target pattern, implicit</a>: <a href="#Pattern-Intro">Pattern Intro</a></li>
<li><a href="#index-target-pattern_002c-static-_0028not-implicit_0029-266">target pattern, static (not implicit)</a>: <a href="#Static-Usage">Static Usage</a></li>
<li><a href="#index-target_002c-deleting-on-error-367">target, deleting on error</a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-target_002c-deleting-on-interrupt-372">target, deleting on interrupt</a>: <a href="#Interrupts">Interrupts</a></li>
<li><a href="#index-target_002c-expansion-119">target, expansion</a>: <a href="#Reading-Makefiles">Reading Makefiles</a></li>
<li><a href="#index-target_002c-multiple-in-pattern-rule-912">target, multiple in pattern rule</a>: <a href="#Pattern-Intro">Pattern Intro</a></li>
<li><a href="#index-target_002c-multiple-rules-for-one-258">target, multiple rules for one</a>: <a href="#Multiple-Rules">Multiple Rules</a></li>
<li><a href="#index-target_002c-touching-671">target, touching</a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-target_002dspecific-variables-522">target-specific variables</a>: <a href="#Target_002dspecific">Target-specific</a></li>
<li><a href="#index-targets-141">targets</a>: <a href="#Rule-Syntax">Rule Syntax</a></li>
<li><a href="#index-targets-without-a-file-214">targets without a file</a>: <a href="#Phony-Targets">Phony Targets</a></li>
<li><a href="#index-targets_002c-built_002din-special-229">targets, built-in special</a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-targets_002c-empty-222">targets, empty</a>: <a href="#Empty-Targets">Empty Targets</a></li>
<li><a href="#index-targets_002c-force-218">targets, force</a>: <a href="#Force-Targets">Force Targets</a></li>
<li><a href="#index-targets_002c-introduction-to-13">targets, introduction to</a>: <a href="#Rule-Introduction">Rule Introduction</a></li>
<li><a href="#index-targets_002c-multiple-252">targets, multiple</a>: <a href="#Multiple-Targets">Multiple Targets</a></li>
<li><a href="#index-targets_002c-phony-213">targets, phony</a>: <a href="#Phony-Targets">Phony Targets</a></li>
<li><a href="#index-terminal-rule-971">terminal rule</a>: <a href="#Match_002dAnything-Rules">Match-Anything Rules</a></li>
<li><a href="#index-_0040code_007btest_007d-_0040r_007b_0028standard-target_0029_007d-662"><code>test</code> <span class="roman">(standard target)</span></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-testing-compilation-693">testing compilation</a>: <a href="#Testing">Testing</a></li>
<li><a href="#index-tex-813"><code>tex</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-tex-870"><code>tex</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-_0040TeX_007b_007d_002c-rule-to-run-811">TeX, rule to run</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-texi2dvi-872"><code>texi2dvi</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-texi2dvi-825"><code>texi2dvi</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-Texinfo_002c-rule-to-format-823">Texinfo, rule to format</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-tilde-_0028_0040code_007b_007e_007d_0029-163">tilde (<code>~</code>)</a>: <a href="#Wildcards">Wildcards</a></li>
<li><a href="#index-_0040code_007btouch_007d-_0028shell-command_0029-226"><code>touch</code> (shell command)</a>: <a href="#Empty-Targets">Empty Targets</a></li>
<li><a href="#index-_0040code_007btouch_007d-_0028shell-command_0029-168"><code>touch</code> (shell command)</a>: <a href="#Wildcard-Examples">Wildcard Examples</a></li>
<li><a href="#index-touching-files-670">touching files</a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-traditional-directory-search-_0028GPATH_0029-191">traditional directory search (GPATH)</a>: <a href="#Search-Algorithm">Search Algorithm</a></li>
<li><a href="#index-types-of-prerequisites-151">types of prerequisites</a>: <a href="#Prerequisite-Types">Prerequisite Types</a></li>
<li><a href="#index-undefined-variables_002c-warning-message-764">undefined variables, warning message</a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-updating-archive-symbol-directories-985">updating archive symbol directories</a>: <a href="#Archive-Symbols">Archive Symbols</a></li>
<li><a href="#index-updating-makefiles-102">updating makefiles</a>: <a href="#Remaking-Makefiles">Remaking Makefiles</a></li>
<li><a href="#index-user-defined-functions-617">user defined functions</a>: <a href="#Call-Function">Call Function</a></li>
<li><a href="#index-value-459">value</a>: <a href="#Using-Variables">Using Variables</a></li>
<li><a href="#index-value_002c-how-a-variable-gets-it-502">value, how a variable gets it</a>: <a href="#Values">Values</a></li>
<li><a href="#index-variable-458">variable</a>: <a href="#Using-Variables">Using Variables</a></li>
<li><a href="#index-variable-definition-53">variable definition</a>: <a href="#Makefile-Contents">Makefile Contents</a></li>
<li><a href="#index-variable-references-in-commands-307">variable references in commands</a>: <a href="#Variables-in-Commands">Variables in Commands</a></li>
<li><a href="#index-variables-33">variables</a>: <a href="#Variables-Simplify">Variables Simplify</a></li>
<li><a href="#index-variables_002c-_0040samp_007b_0024_007d-in-name-498">variables, <span class="samp">$</span> in name</a>: <a href="#Computed-Names">Computed Names</a></li>
<li><a href="#index-variables_002c-and-implicit-rule-917">variables, and implicit rule</a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-variables_002c-appending-to-510">variables, appending to</a>: <a href="#Appending">Appending</a></li>
<li><a href="#index-variables_002c-automatic-916">variables, automatic</a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-variables_002c-command-line-692">variables, command line</a>: <a href="#Overriding">Overriding</a></li>
<li><a href="#index-variables_002c-command-line_002c-and-recursion-406">variables, command line, and recursion</a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-variables_002c-computed-names-496">variables, computed names</a>: <a href="#Computed-Names">Computed Names</a></li>
<li><a href="#index-variables_002c-conditional-assignment-484">variables, conditional assignment</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-variables_002c-defining-verbatim-518">variables, defining verbatim</a>: <a href="#Defining">Defining</a></li>
<li><a href="#index-variables_002c-environment-519">variables, environment</a>: <a href="#Environment">Environment</a></li>
<li><a href="#index-variables_002c-environment-390">variables, environment</a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-variables_002c-exporting-391">variables, exporting</a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-variables_002c-flavor-of-627">variables, flavor of</a>: <a href="#Flavor-Function">Flavor Function</a></li>
<li><a href="#index-variables_002c-flavors-469">variables, flavors</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-variables_002c-how-they-get-their-values-501">variables, how they get their values</a>: <a href="#Values">Values</a></li>
<li><a href="#index-variables_002c-how-to-reference-463">variables, how to reference</a>: <a href="#Reference">Reference</a></li>
<li><a href="#index-variables_002c-loops-in-expansion-474">variables, loops in expansion</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-variables_002c-modified-reference-489">variables, modified reference</a>: <a href="#Substitution-Refs">Substitution Refs</a></li>
<li><a href="#index-variables_002c-nested-references-497">variables, nested references</a>: <a href="#Computed-Names">Computed Names</a></li>
<li><a href="#index-variables_002c-origin-of-624">variables, origin of</a>: <a href="#Origin-Function">Origin Function</a></li>
<li><a href="#index-variables_002c-overriding-513">variables, overriding</a>: <a href="#Override-Directive">Override Directive</a></li>
<li><a href="#index-variables_002c-overriding-with-arguments-690">variables, overriding with arguments</a>: <a href="#Overriding">Overriding</a></li>
<li><a href="#index-variables_002c-pattern_002dspecific-525">variables, pattern-specific</a>: <a href="#Pattern_002dspecific">Pattern-specific</a></li>
<li><a href="#index-variables_002c-recursively-expanded-471">variables, recursively expanded</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-variables_002c-setting-504">variables, setting</a>: <a href="#Setting">Setting</a></li>
<li><a href="#index-variables_002c-simply-expanded-476">variables, simply expanded</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-variables_002c-spaces-in-values-482">variables, spaces in values</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-variables_002c-substituting-suffix-in-491">variables, substituting suffix in</a>: <a href="#Substitution-Refs">Substitution Refs</a></li>
<li><a href="#index-variables_002c-substitution-reference-490">variables, substitution reference</a>: <a href="#Substitution-Refs">Substitution Refs</a></li>
<li><a href="#index-variables_002c-target_002dspecific-523">variables, target-specific</a>: <a href="#Target_002dspecific">Target-specific</a></li>
<li><a href="#index-variables_002c-unexpanded-value-619">variables, unexpanded value</a>: <a href="#Value-Function">Value Function</a></li>
<li><a href="#index-variables_002c-warning-for-undefined-763">variables, warning for undefined</a>: <a href="#Options-Summary">Options Summary</a></li>
<li><a href="#index-varying-prerequisites-262">varying prerequisites</a>: <a href="#Static-Pattern">Static Pattern</a></li>
<li><a href="#index-verbatim-variable-definition-516">verbatim variable definition</a>: <a href="#Defining">Defining</a></li>
<li><a href="#index-vpath-179">vpath</a>: <a href="#Directory-Search">Directory Search</a></li>
<li><a href="#index-_0040code_007bVPATH_007d_002c-and-implicit-rules-196"><code>VPATH</code>, and implicit rules</a>: <a href="#Implicit_002fSearch">Implicit/Search</a></li>
<li><a href="#index-_0040code_007bVPATH_007d_002c-and-link-libraries-206"><code>VPATH</code>, and link libraries</a>: <a href="#Libraries_002fSearch">Libraries/Search</a></li>
<li><a href="#index-warnings_002c-printing-639">warnings, printing</a>: <a href="#Make-Control-Functions">Make Control Functions</a></li>
<li><a href="#index-weave-874"><code>weave</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-weave-815"><code>weave</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-Web_002c-rule-to-run-812">Web, rule to run</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-what-if-680">what if</a>: <a href="#Instead-of-Execution">Instead of Execution</a></li>
<li><a href="#index-whitespace_002c-in-variable-values-481">whitespace, in variable values</a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-whitespace_002c-stripping-547">whitespace, stripping</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-wildcard-156">wildcard</a>: <a href="#Wildcards">Wildcards</a></li>
<li><a href="#index-wildcard-pitfalls-169">wildcard pitfalls</a>: <a href="#Wildcard-Pitfall">Wildcard Pitfall</a></li>
<li><a href="#index-wildcard_002c-function-601">wildcard, function</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-wildcard_002c-in-archive-member-983">wildcard, in archive member</a>: <a href="#Archive-Members">Archive Members</a></li>
<li><a href="#index-wildcard_002c-in-_0040code_007binclude_007d-77">wildcard, in <code>include</code></a>: <a href="#Include">Include</a></li>
<li><a href="#index-wildcards-and-MS_002dDOS_002fMS_002dWindows-backslashes-174">wildcards and MS-DOS/MS-Windows backslashes</a>: <a href="#Wildcard-Pitfall">Wildcard Pitfall</a></li>
<li><a href="#index-Windows_002c-choosing-a-shell-in-336">Windows, choosing a shell in</a>: <a href="#Choosing-the-Shell">Choosing the Shell</a></li>
<li><a href="#index-word_002c-selecting-a-566">word, selecting a</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-words_002c-extracting-first-574">words, extracting first</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-words_002c-extracting-last-576">words, extracting last</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-words_002c-filtering-556">words, filtering</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-words_002c-filtering-out-559">words, filtering out</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-words_002c-finding-number-572">words, finding number</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-words_002c-iterating-over-614">words, iterating over</a>: <a href="#Foreach-Function">Foreach Function</a></li>
<li><a href="#index-words_002c-joining-lists-599">words, joining lists</a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-words_002c-removing-duplicates-564">words, removing duplicates</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-words_002c-selecting-lists-of-569">words, selecting lists of</a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-writing-rule-commands-293">writing rule commands</a>: <a href="#Commands">Commands</a></li>
<li><a href="#index-writing-rules-133">writing rules</a>: <a href="#Rules">Rules</a></li>
<li><a href="#index-yacc-802"><code>yacc</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_0040code_007byacc_007d-451"><code>yacc</code></a>: <a href="#Sequences">Sequences</a></li>
<li><a href="#index-yacc-860"><code>yacc</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-Yacc_002c-rule-to-run-803">Yacc, rule to run</a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-_0040code_007b_007e_007d-_0028tilde_0029-162"><code>~</code> (tilde)</a>: <a href="#Wildcards">Wildcards</a></li>
   </ul><div class="node">
<p><hr>
<a name="Name-Index"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="#Concept-Index">Concept Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>
<br>
</div>

<h2 class="unnumbered">Index of Functions, Variables, &amp; Directives</h2>



<ul class="index-fn" compact>
<li><a href="#index-_0024_0025-922"><code>$%</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_0025D_0029-949"><code>$(%D)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_0025F_0029-951"><code>$(%F)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_002aD_0029-945"><code>$(*D)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_002aF_0029-947"><code>$(*F)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_002bD_0029-961"><code>$(+D)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_002bF_0029-963"><code>$(+F)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_003cD_0029-953"><code>$(&lt;D)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_003cF_0029-955"><code>$(&lt;F)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_003fD_0029-965"><code>$(?D)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_003fF_0029-967"><code>$(?F)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_0040_0040D_0029-941"><code>$(@D)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_0040_0040F_0029-943"><code>$(@F)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_005eD_0029-957"><code>$(^D)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0028_005eF_0029-959"><code>$(^F)</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_002a-938"><code>$*</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_002a_0040r_007b_002c-and-static-pattern_007d-274"><code>$*</code><span class="roman">, and static pattern</span></a>: <a href="#Static-Usage">Static Usage</a></li>
<li><a href="#index-_0024_002b-934"><code>$+</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_003c-924"><code>$&lt;</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_003f-926"><code>$?</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_0040_0040-920"><code>$@</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_005e-930"><code>$^</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0024_007c-936"><code>$|</code></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0025-_0040r_007b_0028automatic-variable_0029_007d-923"><code>% </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0025D-_0040r_007b_0028automatic-variable_0029_007d-950"><code>%D </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0025F-_0040r_007b_0028automatic-variable_0029_007d-952"><code>%F </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_002a-_0040r_007b_0028automatic-variable_0029_007d-939"><code>* </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_002a-_0040r_007b_0028automatic-variable_0029_002c-unsupported-bizarre-usage_007d-1004"><code>* </code><span class="roman">(automatic variable), unsupported bizarre usage</span></a>: <a href="#Missing">Missing</a></li>
<li><a href="#index-_002aD-_0040r_007b_0028automatic-variable_0029_007d-946"><code>*D </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_002aF-_0040r_007b_0028automatic-variable_0029_007d-948"><code>*F </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_002b-_0040r_007b_0028automatic-variable_0029_007d-935"><code>+ </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_002bD-_0040r_007b_0028automatic-variable_0029_007d-962"><code>+D </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_002bF-_0040r_007b_0028automatic-variable_0029_007d-964"><code>+F </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_002eDEFAULT-974"><code>.DEFAULT</code></a>: <a href="#Last-Resort">Last Resort</a></li>
<li><a href="#index-_002eDEFAULT-232"><code>.DEFAULT</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002eDEFAULT_0040r_007b_002c-and-empty-commands_007d-457"><code>.DEFAULT</code><span class="roman">, and empty commands</span></a>: <a href="#Empty-Commands">Empty Commands</a></li>
<li><a href="#index-_002eDEFAULT_005fGOAL-_0040r_007b_0028define-default-goal_0029_007d-97"><code>.DEFAULT_GOAL </code><span class="roman">(define default goal)</span></a>: <a href="#Special-Variables">Special Variables</a></li>
<li><a href="#index-_002eDELETE_005fON_005fERROR-364"><code>.DELETE_ON_ERROR</code></a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-_002eDELETE_005fON_005fERROR-242"><code>.DELETE_ON_ERROR</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002eEXPORT_005fALL_005fVARIABLES-247"><code>.EXPORT_ALL_VARIABLES</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002eEXPORT_005fALL_005fVARIABLES-397"><code>.EXPORT_ALL_VARIABLES</code></a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-_002eFEATURES-_0040r_007b_0028list-of-supported-features_0029_007d-100"><code>.FEATURES </code><span class="roman">(list of supported features)</span></a>: <a href="#Special-Variables">Special Variables</a></li>
<li><a href="#index-_002eIGNORE-244"><code>.IGNORE</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002eIGNORE-360"><code>.IGNORE</code></a>: <a href="#Errors">Errors</a></li>
<li><a href="#index-_002eINCLUDE_005fDIRS-_0040r_007b_0028list-of-include-directories_0029_007d-101"><code>.INCLUDE_DIRS </code><span class="roman">(list of include directories)</span></a>: <a href="#Special-Variables">Special Variables</a></li>
<li><a href="#index-_002eINTERMEDIATE-236"><code>.INTERMEDIATE</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002eLIBPATTERNS-211"><code>.LIBPATTERNS</code></a>: <a href="#Libraries_002fSearch">Libraries/Search</a></li>
<li><a href="#index-_002eLOW_005fRESOLUTION_005fTIME-245"><code>.LOW_RESOLUTION_TIME</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002eNOTPARALLEL-248"><code>.NOTPARALLEL</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002ePHONY-230"><code>.PHONY</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002ePHONY-216"><code>.PHONY</code></a>: <a href="#Phony-Targets">Phony Targets</a></li>
<li><a href="#index-_002ePOSIX-429"><code>.POSIX</code></a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_002ePRECIOUS-233"><code>.PRECIOUS</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002ePRECIOUS-374"><code>.PRECIOUS</code></a>: <a href="#Interrupts">Interrupts</a></li>
<li><a href="#index-_002eSECONDARY-238"><code>.SECONDARY</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002eSECONDEXPANSION-241"><code>.SECONDEXPANSION</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002eSECONDEXPANSION-126"><code>.SECONDEXPANSION</code></a>: <a href="#Secondary-Expansion">Secondary Expansion</a></li>
<li><a href="#index-_002eSILENT-246"><code>.SILENT</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002eSILENT-321"><code>.SILENT</code></a>: <a href="#Echoing">Echoing</a></li>
<li><a href="#index-_002eSUFFIXES-231"><code>.SUFFIXES</code></a>: <a href="#Special-Targets">Special Targets</a></li>
<li><a href="#index-_002eSUFFIXES-977"><code>.SUFFIXES</code></a>: <a href="#Suffix-Rules">Suffix Rules</a></li>
<li><a href="#index-_002eVARIABLES-_0040r_007b_0028list-of-variables_0029_007d-99"><code>.VARIABLES </code><span class="roman">(list of variables)</span></a>: <a href="#Special-Variables">Special Variables</a></li>
<li><a href="#index-_002fusr_002fgnu_002finclude-85"><code>/usr/gnu/include</code></a>: <a href="#Include">Include</a></li>
<li><a href="#index-_002fusr_002finclude-87"><code>/usr/include</code></a>: <a href="#Include">Include</a></li>
<li><a href="#index-_002fusr_002flocal_002finclude-86"><code>/usr/local/include</code></a>: <a href="#Include">Include</a></li>
<li><a href="#index-_003c-_0040r_007b_0028automatic-variable_0029_007d-925"><code>&lt; </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_003cD-_0040r_007b_0028automatic-variable_0029_007d-954"><code>&lt;D </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_003cF-_0040r_007b_0028automatic-variable_0029_007d-956"><code>&lt;F </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_003f-_0040r_007b_0028automatic-variable_0029_007d-927"><code>? </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_003fD-_0040r_007b_0028automatic-variable_0029_007d-966"><code>?D </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_003fF-_0040r_007b_0028automatic-variable_0029_007d-968"><code>?F </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0040_0040-_0040r_007b_0028automatic-variable_0029_007d-921"><code>@ </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0040_0040D-_0040r_007b_0028automatic-variable_0029_007d-942"><code>@D </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_0040_0040F-_0040r_007b_0028automatic-variable_0029_007d-944"><code>@F </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_005e-_0040r_007b_0028automatic-variable_0029_007d-931"><code>^ </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_005eD-_0040r_007b_0028automatic-variable_0029_007d-958"><code>^D </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-_005eF-_0040r_007b_0028automatic-variable_0029_007d-960"><code>^F </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
<li><a href="#index-abspath-605"><code>abspath</code></a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-addprefix-594"><code>addprefix</code></a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-addsuffix-591"><code>addsuffix</code></a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-and-612"><code>and</code></a>: <a href="#Conditional-Functions">Conditional Functions</a></li>
<li><a href="#index-AR-840"><code>AR</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-ARFLAGS-883"><code>ARFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-AS-842"><code>AS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-ASFLAGS-884"><code>ASFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-basename-588"><code>basename</code></a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-bindir-1010"><code>bindir</code></a>: <a href="#Directory-Variables">Directory Variables</a></li>
<li><a href="#index-call-615"><code>call</code></a>: <a href="#Call-Function">Call Function</a></li>
<li><a href="#index-CC-844"><code>CC</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-CFLAGS-885"><code>CFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-CO-846"><code>CO</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-COFLAGS-887"><code>COFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-COMSPEC-337"><code>COMSPEC</code></a>: <a href="#Choosing-the-Shell">Choosing the Shell</a></li>
<li><a href="#index-CPP-852"><code>CPP</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-CPPFLAGS-888"><code>CPPFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-CTANGLE-879"><code>CTANGLE</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-_0040code_007bCURDIR_007d-379"><code>CURDIR</code></a>: <a href="#Recursion">Recursion</a></li>
<li><a href="#index-CWEAVE-875"><code>CWEAVE</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-CXX-848"><code>CXX</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-CXXFLAGS-886"><code>CXXFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-define-514"><code>define</code></a>: <a href="#Defining">Defining</a></li>
<li><a href="#index-dir-579"><code>dir</code></a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-else-531"><code>else</code></a>: <a href="#Conditional-Syntax">Conditional Syntax</a></li>
<li><a href="#index-endef-515"><code>endef</code></a>: <a href="#Defining">Defining</a></li>
<li><a href="#index-endif-532"><code>endif</code></a>: <a href="#Conditional-Syntax">Conditional Syntax</a></li>
<li><a href="#index-error-635"><code>error</code></a>: <a href="#Make-Control-Functions">Make Control Functions</a></li>
<li><a href="#index-eval-620"><code>eval</code></a>: <a href="#Eval-Function">Eval Function</a></li>
<li><a href="#index-exec_005fprefix-1009"><code>exec_prefix</code></a>: <a href="#Directory-Variables">Directory Variables</a></li>
<li><a href="#index-export-395"><code>export</code></a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-FC-853"><code>FC</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-FFLAGS-889"><code>FFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-filter-554"><code>filter</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-filter_002dout-557"><code>filter-out</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-findstring-550"><code>findstring</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-firstword-573"><code>firstword</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-flavor-626"><code>flavor</code></a>: <a href="#Flavor-Function">Flavor Function</a></li>
<li><a href="#index-foreach-613"><code>foreach</code></a>: <a href="#Foreach-Function">Foreach Function</a></li>
<li><a href="#index-GET-855"><code>GET</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-GFLAGS-890"><code>GFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-GNUmakefile-62"><code>GNUmakefile</code></a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-GPATH-193"><code>GPATH</code></a>: <a href="#Search-Algorithm">Search Algorithm</a></li>
<li><a href="#index-if-610"><code>if</code></a>: <a href="#Conditional-Functions">Conditional Functions</a></li>
<li><a href="#index-ifdef-527"><code>ifdef</code></a>: <a href="#Conditional-Syntax">Conditional Syntax</a></li>
<li><a href="#index-ifeq-528"><code>ifeq</code></a>: <a href="#Conditional-Syntax">Conditional Syntax</a></li>
<li><a href="#index-ifndef-529"><code>ifndef</code></a>: <a href="#Conditional-Syntax">Conditional Syntax</a></li>
<li><a href="#index-ifneq-530"><code>ifneq</code></a>: <a href="#Conditional-Syntax">Conditional Syntax</a></li>
<li><a href="#index-include-74"><code>include</code></a>: <a href="#Include">Include</a></li>
<li><a href="#index-info-641"><code>info</code></a>: <a href="#Make-Control-Functions">Make Control Functions</a></li>
<li><a href="#index-join-597"><code>join</code></a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-lastword-575"><code>lastword</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-LDFLAGS-891"><code>LDFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-LEX-857"><code>LEX</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-LFLAGS-892"><code>LFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-libexecdir-1012"><code>libexecdir</code></a>: <a href="#Directory-Variables">Directory Variables</a></li>
<li><a href="#index-LINT-861"><code>LINT</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-LINTFLAGS-896"><code>LINTFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-M2C-863"><code>M2C</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-MAKE-380"><code>MAKE</code></a>: <a href="#MAKE-Variable">MAKE Variable</a></li>
<li><a href="#index-MAKE-479"><code>MAKE</code></a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-MAKE_005fRESTARTS-_0040r_007b_0028number-of-times-_0040code_007bmake_007d-has-restarted_0029_007d-98"><code>MAKE_RESTARTS </code><span class="roman">(number of times </span><code>make</code><span class="roman"> has restarted)</span></a>: <a href="#Special-Variables">Special Variables</a></li>
<li><a href="#index-MAKE_005fVERSION-1000"><code>MAKE_VERSION</code></a>: <a href="#Features">Features</a></li>
<li><a href="#index-MAKECMDGOALS-648"><code>MAKECMDGOALS</code></a>: <a href="#Goals">Goals</a></li>
<li><a href="#index-Makefile-61"><code>Makefile</code></a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-makefile-63"><code>makefile</code></a>: <a href="#Makefile-Names">Makefile Names</a></li>
<li><a href="#index-MAKEFILE_005fLIST-94"><code>MAKEFILE_LIST</code></a>: <a href="#MAKEFILE_005fLIST-Variable">MAKEFILE_LIST Variable</a></li>
<li><a href="#index-MAKEFILES-401"><code>MAKEFILES</code></a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-MAKEFILES-90"><code>MAKEFILES</code></a>: <a href="#MAKEFILES-Variable">MAKEFILES Variable</a></li>
<li><a href="#index-MAKEFLAGS-404"><code>MAKEFLAGS</code></a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-MAKEINFO-867"><code>MAKEINFO</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-MAKELEVEL-478"><code>MAKELEVEL</code></a>: <a href="#Flavors">Flavors</a></li>
<li><a href="#index-MAKELEVEL-399"><code>MAKELEVEL</code></a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-MAKEOVERRIDES-426"><code>MAKEOVERRIDES</code></a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-_0040code_007bMAKESHELL_007d-_0040r_007b_0028MS_002dDOS-alternative-to-_0040code_007bSHELL_007d_0029_007d-333"><code>MAKESHELL </code><span class="roman">(MS-DOS alternative to </span><code>SHELL</code><span class="roman">)</span></a>: <a href="#Choosing-the-Shell">Choosing the Shell</a></li>
<li><a href="#index-MFLAGS-431"><code>MFLAGS</code></a>: <a href="#Options_002fRecursion">Options/Recursion</a></li>
<li><a href="#index-notdir-582"><code>notdir</code></a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-or-611"><code>or</code></a>: <a href="#Conditional-Functions">Conditional Functions</a></li>
<li><a href="#index-origin-623"><code>origin</code></a>: <a href="#Origin-Function">Origin Function</a></li>
<li><a href="#index-OUTPUT_005fOPTION-838"><code>OUTPUT_OPTION</code></a>: <a href="#Catalogue-of-Rules">Catalogue of Rules</a></li>
<li><a href="#index-override-511"><code>override</code></a>: <a href="#Override-Directive">Override Directive</a></li>
<li><a href="#index-patsubst-493"><code>patsubst</code></a>: <a href="#Substitution-Refs">Substitution Refs</a></li>
<li><a href="#index-patsubst-540"><code>patsubst</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-PC-865"><code>PC</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-PFLAGS-894"><code>PFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-prefix-1008"><code>prefix</code></a>: <a href="#Directory-Variables">Directory Variables</a></li>
<li><a href="#index-realpath-602"><code>realpath</code></a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-RFLAGS-895"><code>RFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-RM-881"><code>RM</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-sbindir-1011"><code>sbindir</code></a>: <a href="#Directory-Variables">Directory Variables</a></li>
<li><a href="#index-shell-629"><code>shell</code></a>: <a href="#Shell-Function">Shell Function</a></li>
<li><a href="#index-SHELL-331"><code>SHELL</code></a>: <a href="#Choosing-the-Shell">Choosing the Shell</a></li>
<li><a href="#index-_0040code_007bSHELL_007d-_0040r_007b_0028command-execution_0029_007d-325"><code>SHELL </code><span class="roman">(command execution)</span></a>: <a href="#Execution">Execution</a></li>
<li><a href="#index-sort-560"><code>sort</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-strip-549"><code>strip</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-subst-539"><code>subst</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-subst-254"><code>subst</code></a>: <a href="#Multiple-Targets">Multiple Targets</a></li>
<li><a href="#index-suffix-585"><code>suffix</code></a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-SUFFIXES-978"><code>SUFFIXES</code></a>: <a href="#Suffix-Rules">Suffix Rules</a></li>
<li><a href="#index-TANGLE-877"><code>TANGLE</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-TEX-869"><code>TEX</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-TEXI2DVI-871"><code>TEXI2DVI</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-unexport-396"><code>unexport</code></a>: <a href="#Variables_002fRecursion">Variables/Recursion</a></li>
<li><a href="#index-value-618"><code>value</code></a>: <a href="#Value-Function">Value Function</a></li>
<li><a href="#index-VPATH-177"><code>VPATH</code></a>: <a href="#Directory-Search">Directory Search</a></li>
<li><a href="#index-VPATH-182"><code>VPATH</code></a>: <a href="#General-Search">General Search</a></li>
<li><a href="#index-vpath-183"><code>vpath</code></a>: <a href="#Selective-Search">Selective Search</a></li>
<li><a href="#index-vpath-178"><code>vpath</code></a>: <a href="#Directory-Search">Directory Search</a></li>
<li><a href="#index-warning-638"><code>warning</code></a>: <a href="#Make-Control-Functions">Make Control Functions</a></li>
<li><a href="#index-WEAVE-873"><code>WEAVE</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-wildcard-176"><code>wildcard</code></a>: <a href="#Wildcard-Function">Wildcard Function</a></li>
<li><a href="#index-wildcard-600"><code>wildcard</code></a>: <a href="#File-Name-Functions">File Name Functions</a></li>
<li><a href="#index-word-565"><code>word</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-wordlist-568"><code>wordlist</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-words-571"><code>words</code></a>: <a href="#Text-Functions">Text Functions</a></li>
<li><a href="#index-YACC-859"><code>YACC</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-YFLAGS-893"><code>YFLAGS</code></a>: <a href="#Implicit-Variables">Implicit Variables</a></li>
<li><a href="#index-_007c-_0040r_007b_0028automatic-variable_0029_007d-937"><code>| </code><span class="roman">(automatic variable)</span></a>: <a href="#Automatic-Variables">Automatic Variables</a></li>
   </ul><div class="footnote">
<hr>
<a name="texinfo-footnotes-in-document"></a><h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> GNU Make compiled for MS-DOS and MS-Windows behaves as if
<var>prefix</var> has been defined to be the root of the DJGPP tree
hierarchy.</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> On
MS-DOS, the value of current working directory is <strong>global</strong>, so
changing it <em>will</em> affect the following command lines on those
systems.</p>

   <p class="footnote"><small>[<a name="fn-3" href="#fnd-3">3</a>]</small> <code>texi2dvi</code> uses TeX to do the real work
of formatting. TeX is not distributed with Texinfo.</p>

   <p><hr></div>

</body></html>

